{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{4497:function(e,t,a){\"use strict\";a(33);var r=a(0),o=a.n(r),n=a(52),s=a(20),l=a(45),c=a(100),i=a(524),d=a(1);Object(n.c)(l.a)`\n  margin: auto ${({theme:e})=>2*e.gridUnit}px auto 0;\n`;const b=n.c.div`\n  display: block;\n  color: ${({theme:e})=>e.colors.grayscale.base};\n  font-size: ${({theme:e})=>e.typography.sizes.s-1}px;\n`,u=n.c.div`\n  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  padding-top: ${({theme:e})=>2*e.gridUnit}px;\n\n  & > div {\n    margin: ${({theme:e})=>e.gridUnit}px 0;\n  }\n\n  &.extra-container {\n    padding-top: 8px;\n  }\n\n  .confirm-overwrite {\n    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  }\n\n  .input-container {\n    display: flex;\n    align-items: center;\n\n    label {\n      display: flex;\n      margin-right: ${({theme:e})=>2*e.gridUnit}px;\n    }\n\n    i {\n      margin: 0 ${({theme:e})=>e.gridUnit}px;\n    }\n  }\n\n  input,\n  textarea {\n    flex: 1 1 auto;\n  }\n\n  textarea {\n    height: 160px;\n    resize: none;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    color: ${({theme:e})=>e.colors.grayscale.light1};\n  }\n\n  textarea,\n  input[type='text'],\n  input[type='number'] {\n    padding: ${({theme:e})=>1.5*e.gridUnit}px\n      ${({theme:e})=>2*e.gridUnit}px;\n    border-style: none;\n    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};\n    border-radius: ${({theme:e})=>e.gridUnit}px;\n\n    &[name='name'] {\n      flex: 0 1 auto;\n      width: 40%;\n    }\n\n    &[name='sqlalchemy_uri'] {\n      margin-right: ${({theme:e})=>3*e.gridUnit}px;\n    }\n  }\n`;t.a=({resourceName:e,resourceLabel:t,passwordsNeededMessage:a,confirmOverwriteMessage:n,addDangerToast:l,addSuccessToast:h,onModelImport:O,show:m,onHide:p,passwordFields:j=[],setPasswordFields:f=(()=>{})})=>{const[g,w]=Object(r.useState)(!0),[y,v]=Object(r.useState)(null),[S,x]=Object(r.useState)({}),[_,C]=Object(r.useState)(!1),[E,N]=Object(r.useState)(!1),k=Object(r.useRef)(null),T=()=>{v(null),f([]),x({}),C(!1),N(!1),k&&k.current&&(k.current.value=\"\")},{state:{alreadyExists:F,passwordsNeeded:D},importResource:H}=Object(i.d)(e,t,e=>{T(),l(e)});Object(r.useEffect)(()=>{f(D)},[D,f]),Object(r.useEffect)(()=>{C(F.length>0)},[F,C]);const I=e=>{var t,a;const r=null!=(t=null==(a=e.currentTarget)?void 0:a.value)?t:\"\";N(r.toUpperCase()===Object(s.e)(\"OVERWRITE\"))};return g&&m&&w(!1),Object(d.f)(c.b,{name:\"model\",className:\"import-model-modal\",disablePrimaryButton:null===y||_&&!E,onHandledPrimaryAction:()=>{null!==y&&H(y,S,E).then(e=>{e&&(h(Object(s.e)(\"The import was successful\")),T(),O())})},onHide:()=>{w(!0),p(),T()},primaryButtonName:_?Object(s.e)(\"Overwrite\"):Object(s.e)(\"Import\"),primaryButtonType:_?\"danger\":\"primary\",width:\"750px\",show:m,title:Object(d.f)(\"h4\",null,Object(s.e)(\"Import %s\",t))},Object(d.f)(u,null,Object(d.f)(\"div\",{className:\"control-label\"},Object(d.f)(\"label\",{htmlFor:\"modelFile\"},Object(s.e)(\"File\"),Object(d.f)(\"span\",{className:\"required\"},\"*\"))),Object(d.f)(\"input\",{ref:k,name:\"modelFile\",id:\"modelFile\",type:\"file\",accept:\".yaml,.json,.yml,.zip\",onChange:e=>{const{files:t}=e.target;v(t&&t[0]||null)}})),0===j.length?null:Object(d.f)(o.a.Fragment,null,Object(d.f)(\"h5\",null,\"Database passwords\"),Object(d.f)(b,null,a),j.map(e=>Object(d.f)(u,{key:\"password-for-\"+e},Object(d.f)(\"div\",{className:\"control-label\"},e,Object(d.f)(\"span\",{className:\"required\"},\"*\")),Object(d.f)(\"input\",{name:\"password-\"+e,autoComplete:\"password-\"+e,type:\"password\",value:S[e],onChange:t=>x({...S,[e]:t.target.value})})))),_?Object(d.f)(o.a.Fragment,null,Object(d.f)(u,null,Object(d.f)(\"div\",{className:\"confirm-overwrite\"},n),Object(d.f)(\"div\",{className:\"control-label\"},Object(s.e)('Type \"%s\" to confirm',Object(s.e)(\"OVERWRITE\"))),Object(d.f)(\"input\",{id:\"overwrite\",type:\"text\",onChange:I}))):null)}},4843:function(e,t,a){},4902:function(e,t,a){\"use strict\";a.r(t);a(33);var r=a(20),o=a(52),n=a(67),s=a(0),l=a.n(s),c=a(95),i=a.n(c),d=a(39),b=a(138),u=a(524),h=a(1486),O=a(977),m=a(4477),p=a(122),j=a(1490),f=a(932),g=a(908),w=a(1443),y=a(51),v=a(4497),S=a(2258),x=(a(4843),a(1));const _=Object(r.e)('The passwords for the databases below are needed in order to import them together with the dashboards. Please note that the \"Secure Extra\" and \"Certificate\" sections of the database configuration are not present in export files, and should be added manually after the import if they are needed.'),C=Object(r.e)(\"You are importing one or more dashboards that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?\"),E=o.c.div`\n  color: ${({theme:e})=>e.colors.grayscale.base};\n`;function N(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}t.default=Object(p.a)((function(e){const{addDangerToast:t,addSuccessToast:a}=e,{state:{loading:o,resourceCount:c,resourceCollection:p,bulkSelectEnabled:k},setResourceCollection:T,hasPerm:F,fetchData:D,toggleBulkSelect:H,refreshData:I}=Object(u.e)(\"dashboard\",Object(r.e)(\"dashboard\"),t),z=Object(s.useMemo)(()=>p.map(e=>e.id),[p]),[$,A]=Object(u.c)(\"dashboard\",z,t),[M,U]=Object(s.useState)(null),[P,L]=Object(s.useState)(!1),[R,B]=Object(s.useState)([]),[V,q]=Object(s.useState)(N());Object(s.useEffect)(()=>{function e(){q(N())}return window.addEventListener(\"resize\",e),()=>window.removeEventListener(\"resize\",e)},[]);const W=()=>{L(!0)},J=F(\"can_write\"),Y=F(\"can_write\"),X=F(\"can_write\"),G=F(\"can_read\"),K=[{id:\"changed_on_delta_humanized\",desc:!0}];function Q(e){U(e)}function Z(e){return n.a.get({endpoint:\"/api/v1/dashboard/\"+e.id}).then(({json:e={}})=>{T(p.map(t=>t.id===e.id?e.result:t))},Object(b.c)(e=>t(Object(r.e)(\"An error occurred while fetching dashboards: %s\",e))))}const ee=Object(s.useMemo)(()=>[{Cell:({row:{original:{id:e}}})=>Object(x.f)(g.a,{itemId:e,saveFaveStar:$,isStarred:A[e]}),Header:\"\",id:\"id\",disableSortBy:!0,size:\"xs\"},{Cell:({row:{original:{url:e,dashboard_title:t}}})=>Object(x.f)(\"a\",{href:e},t),Header:Object(r.e)(\"Title\"),accessor:\"dashboard_title\"},{Cell:({row:{original:{changed_by_name:e,changed_by_url:t}}})=>Object(x.f)(\"a\",{href:t},e),Header:Object(r.e)(\"Modified by\"),accessor:\"changed_by.first_name\",size:\"xl\"},{Cell:({row:{original:{published:e}}})=>e?Object(r.e)(\"Published\"):Object(r.e)(\"Draft\"),Header:Object(r.e)(\"Status\"),accessor:\"published\",size:\"xl\"},{Cell:({row:{original:{changed_on_delta_humanized:e}}})=>Object(x.f)(\"span\",{className:\"no-wrap\"},e),Header:Object(r.e)(\"Modified\"),accessor:\"changed_on_delta_humanized\",size:\"xl\"},{Cell:({row:{original:{created_by:e}}})=>e?`${e.first_name} ${e.last_name}`:\"\",Header:Object(r.e)(\"Created by\"),accessor:\"created_by\",disableSortBy:!0,size:\"xl\"},{Cell:({row:{original:{owners:e=[]}}})=>Object(x.f)(j.a,{users:e}),Header:Object(r.e)(\"Owners\"),accessor:\"owners\",disableSortBy:!0,size:\"xl\"},{Cell:({row:{original:e}})=>Object(x.f)(E,{className:\"actions\"},X&&Object(x.f)(h.a,{title:Object(r.e)(\"Please confirm\"),description:Object(x.f)(l.a.Fragment,null,Object(r.e)(\"Are you sure you want to delete\"),\" \",Object(x.f)(\"b\",null,e.dashboard_title),\"?\"),onConfirm:()=>Object(b.j)(e,I,a,t)},e=>Object(x.f)(y.a,{id:\"delete-action-tooltip\",title:Object(r.e)(\"Delete\"),placement:\"bottom\"},Object(x.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e},Object(x.f)(f.a.Trash,null)))),G&&Object(x.f)(y.a,{id:\"export-action-tooltip\",title:Object(r.e)(\"Export\"),placement:\"bottom\"},Object(x.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:()=>Object(b.h)([e])},Object(x.f)(f.a.Share,null))),Y&&Object(x.f)(y.a,{id:\"edit-action-tooltip\",title:Object(r.e)(\"Edit\"),placement:\"bottom\"},Object(x.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:()=>Q(e)},Object(x.f)(f.a.EditAlt,null)))),Header:Object(r.e)(\"Actions\"),id:\"actions\",hidden:!Y&&!X&&!G,disableSortBy:!0}],[Y,X,G,A]),te=[{Header:Object(r.e)(\"Owner\"),id:\"owners\",input:\"select\",operator:m.a.relationManyMany,unfilteredLabel:Object(r.e)(\"All\"),fetchSelects:Object(b.e)(\"dashboard\",\"owners\",Object(b.c)(e=>t(Object(r.e)(\"An error occurred while fetching dashboard owner values: %s\",e))),e.user.userId),paginate:!0},{Header:Object(r.e)(\"Created by\"),id:\"created_by\",input:\"select\",operator:m.a.relationOneMany,unfilteredLabel:Object(r.e)(\"All\"),fetchSelects:Object(b.e)(\"dashboard\",\"created_by\",Object(b.c)(e=>t(Object(r.e)(\"An error occurred while fetching dashboard created by values: %s\",e))),e.user.userId),paginate:!0},{Header:Object(r.e)(\"Status\"),id:\"published\",input:\"select\",operator:m.a.equals,unfilteredLabel:Object(r.e)(\"Any\"),selects:[{label:Object(r.e)(\"Published\"),value:!0},{label:Object(r.e)(\"Unpublished\"),value:!1}]},{Header:Object(r.e)(\"Favorite\"),id:\"id\",urlDisplay:\"favorite\",input:\"select\",operator:m.a.dashboardIsFav,unfilteredLabel:Object(r.e)(\"Any\"),selects:[{label:Object(r.e)(\"Yes\"),value:!0},{label:Object(r.e)(\"No\"),value:!1}]},{Header:Object(r.e)(\"Search\"),id:\"dashboard_title\",input:\"search\",operator:m.a.titleOrSlug}],ae=[{desc:!1,id:\"dashboard_title\",label:Object(r.e)(\"Alphabetical\"),value:\"alphabetical\"},{desc:!0,id:\"changed_on_delta_humanized\",label:Object(r.e)(\"Recently modified\"),value:\"recently_modified\"},{desc:!1,id:\"changed_on_delta_humanized\",label:Object(r.e)(\"Least recently modified\"),value:\"least_recently_modified\"}];function re(e){return Object(x.f)(S.a,{dashboard:e,hasPerm:F,bulkSelectEnabled:k,refreshData:I,loading:o,addDangerToast:t,addSuccessToast:a,openDashboardEditModal:Q,saveFavoriteStatus:$,favoriteStatus:A[e.id]})}const oe=[];(X||G)&&oe.push({name:Object(r.e)(\"Bulk select\"),buttonStyle:\"secondary\",\"data-test\":\"bulk-select\",onClick:H}),J&&oe.push({name:Object(x.f)(l.a.Fragment,null,Object(x.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(r.e)(\"Dashboard\")),buttonStyle:\"primary\",onClick:()=>{window.location.assign(\"/dashboard/new\")}}),Object(d.c)(d.a.VERSIONED_EXPORT)&&oe.push({name:Object(x.f)(f.a.Import,null),buttonStyle:\"link\",onClick:W});var ne=Object(d.c)(d.a.LISTVIEWS_DEFAULT_CARD_VIEW);return(null==V?void 0:V.width)<600&&(ne=!1),Object(x.f)(l.a.Fragment,null,Object(x.f)(\"div\",{className:\"hidden-sm\"},Object(x.f)(O.a,{name:Object(r.e)(\"Dashboards\"),buttons:oe})),Object(x.f)(h.a,{title:Object(r.e)(\"Please confirm\"),description:Object(r.e)(\"Are you sure you want to delete the selected dashboards?\"),onConfirm:function(e){return n.a.delete({endpoint:\"/api/v1/dashboard/?q=\"+i.a.encode(e.map(({id:e})=>e))}).then(({json:e={}})=>{I(),a(e.message)},Object(b.c)(e=>t(Object(r.e)(\"There was an issue deleting the selected dashboards: \",e))))}},e=>{const t=[];return X&&t.push({key:\"delete\",name:Object(r.e)(\"Delete\"),type:\"danger\",onSelect:e}),G&&t.push({key:\"export\",name:Object(r.e)(\"Export\"),type:\"primary\",onSelect:b.h}),Object(x.f)(l.a.Fragment,null,M&&Object(x.f)(w.a,{dashboardId:M.id,show:!0,onHide:()=>U(null),onSubmit:Z}),Object(x.f)(m.b,{bulkActions:t,bulkSelectEnabled:k,cardSortSelectOptions:ae,className:\"dashboard-list-view\",columns:ee,count:c,data:p,disableBulkSelect:H,fetchData:D,filters:te,initialSort:K,loading:o,pageSize:25,renderCard:re,defaultViewMode:ne?\"card\":\"table\"}))}),Object(x.f)(\"div\",{className:\"hidden-sm\"},Object(x.f)(v.a,{resourceName:\"dashboard\",resourceLabel:Object(r.e)(\"dashboard\"),passwordsNeededMessage:_,confirmOverwriteMessage:C,addDangerToast:t,addSuccessToast:a,onModelImport:()=>{L(!1),I()},show:P,onHide:()=>{L(!1)},passwordFields:R,setPasswordFields:B})))}))}}]);","extractedComments":[]}