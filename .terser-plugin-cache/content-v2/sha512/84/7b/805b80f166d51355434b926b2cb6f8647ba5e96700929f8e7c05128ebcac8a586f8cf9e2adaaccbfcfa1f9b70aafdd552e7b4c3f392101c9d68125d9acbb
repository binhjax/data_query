{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{4686:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return s}));n(0);var a=n(41),o=n(45),c=n(1101),l=n(1);const i=a.c.span`\n  white-space: nowrap;\n  min-width: 100px;\n  svg,\n  i {\n    margin-right: 8px;\n\n    &:hover {\n      path {\n        fill: ${({theme:e})=>e.colors.primary.base};\n      }\n    }\n  }\n`,r=a.c.span`\n  color: ${({theme:e})=>e.colors.grayscale.base};\n`;function s({actions:e}){return Object(l.e)(i,{className:\"actions\"},e.map((e,t)=>{const n=c.a[e.icon];return e.tooltip?Object(l.e)(o.a,{id:e.label+\"-tooltip\",title:e.tooltip,placement:e.placement,key:t},Object(l.e)(r,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e.onClick},Object(l.e)(n,null))):Object(l.e)(r,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e.onClick,key:t},Object(l.e)(n,null))}))}},5121:function(e,t,n){\"use strict\";n.r(t);n(31);var a=n(0),o=n.n(a),c=n(202),l=n(815),i=n(13),r=n(62),s=n(41),d=n(34),b=n.n(d),u=n(92),m=n.n(u),j=n(4686),O=n(38),h=n(1792),p=n(1793),g=n(4679),_=n(1349),f=n(66),y=n(114),w=n(574),x=n(157),v=n(4883),k=n(42),S=n(95),$=n(191),C=n(1);const D=s.c.div`\n  margin: ${({theme:e})=>2*e.gridUnit}px auto\n    ${({theme:e})=>4*e.gridUnit}px auto;\n`,A=Object(s.c)($.d)`\n  border-radius: ${({theme:e})=>e.borderRadius}px;\n  border: 1px solid ${({theme:e})=>e.colors.secondary.light2};\n`,H=Object(s.c)(k.a)`\n  margin: auto ${({theme:e})=>2*e.gridUnit}px auto 0;\n`,N=s.c.div`\n  margin-bottom: ${({theme:e})=>5*e.gridUnit}px;\n\n  .control-label {\n    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  }\n\n  .required {\n    margin-left: ${({theme:e})=>e.gridUnit/2}px;\n    color: ${({theme:e})=>e.colors.error.base};\n  }\n\n  textarea {\n    flex: 1 1 auto;\n    height: ${({theme:e})=>17*e.gridUnit}px;\n    resize: none;\n    width: 100%;\n  }\n\n  textarea,\n  input[type='text'] {\n    padding: ${({theme:e})=>1.5*e.gridUnit}px\n      ${({theme:e})=>2*e.gridUnit}px;\n    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};\n    border-radius: ${({theme:e})=>e.gridUnit}px;\n  }\n\n  input[type='text'] {\n    width: 65%;\n  }\n`;var Y=Object(y.a)(({addDangerToast:e,annnotationLayerId:t,annotation:n=null,onAnnotationAdd:o,onHide:c,show:l})=>{const[r,s]=Object(a.useState)(!0),[d,u]=Object(a.useState)(null),[m,j]=Object(a.useState)(!0),O=null!==n,{state:{loading:h,resource:p},fetchResource:g,createResource:_,updateResource:f}=Object(w.f)(`annotation_layer/${t}/annotation`,Object(i.e)(\"annotation\"),e),y=()=>{u({short_descr:\"\",start_dttm:\"\",end_dttm:\"\",json_metadata:\"\",long_descr:\"\"})},x=()=>{j(!0),y(),c()},k=e=>{const{target:t}=e,n={...d,end_dttm:d?d.end_dttm:\"\",short_descr:d?d.short_descr:\"\",start_dttm:d?d.start_dttm:\"\"};n[t.name]=t.value,u(n)};return Object(a.useEffect)(()=>{if(O&&(!d||!d.id||n&&n.id!==d.id||m&&l)){if(n&&null!==n.id&&!h){const e=n.id||0;g(e)}}else!O&&(!d||d.id||m&&l)&&y()},[n]),Object(a.useEffect)(()=>{p&&u(p)},[p]),Object(a.useEffect)(()=>{d&&d.short_descr.length&&d.start_dttm.length&&d.end_dttm.length?s(!1):s(!0)},[d?d.short_descr:\"\",d?d.start_dttm:\"\",d?d.end_dttm:\"\"]),m&&l&&j(!1),Object(C.e)(S.b,{disablePrimaryButton:r,onHandledPrimaryAction:()=>{if(O){if(d&&d.id){const e=d.id;delete d.id,delete d.created_by,delete d.changed_by,delete d.changed_on_delta_humanized,delete d.layer,f(e,d).then(e=>{e&&(o&&o(),x())})}}else d&&_(d).then(e=>{e&&(o&&o(),x())})},onHide:x,primaryButtonName:O?Object(i.e)(\"Save\"):Object(i.e)(\"Add\"),show:l,width:\"55%\",title:Object(C.e)(\"h4\",null,O?Object(C.e)(H,{name:\"edit-alt\"}):Object(C.e)(H,{name:\"plus-large\"}),O?Object(i.e)(\"Edit annotation\"):Object(i.e)(\"Add annotation\"))},Object(C.e)(D,null,Object(C.e)(\"h4\",null,Object(i.e)(\"Basic information\"))),Object(C.e)(N,null,Object(C.e)(\"div\",{className:\"control-label\"},Object(i.e)(\"Annotation name\"),Object(C.e)(\"span\",{className:\"required\"},\"*\")),Object(C.e)(\"input\",{name:\"short_descr\",onChange:k,type:\"text\",value:null==d?void 0:d.short_descr})),Object(C.e)(N,null,Object(C.e)(\"div\",{className:\"control-label\"},Object(i.e)(\"date\"),Object(C.e)(\"span\",{className:\"required\"},\"*\")),Object(C.e)(v.a,{format:\"YYYY-MM-DD hh:mm a\",onChange:(e,t)=>{const n={...d,end_dttm:d&&t[1].length?b()(t[1]).format(\"YYYY-MM-DD HH:mm\"):\"\",short_descr:d?d.short_descr:\"\",start_dttm:d&&t[0].length?b()(t[0]).format(\"YYYY-MM-DD HH:mm\"):\"\"};u(n)},showTime:{format:\"hh:mm a\"},use12Hours:!0,value:d&&(null!=d&&d.start_dttm.length||null!=d&&d.end_dttm.length)?[b()(d.start_dttm),b()(d.end_dttm)]:null})),Object(C.e)(D,null,Object(C.e)(\"h4\",null,Object(i.e)(\"Additional information\"))),Object(C.e)(N,null,Object(C.e)(\"div\",{className:\"control-label\"},Object(i.e)(\"description\")),Object(C.e)(\"textarea\",{name:\"long_descr\",value:d?d.long_descr:\"\",placeholder:Object(i.e)(\"Description (this can be seen in the list)\"),onChange:k})),Object(C.e)(N,null,Object(C.e)(\"div\",{className:\"control-label\"},Object(i.e)(\"JSON metadata\")),Object(C.e)(A,{onChange:e=>{const t={...d,end_dttm:d?d.end_dttm:\"\",json_metadata:e,short_descr:d?d.short_descr:\"\",start_dttm:d?d.start_dttm:\"\"};u(t)},value:d&&d.json_metadata?d.json_metadata:\"\",width:\"100%\",height:\"120px\"})))});t.default=Object(y.a)((function({addDangerToast:e,addSuccessToast:t}){const{annotationLayerId:n}=Object(c.g)(),{state:{loading:d,resourceCount:u,resourceCollection:y,bulkSelectEnabled:v},fetchData:k,refreshData:S,toggleBulkSelect:$}=Object(w.e)(`annotation_layer/${n}/annotation`,Object(i.e)(\"annotation\"),e,!1),[D,A]=Object(a.useState)(!1),[H,N]=Object(a.useState)(\"\"),[E,U]=Object(a.useState)(null),[B,T]=Object(a.useState)(null),M=e=>{U(e),A(!0)},L=Object(a.useCallback)((async function(){try{const e=await r.a.get({endpoint:\"/api/v1/annotation_layer/\"+n});N(e.json.result.name)}catch(t){await Object(f.a)(t).then(({error:t})=>{e(t.error||t.statusText||t)})}}),[n]);Object(a.useEffect)(()=>{L()},[L]);const I=[{id:\"short_descr\",desc:!0}],q=Object(a.useMemo)(()=>[{accessor:\"short_descr\",Header:Object(i.e)(\"Label\")},{accessor:\"long_descr\",Header:Object(i.e)(\"Description\")},{Cell:({row:{original:{start_dttm:e}}})=>b()(new Date(e)).format(\"ll\"),Header:Object(i.e)(\"Start\"),accessor:\"start_dttm\"},{Cell:({row:{original:{end_dttm:e}}})=>b()(new Date(e)).format(\"ll\"),Header:Object(i.e)(\"End\"),accessor:\"end_dttm\"},{Cell:({row:{original:e}})=>{const t=[{label:\"edit-action\",tooltip:Object(i.e)(\"Edit annotation\"),placement:\"bottom\",icon:\"Edit\",onClick:()=>M(e)},{label:\"delete-action\",tooltip:Object(i.e)(\"Delete annotation\"),placement:\"bottom\",icon:\"Trash\",onClick:()=>T(e)}];return Object(C.e)(j.a,{actions:t})},Header:Object(i.e)(\"Actions\"),id:\"actions\",disableSortBy:!0}],[!0,!0]),z=[];z.push({name:Object(C.e)(o.a.Fragment,null,Object(C.e)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(i.e)(\"Annotation\")),buttonStyle:\"primary\",onClick:()=>{M(null)}}),z.push({name:Object(i.e)(\"Bulk select\"),onClick:$,buttonStyle:\"secondary\",\"data-test\":\"annotation-bulk-select\"});const R=s.c.div`\n    display: flex;\n    flex-direction: row;\n\n    a,\n    Link {\n      margin-left: 16px;\n      font-size: 12px;\n      font-weight: normal;\n      text-decoration: underline;\n    }\n  `;let F=!0;try{Object(c.f)()}catch(e){F=!1}const J=Object(C.e)(O.a,{buttonStyle:\"primary\",onClick:()=>{M(null)}},Object(C.e)(o.a.Fragment,null,Object(C.e)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(i.e)(\"Annotation\"))),P={message:Object(i.e)(\"No annotation yet\"),slot:J};return Object(C.e)(o.a.Fragment,null,Object(C.e)(_.a,{name:Object(C.e)(R,null,Object(C.e)(\"span\",null,Object(i.e)(\"Annotation Layer \"+H)),Object(C.e)(\"span\",null,F?Object(C.e)(l.b,{to:\"/annotationlayermodelview/list/\"},\"Back to all\"):Object(C.e)(\"a\",{href:\"/annotationlayermodelview/list/\"},\"Back to all\"))),buttons:z}),Object(C.e)(Y,{addDangerToast:e,annotation:E,show:D,onAnnotationAdd:()=>S(),annnotationLayerId:n,onHide:()=>A(!1)}),B&&Object(C.e)(p.a,{description:Object(i.e)(`Are you sure you want to delete ${null==B?void 0:B.short_descr}?`),onConfirm:()=>{B&&(({id:a,short_descr:o})=>{r.a.delete({endpoint:`/api/v1/annotation_layer/${n}/annotation/${a}`}).then(()=>{S(),T(null),t(Object(i.e)(\"Deleted: %s\",o))},Object(x.c)(t=>e(Object(i.e)(\"There was an issue deleting %s: %s\",o,t))))})(B)},onHide:()=>T(null),open:!0,title:Object(i.e)(\"Delete Annotation?\")}),Object(C.e)(h.a,{title:Object(i.e)(\"Please confirm\"),description:Object(i.e)(\"Are you sure you want to delete the selected annotations?\"),onConfirm:a=>{r.a.delete({endpoint:`/api/v1/annotation_layer/${n}/annotation/?q=${m.a.encode(a.map(({id:e})=>e))}`}).then(({json:e={}})=>{S(),t(e.message)},Object(x.c)(t=>e(Object(i.e)(\"There was an issue deleting the selected annotations: %s\",t))))}},e=>{const t=[{key:\"delete\",name:Object(i.e)(\"Delete\"),onSelect:e,type:\"danger\"}];return Object(C.e)(g.b,{className:\"annotations-list-view\",bulkActions:t,bulkSelectEnabled:v,columns:q,count:u,data:y,disableBulkSelect:$,emptyState:P,fetchData:k,initialSort:I,loading:d,pageSize:25})}))}))}}]);","extractedComments":[]}