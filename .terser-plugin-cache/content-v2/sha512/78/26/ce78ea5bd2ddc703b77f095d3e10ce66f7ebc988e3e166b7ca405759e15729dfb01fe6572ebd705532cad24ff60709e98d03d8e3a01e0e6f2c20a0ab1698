{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{4643:function(e,t,a){\"use strict\";a(34);var r=a(0),o=a.n(r),l=a(53),s=a(20),c=a(46),n=a(100),i=a(530),d=a(1);Object(l.c)(c.a)`\n  margin: auto ${({theme:e})=>2*e.gridUnit}px auto 0;\n`;const b=l.c.div`\n  display: block;\n  color: ${({theme:e})=>e.colors.grayscale.base};\n  font-size: ${({theme:e})=>e.typography.sizes.s-1}px;\n`,u=l.c.div`\n  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  padding-top: ${({theme:e})=>2*e.gridUnit}px;\n\n  & > div {\n    margin: ${({theme:e})=>e.gridUnit}px 0;\n  }\n\n  &.extra-container {\n    padding-top: 8px;\n  }\n\n  .confirm-overwrite {\n    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  }\n\n  .input-container {\n    display: flex;\n    align-items: center;\n\n    label {\n      display: flex;\n      margin-right: ${({theme:e})=>2*e.gridUnit}px;\n    }\n\n    i {\n      margin: 0 ${({theme:e})=>e.gridUnit}px;\n    }\n  }\n\n  input,\n  textarea {\n    flex: 1 1 auto;\n  }\n\n  textarea {\n    height: 160px;\n    resize: none;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    color: ${({theme:e})=>e.colors.grayscale.light1};\n  }\n\n  textarea,\n  input[type='text'],\n  input[type='number'] {\n    padding: ${({theme:e})=>1.5*e.gridUnit}px\n      ${({theme:e})=>2*e.gridUnit}px;\n    border-style: none;\n    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};\n    border-radius: ${({theme:e})=>e.gridUnit}px;\n\n    &[name='name'] {\n      flex: 0 1 auto;\n      width: 40%;\n    }\n\n    &[name='sqlalchemy_uri'] {\n      margin-right: ${({theme:e})=>3*e.gridUnit}px;\n    }\n  }\n`;t.a=({resourceName:e,resourceLabel:t,passwordsNeededMessage:a,confirmOverwriteMessage:l,addDangerToast:c,addSuccessToast:O,onModelImport:h,show:p,onHide:m,passwordFields:j=[],setPasswordFields:f=(()=>{})})=>{const[g,y]=Object(r.useState)(!0),[w,S]=Object(r.useState)(null),[v,x]=Object(r.useState)({}),[_,C]=Object(r.useState)(!1),[k,E]=Object(r.useState)(!1),N=Object(r.useRef)(null),T=()=>{S(null),f([]),x({}),C(!1),E(!1),N&&N.current&&(N.current.value=\"\")},{state:{alreadyExists:F,passwordsNeeded:D},importResource:I}=Object(i.d)(e,t,e=>{T(),c(e)});Object(r.useEffect)(()=>{f(D)},[D,f]),Object(r.useEffect)(()=>{C(F.length>0)},[F,C]);const H=e=>{var t,a;const r=null!=(t=null==(a=e.currentTarget)?void 0:a.value)?t:\"\";E(r.toUpperCase()===Object(s.e)(\"OVERWRITE\"))};return g&&p&&y(!1),Object(d.f)(n.b,{name:\"model\",className:\"import-model-modal\",disablePrimaryButton:null===w||_&&!k,onHandledPrimaryAction:()=>{null!==w&&I(w,v,k).then(e=>{e&&(O(Object(s.e)(\"The import was successful\")),T(),h())})},onHide:()=>{y(!0),m(),T()},primaryButtonName:_?Object(s.e)(\"Overwrite\"):Object(s.e)(\"Import\"),primaryButtonType:_?\"danger\":\"primary\",width:\"750px\",show:p,title:Object(d.f)(\"h4\",null,Object(s.e)(\"Import %s\",t))},Object(d.f)(u,null,Object(d.f)(\"div\",{className:\"control-label\"},Object(d.f)(\"label\",{htmlFor:\"modelFile\"},Object(s.e)(\"File\"),Object(d.f)(\"span\",{className:\"required\"},\"*\"))),Object(d.f)(\"input\",{ref:N,name:\"modelFile\",id:\"modelFile\",type:\"file\",accept:\".yaml,.json,.yml,.zip\",onChange:e=>{const{files:t}=e.target;S(t&&t[0]||null)}})),0===j.length?null:Object(d.f)(o.a.Fragment,null,Object(d.f)(\"h5\",null,\"Database passwords\"),Object(d.f)(b,null,a),j.map(e=>Object(d.f)(u,{key:\"password-for-\"+e},Object(d.f)(\"div\",{className:\"control-label\"},e,Object(d.f)(\"span\",{className:\"required\"},\"*\")),Object(d.f)(\"input\",{name:\"password-\"+e,autoComplete:\"password-\"+e,type:\"password\",value:v[e],onChange:t=>x({...v,[e]:t.target.value})})))),_?Object(d.f)(o.a.Fragment,null,Object(d.f)(u,null,Object(d.f)(\"div\",{className:\"confirm-overwrite\"},l),Object(d.f)(\"div\",{className:\"control-label\"},Object(s.e)('Type \"%s\" to confirm',Object(s.e)(\"OVERWRITE\"))),Object(d.f)(\"input\",{id:\"overwrite\",type:\"text\",onChange:H}))):null)}},5047:function(e,t,a){\"use strict\";a.r(t);a(34);var r=a(20),o=a(53),l=a(67),s=a(0),c=a.n(s),n=a(94),i=a.n(n),d=a(40),b=a(136),u=a(530),O=a(1505),h=a(984),p=a(4623),m=a(119),j=a(1509),f=a(932),g=a(907),y=a(1466),w=a(52),S=a(4643),v=a(2374),x=a(1);const _=Object(r.e)('The passwords for the databases below are needed in order to import them together with the dashboards. Please note that the \"Secure Extra\" and \"Certificate\" sections of the database configuration are not present in export files, and should be added manually after the import if they are needed.'),C=Object(r.e)(\"You are importing one or more dashboards that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?\"),k=o.c.div`\n  color: ${({theme:e})=>e.colors.grayscale.base};\n`;t.default=Object(m.a)((function(e){const{addDangerToast:t,addSuccessToast:a}=e,{state:{loading:o,resourceCount:n,resourceCollection:m,bulkSelectEnabled:E},setResourceCollection:N,hasPerm:T,fetchData:F,toggleBulkSelect:D,refreshData:I}=Object(u.e)(\"dashboard\",Object(r.e)(\"dashboard\"),t),H=Object(s.useMemo)(()=>m.map(e=>e.id),[m]),[$,A]=Object(u.c)(\"dashboard\",H,t),[z,M]=Object(s.useState)(null),[U,P]=Object(s.useState)(!1),[R,B]=Object(s.useState)([]),L=()=>{P(!0)},V=T(\"can_write\"),q=T(\"can_write\"),W=T(\"can_write\"),J=T(\"can_read\"),Y=[{id:\"changed_on_delta_humanized\",desc:!0}];function X(e){M(e)}function G(e){return l.a.get({endpoint:\"/api/v1/dashboard/\"+e.id}).then(({json:e={}})=>{N(m.map(t=>t.id===e.id?e.result:t))},Object(b.c)(e=>t(Object(r.e)(\"An error occurred while fetching dashboards: %s\",e))))}const K=Object(s.useMemo)(()=>[{Cell:({row:{original:{id:e}}})=>Object(x.f)(g.a,{itemId:e,saveFaveStar:$,isStarred:A[e]}),Header:\"\",id:\"id\",disableSortBy:!0,size:\"xs\"},{Cell:({row:{original:{url:e,dashboard_title:t}}})=>Object(x.f)(\"a\",{href:e},t),Header:Object(r.e)(\"Title\"),accessor:\"dashboard_title\"},{Cell:({row:{original:{changed_by_name:e,changed_by_url:t}}})=>Object(x.f)(\"a\",{href:t},e),Header:Object(r.e)(\"Modified by\"),accessor:\"changed_by.first_name\",size:\"xl\"},{Cell:({row:{original:{published:e}}})=>e?Object(r.e)(\"Published\"):Object(r.e)(\"Draft\"),Header:Object(r.e)(\"Status\"),accessor:\"published\",size:\"xl\"},{Cell:({row:{original:{changed_on_delta_humanized:e}}})=>Object(x.f)(\"span\",{className:\"no-wrap\"},e),Header:Object(r.e)(\"Modified\"),accessor:\"changed_on_delta_humanized\",size:\"xl\"},{Cell:({row:{original:{created_by:e}}})=>e?`${e.first_name} ${e.last_name}`:\"\",Header:Object(r.e)(\"Created by\"),accessor:\"created_by\",disableSortBy:!0,size:\"xl\"},{Cell:({row:{original:{owners:e=[]}}})=>Object(x.f)(j.a,{users:e}),Header:Object(r.e)(\"Owners\"),accessor:\"owners\",disableSortBy:!0,size:\"xl\"},{Cell:({row:{original:e}})=>Object(x.f)(k,{className:\"actions\"},W&&Object(x.f)(O.a,{title:Object(r.e)(\"Please confirm\"),description:Object(x.f)(c.a.Fragment,null,Object(r.e)(\"Are you sure you want to delete\"),\" \",Object(x.f)(\"b\",null,e.dashboard_title),\"?\"),onConfirm:()=>Object(b.j)(e,I,a,t)},e=>Object(x.f)(w.a,{id:\"delete-action-tooltip\",title:Object(r.e)(\"Delete\"),placement:\"bottom\"},Object(x.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e},Object(x.f)(f.a.Trash,null)))),J&&Object(x.f)(w.a,{id:\"export-action-tooltip\",title:Object(r.e)(\"Export\"),placement:\"bottom\"},Object(x.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:()=>Object(b.h)([e])},Object(x.f)(f.a.Share,null))),q&&Object(x.f)(w.a,{id:\"edit-action-tooltip\",title:Object(r.e)(\"Edit\"),placement:\"bottom\"},Object(x.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:()=>X(e)},Object(x.f)(f.a.EditAlt,null)))),Header:Object(r.e)(\"Actions\"),id:\"actions\",hidden:!q&&!W&&!J,disableSortBy:!0}],[q,W,J,A]),Q=[{Header:Object(r.e)(\"Owner\"),id:\"owners\",input:\"select\",operator:p.a.relationManyMany,unfilteredLabel:Object(r.e)(\"All\"),fetchSelects:Object(b.e)(\"dashboard\",\"owners\",Object(b.c)(e=>t(Object(r.e)(\"An error occurred while fetching dashboard owner values: %s\",e))),e.user.userId),paginate:!0},{Header:Object(r.e)(\"Created by\"),id:\"created_by\",input:\"select\",operator:p.a.relationOneMany,unfilteredLabel:Object(r.e)(\"All\"),fetchSelects:Object(b.e)(\"dashboard\",\"created_by\",Object(b.c)(e=>t(Object(r.e)(\"An error occurred while fetching dashboard created by values: %s\",e))),e.user.userId),paginate:!0},{Header:Object(r.e)(\"Status\"),id:\"published\",input:\"select\",operator:p.a.equals,unfilteredLabel:Object(r.e)(\"Any\"),selects:[{label:Object(r.e)(\"Published\"),value:!0},{label:Object(r.e)(\"Unpublished\"),value:!1}]},{Header:Object(r.e)(\"Favorite\"),id:\"id\",urlDisplay:\"favorite\",input:\"select\",operator:p.a.dashboardIsFav,unfilteredLabel:Object(r.e)(\"Any\"),selects:[{label:Object(r.e)(\"Yes\"),value:!0},{label:Object(r.e)(\"No\"),value:!1}]},{Header:Object(r.e)(\"Search\"),id:\"dashboard_title\",input:\"search\",operator:p.a.titleOrSlug}],Z=[{desc:!1,id:\"dashboard_title\",label:Object(r.e)(\"Alphabetical\"),value:\"alphabetical\"},{desc:!0,id:\"changed_on_delta_humanized\",label:Object(r.e)(\"Recently modified\"),value:\"recently_modified\"},{desc:!1,id:\"changed_on_delta_humanized\",label:Object(r.e)(\"Least recently modified\"),value:\"least_recently_modified\"}];function ee(e){return Object(x.f)(v.a,{dashboard:e,hasPerm:T,bulkSelectEnabled:E,refreshData:I,loading:o,addDangerToast:t,addSuccessToast:a,openDashboardEditModal:X,saveFavoriteStatus:$,favoriteStatus:A[e.id]})}const te=[];return(W||J)&&te.push({name:Object(r.e)(\"Bulk select\"),buttonStyle:\"secondary\",\"data-test\":\"bulk-select\",onClick:D}),V&&te.push({name:Object(x.f)(c.a.Fragment,null,Object(x.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(r.e)(\"Dashboard\")),buttonStyle:\"primary\",onClick:()=>{window.location.assign(\"/dashboard/new\")}}),Object(d.c)(d.a.VERSIONED_EXPORT)&&te.push({name:Object(x.f)(f.a.Import,null),buttonStyle:\"link\",onClick:L}),Object(x.f)(c.a.Fragment,null,Object(x.f)(h.a,{name:Object(r.e)(\"Dashboards\"),buttons:te}),Object(x.f)(O.a,{title:Object(r.e)(\"Please confirm\"),description:Object(r.e)(\"Are you sure you want to delete the selected dashboards?\"),onConfirm:function(e){return l.a.delete({endpoint:\"/api/v1/dashboard/?q=\"+i.a.encode(e.map(({id:e})=>e))}).then(({json:e={}})=>{I(),a(e.message)},Object(b.c)(e=>t(Object(r.e)(\"There was an issue deleting the selected dashboards: \",e))))}},e=>{const t=[];return W&&t.push({key:\"delete\",name:Object(r.e)(\"Delete\"),type:\"danger\",onSelect:e}),J&&t.push({key:\"export\",name:Object(r.e)(\"Export\"),type:\"primary\",onSelect:b.h}),Object(x.f)(c.a.Fragment,null,z&&Object(x.f)(y.a,{dashboardId:z.id,show:!0,onHide:()=>M(null),onSubmit:G}),Object(x.f)(p.b,{bulkActions:t,bulkSelectEnabled:E,cardSortSelectOptions:Z,className:\"dashboard-list-view\",columns:K,count:n,data:m,disableBulkSelect:D,fetchData:F,filters:Q,initialSort:Y,loading:o,pageSize:25,renderCard:ee,defaultViewMode:Object(d.c)(d.a.LISTVIEWS_DEFAULT_CARD_VIEW)?\"card\":\"table\"}))}),Object(x.f)(S.a,{resourceName:\"dashboard\",resourceLabel:Object(r.e)(\"dashboard\"),passwordsNeededMessage:_,confirmOverwriteMessage:C,addDangerToast:t,addSuccessToast:a,onModelImport:()=>{P(!1),I()},show:U,onHide:()=>{P(!1)},passwordFields:R,setPasswordFields:B}))}))}}]);","extractedComments":[]}