{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{4643:function(e,t,a){\"use strict\";a(34);var r=a(0),c=a.n(r),l=a(53),n=a(20),o=a(46),s=a(100),i=a(530),d=a(1);Object(l.c)(o.a)`\n  margin: auto ${({theme:e})=>2*e.gridUnit}px auto 0;\n`;const b=l.c.div`\n  display: block;\n  color: ${({theme:e})=>e.colors.grayscale.base};\n  font-size: ${({theme:e})=>e.typography.sizes.s-1}px;\n`,u=l.c.div`\n  padding-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  padding-top: ${({theme:e})=>2*e.gridUnit}px;\n\n  & > div {\n    margin: ${({theme:e})=>e.gridUnit}px 0;\n  }\n\n  &.extra-container {\n    padding-top: 8px;\n  }\n\n  .confirm-overwrite {\n    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  }\n\n  .input-container {\n    display: flex;\n    align-items: center;\n\n    label {\n      display: flex;\n      margin-right: ${({theme:e})=>2*e.gridUnit}px;\n    }\n\n    i {\n      margin: 0 ${({theme:e})=>e.gridUnit}px;\n    }\n  }\n\n  input,\n  textarea {\n    flex: 1 1 auto;\n  }\n\n  textarea {\n    height: 160px;\n    resize: none;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    color: ${({theme:e})=>e.colors.grayscale.light1};\n  }\n\n  textarea,\n  input[type='text'],\n  input[type='number'] {\n    padding: ${({theme:e})=>1.5*e.gridUnit}px\n      ${({theme:e})=>2*e.gridUnit}px;\n    border-style: none;\n    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};\n    border-radius: ${({theme:e})=>e.gridUnit}px;\n\n    &[name='name'] {\n      flex: 0 1 auto;\n      width: 40%;\n    }\n\n    &[name='sqlalchemy_uri'] {\n      margin-right: ${({theme:e})=>3*e.gridUnit}px;\n    }\n  }\n`;t.a=({resourceName:e,resourceLabel:t,passwordsNeededMessage:a,confirmOverwriteMessage:l,addDangerToast:o,addSuccessToast:p,onModelImport:m,show:O,onHide:h,passwordFields:j=[],setPasswordFields:f=(()=>{})})=>{const[g,y]=Object(r.useState)(!0),[w,_]=Object(r.useState)(null),[v,x]=Object(r.useState)({}),[S,C]=Object(r.useState)(!1),[E,k]=Object(r.useState)(!1),N=Object(r.useRef)(null),z=()=>{_(null),f([]),x({}),C(!1),k(!1),N&&N.current&&(N.current.value=\"\")},{state:{alreadyExists:T,passwordsNeeded:A},importResource:F}=Object(i.d)(e,t,e=>{z(),o(e)});Object(r.useEffect)(()=>{f(A)},[A,f]),Object(r.useEffect)(()=>{C(T.length>0)},[T,C]);const H=e=>{var t,a;const r=null!=(t=null==(a=e.currentTarget)?void 0:a.value)?t:\"\";k(r.toUpperCase()===Object(n.e)(\"OVERWRITE\"))};return g&&O&&y(!1),Object(d.f)(s.b,{name:\"model\",className:\"import-model-modal\",disablePrimaryButton:null===w||S&&!E,onHandledPrimaryAction:()=>{null!==w&&F(w,v,E).then(e=>{e&&(p(Object(n.e)(\"The import was successful\")),z(),m())})},onHide:()=>{y(!0),h(),z()},primaryButtonName:S?Object(n.e)(\"Overwrite\"):Object(n.e)(\"Import\"),primaryButtonType:S?\"danger\":\"primary\",width:\"750px\",show:O,title:Object(d.f)(\"h4\",null,Object(n.e)(\"Import %s\",t))},Object(d.f)(u,null,Object(d.f)(\"div\",{className:\"control-label\"},Object(d.f)(\"label\",{htmlFor:\"modelFile\"},Object(n.e)(\"File\"),Object(d.f)(\"span\",{className:\"required\"},\"*\"))),Object(d.f)(\"input\",{ref:N,name:\"modelFile\",id:\"modelFile\",type:\"file\",accept:\".yaml,.json,.yml,.zip\",onChange:e=>{const{files:t}=e.target;_(t&&t[0]||null)}})),0===j.length?null:Object(d.f)(c.a.Fragment,null,Object(d.f)(\"h5\",null,\"Database passwords\"),Object(d.f)(b,null,a),j.map(e=>Object(d.f)(u,{key:\"password-for-\"+e},Object(d.f)(\"div\",{className:\"control-label\"},e,Object(d.f)(\"span\",{className:\"required\"},\"*\")),Object(d.f)(\"input\",{name:\"password-\"+e,autoComplete:\"password-\"+e,type:\"password\",value:v[e],onChange:t=>x({...v,[e]:t.target.value})})))),S?Object(d.f)(c.a.Fragment,null,Object(d.f)(u,null,Object(d.f)(\"div\",{className:\"confirm-overwrite\"},l),Object(d.f)(\"div\",{className:\"control-label\"},Object(n.e)('Type \"%s\" to confirm',Object(n.e)(\"OVERWRITE\"))),Object(d.f)(\"input\",{id:\"overwrite\",type:\"text\",onChange:H}))):null)}},4988:function(e,t,a){var r=a(1087),c=a(2180);e.exports=function(e,t){return e&&e.length?c(e,r(t,2)):[]}},5046:function(e,t,a){\"use strict\";a.r(t);var r=a(4988),c=a.n(r),l=(a(34),a(20)),n=a(170),o=a(67),s=a(53),i=a(0),d=a.n(i),b=a(94),u=a.n(b),p=a(40),m=a(136),O=a(530),h=a(1505),j=a(984),f=a(907),g=a(4623),y=a(119),w=a(1463),_=a(4643),v=a(52),x=a(932),S=a(2373),C=a(1);const E=Object(l.e)('The passwords for the databases below are needed in order to import them together with the charts. Please note that the \"Secure Extra\" and \"Certificate\" sections of the database configuration are not present in export files, and should be added manually after the import if they are needed.'),k=Object(l.e)(\"You are importing one or more charts that already exist. Overwriting might cause you to lose some of your work. Are you sure you want to overwrite?\"),N=Object(n.a)(),z=s.c.div`\n  color: ${({theme:e})=>e.colors.grayscale.base};\n`;t.default=Object(y.a)((function(e){const{addDangerToast:t,addSuccessToast:a}=e,{state:{loading:r,resourceCount:n,resourceCollection:s,bulkSelectEnabled:b},setResourceCollection:y,hasPerm:T,fetchData:A,toggleBulkSelect:F,refreshData:H}=Object(O.e)(\"chart\",Object(l.e)(\"chart\"),t),I=Object(i.useMemo)(()=>s.map(e=>e.id),[s]),[D,$]=Object(O.c)(\"chart\",I,t),{sliceCurrentlyEditing:M,handleChartUpdated:U,openChartEditModal:R,closeChartEditModal:B}=Object(O.b)(y,s),[L,P]=Object(i.useState)(!1),[V,q]=Object(i.useState)([]),W=()=>{P(!0)},J=T(\"can_write\"),X=T(\"can_write\"),Y=T(\"can_write\"),G=T(\"can_read\")&&Object(p.c)(p.a.VERSIONED_EXPORT),K=[{id:\"changed_on_delta_humanized\",desc:!0}],Q=Object(i.useMemo)(()=>[{Cell:({row:{original:{id:e}}})=>Object(C.f)(f.a,{itemId:e,saveFaveStar:D,isStarred:$[e]}),Header:\"\",id:\"id\",disableSortBy:!0,size:\"xs\"},{Cell:({row:{original:{url:e,slice_name:t}}})=>Object(C.f)(\"a\",{href:e},t),Header:Object(l.e)(\"Chart\"),accessor:\"slice_name\"},{Cell:({row:{original:{viz_type:e}}})=>{var t;return(null==(t=N.get(e))?void 0:t.name)||e},Header:Object(l.e)(\"Visualization type\"),accessor:\"viz_type\",size:\"xxl\"},{Cell:({row:{original:{datasource_name_text:e,datasource_url:t}}})=>Object(C.f)(\"a\",{href:t},e),Header:Object(l.e)(\"Dataset\"),accessor:\"datasource_id\",disableSortBy:!0,size:\"xl\"},{Cell:({row:{original:{changed_by_name:e,changed_by_url:t}}})=>Object(C.f)(\"a\",{href:t},e),Header:Object(l.e)(\"Modified by\"),accessor:\"changed_by.first_name\",size:\"xl\"},{Cell:({row:{original:{changed_on_delta_humanized:e}}})=>Object(C.f)(\"span\",{className:\"no-wrap\"},e),Header:Object(l.e)(\"Last modified\"),accessor:\"changed_on_delta_humanized\",size:\"xl\"},{accessor:\"owners\",hidden:!0,disableSortBy:!0},{Cell:({row:{original:{created_by:e}}})=>e?`${e.first_name} ${e.last_name}`:\"\",Header:Object(l.e)(\"Created by\"),accessor:\"created_by\",disableSortBy:!0,size:\"xl\"},{Cell:({row:{original:e}})=>X||Y||G?Object(C.f)(z,{className:\"actions\"},Y&&Object(C.f)(h.a,{title:Object(l.e)(\"Please confirm\"),description:Object(C.f)(d.a.Fragment,null,Object(l.e)(\"Are you sure you want to delete\"),\" \",Object(C.f)(\"b\",null,e.slice_name),\"?\"),onConfirm:()=>Object(m.i)(e,a,t,H)},e=>Object(C.f)(v.a,{id:\"delete-action-tooltip\",title:Object(l.e)(\"Delete\"),placement:\"bottom\"},Object(C.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e},Object(C.f)(x.a.Trash,null)))),G&&Object(C.f)(v.a,{id:\"export-action-tooltip\",title:Object(l.e)(\"Export\"),placement:\"bottom\"},Object(C.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:()=>Object(m.g)([e])},Object(C.f)(x.a.Share,null))),X&&Object(C.f)(v.a,{id:\"edit-action-tooltip\",title:Object(l.e)(\"Edit\"),placement:\"bottom\"},Object(C.f)(\"span\",{role:\"button\",tabIndex:0,className:\"action-button\",onClick:()=>R(e)},Object(C.f)(x.a.EditAlt,null)))):null,Header:Object(l.e)(\"Actions\"),id:\"actions\",disableSortBy:!0,hidden:!X&&!Y}],[X,Y,G,$]),Z=[{Header:Object(l.e)(\"Owner\"),id:\"owners\",input:\"select\",operator:g.a.relationManyMany,unfilteredLabel:Object(l.e)(\"All\"),fetchSelects:Object(m.e)(\"chart\",\"owners\",Object(m.c)(e=>t(Object(l.e)(\"An error occurred while fetching chart owners values: %s\",e))),e.user.userId),paginate:!0},{Header:Object(l.e)(\"Created by\"),id:\"created_by\",input:\"select\",operator:g.a.relationOneMany,unfilteredLabel:Object(l.e)(\"All\"),fetchSelects:Object(m.e)(\"chart\",\"created_by\",Object(m.c)(e=>t(Object(l.e)(\"An error occurred while fetching chart created by values: %s\",e))),e.user.userId),paginate:!0},{Header:Object(l.e)(\"Viz type\"),id:\"viz_type\",input:\"select\",operator:g.a.equals,unfilteredLabel:Object(l.e)(\"All\"),selects:N.keys().map(e=>{var t;return{label:(null==(t=N.get(e))?void 0:t.name)||e,value:e}}).sort((e,t)=>e.label&&t.label?e.label>t.label?1:e.label<t.label?-1:0:0)},{Header:Object(l.e)(\"Dataset\"),id:\"datasource_id\",input:\"select\",operator:g.a.equals,unfilteredLabel:Object(l.e)(\"All\"),fetchSelects:(ee=Object(m.c)(e=>t(Object(l.e)(\"An error occurred while fetching chart dataset values: %s\",e))),async(e=\"\",t,a)=>{const r=e?{filters:[{col:\"table_name\",opr:\"sw\",value:e}]}:{};try{var l;const e=u.a.encode({columns:[\"datasource_name\",\"datasource_id\"],keys:[\"none\"],order_column:\"table_name\",order_direction:\"asc\",...t?{page:t}:{},...a?{page_size:a}:{},...r}),{json:n={}}=await o.a.get({endpoint:\"/api/v1/dataset/?q=\"+e}),s=null==n||null==(l=n.result)?void 0:l.map(({table_name:e,id:t})=>({label:e,value:t}));return c()(s,\"value\")}catch(e){ee(e)}return[]}),paginate:!1},{Header:Object(l.e)(\"Favorite\"),id:\"id\",urlDisplay:\"favorite\",input:\"select\",operator:g.a.chartIsFav,unfilteredLabel:Object(l.e)(\"Any\"),selects:[{label:Object(l.e)(\"Yes\"),value:!0},{label:Object(l.e)(\"No\"),value:!1}]},{Header:Object(l.e)(\"Search\"),id:\"slice_name\",input:\"search\",operator:g.a.chartAllText}];var ee;const te=[{desc:!1,id:\"slice_name\",label:Object(l.e)(\"Alphabetical\"),value:\"alphabetical\"},{desc:!0,id:\"changed_on_delta_humanized\",label:Object(l.e)(\"Recently modified\"),value:\"recently_modified\"},{desc:!1,id:\"changed_on_delta_humanized\",label:Object(l.e)(\"Least recently modified\"),value:\"least_recently_modified\"}];function ae(e){return Object(C.f)(S.a,{chart:e,hasPerm:T,openChartEditModal:R,bulkSelectEnabled:b,addDangerToast:t,addSuccessToast:a,refreshData:H,loading:r,favoriteStatus:$[e.id],saveFavoriteStatus:D})}const re=[];return(Y||G)&&re.push({name:Object(l.e)(\"Bulk select\"),buttonStyle:\"secondary\",\"data-test\":\"bulk-select\",onClick:F}),J&&re.push({name:Object(C.f)(d.a.Fragment,null,Object(C.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(l.e)(\"Chart\")),buttonStyle:\"primary\",onClick:()=>{window.location.assign(\"/chart/add\")}}),Object(p.c)(p.a.VERSIONED_EXPORT)&&re.push({name:Object(C.f)(x.a.Import,null),buttonStyle:\"link\",onClick:W}),Object(C.f)(d.a.Fragment,null,Object(C.f)(j.a,{name:Object(l.e)(\"Charts\"),buttons:re}),M&&Object(C.f)(w.a,{onHide:B,onSave:U,show:!0,slice:M}),Object(C.f)(h.a,{title:Object(l.e)(\"Please confirm\"),description:Object(l.e)(\"Are you sure you want to delete the selected charts?\"),onConfirm:function(e){o.a.delete({endpoint:\"/api/v1/chart/?q=\"+u.a.encode(e.map(({id:e})=>e))}).then(({json:e={}})=>{H(),a(e.message)},Object(m.c)(e=>t(Object(l.e)(\"There was an issue deleting the selected charts: %s\",e))))}},e=>{const t=[];return Y&&t.push({key:\"delete\",name:Object(l.e)(\"Delete\"),type:\"danger\",onSelect:e}),G&&t.push({key:\"export\",name:Object(l.e)(\"Export\"),type:\"primary\",onSelect:m.g}),Object(C.f)(g.b,{bulkActions:t,bulkSelectEnabled:b,cardSortSelectOptions:te,className:\"chart-list-view\",columns:Q,count:n,data:s,disableBulkSelect:F,fetchData:A,filters:Z,initialSort:K,loading:r,pageSize:25,renderCard:ae,defaultViewMode:Object(p.c)(p.a.LISTVIEWS_DEFAULT_CARD_VIEW)?\"card\":\"table\"})}),Object(C.f)(_.a,{resourceName:\"chart\",resourceLabel:Object(l.e)(\"chart\"),passwordsNeededMessage:E,confirmOverwriteMessage:k,addDangerToast:t,addSuccessToast:a,onModelImport:()=>{P(!1),H()},show:L,onHide:()=>{P(!1)},passwordFields:V,setPasswordFields:q}))}))}}]);","extractedComments":[]}