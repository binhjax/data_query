{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{4630:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return s}));n(0);var a=n(53),o=n(52),c=n(932),l=n(1);const i=a.c.span`\n  white-space: nowrap;\n  min-width: 100px;\n  svg,\n  i {\n    margin-right: 8px;\n\n    &:hover {\n      path {\n        fill: ${({theme:t})=>t.colors.primary.base};\n      }\n    }\n  }\n`,r=a.c.span`\n  color: ${({theme:t})=>t.colors.grayscale.base};\n`;function s({actions:t}){return Object(l.f)(i,{className:\"actions\"},t.map((t,e)=>{const n=c.a[t.icon];return t.tooltip?Object(l.f)(o.a,{id:t.label+\"-tooltip\",title:t.tooltip,placement:t.placement,key:e},Object(l.f)(r,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:t.onClick},Object(l.f)(n,null))):Object(l.f)(r,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:t.onClick,key:e},Object(l.f)(n,null))}))}},5074:function(t,e,n){\"use strict\";n.r(e);n(34);var a=n(0),o=n.n(a),c=n(155),l=n(519),i=n(20),r=n(67),s=n(53),d=n(33),b=n.n(d),u=n(94),m=n.n(u),j=n(4630),O=n(42),h=n(1505),f=n(1506),p=n(4623),g=n(984),_=n(70),y=n(119),w=n(530),x=n(136),v=n(4828),k=n(46),S=n(100),$=n(212),C=n(1);const D=s.c.div`\n  margin: ${({theme:t})=>2*t.gridUnit}px auto\n    ${({theme:t})=>4*t.gridUnit}px auto;\n`,A=Object(s.c)($.d)`\n  border-radius: ${({theme:t})=>t.borderRadius}px;\n  border: 1px solid ${({theme:t})=>t.colors.secondary.light2};\n`,H=Object(s.c)(k.a)`\n  margin: auto ${({theme:t})=>2*t.gridUnit}px auto 0;\n`,N=s.c.div`\n  margin-bottom: ${({theme:t})=>5*t.gridUnit}px;\n\n  .control-label {\n    margin-bottom: ${({theme:t})=>2*t.gridUnit}px;\n  }\n\n  .required {\n    margin-left: ${({theme:t})=>t.gridUnit/2}px;\n    color: ${({theme:t})=>t.colors.error.base};\n  }\n\n  textarea {\n    flex: 1 1 auto;\n    height: ${({theme:t})=>17*t.gridUnit}px;\n    resize: none;\n    width: 100%;\n  }\n\n  textarea,\n  input[type='text'] {\n    padding: ${({theme:t})=>1.5*t.gridUnit}px\n      ${({theme:t})=>2*t.gridUnit}px;\n    border: 1px solid ${({theme:t})=>t.colors.grayscale.light2};\n    border-radius: ${({theme:t})=>t.gridUnit}px;\n  }\n\n  input[type='text'] {\n    width: 65%;\n  }\n`;var Y=Object(y.a)(({addDangerToast:t,annnotationLayerId:e,annotation:n=null,onAnnotationAdd:o,onHide:c,show:l})=>{const[r,s]=Object(a.useState)(!0),[d,u]=Object(a.useState)(null),[m,j]=Object(a.useState)(!0),O=null!==n,{state:{loading:h,resource:f},fetchResource:p,createResource:g,updateResource:_}=Object(w.f)(`annotation_layer/${e}/annotation`,Object(i.e)(\"annotation\"),t),y=()=>{u({short_descr:\"\",start_dttm:\"\",end_dttm:\"\",json_metadata:\"\",long_descr:\"\"})},x=()=>{j(!0),y(),c()},k=t=>{const{target:e}=t,n={...d,end_dttm:d?d.end_dttm:\"\",short_descr:d?d.short_descr:\"\",start_dttm:d?d.start_dttm:\"\"};n[e.name]=e.value,u(n)};return Object(a.useEffect)(()=>{if(O&&(!d||!d.id||n&&n.id!==d.id||m&&l)){if(n&&null!==n.id&&!h){const t=n.id||0;p(t)}}else!O&&(!d||d.id||m&&l)&&y()},[n]),Object(a.useEffect)(()=>{f&&u(f)},[f]),Object(a.useEffect)(()=>{d&&d.short_descr.length&&d.start_dttm.length&&d.end_dttm.length?s(!1):s(!0)},[d?d.short_descr:\"\",d?d.start_dttm:\"\",d?d.end_dttm:\"\"]),m&&l&&j(!1),Object(C.f)(S.b,{disablePrimaryButton:r,onHandledPrimaryAction:()=>{if(O){if(d&&d.id){const t=d.id;delete d.id,delete d.created_by,delete d.changed_by,delete d.changed_on_delta_humanized,delete d.layer,_(t,d).then(t=>{t&&(o&&o(),x())})}}else d&&g(d).then(t=>{t&&(o&&o(),x())})},onHide:x,primaryButtonName:O?Object(i.e)(\"Save\"):Object(i.e)(\"Add\"),show:l,width:\"55%\",title:Object(C.f)(\"h4\",null,O?Object(C.f)(H,{name:\"edit-alt\"}):Object(C.f)(H,{name:\"plus-large\"}),O?Object(i.e)(\"Edit annotation\"):Object(i.e)(\"Add annotation\"))},Object(C.f)(D,null,Object(C.f)(\"h4\",null,Object(i.e)(\"Basic information\"))),Object(C.f)(N,null,Object(C.f)(\"div\",{className:\"control-label\"},Object(i.e)(\"Annotation name\"),Object(C.f)(\"span\",{className:\"required\"},\"*\")),Object(C.f)(\"input\",{name:\"short_descr\",onChange:k,type:\"text\",value:null==d?void 0:d.short_descr})),Object(C.f)(N,null,Object(C.f)(\"div\",{className:\"control-label\"},Object(i.e)(\"date\"),Object(C.f)(\"span\",{className:\"required\"},\"*\")),Object(C.f)(v.a,{format:\"YYYY-MM-DD hh:mm a\",onChange:(t,e)=>{const n={...d,end_dttm:d&&e[1].length?b()(e[1]).format(\"YYYY-MM-DD HH:mm\"):\"\",short_descr:d?d.short_descr:\"\",start_dttm:d&&e[0].length?b()(e[0]).format(\"YYYY-MM-DD HH:mm\"):\"\"};u(n)},showTime:{format:\"hh:mm a\"},use12Hours:!0,value:d&&(null!=d&&d.start_dttm.length||null!=d&&d.end_dttm.length)?[b()(d.start_dttm),b()(d.end_dttm)]:null})),Object(C.f)(D,null,Object(C.f)(\"h4\",null,Object(i.e)(\"Additional information\"))),Object(C.f)(N,null,Object(C.f)(\"div\",{className:\"control-label\"},Object(i.e)(\"description\")),Object(C.f)(\"textarea\",{name:\"long_descr\",value:d?d.long_descr:\"\",placeholder:Object(i.e)(\"Description (this can be seen in the list)\"),onChange:k})),Object(C.f)(N,null,Object(C.f)(\"div\",{className:\"control-label\"},Object(i.e)(\"JSON metadata\")),Object(C.f)(A,{onChange:t=>{const e={...d,end_dttm:d?d.end_dttm:\"\",json_metadata:t,short_descr:d?d.short_descr:\"\",start_dttm:d?d.start_dttm:\"\"};u(e)},value:d&&d.json_metadata?d.json_metadata:\"\",width:\"100%\",height:\"120px\"})))});e.default=Object(y.a)((function({addDangerToast:t,addSuccessToast:e}){const{annotationLayerId:n}=Object(c.g)(),{state:{loading:d,resourceCount:u,resourceCollection:y,bulkSelectEnabled:v},fetchData:k,refreshData:S,toggleBulkSelect:$}=Object(w.e)(`annotation_layer/${n}/annotation`,Object(i.e)(\"annotation\"),t,!1),[D,A]=Object(a.useState)(!1),[H,N]=Object(a.useState)(\"\"),[E,U]=Object(a.useState)(null),[B,T]=Object(a.useState)(null),M=t=>{U(t),A(!0)},L=Object(a.useCallback)((async function(){try{const t=await r.a.get({endpoint:\"/api/v1/annotation_layer/\"+n});N(t.json.result.name)}catch(e){await Object(_.a)(e).then(({error:e})=>{t(e.error||e.statusText||e)})}}),[n]);Object(a.useEffect)(()=>{L()},[L]);const I=[{id:\"short_descr\",desc:!0}],q=Object(a.useMemo)(()=>[{accessor:\"short_descr\",Header:Object(i.e)(\"Label\")},{accessor:\"long_descr\",Header:Object(i.e)(\"Description\")},{Cell:({row:{original:{start_dttm:t}}})=>b()(new Date(t)).format(\"ll\"),Header:Object(i.e)(\"Start\"),accessor:\"start_dttm\"},{Cell:({row:{original:{end_dttm:t}}})=>b()(new Date(t)).format(\"ll\"),Header:Object(i.e)(\"End\"),accessor:\"end_dttm\"},{Cell:({row:{original:t}})=>{const e=[{label:\"edit-action\",tooltip:Object(i.e)(\"Edit annotation\"),placement:\"bottom\",icon:\"Edit\",onClick:()=>M(t)},{label:\"delete-action\",tooltip:Object(i.e)(\"Delete annotation\"),placement:\"bottom\",icon:\"Trash\",onClick:()=>T(t)}];return Object(C.f)(j.a,{actions:e})},Header:Object(i.e)(\"Actions\"),id:\"actions\",disableSortBy:!0}],[!0,!0]),z=[];z.push({name:Object(C.f)(o.a.Fragment,null,Object(C.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(i.e)(\"Annotation\")),buttonStyle:\"primary\",onClick:()=>{M(null)}}),z.push({name:Object(i.e)(\"Bulk select\"),onClick:$,buttonStyle:\"secondary\",\"data-test\":\"annotation-bulk-select\"});const R=s.c.div`\n    display: flex;\n    flex-direction: row;\n\n    a,\n    Link {\n      margin-left: 16px;\n      font-size: 12px;\n      font-weight: normal;\n      text-decoration: underline;\n    }\n  `;let F=!0;try{Object(c.f)()}catch(t){F=!1}const J=Object(C.f)(O.a,{buttonStyle:\"primary\",onClick:()=>{M(null)}},Object(C.f)(o.a.Fragment,null,Object(C.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(i.e)(\"Annotation\"))),P={message:Object(i.e)(\"No annotation yet\"),slot:J};return Object(C.f)(o.a.Fragment,null,Object(C.f)(g.a,{name:Object(C.f)(R,null,Object(C.f)(\"span\",null,Object(i.e)(\"Annotation Layer \"+H)),Object(C.f)(\"span\",null,F?Object(C.f)(l.b,{to:\"/annotationlayermodelview/list/\"},\"Back to all\"):Object(C.f)(\"a\",{href:\"/annotationlayermodelview/list/\"},\"Back to all\"))),buttons:z}),Object(C.f)(Y,{addDangerToast:t,annotation:E,show:D,onAnnotationAdd:()=>S(),annnotationLayerId:n,onHide:()=>A(!1)}),B&&Object(C.f)(f.a,{description:Object(i.e)(`Are you sure you want to delete ${null==B?void 0:B.short_descr}?`),onConfirm:()=>{B&&(({id:a,short_descr:o})=>{r.a.delete({endpoint:`/api/v1/annotation_layer/${n}/annotation/${a}`}).then(()=>{S(),T(null),e(Object(i.e)(\"Deleted: %s\",o))},Object(x.c)(e=>t(Object(i.e)(\"There was an issue deleting %s: %s\",o,e))))})(B)},onHide:()=>T(null),open:!0,title:Object(i.e)(\"Delete Annotation?\")}),Object(C.f)(h.a,{title:Object(i.e)(\"Please confirm\"),description:Object(i.e)(\"Are you sure you want to delete the selected annotations?\"),onConfirm:a=>{r.a.delete({endpoint:`/api/v1/annotation_layer/${n}/annotation/?q=${m.a.encode(a.map(({id:t})=>t))}`}).then(({json:t={}})=>{S(),e(t.message)},Object(x.c)(e=>t(Object(i.e)(\"There was an issue deleting the selected annotations: %s\",e))))}},t=>{const e=[{key:\"delete\",name:Object(i.e)(\"Delete\"),onSelect:t,type:\"danger\"}];return Object(C.f)(p.b,{className:\"annotations-list-view\",bulkActions:e,bulkSelectEnabled:v,columns:q,count:u,data:y,disableBulkSelect:$,emptyState:P,fetchData:k,initialSort:I,loading:d,pageSize:25})}))}))}}]);","extractedComments":[]}