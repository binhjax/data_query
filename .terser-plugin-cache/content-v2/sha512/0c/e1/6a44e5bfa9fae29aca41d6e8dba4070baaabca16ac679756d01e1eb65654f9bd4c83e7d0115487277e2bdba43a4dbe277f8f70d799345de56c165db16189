{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{4816:function(n,t,e){var r=e(4847).dispatch,i=Math.PI/180;function o(n){return n.text}function a(){return\"serif\"}function u(){return\"normal\"}function c(n){return Math.sqrt(n.value)}function s(){return 30*(~~(6*Math.random())-3)}function l(){return 1}function f(n,t,e,r){if(!t.sprite){var o=n.context,a=n.ratio;o.clearRect(0,0,2048/a,2048/a);var u=0,c=0,s=0,l=e.length;for(--r;++r<l;){t=e[r],o.save(),o.font=t.style+\" \"+t.weight+\" \"+~~((t.size+1)/a)+\"px \"+t.font;var f=o.measureText(t.text+\"m\").width*a,h=t.size<<1;if(t.rotate){var g=Math.sin(t.rotate*i),d=Math.cos(t.rotate*i),p=f*d,m=f*g,y=h*d,v=h*g;f=Math.max(Math.abs(p+v),Math.abs(p-v))+31>>5<<5,h=~~Math.max(Math.abs(m+y),Math.abs(m-y))}else f=f+31>>5<<5;if(h>s&&(s=h),u+f>=2048&&(u=0,c+=s,s=0),c+h>=2048)break;o.translate((u+(f>>1))/a,(c+(h>>1))/a),t.rotate&&o.rotate(t.rotate*i),o.fillText(t.text,0,0),t.padding&&(o.lineWidth=2*t.padding,o.strokeText(t.text,0,0)),o.restore(),t.width=f,t.height=h,t.xoff=u,t.yoff=c,t.x1=f>>1,t.y1=h>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,u+=f}for(var w=o.getImageData(0,0,2048/a,2048/a).data,M=[];--r>=0;)if((t=e[r]).hasText){for(var b=(f=t.width)>>5,x=(h=t.y1-t.y0,0);x<h*b;x++)M[x]=0;if(null==(u=t.xoff))return;c=t.yoff;for(var T=0,D=-1,C=0;C<h;C++){for(x=0;x<f;x++){var N=b*C+(x>>5),k=w[2048*(c+C)+(u+x)<<2]?1<<31-x%32:0;M[N]|=k,T|=k}T?D=C:(t.y0++,h--,C--,c++)}t.y1=t.y0+D,t.sprite=M.slice(0,(t.y1-t.y0)*b)}}}function h(n,t,e){e>>=5;for(var r,i=n.sprite,o=n.width>>5,a=n.x-(o<<4),u=127&a,c=32-u,s=n.y1-n.y0,l=(n.y+n.y0)*e+(a>>5),f=0;f<s;f++){r=0;for(var h=0;h<=o;h++)if((r<<c|(h<o?(r=i[f*o+h])>>>u:0))&t[l+h])return!0;l+=e}return!1}function g(n,t){var e=n[0],r=n[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function d(n){var t=n[0]/n[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function p(){return document.createElement(\"canvas\")}function m(n){return\"function\"==typeof n?n:function(){return n}}n.exports=function(){var n=[256,256],t=o,e=a,i=c,v=u,w=u,M=s,b=l,x=d,T=[],D=1/0,C=r(\"word\",\"end\"),N=null,k=Math.random,F={},S=p;function U(t,e,r){n[0],n[1];for(var i,o,a,u,c,s=e.x,l=e.y,f=Math.sqrt(n[0]*n[0]+n[1]*n[1]),g=x(n),d=k()<.5?1:-1,p=-d;(i=g(p+=d))&&(o=~~i[0],a=~~i[1],!(Math.min(Math.abs(o),Math.abs(a))>=f));)if(e.x=s+o,e.y=l+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>n[0]||e.y+e.y1>n[1]||r&&h(e,t,n[0])||r&&(c=r,!((u=e).x+u.x1>c[0].x&&u.x+u.x0<c[1].x&&u.y+u.y1>c[0].y&&u.y+u.y0<c[1].y)))){for(var m,y=e.sprite,v=e.width>>5,w=n[0]>>5,M=e.x-(v<<4),b=127&M,T=32-b,D=e.y1-e.y0,C=(e.y+e.y0)*w+(M>>5),N=0;N<D;N++){m=0;for(var F=0;F<=v;F++)t[C+F]|=m<<T|(F<v?(m=y[N*v+F])>>>b:0);C+=w}return delete e.sprite,!0}return!1}return F.canvas=function(n){return arguments.length?(S=m(n),F):S},F.start=function(){var r=function(n){n.width=n.height=1;var t=Math.sqrt(n.getContext(\"2d\").getImageData(0,0,1,1).data.length>>2);n.width=2048/t,n.height=2048/t;var e=n.getContext(\"2d\");return e.fillStyle=e.strokeStyle=\"red\",e.textAlign=\"center\",{context:e,ratio:t}}(S()),o=function(n){var t=[],e=-1;for(;++e<n;)t[e]=0;return t}((n[0]>>5)*n[1]),a=null,u=T.length,c=-1,s=[],l=T.map((function(n,r){return n.text=t.call(this,n,r),n.font=e.call(this,n,r),n.style=v.call(this,n,r),n.weight=w.call(this,n,r),n.rotate=M.call(this,n,r),n.size=~~i.call(this,n,r),n.padding=b.call(this,n,r),n})).sort((function(n,t){return t.size-n.size}));return N&&clearInterval(N),N=setInterval(h,0),h(),F;function h(){for(var t=Date.now();Date.now()-t<D&&++c<u&&N;){var e=l[c];e.x=n[0]*(k()+.5)>>1,e.y=n[1]*(k()+.5)>>1,f(r,e,l,c),e.hasText&&U(o,e,a)&&(s.push(e),C.call(\"word\",F,e),a?g(a,e):a=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=n[0]>>1,e.y-=n[1]>>1)}c>=u&&(F.stop(),C.call(\"end\",F,s,a))}},F.stop=function(){return N&&(clearInterval(N),N=null),F},F.timeInterval=function(n){return arguments.length?(D=null==n?1/0:n,F):D},F.words=function(n){return arguments.length?(T=n,F):T},F.size=function(t){return arguments.length?(n=[+t[0],+t[1]],F):n},F.font=function(n){return arguments.length?(e=m(n),F):e},F.fontStyle=function(n){return arguments.length?(v=m(n),F):v},F.fontWeight=function(n){return arguments.length?(w=m(n),F):w},F.rotate=function(n){return arguments.length?(M=m(n),F):M},F.text=function(n){return arguments.length?(t=m(n),F):t},F.spiral=function(n){return arguments.length?(x=y[n]||n,F):x},F.fontSize=function(n){return arguments.length?(i=m(n),F):i},F.padding=function(n){return arguments.length?(b=m(n),F):b},F.random=function(n){return arguments.length?(k=n,F):k},F.on=function(){var n=C.on.apply(C,arguments);return n===C?F:n},F};var y={archimedean:d,rectangular:function(n){var t=4*n[0]/n[1],e=0,r=0;return function(n){var i=n<0?-1:1;switch(Math.sqrt(1+4*i*n)-i&3){case 0:e+=t;break;case 1:r+=4;break;case 2:e-=t;break;default:r-=4}return[e,r]}}}},4847:function(n,t,e){\"use strict\";e.r(t),e.d(t,\"dispatch\",(function(){return s}));var r={value:function(){}};function i(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+\"\")||n in r||/[\\s.]/.test(n))throw new Error(\"illegal type: \"+n);r[n]=[]}return new o(r)}function o(n){this._=n}function a(n,t){return n.trim().split(/^|\\s+/).map((function(n){var e=\"\",r=n.indexOf(\".\");if(r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);return{type:n,name:e}}))}function u(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function c(n,t,e){for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n[i]=r,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=e&&n.push({name:t,value:e}),n}o.prototype=i.prototype={constructor:o,on:function(n,t){var e,r=this._,i=a(n+\"\",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&\"function\"!=typeof t)throw new Error(\"invalid callback: \"+t);for(;++o<s;)if(e=(n=i[o]).type)r[e]=c(r[e],n.name,t);else if(null==t)for(e in r)r[e]=c(r[e],n.name,null);return this}for(;++o<s;)if((e=(n=i[o]).type)&&(e=u(r[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new o(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);for(o=0,e=(r=this._[n]).length;o<e;++o)r[o].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};var s=i},4903:function(n,t,e){\"use strict\";e.r(t),e.d(t,\"ROTATION\",(function(){return Go}));var r=e(2),i=e.n(r),o=e(0),a=e.n(o),u=e(4816),c=e.n(u),s=e(220);function l(n){return n&&\"value\"in n}function f(n){return n&&\"field\"in n&&!!n.field}function h(n){return f(n)&&\"type\"in n&&!!n.type}function g(n){return!Array.isArray(n)}function d(n){return null!=n}var p=function(n,t){let e,r;if(void 0===t)for(const t of n)null!=t&&(void 0===e?t>=t&&(e=r=t):(e>t&&(e=t),r<t&&(r=t)));else{let i=-1;for(let o of n)null!=(o=t(o,++i,n))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]};const m=\"linear\",y=\"log\",v=\"pow\",w=\"sqrt\",M=\"symlog\",b=\"time\",x=\"utc\",T=\"quantile\",D=\"quantize\",C=\"threshold\",N=\"bin-ordinal\",k=\"ordinal\",F=\"point\",S=\"band\";function U(n){return\"X\"===n||\"XBand\"===n}function A(n){return\"Y\"===n||\"YBand\"===n}function E(n){return U(n)||A(n)}var O=Object.keys;function Y(n,t){return\"Invalid \"+n+\": \"+String(t)+\".\"}const q=[\"january\",\"february\",\"march\",\"april\",\"may\",\"june\",\"july\",\"august\",\"september\",\"october\",\"november\",\"december\"],I=q.map(n=>n.slice(0,3)),L=[\"sunday\",\"monday\",\"tuesday\",\"wednesday\",\"thursday\",\"friday\",\"saturday\"],z=L.map(n=>n.slice(0,3));function H(n){return\"number\"==typeof n}function V(n){return!!H(n)||!isNaN(n)&&!isNaN(parseFloat(n))}function j(n,t){const e=[];if(t&&void 0!==n.day&&O(n).length>1&&delete(n={...n}).day,void 0!==n.year?e.push(n.year):void 0!==n.day?e.push(2006):e.push(0),void 0!==n.month){const r=t?function(n){if(V(n)&&(n=Number(n)),H(n))return n-1;const t=n.toLowerCase(),e=q.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=I.indexOf(r);if(-1!==i)return i;throw new Error(Y(\"month\",n))}(n.month):n.month;e.push(r)}else if(void 0!==n.quarter){const r=t?function(n){if(V(n)&&(n=Number(n)),H(n))return n>4&&console.warn(Y(\"quarter\",n)),n-1;throw new Error(Y(\"quarter\",n))}(n.quarter):n.quarter;e.push(H(r)?3*r:r+\"*3\")}else e.push(0);if(void 0!==n.date)e.push(n.date);else if(void 0!==n.day){const r=t?function(n){if(V(n)&&(n=Number(n)),H(n))return n%7;const t=n.toLowerCase(),e=L.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=z.indexOf(r);if(-1!==i)return i;throw new Error(Y(\"day\",n))}(n.day):n.day;e.push(H(r)?r+1:r+\"+1\")}else e.push(1);return[\"hours\",\"minutes\",\"seconds\",\"milliseconds\"].forEach(t=>{const r=n[t];e.push(void 0===r?0:r)}),e}function P(n){return\"number\"==typeof n||\"string\"==typeof n?new Date(n):new Date(function(n){const t=j(n,!0);return n.utc?Number(new Date(Date.UTC(...t))):Number(new Date(...t))}(n))}function W(n){return!!n&&!(n instanceof Date)&&\"string\"!=typeof n&&\"boolean\"!=typeof n&&\"number\"!=typeof n&&(\"year\"in n&&null!=n.year||\"quarter\"in n&&null!=n.quarter||\"month\"in n&&null!=n.month||\"date\"in n&&null!=n.date||\"day\"in n&&null!=n.day||\"hours\"in n&&null!=n.hours||\"minutes\"in n&&null!=n.minutes||\"seconds\"in n&&null!=n.seconds||\"milliseconds\"in n&&null!=n.milliseconds)}function $(n){return\"\"+n}var R=e(1604);function X({formatType:n,format:t,formatInLocalTime:e}){if(\"time\"===n){const n=R.a.resolveTimeFormat({format:t,formatInLocalTime:e});return t=>n(t)}if(\"number\"===n||void 0!==t&&t.length>0){const n=R.a.resolveNumberFormat(t);return t=>n(t)}return $}function B(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Z{constructor(n){B(this,\"channelEncoder\",void 0),B(this,\"config\",void 0),B(this,\"formatValue\",void 0),this.channelEncoder=n,this.config=n.definition.axis,this.formatValue=X(this.config)}getTitle(){return this.config.title}hasTitle(){const{title:n}=this.config;return null!=n&&\"\"!==n}getTickLabels(){const{tickCount:n,values:t}=this.config;if(void 0!==t)return t.map(n=>this.formatValue(W(n)?P(n):n));const{scale:e}=this.channelEncoder;if(e&&\"domain\"in e){return(\"ticks\"in e?e.ticks(n):e.domain()).map(this.formatValue)}return[]}}var _=e(4407),G=e.n(_);function J(n){return!function(n){return!1===n||null===n}(n)}const Q={strategy:\"flat\"},K={labelAngle:40,strategy:\"rotate\"};function nn(n,t=\"auto\"){let e;switch(t){case\"flat\":e=Q;break;case\"rotate\":e=K;break;case\"auto\":e=U(n)?K:Q;break;default:e=t}return{...e}}const tn=[m,v,w,M,y,b,x],en=new Set(tn),rn=[T,D,C],on=(new Set(rn),tn.concat(rn)),an=(new Set(on),new Set([k,N,F,S]),tn),un=en,cn=new Set([S,F,k]),sn=new Set([N,T,D,C]),ln=new Set([b,x]),fn=[m,y,v,w,M,b,x,T,D,C,N,k,F,S],hn=new Set(fn);function gn(n,t){if(function(n,t){return h(t)&&E(n)}(n,t)&&J(t.axis)){const e=!0===t.axis||void 0===t.axis?{}:t.axis,r=U(n),{format:i=t.format,formatType:o=t.formatType,formatInLocalTime:a=t.formatInLocalTime,labelAngle:u=0,labelFlush:c,labelOverlap:s,labelPadding:l=4,orient:f=(r?\"bottom\":\"left\"),tickCount:h=5,ticks:g=!0,title:d=t.title,titlePadding:p=4}=e,m={...e,format:i,formatType:o,labelAngle:u,labelFlush:void 0===c?t.scale&&void 0!==t.scale.type&&en.has(t.scale.type):c,labelOverlap:nn(n,s),labelPadding:l,orient:f,tickCount:h,ticks:g,title:d,titlePadding:p};return void 0!==a&&(m.formatInLocalTime=a),m}return!1}function dn(n,t,e=!1){if(\"nominal\"===t||\"ordinal\"===t)switch(n){case\"XBand\":case\"YBand\":return S;case\"X\":case\"Y\":case\"Numeric\":return F;case\"Color\":case\"Category\":return k}else if(\"quantitative\"===t)switch(n){case\"XBand\":case\"YBand\":case\"X\":case\"Y\":case\"Numeric\":return m;case\"Color\":return e?N:m}else if(\"temporal\"===t)switch(n){case\"XBand\":case\"YBand\":case\"X\":case\"Y\":case\"Numeric\":return x;case\"Color\":return m}}const pn=[F,S],mn=new Set(pn),yn=fn.filter(n=>!mn.has(n)),vn=new Set(yn),wn=new Set(an.concat(pn)),Mn=new Set(on);Mn.delete(y),Mn.delete(b),Mn.delete(x),Mn.delete(C),Mn.delete(T);const bn={align:mn,base:new Set([y]),clamp:un,constant:new Set([M]),domain:hn,exponent:new Set([v]),interpolate:vn,nice:new Set(an.concat([D,C])),padding:wn,paddingInner:new Set([S]),paddingOuter:mn,range:hn,reverse:hn,round:wn,scheme:vn,type:hn,unknown:new Set([k]),zero:Mn};function xn(n){return un.has(n.type)}function Tn(n){return t=\"zero\",e=n.type,bn[t].has(e);var t,e}const Dn=new Set([\"time\",\"date\",\"datetime\",\"timestamp\"]);function Cn(n,t=\"\"){return E(n)||\"Numeric\"===n?Dn.has(t.toLowerCase())?\"temporal\":\"quantitative\":\"nominal\"}function Nn(n,t){var e;if(l(t))return{...t,axis:!1,legend:!1,scale:!1,title:\"\"};const r={...t,title:f(t)?null!=(e=t.title)?e:t.field:\"\",type:h(t)?t.type:Cn(n,t.field)},i=function(n,t){if(h(t)&&J(t.scale)){const{scale:e={},type:r,bin:i}=t,{type:o=dn(n,r,i)}=e;if(void 0===o)return!1;const a={...e,type:o};return xn(a)&&(void 0===a.nice&&(a.nice=!ln.has(o)),void 0===a.clamp&&(a.clamp=!0)),Tn(a)&&void 0===a.zero&&(a.zero=!0),a}return!1}(n,r),o=function(n){const{formatType:t,formatInLocalTime:e,format:r,type:i,scaleType:o}=n;let a;return void 0!==t?a=t:\"quantitative\"===i?a=\"number\":\"temporal\"===i||\"time\"===o||\"utc\"===o?a=\"time\":void 0!==r&&r.length>0&&(a=\"number\"),\"time\"===a?{formatType:\"time\",formatInLocalTime:e||void 0===e&&\"time\"===o,format:r}:{formatType:a,format:r}}({...t,scaleType:i?i.type:void 0}),a={...r,...o,scale:i},u=gn(n,a),c=function(n,t){return\"legend\"in t&&void 0!==t.legend?t.legend:!E(n)&&\"Text\"!==n&&{}}(n,a);return{...a,axis:u,legend:c}}var kn=Math.sqrt(50),Fn=Math.sqrt(10),Sn=Math.sqrt(2),Un=function(n,t,e){var r,i,o,a,u=-1;if(e=+e,(n=+n)===(t=+t)&&e>0)return[n];if((r=t<n)&&(i=n,n=t,t=i),0===(a=An(n,t,e))||!isFinite(a))return[];if(a>0){let e=Math.round(n/a),r=Math.round(t/a);for(e*a<n&&++e,r*a>t&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)*a}else{a=-a;let e=Math.round(n*a),r=Math.round(t*a);for(e/a<n&&++e,r/a>t&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)/a}return r&&o.reverse(),o};function An(n,t,e){var r=(t-n)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=kn?10:o>=Fn?5:o>=Sn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=kn?10:o>=Fn?5:o>=Sn?2:1)}function En(n,t,e){var r=Math.abs(t-n)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=kn?i*=10:o>=Fn?i*=5:o>=Sn&&(i*=2),t<n?-i:i}var On=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN},Yn=function(n){let t=n,e=n;function r(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)<0?r=o+1:i=o}return r}return 1===n.length&&(t=(t,e)=>n(t)-e,e=function(n){return(t,e)=>On(n(t),e)}(n)),{left:r,center:function(n,e,i,o){null==i&&(i=0),null==o&&(o=n.length);const a=r(n,e,i,o-1);return a>i&&t(n[a-1],e)>-t(n[a],e)?a-1:a},right:function(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)>0?i=o:r=o+1}return r}}};var qn=function(n){return null===n?NaN:+n};const In=Yn(On),Ln=In.right;In.left,Yn(qn).center;var zn=Ln,Hn=function(n,t,e){n.prototype=t.prototype=e,e.constructor=n};function Vn(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function jn(){}var Pn=\"\\\\s*([+-]?\\\\d+)\\\\s*\",Wn=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",$n=\"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",Rn=/^#([0-9a-f]{3,8})$/,Xn=new RegExp(\"^rgb\\\\(\"+[Pn,Pn,Pn]+\"\\\\)$\"),Bn=new RegExp(\"^rgb\\\\(\"+[$n,$n,$n]+\"\\\\)$\"),Zn=new RegExp(\"^rgba\\\\(\"+[Pn,Pn,Pn,Wn]+\"\\\\)$\"),_n=new RegExp(\"^rgba\\\\(\"+[$n,$n,$n,Wn]+\"\\\\)$\"),Gn=new RegExp(\"^hsl\\\\(\"+[Wn,$n,$n]+\"\\\\)$\"),Jn=new RegExp(\"^hsla\\\\(\"+[Wn,$n,$n,Wn]+\"\\\\)$\"),Qn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Kn(){return this.rgb().formatHex()}function nt(){return this.rgb().formatRgb()}function tt(n){var t,e;return n=(n+\"\").trim().toLowerCase(),(t=Rn.exec(n))?(e=t[1].length,t=parseInt(t[1],16),6===e?et(t):3===e?new at(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===e?rt(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===e?rt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Xn.exec(n))?new at(t[1],t[2],t[3],1):(t=Bn.exec(n))?new at(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Zn.exec(n))?rt(t[1],t[2],t[3],t[4]):(t=_n.exec(n))?rt(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Gn.exec(n))?lt(t[1],t[2]/100,t[3]/100,1):(t=Jn.exec(n))?lt(t[1],t[2]/100,t[3]/100,t[4]):Qn.hasOwnProperty(n)?et(Qn[n]):\"transparent\"===n?new at(NaN,NaN,NaN,0):null}function et(n){return new at(n>>16&255,n>>8&255,255&n,1)}function rt(n,t,e,r){return r<=0&&(n=t=e=NaN),new at(n,t,e,r)}function it(n){return n instanceof jn||(n=tt(n)),n?new at((n=n.rgb()).r,n.g,n.b,n.opacity):new at}function ot(n,t,e,r){return 1===arguments.length?it(n):new at(n,t,e,null==r?1:r)}function at(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}function ut(){return\"#\"+st(this.r)+st(this.g)+st(this.b)}function ct(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?\"rgb(\":\"rgba(\")+Math.max(0,Math.min(255,Math.round(this.r)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.g)||0))+\", \"+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?\")\":\", \"+n+\")\")}function st(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?\"0\":\"\")+n.toString(16)}function lt(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new gt(n,t,e,r)}function ft(n){if(n instanceof gt)return new gt(n.h,n.s,n.l,n.opacity);if(n instanceof jn||(n=tt(n)),!n)return new gt;if(n instanceof gt)return n;var t=(n=n.rgb()).r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),o=Math.max(t,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=t===o?(e-r)/u+6*(e<r):e===o?(r-t)/u+2:(t-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new gt(a,u,c,n.opacity)}function ht(n,t,e,r){return 1===arguments.length?ft(n):new gt(n,t,e,null==r?1:r)}function gt(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function dt(n,t,e){return 255*(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)}function pt(n,t,e,r,i){var o=n*n,a=o*n;return((1-3*n+3*o-a)*t+(4-6*o+3*a)*e+(1+3*n+3*o-3*a)*r+a*i)/6}Hn(jn,tt,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:Kn,formatHex:Kn,formatHsl:function(){return ft(this).formatHsl()},formatRgb:nt,toString:nt}),Hn(at,ot,Vn(jn,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new at(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new at(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ut,formatHex:ut,formatRgb:ct,toString:ct})),Hn(gt,ht,Vn(jn,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new gt(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new gt(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new at(dt(n>=240?n-240:n+120,i,r),dt(n,i,r),dt(n<120?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?\"hsl(\":\"hsla(\")+(this.h||0)+\", \"+100*(this.s||0)+\"%, \"+100*(this.l||0)+\"%\"+(1===n?\")\":\", \"+n+\")\")}}));var mt=n=>()=>n;function yt(n,t){return function(e){return n+e*t}}function vt(n,t){var e=t-n;return e?yt(n,e>180||e<-180?e-360*Math.round(e/360):e):mt(isNaN(n)?t:n)}function wt(n){return 1==(n=+n)?Mt:function(t,e){return e-t?function(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}(t,e,n):mt(isNaN(t)?e:t)}}function Mt(n,t){var e=t-n;return e?yt(n,e):mt(isNaN(n)?t:n)}var bt=function n(t){var e=wt(t);function r(n,t){var r=e((n=ot(n)).r,(t=ot(t)).r),i=e(n.g,t.g),o=e(n.b,t.b),a=Mt(n.opacity,t.opacity);return function(t){return n.r=r(t),n.g=i(t),n.b=o(t),n.opacity=a(t),n+\"\"}}return r.gamma=n,r}(1);function xt(n){return function(t){var e,r,i=t.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=ot(t[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=n(o),a=n(a),u=n(u),r.opacity=1,function(n){return r.r=o(n),r.g=a(n),r.b=u(n),r+\"\"}}}xt((function(n){var t=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),i=n[r],o=n[r+1],a=r>0?n[r-1]:2*i-o,u=r<t-1?n[r+2]:2*o-i;return pt((e-r/t)*t,a,i,o,u)}})),xt((function(n){var t=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*t),i=n[(r+t-1)%t],o=n[r%t],a=n[(r+1)%t],u=n[(r+2)%t];return pt((e-r/t)*t,i,o,a,u)}}));var Tt=function(n,t){t||(t=[]);var e,r=n?Math.min(t.length,n.length):0,i=t.slice();return function(o){for(e=0;e<r;++e)i[e]=n[e]*(1-o)+t[e]*o;return i}};function Dt(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Ct(n,t){var e,r=t?t.length:0,i=n?Math.min(r,n.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Et(n[e],t[e]);for(;e<r;++e)a[e]=t[e];return function(n){for(e=0;e<i;++e)a[e]=o[e](n);return a}}var Nt=function(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}},kt=function(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}},Ft=function(n,t){var e,r={},i={};for(e in null!==n&&\"object\"==typeof n||(n={}),null!==t&&\"object\"==typeof t||(t={}),t)e in n?r[e]=Et(n[e],t[e]):i[e]=t[e];return function(n){for(e in r)i[e]=r[e](n);return i}},St=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,Ut=new RegExp(St.source,\"g\");var At=function(n,t){var e,r,i,o=St.lastIndex=Ut.lastIndex=0,a=-1,u=[],c=[];for(n+=\"\",t+=\"\";(e=St.exec(n))&&(r=Ut.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:kt(e,r)})),o=Ut.lastIndex;return o<t.length&&(i=t.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(n){return function(t){return n(t)+\"\"}}(c[0].x):function(n){return function(){return n}}(t):(t=c.length,function(n){for(var e,r=0;r<t;++r)u[(e=c[r]).i]=e.x(n);return u.join(\"\")})},Et=function(n,t){var e,r=typeof t;return null==t||\"boolean\"===r?mt(t):(\"number\"===r?kt:\"string\"===r?(e=tt(t))?(t=e,bt):At:t instanceof tt?bt:t instanceof Date?Nt:Dt(t)?Tt:Array.isArray(t)?Ct:\"function\"!=typeof t.valueOf&&\"function\"!=typeof t.toString||isNaN(t)?Ft:kt)(n,t)},Ot=function(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}};function Yt(n){return+n}var qt=[0,1];function It(n){return n}function Lt(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:(e=isNaN(t)?NaN:.5,function(){return e});var e}function zt(n,t,e){var r=n[0],i=n[1],o=t[0],a=t[1];return i<r?(r=Lt(i,r),o=e(a,o)):(r=Lt(r,i),o=e(o,a)),function(n){return o(r(n))}}function Ht(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Lt(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(t){var e=zn(n,t,1,r)-1;return o[e](i[e](t))}}function Vt(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function jt(){var n,t,e,r,i,o,a=qt,u=qt,c=Et,s=It;function l(){var n,t,e,c=Math.min(a.length,u.length);return s!==It&&(n=a[0],t=a[c-1],n>t&&(e=n,n=t,t=e),s=function(e){return Math.max(n,Math.min(t,e))}),r=c>2?Ht:zt,i=o=null,f}function f(t){return isNaN(t=+t)?e:(i||(i=r(a.map(n),u,c)))(n(s(t)))}return f.invert=function(e){return s(t((o||(o=r(u,a.map(n),kt)))(e)))},f.domain=function(n){return arguments.length?(a=Array.from(n,Yt),l()):a.slice()},f.range=function(n){return arguments.length?(u=Array.from(n),l()):u.slice()},f.rangeRound=function(n){return u=Array.from(n),c=Ot,l()},f.clamp=function(n){return arguments.length?(s=!!n||It,l()):s!==It},f.interpolate=function(n){return arguments.length?(c=n,l()):c},f.unknown=function(n){return arguments.length?(e=n,f):e},function(e,r){return n=e,t=r,l()}}function Pt(){return jt()(It,It)}function Wt(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n)}return this}var $t=/^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;function Rt(n){if(!(t=$t.exec(n)))throw new Error(\"invalid format: \"+n);var t;return new Xt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Xt(n){this.fill=void 0===n.fill?\" \":n.fill+\"\",this.align=void 0===n.align?\">\":n.align+\"\",this.sign=void 0===n.sign?\"-\":n.sign+\"\",this.symbol=void 0===n.symbol?\"\":n.symbol+\"\",this.zero=!!n.zero,this.width=void 0===n.width?void 0:+n.width,this.comma=!!n.comma,this.precision=void 0===n.precision?void 0:+n.precision,this.trim=!!n.trim,this.type=void 0===n.type?\"\":n.type+\"\"}Rt.prototype=Xt.prototype,Xt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?\"0\":\"\")+(void 0===this.width?\"\":Math.max(1,0|this.width))+(this.comma?\",\":\"\")+(void 0===this.precision?\"\":\".\"+Math.max(0,0|this.precision))+(this.trim?\"~\":\"\")+this.type};function Bt(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf(\"e\"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}var Zt,_t,Gt,Jt,Qt=function(n){return(n=Bt(Math.abs(n)))?n[1]:NaN},Kt=function(n,t){var e=Bt(n,t);if(!e)return n+\"\";var r=e[0],i=e[1];return i<0?\"0.\"+new Array(-i).join(\"0\")+r:r.length>i+1?r.slice(0,i+1)+\".\"+r.slice(i+1):r+new Array(i-r.length+2).join(\"0\")},ne={\"%\":(n,t)=>(100*n).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+\"\",d:function(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString(\"en\").replace(/,/g,\"\"):n.toString(10)},e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>Kt(100*n,t),r:Kt,s:function(n,t){var e=Bt(n,t);if(!e)return n+\"\";var r=e[0],i=e[1],o=i-(Zt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join(\"0\"):o>0?r.slice(0,o)+\".\"+r.slice(o):\"0.\"+new Array(1-o).join(\"0\")+Bt(n,Math.max(0,t+o-1))[0]},X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)},te=function(n){return n},ee=Array.prototype.map,re=[\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];_t=function(n){var t,e,r=void 0===n.grouping||void 0===n.thousands?te:(t=ee.call(n.grouping,Number),e=n.thousands+\"\",function(n,r){for(var i=n.length,o=[],a=0,u=t[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=t[a=(a+1)%t.length];return o.reverse().join(e)}),i=void 0===n.currency?\"\":n.currency[0]+\"\",o=void 0===n.currency?\"\":n.currency[1]+\"\",a=void 0===n.decimal?\".\":n.decimal+\"\",u=void 0===n.numerals?te:function(n){return function(t){return t.replace(/[0-9]/g,(function(t){return n[+t]}))}}(ee.call(n.numerals,String)),c=void 0===n.percent?\"%\":n.percent+\"\",s=void 0===n.minus?\"−\":n.minus+\"\",l=void 0===n.nan?\"NaN\":n.nan+\"\";function f(n){var t=(n=Rt(n)).fill,e=n.align,f=n.sign,h=n.symbol,g=n.zero,d=n.width,p=n.comma,m=n.precision,y=n.trim,v=n.type;\"n\"===v?(p=!0,v=\"g\"):ne[v]||(void 0===m&&(m=12),y=!0,v=\"g\"),(g||\"0\"===t&&\"=\"===e)&&(g=!0,t=\"0\",e=\"=\");var w=\"$\"===h?i:\"#\"===h&&/[boxX]/.test(v)?\"0\"+v.toLowerCase():\"\",M=\"$\"===h?o:/[%p]/.test(v)?c:\"\",b=ne[v],x=/[defgprs%]/.test(v);function T(n){var i,o,c,h=w,T=M;if(\"c\"===v)T=b(n)+T,n=\"\";else{var D=(n=+n)<0||1/n<0;if(n=isNaN(n)?l:b(Math.abs(n),m),y&&(n=function(n){n:for(var t,e=n.length,r=1,i=-1;r<e;++r)switch(n[r]){case\".\":i=t=r;break;case\"0\":0===i&&(i=r),t=r;break;default:if(!+n[r])break n;i>0&&(i=0)}return i>0?n.slice(0,i)+n.slice(t+1):n}(n)),D&&0==+n&&\"+\"!==f&&(D=!1),h=(D?\"(\"===f?f:s:\"-\"===f||\"(\"===f?\"\":f)+h,T=(\"s\"===v?re[8+Zt/3]:\"\")+T+(D&&\"(\"===f?\")\":\"\"),x)for(i=-1,o=n.length;++i<o;)if(48>(c=n.charCodeAt(i))||c>57){T=(46===c?a+n.slice(i+1):n.slice(i))+T,n=n.slice(0,i);break}}p&&!g&&(n=r(n,1/0));var C=h.length+n.length+T.length,N=C<d?new Array(d-C+1).join(t):\"\";switch(p&&g&&(n=r(N+n,N.length?d-T.length:1/0),N=\"\"),e){case\"<\":n=h+n+T+N;break;case\"=\":n=h+N+n+T;break;case\"^\":n=N.slice(0,C=N.length>>1)+h+n+T+N.slice(C);break;default:n=N+h+n+T}return u(n)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),T.toString=function(){return n+\"\"},T}return{format:f,formatPrefix:function(n,t){var e=f(((n=Rt(n)).type=\"f\",n)),r=3*Math.max(-8,Math.min(8,Math.floor(Qt(t)/3))),i=Math.pow(10,-r),o=re[8+r/3];return function(n){return e(i*n)+o}}}}({thousands:\",\",grouping:[3],currency:[\"$\",\"\"]}),Gt=_t.format,Jt=_t.formatPrefix;function ie(n,t,e,r){var i,o=En(n,t,e);switch((r=Rt(null==r?\",f\":r)).type){case\"s\":var a=Math.max(Math.abs(n),Math.abs(t));return null!=r.precision||isNaN(i=function(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qt(t)/3)))-Qt(Math.abs(n)))}(o,a))||(r.precision=i),Jt(r,a);case\"\":case\"e\":case\"g\":case\"p\":case\"r\":null!=r.precision||isNaN(i=function(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,Qt(t)-Qt(n))+1}(o,Math.max(Math.abs(n),Math.abs(t))))||(r.precision=i-(\"e\"===r.type));break;case\"f\":case\"%\":null!=r.precision||isNaN(i=function(n){return Math.max(0,-Qt(Math.abs(n)))}(o))||(r.precision=i-2*(\"%\"===r.type))}return Gt(r)}function oe(n){var t=n.domain;return n.ticks=function(n){var e=t();return Un(e[0],e[e.length-1],null==n?10:n)},n.tickFormat=function(n,e){var r=t();return ie(r[0],r[r.length-1],null==n?10:n,e)},n.nice=function(e){null==e&&(e=10);var r,i,o=t(),a=0,u=o.length-1,c=o[a],s=o[u],l=10;for(s<c&&(i=c,c=s,s=i,i=a,a=u,u=i);l-- >0;){if((i=An(c,s,e))===r)return o[a]=c,o[u]=s,t(o);if(i>0)c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i}r=i}return n},n}function ae(){var n=Pt();return n.copy=function(){return Vt(n,ae())},Wt.apply(n,arguments),oe(n)}function ue(n,t){var e,r=0,i=(n=n.slice()).length-1,o=n[r],a=n[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),n[r]=t.floor(o),n[i]=t.ceil(a),n}function ce(n){return Math.log(n)}function se(n){return Math.exp(n)}function le(n){return-Math.log(-n)}function fe(n){return-Math.exp(-n)}function he(n){return isFinite(n)?+(\"1e\"+n):n<0?0:n}function ge(n){return function(t){return-n(-t)}}function de(n){var t,e,r=n(ce,se),i=r.domain,o=10;function a(){return t=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}(o),e=function(n){return 10===n?he:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}(o),i()[0]<0?(t=ge(t),e=ge(e),n(le,fe)):n(ce,se),r}return r.base=function(n){return arguments.length?(o=+n,a()):o},r.domain=function(n){return arguments.length?(i(n),a()):i()},r.ticks=function(n){var r,a=i(),u=a[0],c=a[a.length-1];(r=c<u)&&(h=u,u=c,c=h);var s,l,f,h=t(u),g=t(c),d=null==n?10:+n,p=[];if(!(o%1)&&g-h<d){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(l=1,s=e(h);l<o;++l)if(!((f=s*l)<u)){if(f>c)break;p.push(f)}}else for(;h<=g;++h)for(l=o-1,s=e(h);l>=1;--l)if(!((f=s*l)<u)){if(f>c)break;p.push(f)}2*p.length<d&&(p=Un(u,c,d))}else p=Un(h,g,Math.min(g-h,d)).map(e);return r?p.reverse():p},r.tickFormat=function(n,i){if(null==i&&(i=10===o?\".0e\":\",\"),\"function\"!=typeof i&&(i=Gt(i)),n===1/0)return i;null==n&&(n=10);var a=Math.max(1,o*n/r.ticks().length);return function(n){var r=n/e(Math.round(t(n)));return r*o<o-.5&&(r*=o),r<=a?i(n):\"\"}},r.nice=function(){return i(ue(i(),{floor:function(n){return e(Math.floor(t(n)))},ceil:function(n){return e(Math.ceil(t(n)))}}))},r}function pe(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function me(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function ye(n){return n<0?-n*n:n*n}function ve(n){var t=n(It,It),e=1;function r(){return 1===e?n(It,It):.5===e?n(me,ye):n(pe(e),pe(1/e))}return t.exponent=function(n){return arguments.length?(e=+n,r()):e},oe(t)}function we(){var n=ve(jt());return n.copy=function(){return Vt(n,we()).exponent(n.exponent())},Wt.apply(n,arguments),n}var Me=new Date,be=new Date;function xe(n,t,e,r){function i(t){return n(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return n(t=new Date(+t)),t},i.ceil=function(e){return n(e=new Date(e-1)),t(e,1),n(e),e},i.round=function(n){var t=i(n),e=i.ceil(n);return n-t<e-n?t:e},i.offset=function(n,e){return t(n=new Date(+n),null==e?1:Math.floor(e)),n},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),t(e,o),n(e)}while(a<e&&e<r);return u},i.filter=function(e){return xe((function(t){if(t>=t)for(;n(t),!e(t);)t.setTime(t-1)}),(function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;t(n,-1),!e(n););else for(;--r>=0;)for(;t(n,1),!e(n););}))},e&&(i.count=function(t,r){return Me.setTime(+t),be.setTime(+r),n(Me),n(be),Math.floor(e(Me,be))},i.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?i.filter(r?function(t){return r(t)%n==0}:function(t){return i.count(0,t)%n==0}):i:null}),i}var Te=xe((function(n){n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,t){n.setFullYear(n.getFullYear()+t)}),(function(n,t){return t.getFullYear()-n.getFullYear()}),(function(n){return n.getFullYear()}));Te.every=function(n){return isFinite(n=Math.floor(n))&&n>0?xe((function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e*n)})):null};var De=Te,Ce=(Te.range,xe((function(n){n.setDate(1),n.setHours(0,0,0,0)}),(function(n,t){n.setMonth(n.getMonth()+t)}),(function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()}))),Ne=Ce;Ce.range;function ke(n){return xe((function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)}),(function(n,t){n.setDate(n.getDate()+7*t)}),(function(n,t){return(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/6048e5}))}var Fe=ke(0),Se=ke(1),Ue=ke(2),Ae=ke(3),Ee=ke(4),Oe=ke(5),Ye=ke(6),qe=(Fe.range,Se.range,Ue.range,Ae.range,Ee.range,Oe.range,Ye.range,xe(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5,n=>n.getDate()-1)),Ie=qe,Le=(qe.range,xe((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds()-6e4*n.getMinutes())}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getHours()}))),ze=Le,He=(Le.range,xe((function(n){n.setTime(n-n.getMilliseconds()-1e3*n.getSeconds())}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getMinutes()}))),Ve=He,je=(He.range,xe((function(n){n.setTime(n-n.getMilliseconds())}),(function(n,t){n.setTime(+n+1e3*t)}),(function(n,t){return(t-n)/1e3}),(function(n){return n.getUTCSeconds()}))),Pe=je,We=(je.range,xe((function(){}),(function(n,t){n.setTime(+n+t)}),(function(n,t){return t-n})));We.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?xe((function(t){t.setTime(Math.floor(t/n)*n)}),(function(t,e){t.setTime(+t+e*n)}),(function(t,e){return(e-t)/n})):We:null};var $e=We;We.range;function Re(n){return xe((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+7*t)}),(function(n,t){return(t-n)/6048e5}))}var Xe=Re(0),Be=Re(1),Ze=Re(2),_e=Re(3),Ge=Re(4),Je=Re(5),Qe=Re(6),Ke=(Xe.range,Be.range,Ze.range,_e.range,Ge.range,Je.range,Qe.range,xe((function(n){n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+t)}),(function(n,t){return(t-n)/864e5}),(function(n){return n.getUTCDate()-1}))),nr=Ke,tr=(Ke.range,xe((function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)}),(function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()}),(function(n){return n.getUTCFullYear()})));tr.every=function(n){return isFinite(n=Math.floor(n))&&n>0?xe((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)})):null};var er=tr;tr.range;function rr(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function ir(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function or(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}var ar,ur,cr,sr={\"-\":\"\",_:\" \",0:\"0\"},lr=/^\\s*\\d+/,fr=/^%/,hr=/[\\\\^$*+?|[\\]().{}]/g;function gr(n,t,e){var r=n<0?\"-\":\"\",i=(r?-n:n)+\"\",o=i.length;return r+(o<e?new Array(e-o+1).join(t)+i:i)}function dr(n){return n.replace(hr,\"\\\\$&\")}function pr(n){return new RegExp(\"^(?:\"+n.map(dr).join(\"|\")+\")\",\"i\")}function mr(n){return new Map(n.map((n,t)=>[n.toLowerCase(),t]))}function yr(n,t,e){var r=lr.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function vr(n,t,e){var r=lr.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function wr(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function Mr(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function br(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function xr(n,t,e){var r=lr.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Tr(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Dr(n,t,e){var r=/^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||\"00\")),e+r[0].length):-1}function Cr(n,t,e){var r=lr.exec(t.slice(e,e+1));return r?(n.q=3*r[0]-3,e+r[0].length):-1}function Nr(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function kr(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function Fr(n,t,e){var r=lr.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function Sr(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Ur(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function Ar(n,t,e){var r=lr.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function Er(n,t,e){var r=lr.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function Or(n,t,e){var r=lr.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Yr(n,t,e){var r=fr.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function qr(n,t,e){var r=lr.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function Ir(n,t,e){var r=lr.exec(t.slice(e));return r?(n.s=+r[0],e+r[0].length):-1}function Lr(n,t){return gr(n.getDate(),t,2)}function zr(n,t){return gr(n.getHours(),t,2)}function Hr(n,t){return gr(n.getHours()%12||12,t,2)}function Vr(n,t){return gr(1+Ie.count(De(n),n),t,3)}function jr(n,t){return gr(n.getMilliseconds(),t,3)}function Pr(n,t){return jr(n,t)+\"000\"}function Wr(n,t){return gr(n.getMonth()+1,t,2)}function $r(n,t){return gr(n.getMinutes(),t,2)}function Rr(n,t){return gr(n.getSeconds(),t,2)}function Xr(n){var t=n.getDay();return 0===t?7:t}function Br(n,t){return gr(Fe.count(De(n)-1,n),t,2)}function Zr(n){var t=n.getDay();return t>=4||0===t?Ee(n):Ee.ceil(n)}function _r(n,t){return n=Zr(n),gr(Ee.count(De(n),n)+(4===De(n).getDay()),t,2)}function Gr(n){return n.getDay()}function Jr(n,t){return gr(Se.count(De(n)-1,n),t,2)}function Qr(n,t){return gr(n.getFullYear()%100,t,2)}function Kr(n,t){return gr((n=Zr(n)).getFullYear()%100,t,2)}function ni(n,t){return gr(n.getFullYear()%1e4,t,4)}function ti(n,t){var e=n.getDay();return gr((n=e>=4||0===e?Ee(n):Ee.ceil(n)).getFullYear()%1e4,t,4)}function ei(n){var t=n.getTimezoneOffset();return(t>0?\"-\":(t*=-1,\"+\"))+gr(t/60|0,\"0\",2)+gr(t%60,\"0\",2)}function ri(n,t){return gr(n.getUTCDate(),t,2)}function ii(n,t){return gr(n.getUTCHours(),t,2)}function oi(n,t){return gr(n.getUTCHours()%12||12,t,2)}function ai(n,t){return gr(1+nr.count(er(n),n),t,3)}function ui(n,t){return gr(n.getUTCMilliseconds(),t,3)}function ci(n,t){return ui(n,t)+\"000\"}function si(n,t){return gr(n.getUTCMonth()+1,t,2)}function li(n,t){return gr(n.getUTCMinutes(),t,2)}function fi(n,t){return gr(n.getUTCSeconds(),t,2)}function hi(n){var t=n.getUTCDay();return 0===t?7:t}function gi(n,t){return gr(Xe.count(er(n)-1,n),t,2)}function di(n){var t=n.getUTCDay();return t>=4||0===t?Ge(n):Ge.ceil(n)}function pi(n,t){return n=di(n),gr(Ge.count(er(n),n)+(4===er(n).getUTCDay()),t,2)}function mi(n){return n.getUTCDay()}function yi(n,t){return gr(Be.count(er(n)-1,n),t,2)}function vi(n,t){return gr(n.getUTCFullYear()%100,t,2)}function wi(n,t){return gr((n=di(n)).getUTCFullYear()%100,t,2)}function Mi(n,t){return gr(n.getUTCFullYear()%1e4,t,4)}function bi(n,t){var e=n.getUTCDay();return gr((n=e>=4||0===e?Ge(n):Ge.ceil(n)).getUTCFullYear()%1e4,t,4)}function xi(){return\"+0000\"}function Ti(){return\"%\"}function Di(n){return+n}function Ci(n){return Math.floor(+n/1e3)}!function(n){ar=function(n){var t=n.dateTime,e=n.date,r=n.time,i=n.periods,o=n.days,a=n.shortDays,u=n.months,c=n.shortMonths,s=pr(i),l=mr(i),f=pr(o),h=mr(o),g=pr(a),d=mr(a),p=pr(u),m=mr(u),y=pr(c),v=mr(c),w={a:function(n){return a[n.getDay()]},A:function(n){return o[n.getDay()]},b:function(n){return c[n.getMonth()]},B:function(n){return u[n.getMonth()]},c:null,d:Lr,e:Lr,f:Pr,g:Kr,G:ti,H:zr,I:Hr,j:Vr,L:jr,m:Wr,M:$r,p:function(n){return i[+(n.getHours()>=12)]},q:function(n){return 1+~~(n.getMonth()/3)},Q:Di,s:Ci,S:Rr,u:Xr,U:Br,V:_r,w:Gr,W:Jr,x:null,X:null,y:Qr,Y:ni,Z:ei,\"%\":Ti},M={a:function(n){return a[n.getUTCDay()]},A:function(n){return o[n.getUTCDay()]},b:function(n){return c[n.getUTCMonth()]},B:function(n){return u[n.getUTCMonth()]},c:null,d:ri,e:ri,f:ci,g:wi,G:bi,H:ii,I:oi,j:ai,L:ui,m:si,M:li,p:function(n){return i[+(n.getUTCHours()>=12)]},q:function(n){return 1+~~(n.getUTCMonth()/3)},Q:Di,s:Ci,S:fi,u:hi,U:gi,V:pi,w:mi,W:yi,x:null,X:null,y:vi,Y:Mi,Z:xi,\"%\":Ti},b={a:function(n,t,e){var r=g.exec(t.slice(e));return r?(n.w=d.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(n,t,e){var r=f.exec(t.slice(e));return r?(n.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(n,t,e){var r=y.exec(t.slice(e));return r?(n.m=v.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(n,t,e){var r=p.exec(t.slice(e));return r?(n.m=m.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(n,e,r){return D(n,t,e,r)},d:kr,e:kr,f:Or,g:Tr,G:xr,H:Sr,I:Sr,j:Fr,L:Er,m:Nr,M:Ur,p:function(n,t,e){var r=s.exec(t.slice(e));return r?(n.p=l.get(r[0].toLowerCase()),e+r[0].length):-1},q:Cr,Q:qr,s:Ir,S:Ar,u:vr,U:wr,V:Mr,w:yr,W:br,x:function(n,t,r){return D(n,e,t,r)},X:function(n,t,e){return D(n,r,t,e)},y:Tr,Y:xr,Z:Dr,\"%\":Yr};function x(n,t){return function(e){var r,i,o,a=[],u=-1,c=0,s=n.length;for(e instanceof Date||(e=new Date(+e));++u<s;)37===n.charCodeAt(u)&&(a.push(n.slice(c,u)),null!=(i=sr[r=n.charAt(++u)])?r=n.charAt(++u):i=\"e\"===r?\" \":\"0\",(o=t[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(n.slice(c,u)),a.join(\"\")}}function T(n,t){return function(e){var r,i,o=or(1900,void 0,1);if(D(o,n,e+=\"\",0)!=e.length)return null;if(\"Q\"in o)return new Date(o.Q);if(\"s\"in o)return new Date(1e3*o.s+(\"L\"in o?o.L:0));if(t&&!(\"Z\"in o)&&(o.Z=0),\"p\"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m=\"q\"in o?o.q:0),\"V\"in o){if(o.V<1||o.V>53)return null;\"w\"in o||(o.w=1),\"Z\"in o?(i=(r=ir(or(o.y,0,1))).getUTCDay(),r=i>4||0===i?Be.ceil(r):Be(r),r=nr.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=rr(or(o.y,0,1))).getDay(),r=i>4||0===i?Se.ceil(r):Se(r),r=Ie.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else(\"W\"in o||\"U\"in o)&&(\"w\"in o||(o.w=\"u\"in o?o.u%7:\"W\"in o?1:0),i=\"Z\"in o?ir(or(o.y,0,1)).getUTCDay():rr(or(o.y,0,1)).getDay(),o.m=0,o.d=\"W\"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return\"Z\"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,ir(o)):rr(o)}}function D(n,t,e,r){for(var i,o,a=0,u=t.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=b[i in sr?t.charAt(a++):i])||(r=o(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return w.x=x(e,w),w.X=x(r,w),w.c=x(t,w),M.x=x(e,M),M.X=x(r,M),M.c=x(t,M),{format:function(n){var t=x(n+=\"\",w);return t.toString=function(){return n},t},parse:function(n){var t=T(n+=\"\",!1);return t.toString=function(){return n},t},utcFormat:function(n){var t=x(n+=\"\",M);return t.toString=function(){return n},t},utcParse:function(n){var t=T(n+=\"\",!0);return t.toString=function(){return n},t}}}(n),ur=ar.format,ar.parse,cr=ar.utcFormat,ar.utcParse}({dateTime:\"%x, %X\",date:\"%-m/%-d/%Y\",time:\"%-I:%M:%S %p\",periods:[\"AM\",\"PM\"],days:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],shortDays:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],months:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"],shortMonths:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"]});function Ni(n){return new Date(n)}function ki(n){return n instanceof Date?+n:+new Date(+n)}function Fi(n,t,e,r,i,o,a,u,c){var s=Pt(),l=s.invert,f=s.domain,h=c(\".%L\"),g=c(\":%S\"),d=c(\"%I:%M\"),p=c(\"%I %p\"),m=c(\"%a %d\"),y=c(\"%b %d\"),v=c(\"%B\"),w=c(\"%Y\"),M=[[a,1,1e3],[a,5,5e3],[a,15,15e3],[a,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,864e5],[r,2,1728e5],[e,1,6048e5],[t,1,2592e6],[t,3,7776e6],[n,1,31536e6]];function b(u){return(a(u)<u?h:o(u)<u?g:i(u)<u?d:r(u)<u?p:t(u)<u?e(u)<u?m:y:n(u)<u?v:w)(u)}function x(t,e,r){if(null==t&&(t=10),\"number\"==typeof t){var i,o=Math.abs(r-e)/t,a=Yn((function(n){return n[2]})).right(M,o);return a===M.length?(i=En(e/31536e6,r/31536e6,t),t=n):a?(i=(a=M[o/M[a-1][2]<M[a][2]/o?a-1:a])[1],t=a[0]):(i=Math.max(En(e,r,t),1),t=u),t.every(i)}return t}return s.invert=function(n){return new Date(l(n))},s.domain=function(n){return arguments.length?f(Array.from(n,ki)):f().map(Ni)},s.ticks=function(n){var t,e=f(),r=e[0],i=e[e.length-1],o=i<r;return o&&(t=r,r=i,i=t),t=(t=x(n,r,i))?t.range(r,i+1):[],o?t.reverse():t},s.tickFormat=function(n,t){return null==t?b:c(t)},s.nice=function(n){var t=f();return(n=x(n,t[0],t[t.length-1]))?f(ue(t,n)):s},s.copy=function(){return Vt(s,Fi(n,t,e,r,i,o,a,u,c))},s}var Si=xe((function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCMonth(n.getUTCMonth()+t)}),(function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()})),Ui=Si,Ai=(Si.range,xe((function(n){n.setUTCMinutes(0,0,0)}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getUTCHours()}))),Ei=Ai,Oi=(Ai.range,xe((function(n){n.setUTCSeconds(0,0)}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getUTCMinutes()}))),Yi=Oi;Oi.range;function qi(n,t,e=qn){if(r=n.length){if((t=+t)<=0||r<2)return+e(n[0],0,n);if(t>=1)return+e(n[r-1],r-1,n);var r,i=(r-1)*t,o=Math.floor(i),a=+e(n[o],o,n);return a+(+e(n[o+1],o+1,n)-a)*(i-o)}}const Ii=Symbol(\"implicit\");function Li(){var n=new Map,t=[],e=[],r=Ii;function i(i){var o=i+\"\",a=n.get(o);if(!a){if(r!==Ii)return r;n.set(o,a=t.push(i))}return e[(a-1)%e.length]}return i.domain=function(e){if(!arguments.length)return t.slice();t=[],n=new Map;for(const r of e){const e=r+\"\";n.has(e)||n.set(e,t.push(r))}return i},i.range=function(n){return arguments.length?(e=Array.from(n),i):e.slice()},i.unknown=function(n){return arguments.length?(r=n,i):r},i.copy=function(){return Li(t,e).unknown(r)},Wt.apply(i,arguments),i}var zi=function(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((t-n)/e)),o=new Array(i);++r<i;)o[r]=n+r*e;return o};function Hi(){var n,t,e=Li().unknown(void 0),r=e.domain,i=e.range,o=0,a=1,u=!1,c=0,s=0,l=.5;function f(){var e=r().length,f=a<o,h=f?a:o,g=f?o:a;n=(g-h)/Math.max(1,e-c+2*s),u&&(n=Math.floor(n)),h+=(g-h-n*(e-c))*l,t=n*(1-c),u&&(h=Math.round(h),t=Math.round(t));var d=zi(e).map((function(t){return h+n*t}));return i(f?d.reverse():d)}return delete e.unknown,e.domain=function(n){return arguments.length?(r(n),f()):r()},e.range=function(n){return arguments.length?([o,a]=n,o=+o,a=+a,f()):[o,a]},e.rangeRound=function(n){return[o,a]=n,o=+o,a=+a,u=!0,f()},e.bandwidth=function(){return t},e.step=function(){return n},e.round=function(n){return arguments.length?(u=!!n,f()):u},e.padding=function(n){return arguments.length?(c=Math.min(1,s=+n),f()):c},e.paddingInner=function(n){return arguments.length?(c=Math.min(1,n),f()):c},e.paddingOuter=function(n){return arguments.length?(s=+n,f()):s},e.align=function(n){return arguments.length?(l=Math.max(0,Math.min(1,n)),f()):l},e.copy=function(){return Hi(r(),[o,a]).round(u).paddingInner(c).paddingOuter(s).align(l)},Wt.apply(f(),arguments)}function Vi(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return Vi(t())},n}function ji(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function Pi(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function Wi(n){var t=1,e=n(ji(t),Pi(t));return e.constant=function(e){return arguments.length?n(ji(t=+e),Pi(t)):t},oe(e)}function $i(n){switch(n){case m:return ae();case y:return function n(){var t=de(jt()).domain([1,10]);return t.copy=function(){return Vt(t,n()).base(t.base())},Wt.apply(t,arguments),t}();case v:return we();case w:return function(){return we.apply(null,arguments).exponent(.5)}();case b:return function(){return Wt.apply(Fi(De,Ne,Fe,Ie,ze,Ve,Pe,$e,ur).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}();case x:return function(){return Wt.apply(Fi(er,Ui,Xe,nr,Ei,Yi,Pe,$e,cr).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}();case T:return function n(){var t,e=[],r=[],i=[];function o(){var n=0,t=Math.max(1,r.length);for(i=new Array(t-1);++n<t;)i[n-1]=qi(e,n/t);return a}function a(n){return isNaN(n=+n)?t:r[zn(i,n)]}return a.invertExtent=function(n){var t=r.indexOf(n);return t<0?[NaN,NaN]:[t>0?i[t-1]:e[0],t<i.length?i[t]:e[e.length-1]]},a.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let t of n)null==t||isNaN(t=+t)||e.push(t);return e.sort(On),o()},a.range=function(n){return arguments.length?(r=Array.from(n),o()):r.slice()},a.unknown=function(n){return arguments.length?(t=n,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return n().domain(e).range(r).unknown(t)},Wt.apply(a,arguments)}();case D:return function n(){var t,e=0,r=1,i=1,o=[.5],a=[0,1];function u(n){return n<=n?a[zn(o,n,0,i)]:t}function c(){var n=-1;for(o=new Array(i);++n<i;)o[n]=((n+1)*r-(n-i)*e)/(i+1);return u}return u.domain=function(n){return arguments.length?([e,r]=n,e=+e,r=+r,c()):[e,r]},u.range=function(n){return arguments.length?(i=(a=Array.from(n)).length-1,c()):a.slice()},u.invertExtent=function(n){var t=a.indexOf(n);return t<0?[NaN,NaN]:t<1?[e,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},u.unknown=function(n){return arguments.length?(t=n,u):u},u.thresholds=function(){return o.slice()},u.copy=function(){return n().domain([e,r]).range(a).unknown(t)},Wt.apply(oe(u),arguments)}();case C:return function n(){var t,e=[.5],r=[0,1],i=1;function o(n){return n<=n?r[zn(e,n,0,i)]:t}return o.domain=function(n){return arguments.length?(e=Array.from(n),i=Math.min(e.length,r.length-1),o):e.slice()},o.range=function(n){return arguments.length?(r=Array.from(n),i=Math.min(e.length,r.length-1),o):r.slice()},o.invertExtent=function(n){var t=r.indexOf(n);return[e[t-1],e[t]]},o.unknown=function(n){return arguments.length?(t=n,o):t},o.copy=function(){return n().domain(e).range(r).unknown(t)},Wt.apply(o,arguments)}();case k:return Li();case F:return function(){return Vi(Hi.apply(null,arguments).paddingInner(1))}();case S:return Hi();case M:return function n(){var t=Wi(jt());return t.copy=function(){return Vt(t,n()).constant(t.constant())},Wt.apply(t,arguments)}();case N:throw new Error('\"type = '+n+'\" is not supported yet.');default:return ae()}}const Ri={day:Ie,hour:ze,minute:Ve,month:Ne,second:Pe,week:Fe,year:De},Xi={day:nr,hour:Ei,minute:Yi,month:Ui,second:Pe,week:Xe,year:er};function Bi(n,t){if(\"nice\"in n&&void 0!==n.nice&&\"nice\"in t){const{nice:e}=n;if(\"boolean\"==typeof e)e&&t.nice();else if(\"number\"==typeof e)t.nice(e);else{const r=t,{type:i}=n;if(\"string\"==typeof e)r.nice(i===x?Xi[e]:Ri[e]);else{const{interval:n,step:t}=e,o=(i===x?Xi[n]:Ri[n]).every(t);null!==o&&r.nice(o)}}}}function Zi(n,t){return n&&un.has(t)}function _i(n,t){if(\"zero\"in n&&!0===n.zero&&Zi(t,n.type)){const n=t.domain(),[e,r]=n,i=r<e,[o,a]=i?[r,e]:[e,r],u=[Math.min(0,o),Math.max(0,a)];t.domain(i?u.reverse():u)}}const Gi=Math.PI/180,Ji=180/Math.PI,Qi=6/29*3*(6/29);function Ki(n){if(n instanceof to)return new to(n.l,n.a,n.b,n.opacity);if(n instanceof co)return so(n);n instanceof at||(n=it(n));var t,e,r=oo(n.r),i=oo(n.g),o=oo(n.b),a=eo((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=e=a:(t=eo((.4360747*r+.3850649*i+.1430804*o)/.96422),e=eo((.0139322*r+.0971045*i+.7141733*o)/.82521)),new to(116*a-16,500*(t-a),200*(a-e),n.opacity)}function no(n,t,e,r){return 1===arguments.length?Ki(n):new to(n,t,e,null==r?1:r)}function to(n,t,e,r){this.l=+n,this.a=+t,this.b=+e,this.opacity=+r}function eo(n){return n>6/29*(6/29)*(6/29)?Math.pow(n,1/3):n/Qi+4/29}function ro(n){return n>6/29?n*n*n:Qi*(n-4/29)}function io(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function oo(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function ao(n){if(n instanceof co)return new co(n.h,n.c,n.l,n.opacity);if(n instanceof to||(n=Ki(n)),0===n.a&&0===n.b)return new co(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*Ji;return new co(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function uo(n,t,e,r){return 1===arguments.length?ao(n):new co(n,t,e,null==r?1:r)}function co(n,t,e,r){this.h=+n,this.c=+t,this.l=+e,this.opacity=+r}function so(n){if(isNaN(n.h))return new to(n.l,0,0,n.opacity);var t=n.h*Gi;return new to(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}function lo(n){return function(t,e){var r=n((t=uo(t)).h,(e=uo(e)).h),i=Mt(t.c,e.c),o=Mt(t.l,e.l),a=Mt(t.opacity,e.opacity);return function(n){return t.h=r(n),t.c=i(n),t.l=o(n),t.opacity=a(n),t+\"\"}}}Hn(to,no,Vn(jn,{brighter:function(n){return new to(this.l+18*(null==n?1:n),this.a,this.b,this.opacity)},darker:function(n){return new to(this.l-18*(null==n?1:n),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,e=isNaN(this.b)?n:n-this.b/200;return new at(io(3.1338561*(t=.96422*ro(t))-1.6168667*(n=1*ro(n))-.4906146*(e=.82521*ro(e))),io(-.9787684*t+1.9161415*n+.033454*e),io(.0719453*t-.2289914*n+1.4052427*e),this.opacity)}})),Hn(co,uo,Vn(jn,{brighter:function(n){return new co(this.h,this.c,this.l+18*(null==n?1:n),this.opacity)},darker:function(n){return new co(this.h,this.c,this.l-18*(null==n?1:n),this.opacity)},rgb:function(){return so(this).rgb()}}));var fo=lo(vt),ho=lo(Mt);function go(n){return function(t,e){var r=n((t=ht(t)).h,(e=ht(e)).h),i=Mt(t.s,e.s),o=Mt(t.l,e.l),a=Mt(t.opacity,e.opacity);return function(n){return t.h=r(n),t.s=i(n),t.l=o(n),t.opacity=a(n),t+\"\"}}}var po=go(vt),mo=go(Mt),yo=-.14861,vo=1.78277,wo=-.29227,Mo=-.90649,bo=1.97294,xo=bo*Mo,To=bo*vo,Do=vo*wo-Mo*yo;function Co(n){if(n instanceof ko)return new ko(n.h,n.s,n.l,n.opacity);n instanceof at||(n=it(n));var t=n.r/255,e=n.g/255,r=n.b/255,i=(Do*r+xo*t-To*e)/(Do+xo-To),o=r-i,a=(bo*(e-i)-wo*o)/Mo,u=Math.sqrt(a*a+o*o)/(bo*i*(1-i)),c=u?Math.atan2(a,o)*Ji-120:NaN;return new ko(c<0?c+360:c,u,i,n.opacity)}function No(n,t,e,r){return 1===arguments.length?Co(n):new ko(n,t,e,null==r?1:r)}function ko(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function Fo(n){return function t(e){function r(t,r){var i=n((t=No(t)).h,(r=No(r)).h),o=Mt(t.s,r.s),a=Mt(t.l,r.l),u=Mt(t.opacity,r.opacity);return function(n){return t.h=i(n),t.s=o(n),t.l=a(Math.pow(n,e)),t.opacity=u(n),t+\"\"}}return e=+e,r.gamma=t,r}(1)}Hn(ko,No,Vn(jn,{brighter:function(n){return n=null==n?1/.7:Math.pow(1/.7,n),new ko(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?.7:Math.pow(.7,n),new ko(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=isNaN(this.h)?0:(this.h+120)*Gi,t=+this.l,e=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(n),i=Math.sin(n);return new at(255*(t+e*(yo*r+vo*i)),255*(t+e*(wo*r+Mo*i)),255*(t+e*(bo*r)),this.opacity)}}));const So={lab:function(n,t){var e=Mt((n=no(n)).l,(t=no(t)).l),r=Mt(n.a,t.a),i=Mt(n.b,t.b),o=Mt(n.opacity,t.opacity);return function(t){return n.l=e(t),n.a=r(t),n.b=i(t),n.opacity=o(t),n+\"\"}},hcl:fo,\"hcl-long\":ho,hsl:po,\"hsl-long\":mo,cubehelix:Fo(vt),\"cubehelix-long\":Fo(Mt),rgb:bt};function Uo(n,t){\"interpolate\"in n&&void 0!==n.interpolate&&\"interpolate\"in t&&t.interpolate(function(n){switch(n){case\"lab\":case\"hcl\":case\"hcl-long\":case\"hsl\":case\"hsl-long\":case\"cubehelix\":case\"cubehelix-long\":case\"rgb\":return So[n]}const{type:t,gamma:e}=n,r=So[t];return void 0===e?r:r.gamma(e)}(n.interpolate))}function Ao(n,t){return ln.has(t)?n.filter(n=>\"boolean\"!=typeof n).map(n=>\"string\"==typeof n||\"number\"==typeof n?new Date(n):n):n.map(n=>\"string\"==typeof n||\"boolean\"==typeof n?Number(n):n)}function Eo(n){return n.map(n=>\"\"+n)}function Oo(n,t){if(n.length>0&&n.every(d))return n;if(2===n.length&&2===t.length&&n.filter(d).length>0){const[e,r]=n,[i,o]=t;let a=i;d(e)&&(a=e.valueOf()>i.valueOf()?e:i);let u=o;return d(r)&&(u=r.valueOf()<o.valueOf()?r:o),[a,u]}return t}function Yo(n){return n.filter(n=>null!=n)}function qo(n){return n.map(n=>n instanceof Date||!W(n)?n:P(n))}function Io(n,t,e){const{reverse:r,type:i}=n,o=function(n){return n?n=>n.concat().reverse():n=>n}(r);if(Zi(t,i)&&xn(n)||function(n,t){return n&&sn.has(t)}(t,i)&&function(n){return sn.has(n.type)}(n))n.domain?2!==(a=n.domain).length||null!=a[0]&&null!=a[1]?t.domain(o(qo(n.domain))):e&&t.domain(o(Oo(Ao(qo(n.domain),i),Ao(Yo(e),i)))):e&&t.domain(o(Ao(Yo(e),i)));else if(function(n,t){return n&&cn.has(t)}(t,i)&&function(n){return cn.has(n.type)}(n))if(n.domain){const r=Eo(qo(n.domain));t.domain(o(e?function(n,t=[]){if(0===n.length)return t;const e=new Set(n);return n.concat(t.filter(n=>!e.has(n)))}(r,Eo(e)):r))}else e&&t.domain(o(Eo(e)));var a}var Lo=e(363);function zo(n){return\"[object String]\"!==Object.prototype.toString.call(n)}function Ho(n,t){const{range:e,domain:r}=n;if(void 0===e){if(\"scheme\"in n&&void 0!==n.scheme){const{scheme:e}=n;let i,o,a;xn(n)&&r&&(o=r.length),zo(e)?(i=e.name,e.count&&(o=e.count),a=e.extent):i=e;const u=R.a.resolveColorScheme({name:i,type:\"sequential\"});if(void 0!==u&&\"sequential\"===u.type){const n=Object(Lo.a)(u);t.range(n.getColors(o,a))}}}else t.range(e)}function Vo(n,t){return Io(t,n),Ho(t,n),function(n,t){\"align\"in n&&void 0!==n.align&&\"align\"in t&&t.align(n.align)}(t,n),function(n,t){\"base\"in n&&void 0!==n.base&&\"base\"in t&&t.base(n.base)}(t,n),function(n,t){\"clamp\"in n&&!0===n.clamp&&\"clamp\"in t&&t.clamp(n.clamp)}(t,n),function(n,t){\"exponent\"in n&&void 0!==n.exponent&&\"exponent\"in t&&t.exponent(n.exponent)}(t,n),Uo(t,n),Bi(t,n),function(n,t){\"padding\"in n&&void 0!==n.padding&&\"padding\"in t&&t.padding(n.padding),\"paddingInner\"in n&&void 0!==n.paddingInner&&\"paddingInner\"in t&&t.paddingInner(n.paddingInner),\"paddingOuter\"in n&&void 0!==n.paddingOuter&&\"paddingOuter\"in t&&t.paddingOuter(n.paddingOuter)}(t,n),function(n,t){if(\"round\"in n&&!0===n.round){const e=t;\"round\"in e?e.round(n.round):e.interpolate(Ot)}}(t,n),_i(t,n),n}var jo=function(n){const{range:t}=n;if(n.type===k&&void 0===t){const t=\"scheme\"in n?n.scheme:void 0,e=R.a.getCategoricalColorScaleResolver();let r;r=void 0===t?e({}):zo(t)?e(t):e({name:t});const i=r;return Io(n,i),i}return Vo($i(n.type),n)};function Po(n){return n}function Wo(n){return\"value\"in n}function $o(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Ro{constructor({name:n,channelType:t,definition:e}){if($o(this,\"name\",void 0),$o(this,\"channelType\",void 0),$o(this,\"originalDefinition\",void 0),$o(this,\"definition\",void 0),$o(this,\"scale\",void 0),$o(this,\"axis\",void 0),$o(this,\"getValue\",void 0),$o(this,\"encodeFunc\",void 0),$o(this,\"formatValue\",void 0),$o(this,\"encodeValue\",(n,t)=>void 0!==t&&null==n?t:this.encodeFunc(n)),$o(this,\"encodeDatum\",(n,t)=>void 0===t?this.encodeValue(this.getValueFromDatum(n)):this.encodeValue(this.getValueFromDatum(n),t)),$o(this,\"formatDatum\",n=>this.formatValue(this.getValueFromDatum(n))),$o(this,\"getValueFromDatum\",(n,t)=>{const e=this.getValue(n);return void 0!==t&&null==e?t:e}),$o(this,\"getDomainFromDataset\",n=>{if(l(this.definition)){const{value:n}=this.definition;return[n]}const{type:t}=this.definition;if(\"nominal\"===t||\"ordinal\"===t)return Array.from(new Set(n.map(n=>this.getValueFromDatum(n))));if(\"quantitative\"===t){if(this.definition.scale&&\"quantile\"===this.definition.scale.type)return n.map(n=>this.getValueFromDatum(n));const t=p(n,n=>this.getValueFromDatum(n));return void 0===t[0]?[0,1]:t}if(\"temporal\"===t){const t=p(n,n=>this.getValueFromDatum(n));return void 0===t[0]?[0,1]:t}return[]}),this.name=n,this.channelType=t,this.originalDefinition=e,this.definition=Nn(this.channelType,e),this.getValue=function(n){return l(n)?()=>n.value:void 0!==n.field?t=>G()(t,n.field):()=>{}}(this.definition),this.formatValue=f(this.definition)?X(this.definition):$,this.definition.scale){const n=jo(this.definition.scale);this.encodeFunc=t=>n(t),this.scale=n}else{const{definition:n}=this;this.encodeFunc=Wo(n)?()=>n.value:Po}this.definition.axis&&(this.axis=new Z(this))}getDomain(){return this.scale&&\"domain\"in this.scale?this.scale.domain():[]}setDomain(n){if(!1!==this.definition.scale&&this.scale&&!this.hasCategoricalColorScale()&&\"domain\"in this.scale){const t=this.definition.scale;Io(t,this.scale,n),Ho(t,this.scale),_i(t,this.scale),Bi(t,this.scale)}return this}setDomainFromDataset(n){return this.scale&&\"domain\"in this.scale?this.setDomain(this.getDomainFromDataset(n)):this}getTitle(){return this.definition.title}isGroupBy(){if(h(this.definition)){const{type:n}=this.definition;return\"Category\"===this.channelType||\"Text\"===this.channelType||\"Color\"===this.channelType&&(\"nominal\"===n||\"ordinal\"===n)||E(this.channelType)&&(\"nominal\"===n||\"ordinal\"===n)}return!1}isX(){return U(this.channelType)}isXOrY(){return E(this.channelType)}isY(){return A(this.channelType)}hasCategoricalColorScale(){const n=this.definition.scale;return this.scale&&n&&n.type===k&&void 0===n.range}hasLegend(){return!1!==this.definition.legend}hasValueDefinition(){return Wo(this.definition)}hasFieldDefinition(){return\"field\"in this.definition}}function Xo(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Bo{constructor({channelTypes:n,encoding:t}){Xo(this,\"encoding\",void 0),Xo(this,\"channelTypes\",void 0),Xo(this,\"channels\",void 0),Xo(this,\"legends\",void 0),this.channelTypes=n,this.encoding=t;const e=this.getChannelNames(),r={};e.forEach(e=>{const i=t[e];if(Array.isArray(i)){const t=i;r[e]=t.map((t,r)=>new Ro({channelType:n[e],definition:t,name:e+\"[\"+r+\"]\"}))}else{const t=i;r[e]=new Ro({channelType:n[e],definition:t,name:e})}}),this.channels=r,this.legends={},e.map(n=>this.channels[n]).forEach(n=>{if(g(n)&&n.hasLegend()&&h(n.definition)){const{field:t}=n.definition,e=n;this.legends[t]?this.legends[t].push(e):this.legends[t]=[e]}})}getChannelNames(){return Object.keys(this.channelTypes)}getChannelEncoders(){return this.getChannelNames().flatMap(n=>this.channels[n])}getGroupBys(){const n=this.getChannelEncoders().filter(n=>n.isGroupBy()).map(n=>n.definition.field);return Array.from(new Set(n))}createLegendItemsFactory(n){const t=this.getChannelEncoders().filter(n=>g(n)&&l(n.definition)).flat().concat(this.legends[n]);return n=>n.map(n=>({input:n,output:t.reduce((t,e)=>{const r=t;return r[e.name]=e.encodeValue(n),r},{})}))}getLegendInformation(n=[]){return Object.keys(this.legends).map(t=>{const e=this.legends[t],r=e[0],i=r.definition,o=this.createLegendItemsFactory(t);return\"nominal\"===i.type?{channelEncoders:e,createLegendItems:o,field:t,items:o(r.getDomainFromDataset(n)),type:i.type}:{channelEncoders:e,createLegendItems:o,field:t,type:i.type}})}setDomainFromDataset(n){return this.getChannelEncoders().forEach(t=>{t.setDomainFromDataset(n)}),this}hasLegend(){return Object.keys(this.legends).length>0}}var Zo=e(852),_o=e(164);const Go={flat:()=>0,random:()=>30*Math.floor(6*Object(Zo.b)()-3),square:()=>90*Math.floor(2*Object(Zo.b)())};class Jo extends a.a.PureComponent{constructor(n){super(n),this.isComponentMounted=!1,this.wordCloudEncoderFactory=function(n){const{channelTypes:t}=n,e=\"defaultEncoding\"in n?t=>function(n,t){return{...n,...t}}(n.defaultEncoding,t):n.completeEncoding,r=(n={})=>new Bo({channelTypes:t,encoding:e(n)});return{channelTypes:t,create:r,createSelector:()=>Object(s.a)(n=>n,r),DEFAULT_ENCODING:e({})}}({channelTypes:{color:\"Color\",fontFamily:\"Category\",fontSize:\"Numeric\",fontWeight:\"Category\",text:\"Text\"},defaultEncoding:{color:{value:\"black\"},fontFamily:{value:this.props.theme.typography.families.sansSerif},fontSize:{value:20},fontWeight:{value:\"bold\"},text:{value:\"\"}}}),this.createEncoder=this.wordCloudEncoderFactory.createSelector(),this.state={words:[],scaleFactor:1},this.setWords=this.setWords.bind(this)}componentDidMount(){this.isComponentMounted=!0,this.update()}componentDidUpdate(n){const{data:t,encoding:e,width:r,height:i,rotation:o}=this.props;n.data===t&&n.encoding===e&&n.width===r&&n.height===i&&n.rotation===o||this.update()}componentWillUnmount(){this.isComponentMounted=!1}setWords(n){this.isComponentMounted&&this.setState({words:n})}update(){const{data:n,encoding:t}=this.props,e=this.createEncoder(t);e.setDomainFromDataset(n);const r=[...n].sort((n,t)=>e.channels.fontSize.encodeDatum(t,0)-e.channels.fontSize.encodeDatum(n,0)),i=Math.max(.1*r.length,10),o=r.slice(0,i);this.generateCloud(e,1,n=>o.every(t=>n.find(({text:n})=>e.channels.text.getValueFromDatum(t)===n)))}generateCloud(n,t,e){const{data:r,width:i,height:o,rotation:a}=this.props;c()().size([i*t,o*t]).words(r.map(n=>({...n}))).padding(5).rotate(Go[a]||Go.flat).text(t=>n.channels.text.getValueFromDatum(t)).font(t=>n.channels.fontFamily.encodeDatum(t,this.props.theme.typography.families.sansSerif)).fontWeight(t=>n.channels.fontWeight.encodeDatum(t,\"normal\")).fontSize(t=>n.channels.fontSize.encodeDatum(t,0)).on(\"end\",r=>{e(r)||t>3?this.isComponentMounted&&this.setState({words:r,scaleFactor:t}):this.generateCloud(n,t+.5,e)}).start()}render(){const{scaleFactor:n}=this.state,{width:t,height:e,encoding:r}=this.props,{words:i}=this.state,o=this.createEncoder(r);o.channels.color.setDomainFromDataset(i);const u=t*n,c=e*n;return a.a.createElement(\"svg\",{width:t,height:e,viewBox:`-${u/2} -${c/2} ${u} ${c}`},a.a.createElement(\"g\",null,i.map(n=>a.a.createElement(\"text\",{key:n.text,fontSize:n.size+\"px\",fontWeight:n.weight,fontFamily:n.font,fill:o.channels.color.encodeDatum(n,\"\"),textAnchor:\"middle\",transform:`translate(${n.x}, ${n.y}) rotate(${n.rotate})`},n.text))))}}Jo.propTypes={rotation:i.a.any,data:i.a.array.isRequired,height:i.a.number.isRequired,width:i.a.number.isRequired},Jo.defaultProps={encoding:{},rotation:\"flat\"};t.default=Object(_o.c)(Jo)}}]);","extractedComments":[]}