{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{4630:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return s}));a(0);var n=a(53),o=a(52),c=a(932),l=a(1);const i=n.c.span`\n  white-space: nowrap;\n  min-width: 100px;\n  svg,\n  i {\n    margin-right: 8px;\n\n    &:hover {\n      path {\n        fill: ${({theme:e})=>e.colors.primary.base};\n      }\n    }\n  }\n`,r=n.c.span`\n  color: ${({theme:e})=>e.colors.grayscale.base};\n`;function s({actions:e}){return Object(l.f)(i,{className:\"actions\"},e.map((e,t)=>{const a=c.a[e.icon];return e.tooltip?Object(l.f)(o.a,{id:e.label+\"-tooltip\",title:e.tooltip,placement:e.placement,key:t},Object(l.f)(r,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e.onClick},Object(l.f)(a,null))):Object(l.f)(r,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e.onClick,key:t},Object(l.f)(a,null))}))}},5073:function(e,t,a){\"use strict\";a.r(t);a(34);var n=a(0),o=a.n(n),c=a(94),l=a.n(c),i=a(20),r=a(67),s=a(155),d=a(519),b=a(33),u=a.n(b),m=a(530),j=a(136),O=a(119),f=a(984),p=a(4630),h=a(4623),g=a(42),y=a(1506),w=a(1505),x=a(53),C=a(46),S=a(100),D=a(1);const v=x.c.div`\n  margin: ${({theme:e})=>2*e.gridUnit}px auto\n    ${({theme:e})=>4*e.gridUnit}px auto;\n`,_=Object(x.c)(C.a)`\n  margin: auto ${({theme:e})=>2*e.gridUnit}px auto 0;\n`,k=x.c.div`\n  margin-bottom: ${({theme:e})=>10*e.gridUnit}px;\n\n  .control-label {\n    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  }\n\n  .required {\n    margin-left: ${({theme:e})=>e.gridUnit/2}px;\n    color: ${({theme:e})=>e.colors.error.base};\n  }\n\n  textarea,\n  input[type='text'] {\n    padding: ${({theme:e})=>1.5*e.gridUnit}px\n      ${({theme:e})=>2*e.gridUnit}px;\n    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};\n    border-radius: ${({theme:e})=>e.gridUnit}px;\n    width: 50%;\n  }\n\n  input,\n  textarea {\n    flex: 1 1 auto;\n  }\n\n  textarea {\n    width: 100%;\n    height: 160px;\n    resize: none;\n  }\n\n  input::placeholder,\n  textarea::placeholder {\n    color: ${({theme:e})=>e.colors.grayscale.light1};\n  }\n`;var $=Object(O.a)(({addDangerToast:e,onLayerAdd:t,onHide:a,show:o,layer:c=null})=>{const[l,r]=Object(n.useState)(!0),[s,d]=Object(n.useState)(),[b,u]=Object(n.useState)(!0),j=null!==c,{state:{loading:O,resource:f},fetchResource:p,createResource:h,updateResource:g}=Object(m.f)(\"annotation_layer\",Object(i.e)(\"annotation_layer\"),e),y=()=>{d({name:\"\",descr:\"\"})},w=()=>{u(!0),y(),a()},x=e=>{const{target:t}=e,a={...s,name:s?s.name:\"\",descr:s?s.descr:\"\"};a[t.name]=t.value,d(a)};return Object(n.useEffect)(()=>{if(j&&(!s||!s.id||c&&c.id!==s.id||b&&o)){if(o&&c&&null!==c.id&&!O){const e=c.id||0;p(e)}}else!j&&(!s||s.id||b&&o)&&y()},[c,o]),Object(n.useEffect)(()=>{f&&d(f)},[f]),Object(n.useEffect)(()=>{s&&s.name.length?r(!1):r(!0)},[s?s.name:\"\",s?s.descr:\"\"]),b&&o&&u(!1),Object(D.f)(S.b,{disablePrimaryButton:l,onHandledPrimaryAction:()=>{if(j){if(s&&s.id){const e=s.id;delete s.id,delete s.created_by,g(e,s).then(e=>{e&&w()})}}else s&&h(s).then(e=>{e&&(t&&t(e),w())})},onHide:w,primaryButtonName:j?Object(i.e)(\"Save\"):Object(i.e)(\"Add\"),show:o,width:\"55%\",title:Object(D.f)(\"h4\",null,j?Object(D.f)(_,{name:\"edit-alt\"}):Object(D.f)(_,{name:\"plus-large\"}),j?Object(i.e)(\"Edit annotation layer properties\"):Object(i.e)(\"Add annotation layer\"))},Object(D.f)(v,null,Object(D.f)(\"h4\",null,Object(i.e)(\"Basic information\"))),Object(D.f)(k,null,Object(D.f)(\"div\",{className:\"control-label\"},Object(i.e)(\"Annotation layer name\"),Object(D.f)(\"span\",{className:\"required\"},\"*\")),Object(D.f)(\"input\",{name:\"name\",onChange:x,type:\"text\",value:null==s?void 0:s.name})),Object(D.f)(k,null,Object(D.f)(\"div\",{className:\"control-label\"},Object(i.e)(\"description\")),Object(D.f)(\"textarea\",{name:\"descr\",value:null==s?void 0:s.descr,placeholder:Object(i.e)(\"Description (this can be seen in the list)\"),onChange:x})))});t.default=Object(O.a)((function({addDangerToast:e,addSuccessToast:t,user:a}){const{state:{loading:c,resourceCount:b,resourceCollection:O,bulkSelectEnabled:x},hasPerm:C,fetchData:S,refreshData:v,toggleBulkSelect:_}=Object(m.e)(\"annotation_layer\",Object(i.e)(\"Annotation layers\"),e),[k,A]=Object(n.useState)(!1),[H,M]=Object(n.useState)(null),[N,U]=Object(n.useState)(null),T=C(\"can_write\"),Y=C(\"can_write\"),B=C(\"can_write\");function E(e){M(e),A(!0)}const z=[{id:\"name\",desc:!0}],F=Object(n.useMemo)(()=>[{accessor:\"name\",Header:Object(i.e)(\"Name\"),Cell:({row:{original:{id:e,name:t}}})=>{let a=!0;try{Object(s.f)()}catch(e){a=!1}return a?Object(D.f)(d.b,{to:`/annotationmodelview/${e}/annotation`},t):Object(D.f)(\"a\",{href:`/annotationmodelview/${e}/annotation`},t)}},{accessor:\"descr\",Header:Object(i.e)(\"Description\")},{Cell:({row:{original:{changed_on:e}}})=>{const t=new Date(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return u()(a).format(\"MMM DD, YYYY\")},Header:Object(i.e)(\"Last modified\"),accessor:\"changed_on\",size:\"xl\"},{Cell:({row:{original:{created_on:e}}})=>{const t=new Date(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return u()(a).format(\"MMM DD, YYYY\")},Header:Object(i.e)(\"Created on\"),accessor:\"created_on\",size:\"xl\"},{accessor:\"created_by\",disableSortBy:!0,Header:Object(i.e)(\"Created by\"),Cell:({row:{original:{created_by:e}}})=>e?`${e.first_name} ${e.last_name}`:\"\",size:\"xl\"},{Cell:({row:{original:e}})=>{const t=[Y?{label:\"edit-action\",tooltip:Object(i.e)(\"Edit template\"),placement:\"bottom\",icon:\"Edit\",onClick:()=>E(e)}:null,B?{label:\"delete-action\",tooltip:Object(i.e)(\"Delete template\"),placement:\"bottom\",icon:\"Trash\",onClick:()=>U(e)}:null].filter(e=>!!e);return Object(D.f)(p.a,{actions:t})},Header:Object(i.e)(\"Actions\"),id:\"actions\",disableSortBy:!0,hidden:!Y&&!B,size:\"xl\"}],[B,T]),L=[];T&&L.push({name:Object(D.f)(o.a.Fragment,null,Object(D.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(i.e)(\"Annotation layer\")),buttonStyle:\"primary\",onClick:()=>{E(null)}}),B&&L.push({name:Object(i.e)(\"Bulk select\"),onClick:_,buttonStyle:\"secondary\"});const P=Object(n.useMemo)(()=>[{Header:Object(i.e)(\"Created by\"),id:\"created_by\",input:\"select\",operator:\"rel_o_m\",unfilteredLabel:\"All\",fetchSelects:Object(j.e)(\"annotation_layer\",\"created_by\",Object(j.c)(e=>Object(i.e)(\"An error occurred while fetching dataset datasource values: %s\",e)),a.userId),paginate:!0},{Header:Object(i.e)(\"Search\"),id:\"name\",input:\"search\",operator:\"ct\"}],[]),q=Object(D.f)(g.a,{buttonStyle:\"primary\",onClick:()=>{E(null)}},Object(D.f)(o.a.Fragment,null,Object(D.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(i.e)(\"Annotation layer\"))),I={message:Object(i.e)(\"No annotation layers yet\"),slot:q};return Object(D.f)(o.a.Fragment,null,Object(D.f)(f.a,{name:Object(i.e)(\"Annotation layers\"),buttons:L}),Object(D.f)($,{addDangerToast:e,layer:H,onLayerAdd:e=>{window.location.href=`/annotationmodelview/${e}/annotation`},onHide:()=>{v(),A(!1)},show:k}),N&&Object(D.f)(y.a,{description:Object(i.e)(\"This action will permanently delete the layer.\"),onConfirm:()=>{N&&(({id:a,name:n})=>{r.a.delete({endpoint:\"/api/v1/annotation_layer/\"+a}).then(()=>{v(),U(null),t(Object(i.e)(\"Deleted: %s\",n))},Object(j.c)(t=>e(Object(i.e)(\"There was an issue deleting %s: %s\",n,t))))})(N)},onHide:()=>U(null),open:!0,title:Object(i.e)(\"Delete Layer?\")}),Object(D.f)(w.a,{title:Object(i.e)(\"Please confirm\"),description:Object(i.e)(\"Are you sure you want to delete the selected layers?\"),onConfirm:a=>{r.a.delete({endpoint:\"/api/v1/annotation_layer/?q=\"+l.a.encode(a.map(({id:e})=>e))}).then(({json:e={}})=>{v(),t(e.message)},Object(j.c)(t=>e(Object(i.e)(\"There was an issue deleting the selected layers: %s\",t))))}},e=>{const t=B?[{key:\"delete\",name:Object(i.e)(\"Delete\"),onSelect:e,type:\"danger\"}]:[];return Object(D.f)(h.b,{className:\"annotation-layers-list-view\",columns:F,count:b,data:O,fetchData:S,filters:P,initialSort:z,loading:c,pageSize:25,bulkActions:t,bulkSelectEnabled:x,disableBulkSelect:_,emptyState:I})}))}))}}]);","extractedComments":[]}