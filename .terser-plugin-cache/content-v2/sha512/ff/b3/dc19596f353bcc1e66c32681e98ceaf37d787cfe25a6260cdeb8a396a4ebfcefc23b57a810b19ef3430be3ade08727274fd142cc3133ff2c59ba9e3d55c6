{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{4592:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f}));var r=n(4627),i=n(16),a=n(17),o=n(4684),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.overAlloc,r=void 0===n?1:n;Object(i.a)(this,t),this.overAlloc=r}return Object(a.a)(t,[{key:\"allocate\",value:function(t,e,n){var r=n.size,i=n.type,a=n.copy,o=void 0!==a&&a,s=e*r;if(t&&s<=t.length)return t;var u=Math.max(Math.ceil(s*this.overAlloc),1),c=this._allocate(i,u);return t&&o&&c.set(t),this._release(t),c}},{key:\"_allocate\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Float32Array,e=arguments.length>1?arguments[1]:void 0;return new t(e)}},{key:\"_release\",value:function(t){}}]),t}(),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.attributes,r=void 0===n?{}:n;this.typedArrayManager=new s,this.indexLayout=null,this.bufferLayout=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.updateGeometry(e),Object.seal(this)}return Object(a.a)(t,[{key:\"updateGeometry\",value:function(t){var e=t.data,n=t.getGeometry,r=t.positionFormat,i=t.fp64;this.data=e,this.getGeometry=n,this.fp64=i,this.positionSize=\"XY\"===r?2:3,this._rebuildGeometry()}},{key:\"updatePartialGeometry\",value:function(t){var e=t.startRow,n=t.endRow;this._rebuildGeometry({startRow:e,endRow:n})}},{key:\"updateGeometryAttributes\",value:function(t,e,n){throw new Error(\"Not implemented\")}},{key:\"getGeometrySize\",value:function(t){throw new Error(\"Not implemented\")}},{key:\"_forEachGeometry\",value:function(t,e,n){var r=this.data,i=this.getGeometry,a=Object(o.a)(r,e,n),s=a.iterable,u=a.objectInfo,c=!0,l=!1,f=void 0;try{for(var h,d=s[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value;u.index++,t(i(v,u),u.index)}}catch(t){l=!0,f=t}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}},{key:\"_rebuildGeometry\",value:function(t){var e=this;if(this.data&&this.getGeometry){var n=this.indexLayout,r=this.bufferLayout;t||(n=[],r=[]);var i=t||{},a=i.startRow,o=void 0===a?0:a,s=i.endRow,u=void 0===s?1/0:s;this._forEachGeometry((function(t,n){r[n]=e.getGeometrySize(t)}),o,u);var c=0,l=!0,f=!1,h=void 0;try{for(var d,v=r[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){c+=d.value}}catch(t){f=!0,h=t}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}var p=this.attributes,g=this._attributeDefs,b=this.typedArrayManager,y=this.fp64;for(var m in g){var _=g[m];_.copy=Boolean(t),_.fp64Only&&!y||(p[m]=b.allocate(p[m],c,_))}this.indexLayout=n,this.bufferLayout=r,this.instanceCount=c;for(var O={vertexStart:0,indexStart:0},j=0;j<o;j++)O.vertexStart+=r[j],O.indexStart+=n[j]||0;this._forEachGeometry((function(t,i){var a=r[i];O.geometryIndex=i,O.geometrySize=a,e.updateGeometryAttributes(t,O),O.vertexStart+=a,O.indexStart+=n[i]||0}),o,u);for(var k=O.indexStart,w=u;w<n.length;w++)k+=n[w];this.vertexCount=k}}}]),t}(),c=n(4773),l=n(4719),f={Tesselator:u,flattenVertices:r.c,fillArray:r.a,count:c.a,memoize:l.a}},4595:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return r})),n.d(e,\"c\",(function(){return a})),n.d(e,\"d\",(function(){return o})),n.d(e,\"b\",(function(){return s}));n(25),n(2177),n(13),n(4670),Math.PI,Math.PI;var r={};function i(t){return Math.round(t/r.EPSILON)*r.EPSILON}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,a=void 0===n?r.precision||4:n;return t=i(t),\"\".concat(parseFloat(t.toPrecision(a)))}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function s(t,e,n){var i=r.EPSILON;n&&(r.EPSILON=n);try{if(t===e)return!0;if(o(t)&&o(e)){if(t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if(!s(t[a],e[a]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{r.EPSILON=i}}r.EPSILON=1e-12,r.debug=!1,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},4596:function(t,e,n){\"use strict\";(function(t){n.d(e,\"e\",(function(){return r})),n.d(e,\"p\",(function(){return i})),n.d(e,\"a\",(function(){return a})),n.d(e,\"c\",(function(){return o})),n.d(e,\"d\",(function(){return s})),n.d(e,\"o\",(function(){return u})),n.d(e,\"q\",(function(){return c})),n.d(e,\"t\",(function(){return l})),n.d(e,\"i\",(function(){return f})),n.d(e,\"r\",(function(){return h})),n.d(e,\"s\",(function(){return d})),n.d(e,\"k\",(function(){return v})),n.d(e,\"m\",(function(){return p})),n.d(e,\"j\",(function(){return g})),n.d(e,\"l\",(function(){return b})),n.d(e,\"g\",(function(){return y})),n.d(e,\"f\",(function(){return m})),n.d(e,\"h\",(function(){return _})),n.d(e,\"n\",(function(){return O})),n.d(e,\"b\",(function(){return j}));var r=\"1.12.1\",i=\"object\"==typeof self&&self.self===self&&self||\"object\"==typeof t&&t.global===t&&t||Function(\"return this\")()||{},a=Array.prototype,o=Object.prototype,s=\"undefined\"!=typeof Symbol?Symbol.prototype:null,u=a.push,c=a.slice,l=o.toString,f=o.hasOwnProperty,h=\"undefined\"!=typeof ArrayBuffer,d=\"undefined\"!=typeof DataView,v=Array.isArray,p=Object.keys,g=Object.create,b=h&&ArrayBuffer.isView,y=isNaN,m=isFinite,_=!{toString:null}.propertyIsEnumerable(\"toString\"),O=[\"valueOf\",\"isPrototypeOf\",\"toString\",\"propertyIsEnumerable\",\"hasOwnProperty\",\"toLocaleString\"],j=Math.pow(2,53)-1}).call(this,n(153))},4599:function(t,e,n){\"use strict\";var r=n(5057);e.a=new r.a({id:\"deck\"}).enable()},4601:function(t,e,n){\"use strict\";function r(t,e){if(!t)throw new Error(e||\"deck.gl: assertion failed.\")}n.d(e,\"a\",(function(){return r}))},4602:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return Sn}));var r={};n.r(r),n.d(r,\"VERSION\",(function(){return o.e})),n.d(r,\"restArguments\",(function(){return s})),n.d(r,\"isObject\",(function(){return u})),n.d(r,\"isNull\",(function(){return c})),n.d(r,\"isUndefined\",(function(){return l})),n.d(r,\"isBoolean\",(function(){return f})),n.d(r,\"isElement\",(function(){return h})),n.d(r,\"isString\",(function(){return v})),n.d(r,\"isNumber\",(function(){return p})),n.d(r,\"isDate\",(function(){return g})),n.d(r,\"isRegExp\",(function(){return b})),n.d(r,\"isError\",(function(){return y})),n.d(r,\"isSymbol\",(function(){return m})),n.d(r,\"isArrayBuffer\",(function(){return _})),n.d(r,\"isDataView\",(function(){return P})),n.d(r,\"isArray\",(function(){return S})),n.d(r,\"isFunction\",(function(){return k})),n.d(r,\"isArguments\",(function(){return C})),n.d(r,\"isFinite\",(function(){return I})),n.d(r,\"isNaN\",(function(){return M})),n.d(r,\"isTypedArray\",(function(){return V})),n.d(r,\"isEmpty\",(function(){return W})),n.d(r,\"isMatch\",(function(){return q})),n.d(r,\"isEqual\",(function(){return Z})),n.d(r,\"isMap\",(function(){return at})),n.d(r,\"isWeakMap\",(function(){return ot})),n.d(r,\"isSet\",(function(){return st})),n.d(r,\"isWeakSet\",(function(){return ut})),n.d(r,\"keys\",(function(){return H})),n.d(r,\"allKeys\",(function(){return Q})),n.d(r,\"values\",(function(){return ct})),n.d(r,\"pairs\",(function(){return lt})),n.d(r,\"invert\",(function(){return ft})),n.d(r,\"functions\",(function(){return ht})),n.d(r,\"methods\",(function(){return ht})),n.d(r,\"extend\",(function(){return vt})),n.d(r,\"extendOwn\",(function(){return pt})),n.d(r,\"assign\",(function(){return pt})),n.d(r,\"defaults\",(function(){return gt})),n.d(r,\"create\",(function(){return yt})),n.d(r,\"clone\",(function(){return mt})),n.d(r,\"tap\",(function(){return _t})),n.d(r,\"get\",(function(){return wt})),n.d(r,\"has\",(function(){return xt})),n.d(r,\"mapObject\",(function(){return It})),n.d(r,\"identity\",(function(){return Et})),n.d(r,\"constant\",(function(){return R})),n.d(r,\"noop\",(function(){return Mt})),n.d(r,\"toPath\",(function(){return Ot})),n.d(r,\"property\",(function(){return Pt})),n.d(r,\"propertyOf\",(function(){return Rt})),n.d(r,\"matcher\",(function(){return Tt})),n.d(r,\"matches\",(function(){return Tt})),n.d(r,\"times\",(function(){return Ft})),n.d(r,\"random\",(function(){return Nt})),n.d(r,\"now\",(function(){return Dt})),n.d(r,\"escape\",(function(){return Vt})),n.d(r,\"unescape\",(function(){return zt})),n.d(r,\"templateSettings\",(function(){return Gt})),n.d(r,\"template\",(function(){return Kt})),n.d(r,\"result\",(function(){return Zt})),n.d(r,\"uniqueId\",(function(){return Jt})),n.d(r,\"chain\",(function(){return $t})),n.d(r,\"iteratee\",(function(){return Lt})),n.d(r,\"partial\",(function(){return ne})),n.d(r,\"bind\",(function(){return re})),n.d(r,\"bindAll\",(function(){return oe})),n.d(r,\"memoize\",(function(){return se})),n.d(r,\"delay\",(function(){return ue})),n.d(r,\"defer\",(function(){return ce})),n.d(r,\"throttle\",(function(){return le})),n.d(r,\"debounce\",(function(){return fe})),n.d(r,\"wrap\",(function(){return he})),n.d(r,\"negate\",(function(){return de})),n.d(r,\"compose\",(function(){return ve})),n.d(r,\"after\",(function(){return pe})),n.d(r,\"before\",(function(){return ge})),n.d(r,\"once\",(function(){return be})),n.d(r,\"findKey\",(function(){return ye})),n.d(r,\"findIndex\",(function(){return _e})),n.d(r,\"findLastIndex\",(function(){return Oe})),n.d(r,\"sortedIndex\",(function(){return je})),n.d(r,\"indexOf\",(function(){return we})),n.d(r,\"lastIndexOf\",(function(){return xe})),n.d(r,\"find\",(function(){return Ee})),n.d(r,\"detect\",(function(){return Ee})),n.d(r,\"findWhere\",(function(){return Te})),n.d(r,\"each\",(function(){return Pe})),n.d(r,\"forEach\",(function(){return Pe})),n.d(r,\"map\",(function(){return Se})),n.d(r,\"collect\",(function(){return Se})),n.d(r,\"reduce\",(function(){return Le})),n.d(r,\"foldl\",(function(){return Le})),n.d(r,\"inject\",(function(){return Le})),n.d(r,\"reduceRight\",(function(){return Ce})),n.d(r,\"foldr\",(function(){return Ce})),n.d(r,\"filter\",(function(){return Ie})),n.d(r,\"select\",(function(){return Ie})),n.d(r,\"reject\",(function(){return Me})),n.d(r,\"every\",(function(){return Re})),n.d(r,\"all\",(function(){return Re})),n.d(r,\"some\",(function(){return Fe})),n.d(r,\"any\",(function(){return Fe})),n.d(r,\"contains\",(function(){return Ne})),n.d(r,\"includes\",(function(){return Ne})),n.d(r,\"include\",(function(){return Ne})),n.d(r,\"invoke\",(function(){return De})),n.d(r,\"pluck\",(function(){return Be})),n.d(r,\"where\",(function(){return Ue})),n.d(r,\"max\",(function(){return Ve})),n.d(r,\"min\",(function(){return ze})),n.d(r,\"shuffle\",(function(){return He})),n.d(r,\"sample\",(function(){return Ge})),n.d(r,\"sortBy\",(function(){return We})),n.d(r,\"groupBy\",(function(){return Xe})),n.d(r,\"indexBy\",(function(){return Ye})),n.d(r,\"countBy\",(function(){return Ke})),n.d(r,\"partition\",(function(){return Ze})),n.d(r,\"toArray\",(function(){return Je})),n.d(r,\"size\",(function(){return $e})),n.d(r,\"pick\",(function(){return en})),n.d(r,\"omit\",(function(){return nn})),n.d(r,\"first\",(function(){return an})),n.d(r,\"head\",(function(){return an})),n.d(r,\"take\",(function(){return an})),n.d(r,\"initial\",(function(){return rn})),n.d(r,\"last\",(function(){return sn})),n.d(r,\"rest\",(function(){return on})),n.d(r,\"tail\",(function(){return on})),n.d(r,\"drop\",(function(){return on})),n.d(r,\"compact\",(function(){return un})),n.d(r,\"flatten\",(function(){return cn})),n.d(r,\"without\",(function(){return fn})),n.d(r,\"uniq\",(function(){return hn})),n.d(r,\"unique\",(function(){return hn})),n.d(r,\"union\",(function(){return dn})),n.d(r,\"intersection\",(function(){return vn})),n.d(r,\"difference\",(function(){return ln})),n.d(r,\"unzip\",(function(){return pn})),n.d(r,\"transpose\",(function(){return pn})),n.d(r,\"zip\",(function(){return gn})),n.d(r,\"object\",(function(){return bn})),n.d(r,\"range\",(function(){return yn})),n.d(r,\"chunk\",(function(){return mn})),n.d(r,\"mixin\",(function(){return On})),n.d(r,\"default\",(function(){return jn}));var i=n(4878),a=n.n(i),o=n(4596);function s(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var a=Array(e+1);for(i=0;i<e;i++)a[i]=arguments[i];return a[e]=r,t.apply(this,a)}}function u(t){var e=typeof t;return\"function\"===e||\"object\"===e&&!!t}function c(t){return null===t}function l(t){return void 0===t}function f(t){return!0===t||!1===t||\"[object Boolean]\"===o.t.call(t)}function h(t){return!(!t||1!==t.nodeType)}function d(t){var e=\"[object \"+t+\"]\";return function(t){return o.t.call(t)===e}}var v=d(\"String\"),p=d(\"Number\"),g=d(\"Date\"),b=d(\"RegExp\"),y=d(\"Error\"),m=d(\"Symbol\"),_=d(\"ArrayBuffer\"),O=d(\"Function\"),j=o.p.document&&o.p.document.childNodes;\"object\"!=typeof Int8Array&&\"function\"!=typeof j&&(O=function(t){return\"function\"==typeof t||!1});var k=O,w=d(\"Object\"),x=o.s&&w(new DataView(new ArrayBuffer(8))),E=\"undefined\"!=typeof Map&&w(new Map),T=d(\"DataView\");var P=x?function(t){return null!=t&&k(t.getInt8)&&_(t.buffer)}:T,S=o.k||d(\"Array\");function A(t,e){return null!=t&&o.i.call(t,e)}var L=d(\"Arguments\");!function(){L(arguments)||(L=function(t){return A(t,\"callee\")})}();var C=L;function I(t){return!m(t)&&Object(o.f)(t)&&!isNaN(parseFloat(t))}function M(t){return p(t)&&Object(o.g)(t)}function R(t){return function(){return t}}function F(t){return function(e){var n=t(e);return\"number\"==typeof n&&n>=0&&n<=o.b}}function N(t){return function(e){return null==e?void 0:e[t]}}var D=N(\"byteLength\"),B=F(D),U=/\\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\\]/;var V=o.r?function(t){return o.l?Object(o.l)(t)&&!P(t):B(t)&&U.test(o.t.call(t))}:R(!1),z=N(\"length\");function G(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=o.n.length,r=t.constructor,i=k(r)&&r.prototype||o.c,a=\"constructor\";for(A(t,a)&&!e.contains(a)&&e.push(a);n--;)(a=o.n[n])in t&&t[a]!==i[a]&&!e.contains(a)&&e.push(a)}function H(t){if(!u(t))return[];if(o.m)return Object(o.m)(t);var e=[];for(var n in t)A(t,n)&&e.push(n);return o.h&&G(t,e),e}function W(t){if(null==t)return!0;var e=z(t);return\"number\"==typeof e&&(S(t)||v(t)||C(t))?0===e:0===z(H(t))}function q(t,e){var n=H(e),r=n.length;if(null==t)return!r;for(var i=Object(t),a=0;a<r;a++){var o=n[a];if(e[o]!==i[o]||!(o in i))return!1}return!0}function X(t){return t instanceof X?t:this instanceof X?void(this._wrapped=t):new X(t)}function Y(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,D(t))}X.VERSION=o.e,X.prototype.value=function(){return this._wrapped},X.prototype.valueOf=X.prototype.toJSON=X.prototype.value,X.prototype.toString=function(){return String(this._wrapped)};function K(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return(\"function\"===i||\"object\"===i||\"object\"==typeof e)&&function t(e,n,r,i){e instanceof X&&(e=e._wrapped);n instanceof X&&(n=n._wrapped);var a=o.t.call(e);if(a!==o.t.call(n))return!1;if(x&&\"[object Object]\"==a&&P(e)){if(!P(n))return!1;a=\"[object DataView]\"}switch(a){case\"[object RegExp]\":case\"[object String]\":return\"\"+e==\"\"+n;case\"[object Number]\":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case\"[object Date]\":case\"[object Boolean]\":return+e==+n;case\"[object Symbol]\":return o.d.valueOf.call(e)===o.d.valueOf.call(n);case\"[object ArrayBuffer]\":case\"[object DataView]\":return t(Y(e),Y(n),r,i)}var s=\"[object Array]\"===a;if(!s&&V(e)){if(D(e)!==D(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;s=!0}if(!s){if(\"object\"!=typeof e||\"object\"!=typeof n)return!1;var u=e.constructor,c=n.constructor;if(u!==c&&!(k(u)&&u instanceof u&&k(c)&&c instanceof c)&&\"constructor\"in e&&\"constructor\"in n)return!1}i=i||[];var l=(r=r||[]).length;for(;l--;)if(r[l]===e)return i[l]===n;if(r.push(e),i.push(n),s){if((l=e.length)!==n.length)return!1;for(;l--;)if(!K(e[l],n[l],r,i))return!1}else{var f,h=H(e);if(l=h.length,H(n).length!==l)return!1;for(;l--;)if(f=h[l],!A(n,f)||!K(e[f],n[f],r,i))return!1}return r.pop(),i.pop(),!0}(t,e,n,r)}function Z(t,e){return K(t,e)}function Q(t){if(!u(t))return[];var e=[];for(var n in t)e.push(n);return o.h&&G(t,e),e}function J(t){var e=z(t);return function(n){if(null==n)return!1;var r=Q(n);if(z(r))return!1;for(var i=0;i<e;i++)if(!k(n[t[i]]))return!1;return t!==rt||!k(n[$])}}var $=\"forEach\",tt=[\"clear\",\"delete\"],et=[\"get\",\"has\",\"set\"],nt=tt.concat($,et),rt=tt.concat(et),it=[\"add\"].concat(tt,$,\"has\"),at=E?J(nt):d(\"Map\"),ot=E?J(rt):d(\"WeakMap\"),st=E?J(it):d(\"Set\"),ut=d(\"WeakSet\");function ct(t){for(var e=H(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function lt(t){for(var e=H(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function ft(t){for(var e={},n=H(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function ht(t){var e=[];for(var n in t)k(t[n])&&e.push(n);return e.sort()}function dt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var a=arguments[i],o=t(a),s=o.length,u=0;u<s;u++){var c=o[u];e&&void 0!==n[c]||(n[c]=a[c])}return n}}var vt=dt(Q),pt=dt(H),gt=dt(Q,!0);function bt(t){if(!u(t))return{};if(o.j)return Object(o.j)(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function yt(t,e){var n=bt(t);return e&&pt(n,e),n}function mt(t){return u(t)?S(t)?t.slice():vt({},t):t}function _t(t,e){return e(t),t}function Ot(t){return S(t)?t:[t]}function jt(t){return X.toPath(t)}function kt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function wt(t,e,n){var r=kt(t,jt(e));return l(r)?n:r}function xt(t,e){for(var n=(e=jt(e)).length,r=0;r<n;r++){var i=e[r];if(!A(t,i))return!1;t=t[i]}return!!n}function Et(t){return t}function Tt(t){return t=pt({},t),function(e){return q(e,t)}}function Pt(t){return t=jt(t),function(e){return kt(e,t)}}function St(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return function(){return t.apply(e,arguments)}}function At(t,e,n){return null==t?Et:k(t)?St(t,e,n):u(t)&&!S(t)?Tt(t):Pt(t)}function Lt(t,e){return At(t,e,1/0)}function Ct(t,e,n){return X.iteratee!==Lt?X.iteratee(t,e):At(t,e,n)}function It(t,e,n){e=Ct(e,n);for(var r=H(t),i=r.length,a={},o=0;o<i;o++){var s=r[o];a[s]=e(t[s],s,t)}return a}function Mt(){}function Rt(t){return null==t?Mt:function(e){return wt(t,e)}}function Ft(t,e,n){var r=Array(Math.max(0,t));e=St(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function Nt(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}X.toPath=Ot,X.iteratee=Lt;var Dt=Date.now||function(){return(new Date).getTime()};function Bt(t){var e=function(e){return t[e]},n=\"(?:\"+H(t).join(\"|\")+\")\",r=RegExp(n),i=RegExp(n,\"g\");return function(t){return t=null==t?\"\":\"\"+t,r.test(t)?t.replace(i,e):t}}var Ut={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},Vt=Bt(Ut),zt=Bt(ft(Ut)),Gt=X.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},Ht=/(.)^/,Wt={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},qt=/\\\\|'|\\r|\\n|\\u2028|\\u2029/g;function Xt(t){return\"\\\\\"+Wt[t]}var Yt=/^\\s*(\\w|\\$)+\\s*$/;function Kt(t,e,n){!e&&n&&(e=n),e=gt({},e,X.templateSettings);var r=RegExp([(e.escape||Ht).source,(e.interpolate||Ht).source,(e.evaluate||Ht).source].join(\"|\")+\"|$\",\"g\"),i=0,a=\"__p+='\";t.replace(r,(function(e,n,r,o,s){return a+=t.slice(i,s).replace(qt,Xt),i=s+e.length,n?a+=\"'+\\n((__t=(\"+n+\"))==null?'':_.escape(__t))+\\n'\":r?a+=\"'+\\n((__t=(\"+r+\"))==null?'':__t)+\\n'\":o&&(a+=\"';\\n\"+o+\"\\n__p+='\"),e})),a+=\"';\\n\";var o,s=e.variable;if(s){if(!Yt.test(s))throw new Error(s)}else a=\"with(obj||{}){\\n\"+a+\"}\\n\",s=\"obj\";a=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+a+\"return __p;\\n\";try{o=new Function(s,\"_\",a)}catch(t){throw t.source=a,t}var u=function(t){return o.call(this,t,X)};return u.source=\"function(\"+s+\"){\\n\"+a+\"}\",u}function Zt(t,e,n){var r=(e=jt(e)).length;if(!r)return k(n)?n.call(t):n;for(var i=0;i<r;i++){var a=null==t?void 0:t[e[i]];void 0===a&&(a=n,i=r),t=k(a)?a.call(t):a}return t}var Qt=0;function Jt(t){var e=++Qt+\"\";return t?t+e:e}function $t(t){var e=X(t);return e._chain=!0,e}function te(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var a=bt(t.prototype),o=t.apply(a,i);return u(o)?o:a}var ee=s((function(t,e){var n=ee.placeholder,r=function(){for(var i=0,a=e.length,o=Array(a),s=0;s<a;s++)o[s]=e[s]===n?arguments[i++]:e[s];for(;i<arguments.length;)o.push(arguments[i++]);return te(t,r,this,this,o)};return r}));ee.placeholder=X;var ne=ee,re=s((function(t,e,n){if(!k(t))throw new TypeError(\"Bind must be called on a function\");var r=s((function(i){return te(t,r,e,this,n.concat(i))}));return r})),ie=F(z);function ae(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,a=0,o=z(t);a<o;a++){var s=t[a];if(ie(s)&&(S(s)||C(s)))if(e>1)ae(s,e-1,n,r),i=r.length;else for(var u=0,c=s.length;u<c;)r[i++]=s[u++];else n||(r[i++]=s)}return r}var oe=s((function(t,e){var n=(e=ae(e,!1,!1)).length;if(n<1)throw new Error(\"bindAll must be passed function names\");for(;n--;){var r=e[n];t[r]=re(t[r],t)}return t}));function se(t,e){var n=function(r){var i=n.cache,a=\"\"+(e?e.apply(this,arguments):r);return A(i,a)||(i[a]=t.apply(this,arguments)),i[a]};return n.cache={},n}var ue=s((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),ce=ne(ue,X,1);function le(t,e,n){var r,i,a,o,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Dt(),r=null,o=t.apply(i,a),r||(i=a=null)},c=function(){var c=Dt();s||!1!==n.leading||(s=c);var l=e-(c-s);return i=this,a=arguments,l<=0||l>e?(r&&(clearTimeout(r),r=null),s=c,o=t.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,l)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c}function fe(t,e,n){var r,i,a,o,u,c=function(){var s=Dt()-i;e>s?r=setTimeout(c,e-s):(r=null,n||(o=t.apply(u,a)),r||(a=u=null))},l=s((function(s){return u=this,a=s,i=Dt(),r||(r=setTimeout(c,e),n&&(o=t.apply(u,a))),o}));return l.cancel=function(){clearTimeout(r),r=a=u=null},l}function he(t,e){return ne(e,t)}function de(t){return function(){return!t.apply(this,arguments)}}function ve(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function pe(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function ge(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var be=ne(ge,2);function ye(t,e,n){e=Ct(e,n);for(var r,i=H(t),a=0,o=i.length;a<o;a++)if(e(t[r=i[a]],r,t))return r}function me(t){return function(e,n,r){n=Ct(n,r);for(var i=z(e),a=t>0?0:i-1;a>=0&&a<i;a+=t)if(n(e[a],a,e))return a;return-1}}var _e=me(1),Oe=me(-1);function je(t,e,n,r){for(var i=(n=Ct(n,r,1))(e),a=0,o=z(t);a<o;){var s=Math.floor((a+o)/2);n(t[s])<i?a=s+1:o=s}return a}function ke(t,e,n){return function(r,i,a){var s=0,u=z(r);if(\"number\"==typeof a)t>0?s=a>=0?a:Math.max(a+u,s):u=a>=0?Math.min(a+1,u):a+u+1;else if(n&&a&&u)return r[a=n(r,i)]===i?a:-1;if(i!=i)return(a=e(o.q.call(r,s,u),M))>=0?a+s:-1;for(a=t>0?s:u-1;a>=0&&a<u;a+=t)if(r[a]===i)return a;return-1}}var we=ke(1,_e,je),xe=ke(-1,Oe);function Ee(t,e,n){var r=(ie(t)?_e:ye)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Te(t,e){return Ee(t,Tt(e))}function Pe(t,e,n){var r,i;if(e=St(e,n),ie(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var a=H(t);for(r=0,i=a.length;r<i;r++)e(t[a[r]],a[r],t)}return t}function Se(t,e,n){e=Ct(e,n);for(var r=!ie(t)&&H(t),i=(r||t).length,a=Array(i),o=0;o<i;o++){var s=r?r[o]:o;a[o]=e(t[s],s,t)}return a}function Ae(t){var e=function(e,n,r,i){var a=!ie(e)&&H(e),o=(a||e).length,s=t>0?0:o-1;for(i||(r=e[a?a[s]:s],s+=t);s>=0&&s<o;s+=t){var u=a?a[s]:s;r=n(r,e[u],u,e)}return r};return function(t,n,r,i){var a=arguments.length>=3;return e(t,St(n,i,4),r,a)}}var Le=Ae(1),Ce=Ae(-1);function Ie(t,e,n){var r=[];return e=Ct(e,n),Pe(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function Me(t,e,n){return Ie(t,de(Ct(e)),n)}function Re(t,e,n){e=Ct(e,n);for(var r=!ie(t)&&H(t),i=(r||t).length,a=0;a<i;a++){var o=r?r[a]:a;if(!e(t[o],o,t))return!1}return!0}function Fe(t,e,n){e=Ct(e,n);for(var r=!ie(t)&&H(t),i=(r||t).length,a=0;a<i;a++){var o=r?r[a]:a;if(e(t[o],o,t))return!0}return!1}function Ne(t,e,n,r){return ie(t)||(t=ct(t)),(\"number\"!=typeof n||r)&&(n=0),we(t,e,n)>=0}var De=s((function(t,e,n){var r,i;return k(e)?i=e:(e=jt(e),r=e.slice(0,-1),e=e[e.length-1]),Se(t,(function(t){var a=i;if(!a){if(r&&r.length&&(t=kt(t,r)),null==t)return;a=t[e]}return null==a?a:a.apply(t,n)}))}));function Be(t,e){return Se(t,Pt(e))}function Ue(t,e){return Ie(t,Tt(e))}function Ve(t,e,n){var r,i,a=-1/0,o=-1/0;if(null==e||\"number\"==typeof e&&\"object\"!=typeof t[0]&&null!=t)for(var s=0,u=(t=ie(t)?t:ct(t)).length;s<u;s++)null!=(r=t[s])&&r>a&&(a=r);else e=Ct(e,n),Pe(t,(function(t,n,r){((i=e(t,n,r))>o||i===-1/0&&a===-1/0)&&(a=t,o=i)}));return a}function ze(t,e,n){var r,i,a=1/0,o=1/0;if(null==e||\"number\"==typeof e&&\"object\"!=typeof t[0]&&null!=t)for(var s=0,u=(t=ie(t)?t:ct(t)).length;s<u;s++)null!=(r=t[s])&&r<a&&(a=r);else e=Ct(e,n),Pe(t,(function(t,n,r){((i=e(t,n,r))<o||i===1/0&&a===1/0)&&(a=t,o=i)}));return a}function Ge(t,e,n){if(null==e||n)return ie(t)||(t=ct(t)),t[Nt(t.length-1)];var r=ie(t)?mt(t):ct(t),i=z(r);e=Math.max(Math.min(e,i),0);for(var a=i-1,o=0;o<e;o++){var s=Nt(o,a),u=r[o];r[o]=r[s],r[s]=u}return r.slice(0,e)}function He(t){return Ge(t,1/0)}function We(t,e,n){var r=0;return e=Ct(e,n),Be(Se(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),\"value\")}function qe(t,e){return function(n,r,i){var a=e?[[],[]]:{};return r=Ct(r,i),Pe(n,(function(e,i){var o=r(e,i,n);t(a,e,o)})),a}}var Xe=qe((function(t,e,n){A(t,n)?t[n].push(e):t[n]=[e]})),Ye=qe((function(t,e,n){t[n]=e})),Ke=qe((function(t,e,n){A(t,n)?t[n]++:t[n]=1})),Ze=qe((function(t,e,n){t[n?0:1].push(e)}),!0),Qe=/[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;function Je(t){return t?S(t)?o.q.call(t):v(t)?t.match(Qe):ie(t)?Se(t,Et):ct(t):[]}function $e(t){return null==t?0:ie(t)?t.length:H(t).length}function tn(t,e,n){return e in n}var en=s((function(t,e){var n={},r=e[0];if(null==t)return n;k(r)?(e.length>1&&(r=St(r,e[1])),e=Q(t)):(r=tn,e=ae(e,!1,!1),t=Object(t));for(var i=0,a=e.length;i<a;i++){var o=e[i],s=t[o];r(s,o,t)&&(n[o]=s)}return n})),nn=s((function(t,e){var n,r=e[0];return k(r)?(r=de(r),e.length>1&&(n=e[1])):(e=Se(ae(e,!1,!1),String),r=function(t,n){return!Ne(e,n)}),en(t,r,n)}));function rn(t,e,n){return o.q.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function an(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:rn(t,t.length-e)}function on(t,e,n){return o.q.call(t,null==e||n?1:e)}function sn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:on(t,Math.max(0,t.length-e))}function un(t){return Ie(t,Boolean)}function cn(t,e){return ae(t,e,!1)}var ln=s((function(t,e){return e=ae(e,!0,!0),Ie(t,(function(t){return!Ne(e,t)}))})),fn=s((function(t,e){return ln(t,e)}));function hn(t,e,n,r){f(e)||(r=n,n=e,e=!1),null!=n&&(n=Ct(n,r));for(var i=[],a=[],o=0,s=z(t);o<s;o++){var u=t[o],c=n?n(u,o,t):u;e&&!n?(o&&a===c||i.push(u),a=c):n?Ne(a,c)||(a.push(c),i.push(u)):Ne(i,u)||i.push(u)}return i}var dn=s((function(t){return hn(ae(t,!0,!0))}));function vn(t){for(var e=[],n=arguments.length,r=0,i=z(t);r<i;r++){var a=t[r];if(!Ne(e,a)){var o;for(o=1;o<n&&Ne(arguments[o],a);o++);o===n&&e.push(a)}}return e}function pn(t){for(var e=t&&Ve(t,z).length||0,n=Array(e),r=0;r<e;r++)n[r]=Be(t,r);return n}var gn=s(pn);function bn(t,e){for(var n={},r=0,i=z(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function yn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),a=0;a<r;a++,t+=n)i[a]=t;return i}function mn(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(o.q.call(t,r,r+=e));return n}function _n(t,e){return t._chain?X(e).chain():e}function On(t){return Pe(ht(t),(function(e){var n=X[e]=t[e];X.prototype[e]=function(){var t=[this._wrapped];return o.o.apply(t,arguments),_n(this,n.apply(X,t))}})),X}Pe([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],(function(t){var e=o.a[t];X.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),\"shift\"!==t&&\"splice\"!==t||0!==n.length||delete n[0]),_n(this,n)}})),Pe([\"concat\",\"join\",\"slice\"],(function(t){var e=o.a[t];X.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),_n(this,t)}}));var jn=X,kn=On(r);kn._=kn;var wn=kn,xn=n(159),En=n(4621);function Tn(){return(Tn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}const Pn={console:console,_:wn,colors:En,d3array:xn};function Sn(t,e,n){const r={},i=\"SAFE_EVAL_\"+Math.floor(1e6*Math.random());r[i]={};const o=i+\"=\"+t,s=Tn({},Pn,{},e);Object.keys(s).forEach(t=>{r[t]=s[t]});try{return a.a.runInNewContext(o,r,n),r[i]}catch(t){return()=>t}}},4605:function(t,e,n){\"use strict\";var r=n(0),i=n.n(r),a=n(2),o=n.n(a),s=n(4753),u=n(16),c=n(17),l=n(178),f=n(80),h=n(19),d=n(29),v=n(4592),p=n(4835),g=n(13);function b(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}var y=n(4706),m=n(4636);function _(t){return t?\"function\"==typeof t?Object(r.createElement)(y.a,{},t):Array.isArray(t)?t.map(_):(b(t.type,y.a),t):t}function O(t){var e=t.children,n=t.layers,r=t.views,a=[],o=[],s={};return i.a.Children.forEach(_(e),(function(t){if(t){var e=t.type;if(b(e,m.a)){var n=function(t,e){var n={},r=t.defaultProps||{};for(var i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}(e,t.props);o.push(n)}else a.push(t);if(e!==y.a&&b(e,y.a)&&t.props.id){var r=new e(t.props);s[r.id]=r}}})),Object.keys(s).length>0&&(Array.isArray(r)?r.forEach((function(t){s[t.id]=t})):r&&(s[r.id]=r),r=Object.values(s)),{layers:n=o.length>0?[].concat(o,Object(g.a)(n)):n,children:a,views:r}}var j=n(4599);function k(t){var e=t.children,n=(t.viewports,t.deck),i=t.ContextProvider,a=(n||{}).viewManager;if(!a||!a.views.length)return[];var o=a.views[0].id;return e.map((function(t,e){t.props.viewportId&&j.a.removed(\"viewportId\",\"<View>\")(),t.props.viewId&&j.a.removed(\"viewId\",\"<View>\")();var s=o,u=t;b(t.type,y.a)&&(s=t.props.id||o,u=t.props.children);var c=u&&u.props&&u.props.style,l=a.getViewport(s),f=a.getViewState(s);if(!l)return null;var h=l.x,d=l.y,v=l.width,p=l.height;u=function t(e,n){return e?\"function\"==typeof e?e(n):Array.isArray(e)?e.map((function(e){return t(e,n)})):Object(r.cloneElement)(e,n):e}(u,{x:h,y:d,width:v,height:p,viewport:l,viewState:f});var g={position:\"absolute\",zIndex:c&&c.zIndex,pointerEvents:\"none\",left:h,top:d,width:v,height:p},m=\"view-child-\".concat(s,\"-\").concat(e);if(i){var _={viewport:l,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:n._onViewStateChange};u=Object(r.createElement)(i,{value:_},u)}return Object(r.createElement)(\"div\",{key:m,id:m,style:g},u)}))}var w=v.a.memoize,x=p.a.getPropTypes(o.a),E=p.a.defaultProps,T=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(l.a)(this,Object(f.a)(e).call(this,t))).viewports=null,n.children=null,n._needsRedraw=null,n.pickObject=n.pickObject.bind(Object(d.a)(Object(d.a)(n))),n.pickMultipleObjects=n.pickMultipleObjects.bind(Object(d.a)(Object(d.a)(n))),n.pickObjects=n.pickObjects.bind(Object(d.a)(Object(d.a)(n))),n._extractJSXLayers=w(O),n._positionChildrenUnderViews=w(k),n}return Object(h.a)(e,t),Object(c.a)(e,[{key:\"componentDidMount\",value:function(){var t=this.props.Deck||p.a;this.deck=this.deck||new t(Object.assign({},this.props,{canvas:this.deckCanvas,_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:\"shouldComponentUpdate\",value:function(t){this._updateFromProps(t);var e=this.children!==this._parseJSX(t).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return e&&!n}},{key:\"componentDidUpdate\",value:function(){this._redrawDeck()}},{key:\"componentWillUnmount\",value:function(){this.deck.finalize()}},{key:\"pickObject\",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,a=t.layerIds,o=void 0===a?null:a;return this.deck.pickObject({x:e,y:n,radius:i,layerIds:o})}},{key:\"pickMultipleObjects\",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,a=t.layerIds,o=void 0===a?null:a,s=t.depth,u=void 0===s?10:s;return this.deck.pickMultipleObjects({x:e,y:n,radius:i,layerIds:o,depth:u})}},{key:\"pickObjects\",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,a=t.height,o=void 0===a?1:a,s=t.layerIds,u=void 0===s?null:s;return this.deck.pickObjects({x:e,y:n,width:i,height:o,layerIds:u})}},{key:\"_redrawDeck\",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:\"_customRender\",value:function(t){this._needsRedraw=t,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:\"_parseJSX\",value:function(t){return this._extractJSXLayers({layers:t.layers,views:t.views,children:t.children})}},{key:\"_updateFromProps\",value:function(t){var e=this._parseJSX(t),n=e.layers,r=e.views,i=Object.assign({},t,{layers:n,views:r});this.deck.setProps(i)}},{key:\"render\",value:function(){var t=this,e=(this.deck||{}).viewManager;this.viewports=e&&e.getViewports(),this.children=this._parseJSX(this.props).children;var n=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:this.props.ContextProvider}),i=Object.assign({},{position:\"absolute\",left:0,top:0},this.props.style),a=Object(r.createElement)(\"canvas\",{ref:function(e){return t.deckCanvas=e},key:\"deck-canvas\",id:this.props.id,style:i});return Object(r.createElement)(\"div\",{id:\"deckgl-wrapper\"},[n,a])}}]),e}(i.a.Component);T.propTypes=x,T.defaultProps=E;var P=n(53),S=n(4767);function A(t){const{tooltip:e}=t;if(null==e)return null;const{x:n,y:a,content:o}=e,s=Object(r.useMemo)(()=>({position:\"absolute\",top:a+\"px\",left:n+\"px\",padding:\"8px\",margin:\"8px\",background:\"rgba(0, 0, 0, 0.8)\",color:\"#fff\",maxWidth:\"300px\",fontSize:\"12px\",zIndex:9,pointerEvents:\"none\"}),[n,a]);if(\"string\"==typeof o){const t=Object(r.useMemo)(()=>({__html:Object(S.filterXSS)(o,{stripIgnoreTag:!0})}),[o]);return i.a.createElement(\"div\",{style:s},i.a.createElement(\"div\",{dangerouslySetInnerHTML:t}))}return i.a.createElement(\"div\",{style:s},o)}n(4772),n(4887);function L(){const t=function(t,e){e||(e=t.slice(0));return t.raw=e,t}([\"\\n  .deckgl-tooltip > div {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n  }\\n\"]);return L=function(){return t},t}const C={viewport:o.a.object.isRequired,layers:o.a.array.isRequired,setControlValue:o.a.func,mapStyle:o.a.string,mapboxApiAccessToken:o.a.string.isRequired,children:o.a.node,bottomMargin:o.a.number,width:o.a.number.isRequired,height:o.a.number.isRequired};class I extends i.a.Component{constructor(t){var e,n,r;super(t),r=t=>{this.setState({tooltip:t})},(n=\"setTooltip\")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.tick=this.tick.bind(this),this.onViewStateChange=this.onViewStateChange.bind(this),this.state={timer:setInterval(this.tick,250),tooltip:null,viewState:t.viewport}}componentWillUnmount(){clearInterval(this.state.timer)}onViewStateChange(t){let{viewState:e}=t;this.setState({viewState:e,lastUpdate:Date.now()})}tick(){const{lastUpdate:t}=this.state;if(t&&Date.now()-t>250){const t=this.props.setControlValue;t&&t(\"viewport\",this.state.viewState),this.setState({lastUpdate:null})}}layers(){return this.props.layers.some(t=>\"function\"==typeof t)?this.props.layers.map(t=>\"function\"==typeof t?t():t):this.props.layers}render(){const{children:t,bottomMargin:e,height:n,width:r}=this.props,{viewState:a,tooltip:o}=this.state,u=n-e,c=this.layers();return i.a.createElement(i.a.Fragment,null,i.a.createElement(\"div\",{style:{position:\"relative\",width:r,height:u}},i.a.createElement(T,{initWebGLParameters:!0,controller:!0,width:r,height:u,layers:c,viewState:a,glOptions:{preserveDrawingBuffer:!0},onViewStateChange:this.onViewStateChange},i.a.createElement(s.b,{preserveDrawingBuffer:!0,mapStyle:this.props.mapStyle,mapboxApiAccessToken:this.props.mapboxApiAccessToken})),t),i.a.createElement(A,{tooltip:o}))}}I.propTypes=C,I.defaultProps={mapStyle:\"light\",setControlValue:()=>{},children:null,bottomMargin:0};e.a=Object(P.c)(I)(L())},4608:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return a})),n.d(e,\"b\",(function(){return s}));var r=n(159),i=n(4602);function a(t,e,n,r){const a=t;let o,s,u=n;return a.js_tooltip&&(u=Object(i.a)(a.js_tooltip)),u&&(o=t=>{t.picked?e({content:u(t),x:t.x,y:t.y}):e(null)}),a.js_onclick_href?s=t=>{const e=Object(i.a)(a.js_onclick_href)(t);window.open(e)}:a.table_filter&&void 0!==r&&(s=t=>r(t.object[a.line_column])),{onClick:s,onHover:o,pickable:Boolean(o)}}const o={p1:.01,p5:.05,p95:.95,p99:.99};function s(t,e){if(void 0===t&&(t=\"sum\"),void 0===e&&(e=null),\"count\"===t)return t=>t.length;let n;return n=t in o?(n,i)=>{let a;return a=e?n.sort((t,n)=>r.ascending(e(t),e(n))):n.sort(r.ascending),r.quantile(a,o[t],i)}:r[t],e?t=>n(t.map(t=>e(t))):t=>n(t)}},4609:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return u}));var r=n(0),i=n.n(r),a=n(2),o=n.n(a);const s={label:o.a.string.isRequired,value:o.a.string.isRequired};class u extends i.a.PureComponent{render(){const{label:t,value:e}=this.props;return i.a.createElement(\"div\",null,t,i.a.createElement(\"strong\",null,e))}}u.propTypes=s},4621:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"hexToRGB\",(function(){return i}));var r=n(352);function i(t,e){if(void 0===e&&(e=255),!t)return[0,0,0,e];const{r:n,g:i,b:a}=Object(r.g)(t);return[n,i,a,e]}},4627:function(t,e,n){\"use strict\";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.filter,r=void 0===n?function(){return!0}:n,a=e.map,o=void 0===a?function(t){return t}:a,s=e.result,u=void 0===s?[]:s;return Array.isArray(t)?i(t,r,o,u):r(t)?[o(t)]:[]}function i(t,e,n,r){for(var a=-1;++a<t.length;){var o=t[a];Array.isArray(o)?i(o,e,n,r):e(o)&&r.push(n(o))}return r}function a(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.result,r=void 0===n?[]:n,i=e.dimensions,o=void 0===i?3:i,s=-1,u=0;++s<t.length;){var c=t[s];Array.isArray(c)||ArrayBuffer.isView(c)?a(c,{result:r,dimensions:o}):u<o&&(r.push(c),u++)}return u>0&&u<o&&r.push(0),r}function o(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,a=t.count,o=void 0===a?1:a,s=n.length,u=o*s,c=0,l=i;c<s;c++)e[l++]=n[c];for(;c<u;)c<u-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+u-c),c=u);return e}n.d(e,\"b\",(function(){return r})),n.d(e,\"c\",(function(){return a})),n.d(e,\"a\",(function(){return o}))},4628:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return h}));var r=n(16),i=n(17),a=n(4994),o=n(5022),s=n(5027),u=n(5024),c=n(4889),l=n(5028),f=\"Resource subclass must define virtual methods\",h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(o.b)(e);var i=n.id,a=n.userData,s=void 0===a?{}:a;this.gl=e,this.id=i||Object(u.c)(this.constructor.name),this.userData=s,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(i.a)(t,[{key:\"toString\",value:function(){return\"\".concat(this.constructor.name,\"(\").concat(this.id,\")\")}},{key:\"delete\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.deleteChildren,n=void 0!==e&&e,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(t){t.delete()})),this}},{key:\"bind\",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return\"function\"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}},{key:\"unbind\",value:function(){this.bind(null)}},{key:\"getParameter\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object(s.b)(this.gl,t),Object(c.a)(t);var n=this.constructor.PARAMETERS||{},r=n[t];if(r){var i=Object(o.d)(this.gl),a=(!(\"webgl2\"in r)||i)&&(!(\"extension\"in r)||this.gl.getExtension(r.extension));if(!a){var u=r.webgl1,l=\"webgl2\"in r?r.webgl2:r.webgl1,f=i?l:u;return f}}return this._getParameter(t,e)}},{key:\"getParameters\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=e.parameters,r=e.keys,i=this.constructor.PARAMETERS||{},a=Object(o.d)(this.gl),u={},c=n||Object.keys(i),l=!0,f=!1,h=void 0;try{for(var d,v=c[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var p=d.value,g=i[p],b=g&&(!(\"webgl2\"in g)||a)&&(!(\"extension\"in g)||this.gl.getExtension(g.extension));if(b){var y=r?Object(s.a)(this.gl,p):p;u[y]=this.getParameter(p,t),r&&\"GLenum\"===g.type&&(u[y]=Object(s.a)(this.gl,u[y]))}}}catch(t){f=!0,h=t}finally{try{l||null==v.return||v.return()}finally{if(f)throw h}}return u}},{key:\"setParameter\",value:function(t,e){t=Object(s.b)(this.gl,t),Object(c.a)(t);var n=(this.constructor.PARAMETERS||{})[t];if(n){var r=Object(o.d)(this.gl);if(!((!(\"webgl2\"in n)||r)&&(!(\"extension\"in n)||this.gl.getExtension(n.extension))))throw new Error(\"Parameter not available on this platform\");\"GLenum\"===n.type&&(e=Object(s.b)(e))}return this._setParameter(t,e),this}},{key:\"setParameters\",value:function(t){for(var e in t)this.setParameter(e,t[e]);return this}},{key:\"stubRemovedMethods\",value:function(t,e,n){return Object(l.a)(this,t,e,n)}},{key:\"initialize\",value:function(t){}},{key:\"_createHandle\",value:function(){throw new Error(f)}},{key:\"_deleteHandle\",value:function(){throw new Error(f)}},{key:\"_bindHandle\",value:function(){throw new Error(f)}},{key:\"_getOptsFromHandle\",value:function(){throw new Error(f)}},{key:\"_getParameter\",value:function(t,e){throw new Error(f)}},{key:\"_setParameter\",value:function(t,e){throw new Error(f)}},{key:\"_context\",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:\"_addStats\",value:function(){var t=this.constructor.name,e=a.a.get(\"Resource Counts\");e.get(\"Resources Created\").incrementCount(),e.get(\"\".concat(t,\"s Created\")).incrementCount(),e.get(\"\".concat(t,\"s Active\")).incrementCount()}},{key:\"_removeStats\",value:function(){var t=this.constructor.name;a.a.get(\"Resource Counts\").get(\"\".concat(t,\"s Active\")).decrementCount()}},{key:\"_trackAllocatedMemory\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=a.a.get(\"Memory Usage\");n.get(\"GPU Memory\").addCount(t),n.get(\"\".concat(e,\" Memory\")).addCount(t),this.byteLength=t}},{key:\"_trackDeallocatedMemory\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,e=a.a.get(\"Memory Usage\");e.get(\"GPU Memory\").subtractCount(this.byteLength),e.get(\"\".concat(t,\" Memory\")).subtractCount(this.byteLength),this.byteLength=0}},{key:\"handle\",get:function(){return this._handle}}]),t}()},4631:function(t,e,n){\"use strict\";(function(t,r){n.d(e,\"b\",(function(){return o})),n.d(e,\"a\",(function(){return s}));var i=n(25),a={self:\"undefined\"!=typeof self&&self,window:\"undefined\"!=typeof window&&window,global:void 0!==t&&t,document:\"undefined\"!=typeof document&&document,process:\"object\"===(void 0===r?\"undefined\":Object(i.a)(r))&&r},o=a.window||a.self||a.global,s=a.process||{};console}).call(this,n(153),n(287))},4636:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return K}));var r=n(7),i=n(16),a=n(17),o=n(178),s=n(80),u=n(19),c=n(4647),l=n(4754),f=n(4729),h=n(25),d=n(4601);function v(t,e){var n=p({newProps:t,oldProps:e,propTypes:b(t),ignoreProps:{data:null,updateTriggers:null}}),r=function(t,e){if(null===e)return\"oldProps is null, initial diff\";var n=t.dataComparator;if(n){if(!n(t.data,e.data))return\"Data comparator detected a change\"}else if(t.data!==e.data)return\"A new data container was supplied\";return null}(t,e),i=!1;return r||(i=function(t,e){if(null===e)return\"oldProps is null, initial diff\";if(\"all\"in t.updateTriggers){if(g(t,e,\"all\"))return{all:!0}}var n={},r=!1;for(var i in t.updateTriggers){if(\"all\"!==i)g(t,e,i)&&(n[i]=!0,r=n)}return r}(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i}}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.newProps,n=t.oldProps,r=t.ignoreProps,i=void 0===r?{}:r,a=t.propTypes,o=void 0===a?{}:a,s=t.triggerName,u=void 0===s?\"props\":s;if(Object(d.a)(void 0!==n&&void 0!==e,\"compareProps args\"),n===e)return null;if(\"object\"!==Object(h.a)(e)||null===e)return\"\".concat(u,\" changed shallowly\");if(\"object\"!==Object(h.a)(n)||null===n)return\"\".concat(u,\" changed shallowly\");for(var c in n)if(!(c in i)){if(!(c in e))return\"\".concat(u,\".\").concat(c,\" dropped\");var l=e[c],f=n[c],v=o[c],p=v&&v.equal;if(p&&!p(l,f,v))return\"\".concat(u,\".\").concat(c,\" changed deeply\");if(!p&&(p=l&&f&&l.equals)&&!p.call(l,f))return\"\".concat(u,\".\").concat(c,\" changed deeply\");if(!p&&f!==l)return\"\".concat(u,\".\").concat(c,\" changed shallowly\")}for(var g in e)if(!(g in i)&&!(g in n))return\"\".concat(u,\".\").concat(g,\" added: undefined -> \").concat(e[g]);return null}function g(t,e,n){var r=t.updateTriggers[n];r=null==r?{}:r;var i=e.updateTriggers[n];return p({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function b(t){var e=t._component,n=e&&e.constructor;return n?n._propTypes:{}}var y=n(4773),m=n(4599),_=n(5025),O=n(4784),j=n(4616),k=n(4610),w=n(4716);function x(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(r.a)(t,3),a=i[0],o=i[1],s=i[2],u=void 0===s?0:s,c=e.projectFlat(t),l=Object(r.a)(c,2),f=l[0],h=l[1],d=n?Object(w.b)({longitude:a,latitude:o,scale:e.scale}):e.getDistanceScales(),v=u*d.pixelsPerMeter[2];return[f,h,v]}function E(t,e){var n=e.viewport,i=e.modelMatrix,a=e.coordinateSystem,o=e.coordinateOrigin,s=e.offsetMode,u=Object(r.a)(t,3),l=u[0],f=u[1],h=u[2];if(i){var d=j.c([],[l,f,h,1],i),v=Object(r.a)(d,3);l=v[0],f=v[1],h=v[2]}switch(a){case c.a.LNGLAT:case c.a.LNGLAT_DEPRECATED:return x([l,f,h],n,s);case c.a.LNGLAT_OFFSETS:return x([l+o[0],f+o[1],h+(o[2]||0)],n,s);case c.a.METER_OFFSETS:return x(Object(w.a)(o,[l,f,h]),n,s);case c.a.IDENTITY:default:return n.projectPosition([l,f,h])}}function T(t,e){var n=function(t){var e=Object.assign({},t),n=t.viewport,r=t.coordinateSystem,i=t.coordinateOrigin,a=t.fromCoordinateSystem,o=t.fromCoordinateOrigin;return void 0===a&&(e.fromCoordinateSystem=r),void 0===o&&(e.fromCoordinateOrigin=i),r===c.a.LNGLAT&&n.zoom>=O.a&&(e.coordinateSystem=c.a.LNGLAT_OFFSETS,e.coordinateOrigin=[Math.fround(n.longitude),Math.fround(n.latitude)]),e}(e),r=n.viewport,i=n.coordinateSystem,a=n.coordinateOrigin,o=n.modelMatrix,s=n.fromCoordinateSystem,u=n.fromCoordinateOrigin;switch(i){case c.a.LNGLAT_OFFSETS:case c.a.METER_OFFSETS:var l=E(t,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:!0}),f=x(a,r,!0);return k.h(l,l,f),l;case c.a.LNGLAT:case c.a.LNGLAT_DEPRECATED:case c.a.IDENTITY:default:return E(t,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:!1})}}var P=n(4787),S={boolean:{validate:function(t,e){return!0},equal:function(t,e,n){return Boolean(t)===Boolean(e)}},number:{validate:function(t,e){return Number.isFinite(t)&&(!(\"max\"in e)||t<=e.max)&&(!(\"min\"in e)||t>=e.min)}},color:{validate:function(t,e){return I(t)&&(3===t.length||4===t.length)},equal:function(t,e,n){return A(t,e)}},accessor:{validate:function(t,e){var n=M(t);return\"function\"===n||n===M(e.value)},equal:function(t,e,n){return\"function\"==typeof e||A(t,e)}},array:{validate:function(t,e){return e.optional&&!t||I(t)},equal:function(t,e,n){return n.compare?A(t,e):t===e}},function:{validate:function(t,e){return e.optional&&!t||\"function\"==typeof t},equal:function(t,e,n){return!n.compare||t===e}}};function A(t,e){if(t===e)return!0;if(!I(t)||!I(e))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function L(t,e){switch(M(e)){case\"object\":return C(t,e);case\"array\":return C(t,{type:\"array\",value:e,compare:!1});case\"boolean\":return C(t,{type:\"boolean\",value:e});case\"number\":return C(t,{type:\"number\",value:e});case\"function\":return C(t,{type:\"function\",value:e,compare:!0});default:return{name:t,type:\"unknown\",value:e}}}function C(t,e){return\"type\"in e?Object.assign({name:t},S[e.type],e):\"value\"in e?Object.assign({name:t,type:M(e.value)},e):{name:t,type:\"object\",value:e}}function I(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function M(t){return I(t)?\"array\":null===t?\"null\":Object(h.a)(t)}function R(){for(var t=this,e=N(t.constructor),n=e.defaultProps,r=Object.create(n,{_component:{enumerable:!1,value:t},_asyncPropOriginalValues:{enumerable:!1,value:{}},_asyncPropResolvedValues:{enumerable:!1,value:{}}}),i=0;i<arguments.length;++i)Object.assign(r,arguments[i]);var a=t.constructor.layerName,o=e.deprecatedProps;return F(a,r,o),F(a,r.updateTriggers,o),F(a,r.transitions,o),Object(f.a)(r),Object.freeze(r),r}function F(t,e,n){if(e)for(var r in n)if(B(e,r)){var i=\"\".concat(t||\"Layer\",\": \").concat(r),a=!0,o=!1,s=void 0;try{for(var u,c=n[r][Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;B(e,l)||(e[l]=e[r])}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}m.a.deprecated(i,n[r].join(\"/\"))()}}function N(t){var e=U(t,\"_mergedDefaultProps\");return e?{defaultProps:e,propTypes:U(t,\"_propTypes\"),deprecatedProps:U(t,\"_deprecatedProps\")}:function(t){var e=t.prototype;if(!e)return{defaultProps:{}};var n=Object.getPrototypeOf(t),i=e&&N(n)||null,a=function(t){for(var e={},n={},i={},a=Object.entries(t),o=0;o<a.length;o++){var s=Object(r.a)(a[o],2),u=s[0],c=s[1];if(c&&c.deprecatedFor)i[u]=Array.isArray(c.deprecatedFor)?c.deprecatedFor:[c.deprecatedFor];else{var l=L(u,c);e[u]=l,n[u]=l.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(U(t,\"defaultProps\")||{}),o=Object.assign({},i&&i.propTypes,a.propTypes),s=function(t,e,n,r){var i=Object.create(null);Object.assign(i,e,t);var a=function(t){var e=U(t,\"layerName\")||U(t,\"componentName\");e||m.a.once(0,\"\".concat(t.name,\".componentName not specified\"))();return e||t.name}(r);return delete t.id,Object.defineProperties(i,{id:{configurable:!1,writable:!0,value:a}}),function(t,e){var n={},r={_asyncPropDefaultValues:{enumerable:!1,value:n},_asyncPropOriginalValues:{enumerable:!1,value:{}}};for(var i in e){var a=e[i],o=a.name,s=a.value;a.async&&(n[o]=s,r[o]=D(o))}Object.defineProperties(t,r)}(i,n),i}(a.defaultProps,i&&i.defaultProps,o,t),u=Object.assign({},i&&i.deprecatedProps,a.deprecatedProps);return t._mergedDefaultProps=s,t._propTypes=o,t._deprecatedProps=u,{propTypes:o,defaultProps:s,deprecatedProps:u}}(t)}function D(t){return{configurable:!1,enumerable:!0,set:function(e){\"string\"==typeof e||e instanceof Promise?this._asyncPropOriginalValues[t]=e:this._asyncPropResolvedValues[t]=e},get:function(){if(this._asyncPropResolvedValues){if(t in this._asyncPropResolvedValues){var e=this._asyncPropResolvedValues[t];return\"data\"===t?e||this._asyncPropDefaultValues[t]:e}if(t in this._asyncPropOriginalValues){var n=this._component&&this._component.internalState;if(n&&n.hasAsyncProp(t))return n.getAsyncProp(t)}}return this._asyncPropDefaultValues[t]}}}function B(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U(t,e){return B(t,e)&&t[e]}var V=Object.freeze({}),z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(i.a)(this,t),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=V,this.oldAsyncProps=null}return Object(a.a)(t,[{key:\"getOldProps\",value:function(){return this.oldAsyncProps||this.oldProps}},{key:\"resetOldProps\",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:\"freezeAsyncOldProps\",value:function(){if(!this.oldAsyncProps)for(var t in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps={},this.oldProps)this.oldAsyncProps[t]=this.oldProps[t]}},{key:\"hasAsyncProp\",value:function(t){return t in this.asyncProps}},{key:\"getAsyncProp\",value:function(t){var e=this.asyncProps[t];return e&&e.resolvedValue}},{key:\"isAsyncPropLoading\",value:function(t){var e=this.asyncProps[t];return Boolean(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}},{key:\"setAsyncProps\",value:function(t){var e=t._asyncPropResolvedValues||{},n=t._asyncPropOriginalValues||t,r=t._asyncPropDefaultValues||{};for(var i in e){var a=e[i];this._createAsyncPropData(i,a,r[i]),this._updateAsyncProp(i,a)}for(var o in n){var s=n[o];this._createAsyncPropData(o,s,r[o]),this._updateAsyncProp(o,s)}}},{key:\"_updateAsyncProp\",value:function(t,e){if(this._didAsyncInputValueChange(t,e)){if(\"string\"==typeof e)e=(0,this.layer.props.fetch)(e,{propName:t,layer:this.layer});e instanceof Promise?this._watchPromise(t,e):this._setPropValue(t,e)}}},{key:\"_didAsyncInputValueChange\",value:function(t,e){var n=this.asyncProps[t];return e!==n.lastValue&&(n.lastValue=e,!0)}},{key:\"_setPropValue\",value:function(t,e){var n=this.asyncProps[t];n.value=e,n.resolvedValue=e,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:\"_setAsyncPropValue\",value:function(t,e,n){var r=this.asyncProps[t];r&&n>=r.resolvedLoadCount&&(Object(d.a)(void 0!==e),this.freezeAsyncOldProps(),e=this._postProcessValue(t,e),r.resolvedValue=e,r.resolvedLoadCount=n,this.onAsyncPropUpdated(t,e))}},{key:\"_watchPromise\",value:function(t,e){var n=this,r=this.asyncProps[t];r.pendingLoadCount++;var i=r.pendingLoadCount;e.then((function(e){return n._setAsyncPropValue(t,e,i)})).catch((function(t){return m.a.error(t)()}))}},{key:\"_postProcessValue\",value:function(t,e){var n=(this.component?this.component.props:{}).dataTransform;return\"data\"===t&&n&&(e=n(e)),e}},{key:\"_createAsyncPropData\",value:function(t,e,n){this.asyncProps[t]||(this.asyncProps[t]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}]),t}(),G=0,H=function(){function t(){Object(i.a)(this,t),this.props=R.apply(this,arguments),this.id=this.props.id,this.count=G++,this.lifecycle=P.a.NO_STATE,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(a.a)(t,[{key:\"clone\",value:function(t){var e=this.props,n={};for(var r in e._asyncPropDefaultValues)r in e._asyncPropResolvedValues?n[r]=e._asyncPropResolvedValues[r]:r in e._asyncPropOriginalValues&&(n[r]=e._asyncPropOriginalValues[r]);return new this.constructor(Object.assign({},e,n,t))}},{key:\"_initState\",value:function(){this.internalState=new z({})}},{key:\"stats\",get:function(){return this.internalState.stats}}]),t}();H.componentName=\"Component\",H.defaultProps={};var W=function(t){function e(t){var n,r=t.attributeManager,a=t.layer;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,a))).attributeManager=r,n.model=null,n.needsRedraw=!0,n.subLayers=null,n}return Object(u.a)(e,t),Object(a.a)(e,[{key:\"layer\",get:function(){return this.component},set:function(t){this.component=t}}]),e}(z),q=Object.freeze([]),X=new Uint8ClampedArray(0),Y={data:{type:\"data\",value:q,async:!0},dataComparator:null,dataTransform:{type:\"function\",value:function(t){return t},compare:!1},fetch:{type:\"function\",value:function(t){return fetch(t).then((function(t){return t.json()}))},compare:!1},updateTriggers:{},numInstances:void 0,visible:!0,pickable:!1,opacity:{type:\"number\",min:0,max:1,value:.8},onHover:{type:\"function\",value:null,compare:!1,optional:!0},onClick:{type:\"function\",value:null,compare:!1,optional:!0},onDragStart:{type:\"function\",value:null,compare:!1,optional:!0},onDrag:{type:\"function\",value:null,compare:!1,optional:!0},onDragEnd:{type:\"function\",value:null,compare:!1,optional:!0},coordinateSystem:c.a.LNGLAT,coordinateOrigin:{type:\"array\",value:[0,0,0],compare:!0},modelMatrix:{type:\"array\",value:null,compare:!0,optional:!0},wrapLongitude:!1,parameters:{},uniforms:{},framebuffer:null,animation:null,getPolygonOffset:{type:\"function\",value:function(t){return[0,100*-t.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:\"color\",value:[0,0,128,128]}},K=function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(a.a)(e,[{key:\"toString\",value:function(){var t=this.constructor.layerName||this.constructor.name;return\"\".concat(t,\"({id: '\").concat(this.props.id,\"'})\")}},{key:\"setState\",value:function(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}},{key:\"setNeedsRedraw\",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=t)}},{key:\"setLayerNeedsUpdate\",value:function(){this.context.layerManager.setNeedsUpdate(String(this))}},{key:\"getNeedsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(t)}},{key:\"needsUpdate\",value:function(){return this.shouldUpdateState(this._getUpdateParams())}},{key:\"isPickable\",value:function(){return this.props.pickable&&this.props.visible}},{key:\"getModels\",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:\"getSingleModel\",value:function(){return this.state&&this.state.model}},{key:\"getAttributeManager\",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:\"getCurrentLayer\",value:function(){return this.internalState&&this.internalState.layer}},{key:\"getFirstObject\",value:function(){var t=this.props.data,e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){return i.value}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return null}},{key:\"project\",value:function(t){var e=this.context.viewport,n=E(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),i=Object(w.k)(n,e.pixelProjectionMatrix),a=Object(r.a)(i,3),o=a[0],s=a[1],u=a[2];return 2===t.length?[o,s]:[o,s,u]}},{key:\"unproject\",value:function(t){var e=this.context.viewport;return Object(d.a)(Array.isArray(t)),e.unproject(t)}},{key:\"projectPosition\",value:function(t){return Object(d.a)(Array.isArray(t)),T(t,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:\"projectFlat\",value:function(t){m.a.deprecated(\"layer.projectFlat\",\"layer.projectPosition\")();var e=this.context.viewport;return Object(d.a)(Array.isArray(t)),e.projectFlat(t)}},{key:\"unprojectFlat\",value:function(t){m.a.deprecated(\"layer.unprojectFlat\")();var e=this.context.viewport;return Object(d.a)(Array.isArray(t)),e.unprojectFlat(t)}},{key:\"use64bitProjection\",value:function(){if(this.props.fp64){if(this.props.coordinateSystem===c.a.LNGLAT_DEPRECATED)return!0;m.a.once(0,\"Legacy 64-bit mode only works with coordinateSystem set to\\n        COORDINATE_SYSTEM.LNGLAT_DEPRECATED. Rendering in 32-bit mode instead\")()}return!1}},{key:\"use64bitPositions\",value:function(){return this.props.fp64||this.props.coordinateSystem===c.a.LNGLAT||this.props.coordinateSystem===c.a.IDENTITY}},{key:\"screenToDevicePixels\",value:function(t){return m.a.deprecated(\"screenToDevicePixels\",\"DeckGL prop useDevicePixels for conversion\")(),t*(\"undefined\"!=typeof window?window.devicePixelRatio:1)}},{key:\"onHover\",value:function(t,e){return!!this.props.onHover&&this.props.onHover(t,e)}},{key:\"onClick\",value:function(t,e){return!!this.props.onClick&&this.props.onClick(t,e)}},{key:\"nullPickingColor\",value:function(){return[0,0,0]}},{key:\"encodePickingColor\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(d.a)(t<16777215,\"index out of picking color range\"),e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}},{key:\"decodePickingColor\",value:function(t){Object(d.a)(t instanceof Uint8Array);var e=Object(r.a)(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:\"initializeState\",value:function(){throw new Error(\"Layer \".concat(this,\" has not defined initializeState\"))}},{key:\"shouldUpdateState\",value:function(t){t.oldProps,t.props,t.context;return t.changeFlags.propsOrDataChanged}},{key:\"updateState\",value:function(t){t.oldProps,t.props,t.context;var e=t.changeFlags,n=this.getAttributeManager();e.dataChanged&&n&&n.invalidateAll()}},{key:\"finalizeState\",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}var a=this.getAttributeManager();a&&a.finalize()}},{key:\"draw\",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.draw(t)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:\"getPickingInfo\",value:function(t){var e=t.info,n=(t.mode,e.index);return n>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[n]),e}},{key:\"invalidateAttribute\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"all\",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\",n=this.getAttributeManager();n&&(\"all\"===t?(m.a.log(1,\"updateTriggers invalidating all attributes: \".concat(e))(),n.invalidateAll()):(m.a.log(1,\"updateTriggers invalidating attribute \".concat(t,\": \").concat(e))(),n.invalidate(t)))}},{key:\"updateAttributes\",value:function(t){var e=this.getAttributeManager();if(e){var n=this.getNumInstances(t),r=this.getBufferLayout(t);e.update({data:t.data,numInstances:n,bufferLayout:r,props:t,transitions:t.transitions,buffers:t,context:this,ignoreUnknownAttributes:!0});var i=this.getModels();if(i.length>0)for(var a=e.getChangedAttributes({clearChangedFlags:!0}),o=0,s=i.length;o<s;++o)this._setModelAttributes(i[o],a)}}},{key:\"updateTransition\",value:function(){var t=this.getAttributeManager();t&&t.updateTransition(this.context.time)}},{key:\"calculateInstancePickingColors\",value:function(t,e){var n=e.numInstances,r=t.value,i=t.size;if(1!==r[0]){var a=X.length/i;if(a<n){var o=new Uint8ClampedArray(n*i);o.set(X);for(var s=[],u=a;u<n;u++)this.encodePickingColor(u,s),o[u*i+0]=s[0],o[u*i+1]=s[1],o[u*i+2]=s[2];X=o}r.set(n<a?X.subarray(0,n*i):X)}}},{key:\"_setModelAttributes\",value:function(t,e){var n={},r=t.userData.excludeAttributes||{};for(var i in e)r[i]||Object.assign(n,e[i].getShaderAttributes());t.setAttributes(n)}},{key:\"_clearInstancePickingColor\",value:function(t){var e=this.getAttributeManager().attributes.instancePickingColors,n=e.value,r=e.size,i=this.decodePickingColor(t);n[i*r+0]=0,n[i*r+1]=0,n[i*r+2]=0,e.update({value:n})}},{key:\"_clearPickingColor\",value:function(t){for(var e=this.getAttributeManager().attributes.pickingColors,n=e.value,r=0;r<n.length;r+=3)n[r+0]===t[0]&&n[r+1]===t[1]&&n[r+2]===t[2]&&(n[r+0]=0,n[r+1]=0,n[r+2]=0);e.update({value:n})}},{key:\"clearPickingColor\",value:function(t){this.getAttributeManager().attributes.pickingColors?this._clearPickingColor(t):this._clearInstancePickingColor(t)}},{key:\"copyPickingColors\",value:function(){var t=this.getAttributeManager().attributes,e=t.pickingColors,n=t.instancePickingColors;return new Uint8ClampedArray((e||n).value)}},{key:\"restorePickingColors\",value:function(t){var e=this.getAttributeManager().attributes,n=e.pickingColors,r=e.instancePickingColors;(n||r).update({value:t})}},{key:\"getNumInstances\",value:function(t){if(void 0!==(t=t||this.props).numInstances)return t.numInstances;if(this.state&&void 0!==this.state.numInstances)return this.state.numInstances;var e=this.props.data;return Object(y.a)(e)}},{key:\"getBufferLayout\",value:function(t){return void 0!==(t=t||this.props).bufferLayout?t.bufferLayout:this.state&&void 0!==this.state.bufferLayout?this.state.bufferLayout:null}},{key:\"_initialize\",value:function(){this._initState(),this.initializeState(this.context),this.state.attributeManager=this.getAttributeManager(),this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0}),this._updateState();var t=this.getSingleModel();t&&(t.id=this.props.id,t.program.id=\"\".concat(this.props.id,\"-program\"))}},{key:\"_update\",value:function(){this.needsUpdate()&&this._updateState()}},{key:\"_updateState\",value:function(){var t=this._getUpdateParams();if(this.context.gl)this.updateState(t);else try{this.updateState(t)}catch(t){}this.isComposite?this._renderLayers(t):(this.setNeedsRedraw(),this.updateAttributes(this.props),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.clearChangeFlags(),this.internalState.resetOldProps()}},{key:\"_finalize\",value:function(){Object(d.a)(this.internalState&&this.state),this.finalizeState(this.context),Object(f.d)(this.id)}},{key:\"drawLayer\",value:function(t){var e=this,n=t.moduleParameters,r=void 0===n?null:n,i=t.uniforms,a=void 0===i?{}:i,o=t.parameters,s=void 0===o?{}:o;a.picking_uActive||this.updateTransition(),r&&this.setModuleParameters(r);var u=this.context.animationProps;if(u){var c=!0,l=!1,f=void 0;try{for(var h,d=this.getModels()[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){h.value._setAnimationProps(u)}}catch(t){l=!0,f=t}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}var v=this.props.getPolygonOffset,p=v&&v(a)||[0,0];s.polygonOffset=p,Object(_.a)(this.context.gl,s,(function(){e.draw({moduleParameters:r,uniforms:a,parameters:s,context:e.context})}))}},{key:\"pickLayer\",value:function(t){return this.getPickingInfo(t)}},{key:\"getChangeFlags\",value:function(){return this.internalState.changeFlags}},{key:\"setChangeFlags\",value:function(t){var e=this;this.internalState.changeFlags=this.internalState.changeFlags||{};var n=this.internalState.changeFlags;t.dataChanged&&!n.dataChanged&&(n.dataChanged=t.dataChanged,m.a.log(2,(function(){return\"dataChanged: \".concat(t.dataChanged,\" in \").concat(e.id)}))()),t.updateTriggersChanged&&!n.updateTriggersChanged&&(n.updateTriggersChanged=n.updateTriggersChanged&&t.updateTriggersChanged?Object.assign({},t.updateTriggersChanged,n.updateTriggersChanged):t.updateTriggersChanged||n.updateTriggersChanged,m.a.log(2,(function(){return\"updateTriggersChanged: \"+\"\".concat(Object.keys(t.updateTriggersChanged).join(\", \"),\" in \").concat(e.id)}))()),t.propsChanged&&!n.propsChanged&&(n.propsChanged=t.propsChanged,m.a.log(2,(function(){return\"propsChanged: \".concat(t.propsChanged,\" in \").concat(e.id)}))()),t.viewportChanged&&!n.viewportChanged&&(n.viewportChanged=t.viewportChanged,m.a.log(3,(function(){return\"viewportChanged: \".concat(t.viewportChanged,\" in \").concat(e.id)}))()),t.stateChanged&&!n.stateChanged&&(n.stateChanged=t.stateChanged,m.a.log(2,(function(){return\"stateChanged: \".concat(t.stateChanged,\" in \").concat(e.id)}))());var r=t.dataChanged||t.updateTriggersChanged||t.propsChanged;n.propsOrDataChanged=n.propsOrDataChanged||r,n.somethingChanged=n.somethingChanged||r||t.viewportChanged||t.stateChanged}},{key:\"clearChangeFlags\",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:\"printChangeFlags\",value:function(){var t=this.internalState.changeFlags;return\"\".concat(t.dataChanged?\"data \":\"\").concat(t.propsChanged?\"props \":\"\").concat(t.updateTriggersChanged?\"triggers \":\"\").concat(t.viewportChanged?\"viewport\":\"\")}},{key:\"diffProps\",value:function(t,e){var n=v(t,e);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this._activeUpdateTrigger(r);return this.setChangeFlags(n)}},{key:\"validateProps\",value:function(){!function(t){var e=b(t);for(var n in e){var r=e[n],i=r.validate;if(i&&!i(t[n],r))throw new Error(\"Invalid prop \".concat(n,\": \").concat(t[n]))}}(this.props)}},{key:\"setModuleParameters\",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.updateModuleSettings(t)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:\"_getUpdateParams\",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:\"_getNeedsRedraw\",value:function(t){if(!this.internalState)return!1;var e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(t);return e=e||r}},{key:\"_getAttributeManager\",value:function(){return new l.a(this.context.gl,{id:this.props.id,stats:this.context.stats})}},{key:\"_initState\",value:function(){Object(d.a)(!this.internalState&&!this.state);var t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,update:this.calculateInstancePickingColors}}),this.internalState=new W({attributeManager:t,layer:this}),this.state={},this.state.attributeManager=t,this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:\"_transferState\",value:function(t){var e=t.state,n=t.internalState;if(Object(d.a)(e&&n),this!==t){this.internalState=n,this.internalState.component=this,this.state=e,e.layer=this,this.internalState.setAsyncProps(this.props);var r=!0,i=!1,a=void 0;try{for(var o,s=this.getModels()[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){o.value.userData.layer=this}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this.diffProps(this.props,this.internalState.getOldProps())}}},{key:\"_onAsyncPropUpdated\",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setLayerNeedsUpdate()}},{key:\"_activeUpdateTrigger\",value:function(t){this.invalidateAttribute(t)}},{key:\"_updateBaseUniforms\",value:function(){var t=this,e={opacity:\"function\"==typeof this.props.opacity?function(e){return Math.pow(t.props.opacity(e),1/2.2)}:Math.pow(this.props.opacity,1/2.2)},n=!0,r=!1,i=void 0;try{for(var a,o=this.getModels()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.setUniforms(e)}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:\"setUniforms\",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.setUniforms(t)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.setNeedsRedraw(),m.a.deprecated(\"layer.setUniforms\",\"model.setUniforms\")()}},{key:\"is64bitEnabled\",value:function(){return m.a.deprecated(\"is64bitEnabled\",\"use64bitProjection\")(),this.use64bitProjection()}}]),e}(H);K.layerName=\"Layer\",K.defaultProps=Y},4637:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return m}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(29),u=n(19),c=n(4628),l=n(4722),f=n(5022),h=n(4896),d=n(5026),v=n(4889),p=n(4721),g={offset:\"accessor.offset\",stride:\"accessor.stride\",type:\"accessor.type\",size:\"accessor.size\",divisor:\"accessor.divisor\",normalized:\"accessor.normalized\",integer:\"accessor.integer\",instanced:\"accessor.divisor\",isInstanced:\"accessor.divisor\"},b={removedProps:{},replacedProps:{bytes:\"byteLength\"},deprecatedProps:g},y={removedProps:g},m=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(a.a)(this,Object(o.a)(e).call(this,t,i))).stubRemovedMethods(\"Buffer\",\"v6.0\",[\"layout\",\"setLayout\",\"getIndexedParameter\"]),n.target=i.target||(n.gl.webgl2?36662:34962),n.initialize(i),Object.seal(Object(s.a)(n)),n}return Object(u.a)(e,t),Object(i.a)(e,[{key:\"getElementCount\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerElement(t))}},{key:\"getVertexCount\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l.a.getBytesPerVertex(t))}},{key:\"initialize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Object(d.a)(\"Buffer\",t,b),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data):this._setByteLength(t.byteLength||0),this}},{key:\"setProps\",value:function(t){return\"accessor\"in(t=Object(d.a)(\"Buffer\",t,y))&&this.setAccessor(t.accessor),this}},{key:\"setAccessor\",value:function(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new l.a(t),this}},{key:\"reallocate\",value:function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}},{key:\"setData\",value:function(t){return this.initialize(t)}},{key:\"subData\",value:function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,n=e.data,r=e.offset,i=void 0===r?0:r,a=e.srcOffset,o=void 0===a?0:a,s=t.byteLength||t.length;Object(v.a)(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==s?(Object(f.a)(this.gl),this.gl.bufferSubData(this.target,i,n,o,s)):this.gl.bufferSubData(u,i,n),this.gl.bindBuffer(u,null),this.debugData=null,this._inferType(n),this}},{key:\"copyData\",value:function(t){var e=t.sourceBuffer,n=t.readOffset,r=void 0===n?0:n,i=t.writeOffset,a=void 0===i?0:i,o=t.size,s=this.gl;return Object(f.a)(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:\"getData\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dstData,n=void 0===e?null:e,r=t.srcByteOffset,i=void 0===r?0:r,a=t.dstOffset,o=void 0===a?0:a,s=t.length,u=void 0===s?0:s;Object(f.a)(this.gl);var c,l,d=Object(h.c)(this.accessor.type||5126,{clamped:!1}),p=this._getAvailableElementCount(i),g=o;n?c=(l=n.length)-g:l=g+(c=Math.min(p,u||p));var b=Math.min(p,c);return u=u||b,Object(v.a)(u<=b),n=n||new d(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,o,u),this.gl.bindBuffer(36662,null),n}},{key:\"bind\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=t.offset,o=void 0===a?0:a,s=t.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,o,s):(Object(v.a)(0===o),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:\"unbind\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=35345===n||35982===n;return a?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:\"getDebugData\",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:\"invalidateDebugData\",value:function(){this.debugData=null}},{key:\"_setData\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,t,e),this.gl.bindBuffer(n,null),this.usage=e,this.debugData=t.slice(0,10),this.bytesUsed=t.byteLength,this._trackAllocatedMemory(t.byteLength);var r=Object(h.b)(t);return Object(v.a)(r),this.setAccessor(new l.a(this.accessor,{type:r})),this}},{key:\"_setByteLength\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(v.a)(t>=0),this._trackDeallocatedMemory();var n=t;0===t&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,e),this.gl.bindBuffer(r,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}},{key:\"_getTarget\",value:function(){return this.gl.webgl2?36663:this.target}},{key:\"_getAvailableElementCount\",value:function(t){var e=t/Object(h.c)(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e}},{key:\"_inferType\",value:function(t){this.accessor.type||this.setAccessor(new l.a(this.accessor,{type:Object(h.b)(t)}))}},{key:\"_createHandle\",value:function(){return this.gl.createBuffer()}},{key:\"_deleteHandle\",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:\"_getParameter\",value:function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}},{key:\"setByteLength\",value:function(t){return p.a.deprecated(\"setByteLength\",\"reallocate\")(),this.reallocate(t)}},{key:\"updateAccessor\",value:function(t){return p.a.deprecated(\"updateAccessor(...)\",\"setAccessor(new Accessor(buffer.accessor, ...)\")(),this.accessor=new l.a(this.accessor,t),this}},{key:\"type\",get:function(){return p.a.deprecated(\"Buffer.type\",\"Buffer.accessor.type\")(),this.accessor.type}},{key:\"bytes\",get:function(){return p.a.deprecated(\"Buffer.bytes\",\"Buffer.byteLength\")(),this.byteLength}}]),e}(c.a)},4638:function(t,e,n){\"use strict\";n.d(e,\"c\",(function(){return r})),n.d(e,\"a\",(function(){return i})),n.d(e,\"f\",(function(){return o})),n.d(e,\"h\",(function(){return c})),n.d(e,\"d\",(function(){return l})),n.d(e,\"b\",(function(){return f})),n.d(e,\"g\",(function(){return h})),n.d(e,\"e\",(function(){return d}));var r={};function i(t){if(!Number.isFinite(t))throw new Error(\"Invalid number \".concat(t));return t}function a(t){return Math.round(t/r.EPSILON)*r.EPSILON}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.precision,i=void 0===n?r.precision||4:n;return t=a(t),parseFloat(t.toPrecision(i))}function s(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&void 0!==t.length}function u(t,e){if(s(t)){for(var n=(i=t).clone?i.clone():new Array(i),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}var i;return e(t)}function c(t){return u(t,(function(t){return t/180*Math.PI}))}function l(t){return u(t,(function(t){return 180*t/Math.PI}))}function f(t,e,n){return u(t,(function(t){return Math.max(e,Math.min(n,t))}))}function h(t,e,n){return s(t)?t.map((function(t,r){return h(t,e[r],n)})):n*e+(1-n)*t}function d(t,e){if(s(t)&&s(e)){if(t===e)return!0;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!d(t[n],e[n]))return!1;return!0}return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}r.EPSILON=1e-12,r.debug=!0,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},4646:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return m}));var r=n(5),i=n(16),a=n(178),o=n(80),s=n(17),u=n(19),c=n(4628),l=n(4637),f=n(4780),h=n(5025),d=n(5022),v=n(4891),p=n(5024),g=n(4721),b=n(4889),y=[9729,9728],m=function(t){function e(t,n){var r;Object(i.a)(this,e);var s=n.id,u=void 0===s?Object(p.c)(\"texture\"):s,c=n.handle,l=n.target;return(r=Object(a.a)(this,Object(o.a)(e).call(this,t,{id:u,handle:c}))).target=l,r.textureUnit=void 0,r.loaded=!1,r.width=void 0,r.height=void 0,r.depth=void 0,r.format=void 0,r.type=void 0,r.dataFormat=void 0,r.border=void 0,r.textureUnit=void 0,r.mipmaps=void 0,r}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:\"isSupported\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format,r=e.linearFiltering,i=!0;return n&&(i=(i=i&&Object(f.d)(t,n))&&(!r||Object(f.e)(t,n))),i}}]),Object(s.a)(e,[{key:\"toString\",value:function(){return\"Texture(\".concat(this.id,\",\").concat(this.width,\"x\").concat(this.height,\")\")}},{key:\"initialize\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then((function(n){return t.initialize(Object.assign({},e,{pixels:n,data:n}))})),this;var i=e.pixels,a=void 0===i?null:i,o=e.format,s=void 0===o?6408:o,u=e.border,c=void 0===u?0:u,l=e.recreate,f=void 0!==l&&l,h=e.parameters,d=void 0===h?{}:h,v=e.pixelStore,p=void 0===v?{}:v,b=e.textureUnit,y=void 0===b?void 0:b,m=e.unpackFlipY,_=void 0===m||m,O=e.mipmaps,j=void 0===O||O;n||(n=a);var k=e.width,w=e.height,x=e.dataFormat,E=e.type,T=e.depth,P=void 0===T?0:T,S=this._deduceParameters({format:s,type:E,dataFormat:x,compressed:!1,data:n,width:k,height:w});k=S.width,w=S.height,x=S.dataFormat,E=S.type,this.width=k,this.height=w,this.depth=P,this.format=s,this.type=E,this.dataFormat=x,this.border=c,this.textureUnit=y,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var A=Object(r.a)({},37440,_),L=Object.assign({},A,p);return j&&this._isNPOT()&&(g.a.warn(\"texture: \".concat(this,\" is Non-Power-Of-Two, disabling mipmaping\"))(),j=!1,this._updateForNPOT(d)),this.mipmaps=j,this.setImageData({data:n,width:k,height:w,depth:P,format:s,type:E,dataFormat:x,border:c,mipmaps:j,parameters:L}),j&&this.generateMipmap(),this.setParameters(d),f&&(this.data=n),this}},{key:\"resize\",value:function(t){var e=t.height,n=t.width,r=t.mipmaps,i=void 0!==r&&r;return n!==this.width||e!==this.height?this.initialize({width:n,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:\"generateMipmap\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(g.a.warn(\"texture: \".concat(this,\" is Non-Power-Of-Two, disabling mipmaping\"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(h.a)(this.gl,e,(function(){t.gl.generateMipmap(t.target)})),this.gl.bindTexture(this.target,null),this)}},{key:\"setImageData\",value:function(t){this._trackDeallocatedMemory(\"Texture\");var e=t.target,n=void 0===e?this.target:e,r=t.pixels,i=void 0===r?null:r,a=t.level,o=void 0===a?0:a,s=t.format,u=void 0===s?this.format:s,c=t.border,l=void 0===c?this.border:c,v=t.offset,p=void 0===v?0:v,g=t.parameters,y=void 0===g?{}:g,m=t.data,_=void 0===m?null:m,O=t.type,j=void 0===O?this.type:O,k=t.width,w=void 0===k?this.width:k,x=t.height,E=void 0===x?this.height:x,T=t.dataFormat,P=void 0===T?this.dataFormat:T,S=t.compressed,A=void 0!==S&&S;_||(_=i);var L=this._deduceParameters({format:u,type:j,dataFormat:P,compressed:A,data:_,width:w,height:E});j=L.type,P=L.dataFormat,A=L.compressed,w=L.width,E=L.height;var C=this.gl;C.bindTexture(this.target,this.handle);var I,M=this._getDataType({data:_,compressed:A});if(_=M.data,I=M.dataType,Object(h.a)(this.gl,y,(function(){switch(I){case\"null\":C.texImage2D(n,o,u,w,E,l,P,j,_);break;case\"typed-array\":C.texImage2D(n,o,u,w,E,l,P,j,_,p);break;case\"buffer\":Object(d.a)(C),C.bindBuffer(35052,_.handle||_),C.texImage2D(n,o,u,w,E,l,P,j,p),C.bindBuffer(35052,null);break;case\"browser-object\":Object(d.d)(C)?C.texImage2D(n,o,u,w,E,l,P,j,_):C.texImage2D(n,o,u,P,j,_);break;case\"compressed\":C.compressedTexImage2D(n,o,u,w,E,l,_);break;default:Object(b.a)(!1,\"Unknown image data type\")}})),_&&_.byteLength)this._trackAllocatedMemory(_.byteLength,\"Texture\");else{var R=f.a[this.dataFormat]||4,F=f.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*R*F,\"Texture\")}return this.loaded=!0,this}},{key:\"setSubImageData\",value:function(t){var e=this,n=t.target,r=void 0===n?this.target:n,i=t.pixels,a=void 0===i?null:i,o=t.data,s=void 0===o?null:o,u=t.x,c=void 0===u?0:u,f=t.y,p=void 0===f?0:f,g=t.width,y=void 0===g?this.width:g,m=t.height,_=void 0===m?this.height:m,O=t.level,j=void 0===O?0:O,k=t.format,w=void 0===k?this.format:k,x=t.type,E=void 0===x?this.type:x,T=t.dataFormat,P=void 0===T?this.dataFormat:T,S=t.compressed,A=void 0!==S&&S,L=t.offset,C=void 0===L?0:L,I=t.border,M=(void 0===I&&this.border,t.parameters),R=void 0===M?{}:M,F=this._deduceParameters({format:w,type:E,dataFormat:P,compressed:A,data:s,width:y,height:_});if(E=F.type,P=F.dataFormat,A=F.compressed,y=F.width,_=F.height,Object(b.a)(0===this.depth,\"texSubImage not supported for 3D textures\"),s||(s=a),s&&s.data){var N=s;s=N.data,y=N.shape[0],_=N.shape[1]}s instanceof l.a&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(h.a)(this.gl,R,(function(){A?e.gl.compressedTexSubImage2D(r,j,c,p,y,_,w,s):null===s?e.gl.texSubImage2D(r,j,c,p,y,_,P,E,null):ArrayBuffer.isView(s)?e.gl.texSubImage2D(r,j,c,p,y,_,P,E,s,C):s instanceof v.b?(Object(d.a)(e.gl),e.gl.bindBuffer(35052,s),e.gl.texSubImage2D(r,j,c,p,y,_,P,E,C),e.gl.bindBuffer(35052,null)):Object(d.d)(e.gl)?e.gl.texSubImage2D(r,j,c,p,y,_,P,E,s):e.gl.texSubImage2D(r,j,c,p,P,E,s)})),this.gl.bindTexture(this.target,null)}},{key:\"copyFramebuffer\",value:function(){return g.a.error(\"Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})\")(),null}},{key:\"getActiveUnit\",value:function(){return this.gl.getParameter(34016)-33984}},{key:\"bind\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}},{key:\"unbind\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}},{key:\"_getDataType\",value:function(t){var e=t.data,n=t.compressed;return void 0!==n&&n?{data:e,dataType:\"compressed\"}:null===e?{data:e,dataType:\"null\"}:ArrayBuffer.isView(e)?{data:e,dataType:\"typed-array\"}:e instanceof l.a?{data:e.handle,dataType:\"buffer\"}:e instanceof v.b?{data:e,dataType:\"buffer\"}:{data:e,dataType:\"browser-object\"}}},{key:\"_deduceParameters\",value:function(t){var e=t.format,n=t.data,r=t.width,i=t.height,a=t.dataFormat,o=t.type,s=t.compressed,u=f.b[e];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var c=this._deduceImageSize(n,r,i);return{dataFormat:a,type:o,compressed:s,width:r=c.width,height:i=c.height,format:e,data:n}}},{key:\"_deduceImageSize\",value:function(t,e,n){var r;return r=\"undefined\"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:\"undefined\"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:\"undefined\"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||\"undefined\"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:\"undefined\"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:n}:{width:e>=0?e:1,height:n>=0?n:1},Object(b.a)(r,\"Could not deduced texture size\"),Object(b.a)(void 0===e||r.width===e,\"Deduced texture width does not match supplied width\"),Object(b.a)(void 0===n||r.height===n,\"Deduced texture height does not match supplied height\"),r}},{key:\"_createHandle\",value:function(){return this.gl.createTexture()}},{key:\"_deleteHandle\",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory(\"Texture\")}},{key:\"_getParameter\",value:function(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}},{key:\"_setParameter\",value:function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Object(b.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this}},{key:\"_isNPOT\",value:function(){return!Object(d.d)(this.gl)&&(!(!this.width||!this.height)&&(!Object(p.b)(this.width)||!Object(p.b)(this.height)))}},{key:\"_updateForNPOT\",value:function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:\"_getNPOTParam\",value:function(t,e){if(this._isNPOT())switch(t){case 10241:-1===y.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071)}return e}}]),e}(c.a)},4647:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return r})),n.d(e,\"b\",(function(){return i}));var r={LNGLAT:1,LNGLAT_DEPRECATED:5,METER_OFFSETS:2,METERS:2,LNGLAT_OFFSETS:3,IDENTITY:0},i={click:{handler:\"onClick\"},panstart:{handler:\"onDragStart\"},panmove:{handler:\"onDrag\"},panend:{handler:\"onDragEnd\"}}},4648:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return u})),n.d(e,\"a\",(function(){return c})),n.d(e,\"d\",(function(){return l})),n.d(e,\"c\",(function(){return f}));var r=n(7),i=n(4898),a=\"void main() {gl_FragColor = vec4(0);}\",o=\"out vec4 transform_output;\\nvoid main() {\\n  transform_output = vec4(0);\\n}\",s=\"#version 300 es\\n\".concat(o);function u(t,e){e=Array.isArray(e)?e:[e];var n=t.replace(/^\\s+/,\"\").split(/\\s+/),i=Object(r.a)(n,3),a=i[0],o=i[1],s=i[2];return e.includes(a)&&o&&s?{qualifier:a,type:o,name:s.split(\";\")[0]}:null}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.version,n=void 0===e?100:e,r=t.input,i=t.inputType,u=t.output;if(!r)return 300===n?s:n>300?\"#version \".concat(n,\"\\n\").concat(o):a;var c=h(r,i);return n>=300?\"#version \".concat(n,\" \").concat(300===n?\"es\":\"\",\"\\nin \").concat(i,\" \").concat(r,\";\\nout vec4 \").concat(u,\";\\nvoid main() {\\n  \").concat(u,\" = \").concat(c,\";\\n}\"):\"varying \".concat(i,\" \").concat(r,\";\\nvoid main() {\\n  gl_FragColor = \").concat(c,\";\\n}\")}function l(t){switch(t){case\"float\":return\"x\";case\"vec2\":return\"xy\";case\"vec3\":return\"xyz\";case\"vec4\":return\"xyzw\";default:return Object(i.a)(!1),null}}function f(t){switch(t){case\"float\":return 1;case\"vec2\":return 2;case\"vec3\":return 3;case\"vec4\":return 4;default:return Object(i.a)(!1),null}}function h(t,e){switch(e){case\"float\":return\"vec4(\".concat(t,\", 0.0, 0.0, 1.0)\");case\"vec2\":return\"vec4(\".concat(t,\", 0.0, 1.0)\");case\"vec3\":return\"vec4(\".concat(t,\", 1.0)\");case\"vec4\":return t;default:return Object(i.a)(!1),null}}},4649:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return a})),n.d(e,\"b\",(function(){return o})),n.d(e,\"c\",(function(){return u}));var r=n(4595);function i(t,e){if(t.length!==e)return!1;for(var n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function a(t){if(!Number.isFinite(t))throw new Error(\"Invalid number \".concat(t));return t}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"\";if(r.a.debug&&!i(t,e))throw new Error(\"math.gl: \".concat(n,\" some fields set to invalid numbers'\"));return t}var s={};function u(t,e){s[t]||(s[t]=!0,console.warn(\"\".concat(t,\" has been removed in version \").concat(e,\", see upgrade guide for more information\")))}},4661:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return P}));var r=n(7),i=n(16),a=n(17),o=n(4599),s=n(4616),u=n(4601);var c=n(4638),l=n(178),f=n(80),h=n(19),d=n(4781);function v(t,e){return t.length===e&&t.every(Number.isFinite)}var p=n(4725),g=n(4593),b=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(i.a)(this,e),t=Object(l.a)(this,Object(f.a)(e).call(this,2)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r),t}return Object(h.a)(e,t),Object(a.a)(e,[{key:\"cross\",value:function(t){return g.b(this,this,t),this.check()}},{key:\"horizontalAngle\",value:function(){return Math.atan2(this.y,this.x)}},{key:\"verticalAngle\",value:function(){return Math.atan2(this.x,this.y)}},{key:\"operation\",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:\"ELEMENTS\",get:function(){return 2}}]),e}(p.a),y=n(4782),m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return Object(i.a)(this,e),t=Object(l.a)(this,Object(f.a)(e).call(this,4)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,r,a,o),t}return Object(h.a)(e,t),Object(a.a)(e,[{key:\"applyMatrix4\",value:function(t){return t.transformVector(this,this),this}},{key:\"ELEMENTS\",get:function(){return 4}},{key:\"z\",get:function(){return this[2]},set:function(t){return this[2]=Object(c.a)(t)}},{key:\"w\",get:function(){return this[3]},set:function(t){return this[3]=Object(c.a)(t)}}]),e}(p.a),_=n(4598),O=n(4610),j=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];var k=function(t){function e(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Object(i.a)(this,e),t=Object(l.a)(this,Object(f.a)(e).call(this,16)),Array.isArray(r[0])&&1===arguments.length?t.copy(r[0]):t.identity(),t}return Object(h.a)(e,t),Object(a.a)(e,[{key:\"setRowMajor\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=i,this[2]=u,this[3]=h,this[4]=e,this[5]=a,this[6]=c,this[7]=d,this[8]=n,this[9]=o,this[10]=l,this[11]=v,this[12]=r,this[13]=s,this[14]=f,this[15]=p,this.check()}},{key:\"setColumnMajor\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,p=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=h,this[13]=d,this[14]=v,this[15]=p,this.check()}},{key:\"set\",value:function(){return this.setColumnMajor.apply(this,arguments)}},{key:\"getElement\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this[t][e]:this[e][t]}},{key:\"setElement\",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r?this[t][e]=Object(c.a)(n):this[e][t]=Object(c.a)(n),this}},{key:\"determinant\",value:function(){return _.a(this)}},{key:\"identity\",value:function(){return this.copy(j)}},{key:\"fromQuaternion\",value:function(t){return _.c(this,t),this.check()}},{key:\"frustum\",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,a=t.near,o=t.far;return _.d(this,e,n,r,i,a,o),this.check()}},{key:\"lookAt\",value:function(t){var e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up,a=void 0===i?[0,1,0]:i;return _.f(this,e,r,a),this.check()}},{key:\"ortho\",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,a=t.near,o=void 0===a?.1:a,s=t.far,u=void 0===s?500:s;return _.h(this,e,n,r,i,o,u),this.check()}},{key:\"orthographic\",value:function(t){var n=t.fovy,r=void 0===n?45*Math.PI/180:n,i=t.aspect,a=void 0===i?1:i,o=t.focalDistance,s=void 0===o?1:o,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?500:l;if(r>2*Math.PI)throw Error(\"radians\");var h=r/2,d=s*Math.tan(h),v=d*a;return(new e).ortho({left:-v,right:v,bottom:-d,top:d,near:c,far:f})}},{key:\"perspective\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=t.fov,r=void 0===n?45*Math.PI/180:n,i=t.aspect,a=void 0===i?1:i,o=t.near,s=void 0===o?.1:o,u=t.far,c=void 0===u?500:u;if((e=e||r)>2*Math.PI)throw Error(\"radians\");return _.i(this,e,a,s,c),this.check()}},{key:\"transpose\",value:function(){return _.p(this,this),this.check()}},{key:\"invert\",value:function(){return _.e(this,this),this.check()}},{key:\"multiplyLeft\",value:function(t){return _.g(this,t,this),this.check()}},{key:\"multiplyRight\",value:function(t){return _.g(this,this,t),this.check()}},{key:\"rotateX\",value:function(t){return _.k(this,this,t),this.check()}},{key:\"rotateY\",value:function(t){return _.l(this,this,t),this.check()}},{key:\"rotateZ\",value:function(t){return _.m(this,this,t),this.check()}},{key:\"rotateXYZ\",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2];return this.rotateX(n).rotateY(i).rotateZ(a)}},{key:\"rotateAxis\",value:function(t,e){return _.j(this,this,t,e),this.check()}},{key:\"scale\",value:function(t){return Array.isArray(t)?_.n(this,this,t):_.n(this,this,[t,t,t]),this.check()}},{key:\"translate\",value:function(t){return _.o(this,this,t),this.check()}},{key:\"transformVector2\",value:function(t,e){return e=e||new b,g.h(e,t,this),v(e,2),e}},{key:\"transformVector3\",value:function(t,e){return e=e||new y.a,O.j(e,t,this),v(e,3),e}},{key:\"transformVector4\",value:function(t,e){return e=e||new m,s.c(e,t,this),v(e,4),e.check()}},{key:\"transformVector\",value:function(t,e){switch(t.length){case 2:return this.transformVector2(t,e);case 3:return this.transformVector3(t,e);case 4:return this.transformVector4(t,e);default:throw new Error(\"Illegal vector\")}}},{key:\"transformDirection\",value:function(t,e){return this._transformVector(t,e,0)}},{key:\"transformPoint\",value:function(t,e){return this._transformVector(t,e,1)}},{key:\"_transformVector\",value:function(t,e,n){switch(t.length){case 2:e=e||new b,s.c(e,[t[0],t[1],0,n],this),e.length=2,v(e,2);break;case 3:e=e||new y.a,s.c(e,[t[0],t[1],t[2],n],this),e.length=3,v(e,3);break;case 4:if(Boolean(n)!==Boolean(t[3]))throw new Error(\"math.gl: Matrix4.transformPoint - invalid vector\");e=e||new m,s.c(e,t,this),v(e,4);break;default:throw new Error(\"Illegal vector\")}return e}},{key:\"makeRotationX\",value:function(t){return this.identity().rotateX(t)}},{key:\"makeTranslation\",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:\"ELEMENTS\",get:function(){return 16}}]),e}(d.a),w=n(4716),x=Math.PI/180,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T=[0,0,0],P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?null:n,a=e.x,o=void 0===a?0:a,s=e.y,u=void 0===s?0:s,c=e.width,l=void 0===c?1:c,f=e.height,h=void 0===f?1:f;this.id=r||this.constructor.displayName||\"viewport\",this.x=o,this.y=u,this.width=l||1,this.height=h||1,this._initViewMatrix(e),this._initProjectionMatrix(e),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this),this.getMatrices=this.getMatrices.bind(this)}return Object(a.a)(t,[{key:\"equals\",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Object(c.e)(e.projectionMatrix,this.projectionMatrix)&&Object(c.e)(e.viewMatrix,this.viewMatrix))}},{key:\"project\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,a=this.projectPosition(t),o=Object(w.k)(a,this.pixelProjectionMatrix),s=Object(r.a)(o,2),u=s[0],c=s[1],l=i?c:this.height-c;return 2===t.length?[u,l]:[u,l,o[2]]}},{key:\"unproject\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,a=e.targetZ,o=Object(r.a)(t,3),s=o[0],u=o[1],c=o[2],l=i?u:this.height-u,f=a&&a*this.distanceScales.pixelsPerMeter[2],h=Object(w.h)([s,l,c],this.pixelUnprojectionMatrix,f),d=this.unprojectPosition(h),v=Object(r.a)(d,3),p=v[0],g=v[1],b=v[2];return Number.isFinite(c)?[p,g,b]:Number.isFinite(a)?[p,g,a]:[p,g]}},{key:\"projectPosition\",value:function(t){var e=this.projectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.pixelsPerMeter[2]]}},{key:\"unprojectPosition\",value:function(t){var e=this.unprojectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)*this.distanceScales.metersPerPixel[2]]}},{key:\"projectFlat\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return Object(w.g)(t,e);var n=this.distanceScales.pixelsPerMeter;return[t[0]*n[0],t[1]*n[1]]}},{key:\"unprojectFlat\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;if(this.isGeospatial)return Object(w.j)(t,e);var n=this.distanceScales.metersPerPixel;return[t[0]*n[0],t[1]*n[1]]}},{key:\"getDistanceScales\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?Object(w.b)({longitude:t[0],latitude:t[1],scale:this.scale,highPrecision:!0}):this.distanceScales}},{key:\"getMatrices\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.modelMatrix,n=void 0===e?null:e,r=this.viewProjectionMatrix,i=this.pixelProjectionMatrix,a=this.pixelUnprojectionMatrix;n&&(r=_.g([],this.viewProjectionMatrix,n),i=_.g([],this.pixelProjectionMatrix,n),a=_.e([],i));var o=Object.assign({modelViewProjectionMatrix:r,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix,pixelProjectionMatrix:i,pixelUnprojectionMatrix:a,width:this.width,height:this.height,scale:this.scale});return o}},{key:\"containsPixel\",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,a=t.height,o=void 0===a?1:a;return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+o}},{key:\"getCameraPosition\",value:function(){return this.cameraPosition}},{key:\"getCameraDirection\",value:function(){return this.cameraDirection}},{key:\"getCameraUp\",value:function(){return this.cameraUp}},{key:\"_addMetersToLngLat\",value:function(t,e){var n=Object(r.a)(t,3),i=n[0],a=n[1],o=n[2],s=void 0===o?0:o,u=this._metersToLngLatDelta(e),c=Object(r.a)(u,3),l=c[0],f=c[1],h=c[2],d=void 0===h?0:h;return 2===t.length?[i+l,a+f]:[i+l,a+f,s+d]}},{key:\"_metersToLngLatDelta\",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2],o=void 0===a?0:a;Object(u.a)(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o),\"Illegal argument to Viewport\");var s=this.distanceScales,c=s.pixelsPerMeter,l=s.degreesPerPixel,f=n*c[0]*l[0],h=i*c[1]*l[1];return 2===t.length?[f,h]:[f,h,o]}},{key:\"_createProjectionMatrix\",value:function(t){var e=t.orthographic,n=t.fovyRadians,r=t.aspect,i=t.focalDistance,a=t.near,o=t.far;return Object(u.a)(Number.isFinite(n)),e?(new k).orthographic({fovy:n,aspect:r,focalDistance:i,near:a,far:o}):(new k).perspective({fovy:n,aspect:r,near:a,far:o})}},{key:\"_initViewMatrix\",value:function(t){var e=t.viewMatrix,n=void 0===e?E:e,r=t.longitude,i=void 0===r?null:r,a=t.latitude,o=void 0===a?null:a,s=t.zoom,u=void 0===s?null:s,c=t.position,l=void 0===c?null:c,f=t.modelMatrix,h=void 0===f?null:f,d=t.focalDistance,v=void 0===d?1:d,p=t.distanceScales,g=void 0===p?null:p;this.isGeospatial=Number.isFinite(o)&&Number.isFinite(i),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?Object(w.c)({latitude:o})+Math.log2(v):0);var b=Math.pow(2,this.zoom);this.scale=b,this.distanceScales=this.isGeospatial?Object(w.b)({latitude:o,longitude:i,scale:this.scale}):g||{pixelsPerMeter:[b,b,b],metersPerPixel:[1/b,1/b,1/b]},this.focalDistance=v,this.distanceScales.metersPerPixel=new y.a(this.distanceScales.metersPerPixel),this.distanceScales.pixelsPerMeter=new y.a(this.distanceScales.pixelsPerMeter),this.position=T,this.meterOffset=T,l&&(this.position=l,this.modelMatrix=h,this.meterOffset=h?h.transformVector(l):l),this.isGeospatial?(this.longitude=i,this.latitude=o,this.center=this._getCenterInWorld({longitude:i,latitude:o}),this.viewMatrixUncentered=_.n([],n,[1,-1,1])):(this.center=l?this.projectPosition(l):[0,0,0],this.viewMatrixUncentered=n),this.viewMatrix=(new k).multiplyRight(this.viewMatrixUncentered).translate(new y.a(this.center||T).negate())}},{key:\"_getCenterInWorld\",value:function(t){var e=t.longitude,n=t.latitude,r=this.meterOffset,i=this.scale,a=this.distanceScales,o=this.projectFlat([e,n],i),s=new y.a(o[0],o[1],0);if(r){var u=new y.a(r).scale(a.pixelsPerMeter);s.add(u)}return s}},{key:\"_initProjectionMatrix\",value:function(t){var e=t.projectionMatrix,n=void 0===e?null:e,r=t.orthographic,i=void 0!==r&&r,a=t.fovyRadians,o=t.fovyDegrees,s=t.fovy,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?1e3:l,h=t.focalDistance,d=void 0===h?1:h,v=t.orthographicFocalDistance,p=a||(o||s||75)*x;this.projectionMatrix=n||this._createProjectionMatrix({orthographic:i,fovyRadians:p,aspect:this.width/this.height,focalDistance:v||d,near:c,far:f})}},{key:\"_initPixelMatrices\",value:function(){var t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];_.g(t,t,this.projectionMatrix),_.g(t,t,this.viewMatrix),this.viewProjectionMatrix=t,this.viewMatrixInverse=_.e([],this.viewMatrix)||this.viewMatrix;var e,n,r,i=(e={viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse},n=e.viewMatrix,{eye:[(r=e.viewMatrixInverse)[12],r[13],r[14]],direction:[n[2],n[6],n[10]],up:[n[1],n[5],n[9]]}),a=i.eye,s=i.direction,u=i.up;this.cameraPosition=a,this.cameraDirection=s,this.cameraUp=u;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];_.n(c,c,[this.width/2,-this.height/2,1]),_.o(c,c,[1,-1,0]),_.g(l,c,this.viewProjectionMatrix),this.pixelProjectionMatrix=l,this.viewportMatrix=c,this.pixelUnprojectionMatrix=_.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||o.a.warn(\"Pixel project matrix not invertible\")()}}]),t}();P.displayName=\"Viewport\"},4663:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return r}));var r={vs:\"#define SHADER_NAME luma_modular_vertex\\n\\n// object attributes\\nattribute vec3 positions;\\nattribute vec3 normals;\\nattribute vec4 colors;\\nattribute vec2 texCoords;\\nattribute vec3 pickingColors;\\n\\nvoid main(void) {\\n\\n  // Set up position\\n#ifdef MODULE_GEOMETRY\\n  geometry_setPosition(positions);\\n  geometry_setNormal(normals);\\n#endif\\n\\n#ifdef MODULE_PROJECT\\n  project_setPositionAndNormal_Model(positions, normals);\\n  gl_Position = project_model_to_clipspace(positions);\\n#endif\\n\\n  // Set up depth\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\\n#ifdef MODULE_DIFFUSE\\n  diffuse_setTextureCoordinate(texCoords);\\n#endif\\n\\n  // Set up color calculations\\n#ifdef MODULE_MATERIAL\\n  material_setDiffuseColor(colors);\\n  material_setDiffuseTextureCoordinates(texCoords);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  lighting_setPositionAndNormal(positions, normals);\\n  lighting_apply_light(positions);\\n  lighting_apply_reflection(positions);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  picking_setPickingColor(pickingColors);\\n#endif\\n\\n}\\n\",fs:\"#define SHADER_NAME luma-modular-fragment\\n\\nprecision highp float;\\n\\n// varyings\\nvarying vec4 vColor;\\n\\nvoid main(){\\n  gl_FragColor = vec4(1., 0., 1., 1.);\\n\\n#ifdef MODULE_DIFFUSE\\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth(gl_Position);\\n#endif\\n}\\n\",uniforms:{}}},4664:function(t,e,n){\"use strict\";var r=n(5031),i=n(4785),a=Object.keys(i.a).map((function(t){return\"const float COORDINATE_SYSTEM_\".concat(t,\" = \").concat(i.a[t],\".;\")})).join(\"\"),o=\"\".concat(a,\"\\n\\nuniform float project_uCoordinateSystem;\\nuniform float project_uScale;\\nuniform bool project_uWrapLongitude;\\nuniform float project_uAntimeridian;\\nuniform vec3 project_uCommonUnitsPerMeter;\\nuniform vec3 project_uCommonUnitsPerWorldUnit;\\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\\nuniform vec4 project_uCenter;\\nuniform mat4 project_uModelMatrix;\\nuniform mat4 project_uViewProjectionMatrix;\\nuniform vec2 project_uViewportSize;\\nuniform float project_uDevicePixelRatio;\\nuniform float project_uFocalDistance;\\nuniform vec3 project_uCameraPosition;\\nuniform vec3 project_uCoordinateOrigin;\\n\\nconst float TILE_SIZE = 512.0;\\nconst float PI = 3.1415926536;\\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\\nconst vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);\\nfloat project_size(float meters) {\\n  return meters * project_uCommonUnitsPerMeter.z;\\n}\\n\\nvec2 project_size(vec2 meters) {\\n  return meters * project_uCommonUnitsPerMeter.xy;\\n}\\n\\nvec3 project_size(vec3 meters) {\\n  return meters * project_uCommonUnitsPerMeter;\\n}\\n\\nvec4 project_size(vec4 meters) {\\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\\n}\\nvec3 project_normal(vec3 vector) {\\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\\n}\\n\\nvec4 project_offset_(vec4 offset) {\\n  float dy = offset.y;\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\\n    dy = clamp(dy, -1., 1.);\\n  }\\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\\n}\\nvec2 project_mercator_(vec2 lnglat) {\\n  float x = lnglat.x;\\n  if (project_uWrapLongitude) {\\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\\n  }\\n  return vec2(\\n    radians(x) + PI,\\n    PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\\n  );\\n}\\nvec4 project_position(vec4 position, vec2 position64xyLow) {\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNG_LAT) {\\n    return project_uModelMatrix * vec4(\\n      project_mercator_(position.xy) * WORLD_SCALE * project_uScale,\\n      project_size(position.z),\\n      position.w\\n    );\\n  }\\n\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_AUTO_OFFSET) {\\n    float X = position.x - project_uCoordinateOrigin.x;\\n    float Y = position.y - project_uCoordinateOrigin.y;\\n    return project_offset_(vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w));\\n  }\\n\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\\n    return project_offset_(position);\\n  }\\n  vec4 position_world = project_uModelMatrix * position;\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_IDENTITY) {\\n    position_world.xyz -= project_uCoordinateOrigin;\\n    position_world += project_uModelMatrix * vec4(position64xyLow, 0.0, 0.0);\\n  }\\n\\n  return project_offset_(position_world);\\n}\\n\\nvec4 project_position(vec4 position) {\\n  return project_position(position, ZERO_64_XY_LOW);\\n}\\n\\nvec3 project_position(vec3 position, vec2 position64xyLow) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), position64xyLow);\\n  return projected_position.xyz;\\n}\\n\\nvec3 project_position(vec3 position) {\\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_XY_LOW);\\n  return projected_position.xyz;\\n}\\n\\nvec2 project_position(vec2 position) {\\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_XY_LOW);\\n  return projected_position.xy;\\n}\\nvec4 project_common_position_to_clipspace(vec4 position) {\\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\\n    position.w *= project_uCommonUnitsPerMeter.z;\\n  }\\n  return project_uViewProjectionMatrix * position + project_uCenter;\\n}\\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\\n  return offset * project_uFocalDistance;\\n}\\n\\nfloat project_size_to_pixel(float meters) {\\n  return project_size(meters);\\n}\\nfloat project_pixel_size(float pixels) {\\n  return pixels;\\n}\\nvec2 project_pixel_size(vec2 pixels) {\\n  return pixels;\\n}\\nfloat project_scale(float meters) {\\n  return project_size(meters);\\n}\\nvec2 project_scale(vec2 meters) {\\n  return project_size(meters);\\n}\\nvec3 project_scale(vec3 meters) {\\n  return project_size(meters);\\n}\\nvec4 project_scale(vec4 meters) {\\n  return project_size(meters);\\n}\\nvec4 project_to_clipspace(vec4 position) {\\n  return project_common_position_to_clipspace(position);\\n}\\nvec4 project_pixel_to_clipspace(vec2 pixels) {\\n  return vec4(project_pixel_size_to_clipspace(pixels), 0.0, 0.0);\\n}\\n\"),s=n(4784),u={};e.a={name:\"project\",dependencies:[r.a],vs:o,getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return t.viewport?Object(s.b)(t):{}},deprecations:[{type:\"function\",old:\"project_scale\",new:\"project_size\"},{type:\"function\",old:\"project_to_clipspace\",new:\"project_common_position_to_clipspace\"},{type:\"function\",old:\"project_pixel_to_clipspace\",new:\"project_pixel_size_to_clipspace\"}]}},4668:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return a}));var r=n(16),i=n(17),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.id,i=void 0===n?\"effect\":n;this.id=i,this.props={},Object.assign(this.props,e)}return Object(i.a)(t,[{key:\"prepare\",value:function(){}},{key:\"getParameters\",value:function(){}},{key:\"cleanup\",value:function(){}}]),t}()},4669:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return j}));var r=n(5),i=n(7),a=n(16),o=n(178),s=n(29),u=n(80),c=n(229),l=n(17),f=n(19),h=n(4628),d=n(4760),v=n(4849),p=n(4897),g=n(4996),b=n(5023),y=n(5022),m=n(5027),_=n(4889),O=n(4721),j=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a.a)(this,e),(n=Object(o.a)(this,Object(u.a)(e).call(this,t,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.ownResources=[],n.initialize(r),Object.seal(Object(s.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:\"MAX_COLOR_ATTACHMENTS\",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:\"MAX_DRAW_BUFFERS\",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:\"isSupported\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.colorBufferFloat,r=e.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(t.getExtension(\"EXT_color_buffer_float\")||t.getExtension(\"WEBGL_color_buffer_float\")||t.getExtension(\"OES_texture_float\"))),r&&(i=i&&Boolean(t.getExtension(\"EXT_color_buffer_float\")||t.getExtension(\"EXT_color_buffer_half_float\"))),i}},{key:\"getDefaultFramebuffer\",value:function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new e(t,{id:\"default-framebuffer\",handle:null,attachments:{}}),t.luma.defaultFramebuffer}}]),Object(l.a)(e,[{key:\"initialize\",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,a=t.attachments,o=void 0===a?null:a,s=t.color,u=void 0===s||s,c=t.depth,l=void 0===c||c,f=t.stencil,h=void 0!==f&&f,d=t.check,v=void 0===d||d,p=t.readBuffer,g=t.drawBuffers;if(Object(_.a)(n>=0&&i>=0,\"Width and height need to be integers\"),this.width=n,this.height=i,o)for(var b in o){var y=o[b];(Array.isArray(y)?y[0]:y).resize({width:n,height:i})}else o=this._createDefaultAttachments(u,l,h,n,i);this.update({clearAttachments:!0,attachments:o,readBuffer:p,drawBuffers:g}),o&&v&&this.checkStatus()}},{key:\"delete\",value:function(){var t=!0,n=!1,r=void 0;try{for(var i,a=this.ownResources[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.delete()}}catch(t){n=!0,r=t}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}Object(c.a)(Object(u.a)(e.prototype),\"delete\",this).call(this)}},{key:\"update\",value:function(t){var e=t.attachments,n=void 0===e?{}:e,r=t.readBuffer,i=t.drawBuffers,a=t.clearAttachments,o=void 0!==a&&a,s=t.resizeAttachments,u=void 0===s||s;this.attach(n,{clearAttachments:o,resizeAttachments:u});var c=this.gl,l=c.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),c.bindFramebuffer(36160,l||null),this}},{key:\"resize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=t.height;if(null===this.handle)return Object(_.a)(void 0===e&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===e&&(e=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),e!==this.width&&n!==this.height&&O.a.log(2,\"Resizing framebuffer \".concat(this.id,\" to \").concat(e,\"x\").concat(n))(),this.attachments)this.attachments[r].resize({width:e,height:n});return this.width=e,this.height=n,this}},{key:\"attach\",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,a=void 0!==r&&r,o=n.resizeAttachments,s=void 0===o||o,u={};a&&Object.keys(this.attachments).forEach((function(t){u[t]=null})),Object.assign(u,t);var c=this.gl.bindFramebuffer(36160,this.handle);for(var l in u){Object(_.a)(void 0!==l,\"Misspelled framebuffer binding point?\");var f=Number(l),h=u[f],d=h;if(d)if(d instanceof v.a)this._attachRenderbuffer({attachment:f,renderbuffer:d});else if(Array.isArray(h)){var p=Object(i.a)(h,3),g=p[0],b=p[1],y=void 0===b?0:b,m=p[2],O=void 0===m?0:m;d=g,this._attachTexture({attachment:f,texture:g,layer:y,level:O})}else this._attachTexture({attachment:f,texture:d,layer:0,level:0});else this._unattach(f);s&&d&&d.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,c||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((function(t){return!e.attachments[t]})).forEach((function(t){delete e.attachments[t]}))}},{key:\"checkStatus\",value:function(){this.gl;var t=this.getStatus();if(36053!==t)throw new Error(k(t));return this}},{key:\"getStatus\",value:function(){var t=this.gl,e=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),n}},{key:\"clear\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=t.depth,r=t.stencil,i=t.drawBuffers,a=void 0===i?[]:i,o=this.gl.bindFramebuffer(36160,this.handle);return(e||n||r)&&Object(p.a)(this.gl,{color:e,depth:n,stencil:r}),a.forEach((function(t,e){Object(p.b)({drawBuffer:e,value:t})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:\"readPixels\",value:function(){return O.a.error(\"Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)\")(),null}},{key:\"readPixelsToBuffer\",value:function(){return O.a.error(\"Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)\")(),null}},{key:\"copyToDataUrl\",value:function(){return O.a.error(\"Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)\")(),null}},{key:\"copyToImage\",value:function(){return O.a.error(\"Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)\")(),null}},{key:\"copyToTexture\",value:function(){return O.a.error(\"Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})\")(),null}},{key:\"blit\",value:function(){return O.a.error(\"Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)\")(),null}},{key:\"invalidate\",value:function(t){var e=t.attachments,n=void 0===e?[]:e,r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a,s=t.width,u=t.height,c=this.gl;Object(y.a)(c);var l=c.bindFramebuffer(36008,this.handle);return 0===i&&0===o&&void 0===s&&void 0===u?c.invalidateFramebuffer(36008,n):c.invalidateFramebuffer(36008,n,i,o,s,u),c.bindFramebuffer(36008,l),this}},{key:\"getAttachmentParameter\",value:function(t,e,n){var r=this._getAttachmentParameterFallback(e);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(m.a)(this.gl,r)),r}},{key:\"getAttachmentParameters\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=e?Object(m.a)(this.gl,c):c;r[l]=this.getAttachmentParameter(t,c,e)}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}},{key:\"getParameters\",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=Object.keys(this.attachments),n={},r=0,i=e;r<i.length;r++){var a=i[r],o=Number(a),s=t?Object(m.a)(this.gl,o):o;n[s]=this.getAttachmentParameters(o,t)}return n}},{key:\"show\",value:function(){return\"undefined\"!=typeof window&&window.open(Object(g.a)(this),\"luma-debug-texture\"),this}},{key:\"log\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"\";if(t>O.a.priority||\"undefined\"==typeof window)return this;e=e||\"Framebuffer \".concat(this.id);var n=Object(g.a)(this,{maxHeight:100});return O.a.image({priority:t,message:e,image:n},e)(),this}},{key:\"bind\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,this.handle),this}},{key:\"unbind\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?36160:e;return this.gl.bindFramebuffer(n,null),this}},{key:\"_createDefaultAttachments\",value:function(t,e,n,i,a){var o,s=null;t&&((s=s||{})[36064]=new d.a(this.gl,{id:\"\".concat(this.id,\"-color0\"),pixels:null,format:6408,type:5121,width:i,height:a,mipmaps:!1,parameters:(o={},Object(r.a)(o,10241,9729),Object(r.a)(o,10240,9729),Object(r.a)(o,10242,33071),Object(r.a)(o,10243,33071),o)}),this.ownResources.push(s[36064]));return e&&n?((s=s||{})[33306]=new v.a(this.gl,{id:\"\".concat(this.id,\"-depth-stencil\"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):e?((s=s||{})[36096]=new v.a(this.gl,{id:\"\".concat(this.id,\"-depth\"),format:33189,width:i,height:a}),this.ownResources.push(s[36096])):n&&Object(_.a)(!1),s}},{key:\"_unattach\",value:function(t){var e=this.attachments[t];e&&(e instanceof v.a?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}},{key:\"_attachRenderbuffer\",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:\"_attachTexture\",value:function(t){var e=t.attachment,n=void 0===e?36064:e,r=t.texture,i=t.layer,a=t.level,o=this.gl;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,r.target,a,i);break;case 34067:var s=function(t){return t<34069?t+34069:t}(i);o.framebufferTexture2D(36160,n,s,r.handle,a);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,a);break;default:Object(_.a)(!1,\"Illegal texture type\")}o.bindTexture(r.target,null),this.attachments[n]=r}},{key:\"_setReadBuffer\",value:function(t){var e=this.gl;Object(y.d)(e)?e.readBuffer(t):Object(_.a)(36064===t||1029===t,\"Multiple render targets not supported\"),this.readBuffer=t}},{key:\"_setDrawBuffers\",value:function(t){var e=this.gl;if(Object(y.d)(e))e.drawBuffers(t);else{var n=e.getExtension(\"WEBGL.draw_buffers\");n?n.drawBuffersWEBGL(t):Object(_.a)(1===t.length&&(36064===t[0]||1029===t[0]),\"Multiple render targets not supported\")}this.drawBuffers=t}},{key:\"_getAttachmentParameterFallback\",value:function(t){var e=Object(b.a)(this.gl);switch(t){case 36052:return e.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.webgl2?null:8;case 33297:return e.webgl2?null:5125;case 33296:return e.webgl2||e.EXT_sRGB?null:9729;default:return null}}},{key:\"_createHandle\",value:function(){return this.gl.createFramebuffer()}},{key:\"_deleteHandle\",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:\"_bindHandle\",value:function(t){return this.gl.bindFramebuffer(36160,t)}},{key:\"color\",get:function(){return this.attachments[36064]||null}},{key:\"texture\",get:function(){return this.attachments[36064]||null}},{key:\"depth\",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:\"stencil\",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),e}(h.a);function k(t){return(j.STATUS||{})[t]||\"Framebuffer error \".concat(t)}j.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303]},4670:function(t,e,n){\"use strict\";function r(t,e){if(!t)throw new Error(\"math.gl assertion \".concat(e))}n.d(e,\"a\",(function(){return r}))},4676:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return j}));n(7);var r=n(5),i=n(4786),a=n(4677);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=\"undefined\"!=typeof window&&window.navigator||{},n=t.userAgent||e.userAgent||\"\",r=-1!==n.indexOf(\"MSIE \"),i=-1!==n.indexOf(\"Trident/\");return r||i}var s=n(4898),u={GLSL_FRAG_DATA:[\"WEBGL_draw_buffers\",!0],GLSL_FRAG_DEPTH:[\"EXT_frag_depth\",!0],GLSL_DERIVATIVES:[\"OES_standard_derivatives\",!0],GLSL_TEXTURE_LOD:[\"EXT_shader_texture_lod\",!0]},c={};Object.keys(u).forEach((function(t){c[t]=t}));var l={};function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=u[e];if(Object(s.a)(r,e),!o(n))return!0;if(e in l)return l[e];var i=r[0],a=n.behavior||\"enable\",c=\"#extension GL_\".concat(i,\" : \").concat(a,\"\\nvoid main(void) {}\"),f=t.createShader(35633);t.shaderSource(f,c),t.compileShader(f);var h=t.getShaderParameter(f,35713);return t.deleteShader(f),l[e]=h,h}function h(t,e){var n=u[e];Object(s.a)(n,e);var r=function(t){return Boolean(t&&2===t._version)}(t)&&n[1]||n[0],i=\"string\"==typeof r?Boolean(t.getExtension(r)):r;return Object(s.a)(!1===i||!0===i),i}function d(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return h(t,e)}))}var v,p,g,b=n(4761),y=\"\\n\\n\".concat(b.a,\"\\n\\n\"),m=(v={},Object(r.a)(v,i.b,\"vertex\"),Object(r.a)(v,i.a,\"fragment\"),v),_=(p={},Object(r.a)(p,i.b,{}),Object(r.a)(p,i.a,{}),p),O=(g={},Object(r.a)(g,i.b,{}),Object(r.a)(g,i.a,{}),g);function j(t,e){var n=e.vs,r=e.fs,o=Object(a.c)(e.modules||[]);return{gl:t,vs:k(t,Object.assign({},e,{source:n,type:i.b,modules:o})),fs:k(t,Object.assign({},e,{source:r,type:i.a,modules:o})),getUniforms:w(o),modules:x(o)}}function k(t,e){var n,a,o=e.id,u=e.source,l=e.type,h=e.modules,v=e.defines,p=void 0===v?{}:v,g=e.hookFunctions,j=void 0===g?_:g,k=e.moduleInjections,w=void 0===k?O:k,x=e.inject,E=void 0===x?{}:x,T=e.prologue,P=void 0===T||T,S=e.log;(Object(s.a)(\"string\"==typeof u,\"shader source must be a string\"),j!==_)&&(n={},Object(r.a)(n,i.b,Object.assign({},_[i.b],j[i.b])),Object(r.a)(n,i.a,Object.assign({},_[i.a],j[i.a])),j=n);w!==O&&(a={},Object(r.a)(a,i.b,Object.assign({},O[i.b],w[i.b])),Object(r.a)(a,i.a,Object.assign({},O[i.a],w[i.a])),w=a);var A=l===i.b,L=u.split(\"\\n\"),C=100,I=\"\",M=u;0===L[0].indexOf(\"#version \")?(C=300,I=L[0],M=L.slice(1).join(\"\\n\")):I=\"#version \".concat(C);var R={};h.forEach((function(t){Object.assign(R,t.getDefines())})),Object.assign(R,p);var F=P?\"\".concat(I,\"\\n\").concat(function(t){var e=t.id,n=t.source,r=t.type;return e&&\"string\"==typeof e&&-1===n.indexOf(\"SHADER_NAME\")?\"\\n#define SHADER_NAME \".concat(e,\"_\").concat(m[r],\"\\n\\n\"):\"\"}({id:o,source:u,type:l}),\"\\n\").concat(function(t){var e=t.type;return\"\\n#define SHADER_TYPE_\".concat(m[e].toUpperCase(),\"\\n\")}({type:l}),\"\\n\").concat(function(t){switch(function(t){var e=t.getExtension(\"WEBGL_debug_renderer_info\"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||7936),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(t,e){if(t.match(/NVIDIA/i)||e.match(/NVIDIA/i))return\"NVIDIA\";if(t.match(/INTEL/i)||e.match(/INTEL/i))return\"INTEL\";if(t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i))return\"AMD\";return\"UNKNOWN GPU\"}(n,r),vendor:n,renderer:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t).gpuVendor.toLowerCase()){case\"nvidia\":return\"#define NVIDIA_GPU\\n// Nvidia optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n\";case\"intel\":return\"#define INTEL_GPU\\n// Intel optimizes away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\";case\"amd\":return\"#define AMD_GPU\\n\";default:return\"#define DEFAULT_GPU\\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\\n// Intel's built-in 'tan' function doesn't have acceptable precision\\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\\n\"}}(t),\"\\n\").concat(function(t,e,n){var r=\"#if (__VERSION__ > 120)\\n\\n# define FRAG_DEPTH\\n# define DERIVATIVES\\n# define DRAW_BUFFERS\\n# define TEXTURE_LOD\\n\\n#endif // __VERSION\\n\";return d(t,c.GLSL_FRAG_DEPTH)&&(r+=\"// FRAG_DEPTH => gl_FragDepth is available\\n#ifdef GL_EXT_frag_depth\\n#extension GL_EXT_frag_depth : enable\\n# define FRAG_DEPTH\\n# define gl_FragDepth gl_FragDepthEXT\\n#endif\\n\"),d(t,c.GLSL_DERIVATIVES)&&f(t,c.GLSL_DERIVATIVES)&&(r+=\"// DERIVATIVES => dxdF, dxdY and fwidth are available\\n#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n# define DERIVATIVES\\n#endif\\n\"),d(t,c.GLSL_FRAG_DATA)&&f(t,c.GLSL_FRAG_DATA,{behavior:\"require\"})&&(r+=\"// DRAW_BUFFERS => gl_FragData[] is available\\n#ifdef GL_EXT_draw_buffers\\n#extension GL_EXT_draw_buffers : require\\n#define DRAW_BUFFERS\\n#endif\\n\"),d(t,c.GLSL_TEXTURE_LOD)&&(r+=\"// TEXTURE_LOD => texture2DLod etc are available\\n#ifdef GL_EXT_shader_texture_lod\\n#extension GL_EXT_shader_texture_lod : enable\\n# define TEXTURE_LOD\\n#define texture2DLod texture2DLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define texture2DProjLod texture2DProjLodEXT\\n#define textureCubeLod textureCubeLodEXT\\n#define texture2DGrad texture2DGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define texture2DProjGrad texture2DProjGradEXT\\n#define textureCubeGrad textureCubeGradEXT\\n#endif\\n\"),r}(t),\"\\n\").concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n=\"\";for(var r in t){0===e&&(n+=\"\\n// APPLICATION DEFINES\\n\"),e++;var i=t[r];(i||Number.isFinite(i))&&(n+=\"#define \".concat(r.toUpperCase(),\" \").concat(t[r],\"\\n\"))}0===e&&(n+=\"\\n\");return n}(R),\"\\n\").concat(A?\"\":\"precision highp float;\\n\\n\",\"\\n\"):\"\".concat(I,\"\\n\"),N=!1,D={},B={};for(var U in E){var V=\"string\"==typeof E[U]?{injection:E[U],order:0}:E[U];U.match(/^(v|f)s:/)?\"#\"===U[3]?B[U]=[V]:D[U]=[V]:B[U]=[V]}var z=!0,G=!1,H=void 0;try{for(var W,q=h[Symbol.iterator]();!(z=(W=q.next()).done);z=!0){var X=W.value;switch(X.name){case\"inject\":N=!0;break;default:if(S&&X.checkDeprecations(M,S),F+=X.getModuleSource(l,C),w[l][X.name]){var Y=w[l][X.name];for(var K in Y)K.match(/^(v|f)s:#/)?(B[K]=B[K]||[],B[K].push(Y[K])):(D[K]=D[K]||[],D[K].push(Y[K]))}}}}catch(t){G=!0,H=t}finally{try{z||null==q.return||q.return()}finally{if(G)throw H}}return F+=y,F+=function(t,e){var n=\"\";for(var r in t){var i=t[r];if(n+=\"void \".concat(i.signature,\" {\\n\"),i.header&&(n+=\"  \".concat(i.header)),e[r]){var a=e[r];a.sort((function(t,e){return t.order-e.order}));var o=!0,s=!1,u=void 0;try{for(var c,l=a[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;n+=\"  \".concat(f.injection,\"\\n\")}}catch(t){s=!0,u=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}}i.footer&&(n+=\"  \".concat(i.footer)),n+=\"}\\n\"}return n}(j[l],D),F+=M,F=Object(b.c)(F,l,B,N)}function w(t){return function(e){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value.getUniforms(e,n);Object.assign(n,u)}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}function x(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value,c=Object(a.a)(u);e[u]=c}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e}},4677:function(t,e,n){\"use strict\";n.d(e,\"d\",(function(){return u})),n.d(e,\"b\",(function(){return c})),n.d(e,\"c\",(function(){return l})),n.d(e,\"a\",(function(){return f}));var r=n(16),i=n(17),a=n(4757),o=n(4898),s=new(function(){function t(){Object(r.a)(this,t),this.shaderModules={},this.defaultShaderModules=[]}return Object(i.a)(t,[{key:\"setDefaultShaderModules\",value:function(t){this.defaultShaderModules=this.resolveModules(t)}},{key:\"getDefaultShaderModules\",value:function(){return this.defaultShaderModules}},{key:\"registerShaderModules\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignoreMultipleRegistrations,r=void 0!==n&&n,i=!0,a=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;this._registerShaderModule(c,r)}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}},{key:\"getShaderModule\",value:function(t){if(t instanceof a.a)return t;if(\"string\"!=typeof t)return this._registerShaderModule(t,!0);var e=this.shaderModules[t];return e||Object(o.a)(!1,\"Unknown shader module \".concat(t)),e}},{key:\"resolveModules\",value:function(t){var e=this;return t.map((function(t){return e.getShaderModule(t)}))}},{key:\"_registerShaderModule\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t instanceof a.a)return t;if(Object(o.a)(t.name,\"shader module has no name\"),this.shaderModules[t.name]&&!e)throw new Error(\"shader module \".concat(t.name,\" already registered\"));return(t=new a.a(t)).dependencies=this.resolveModules(t.dependencies),this.shaderModules[t.name]=t,this.shaderModules[t.name]}}]),t}());function u(t){s.setDefaultShaderModules(t)}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.ignoreMultipleRegistrations,r=void 0!==n&&n;s.registerShaderModules(t,{ignoreMultipleRegistrations:r})}function l(t){return t=t.concat(s.defaultShaderModules),h(t=s.resolveModules(t))}function f(t){return s.getShaderModule(t)}function h(t){var e={},n={};return d({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((function(t,e){return n[e]-n[t]})).map((function(t){return e[t]}))}function d(t){var e=t.modules,n=t.level,r=t.moduleMap,i=t.moduleDepth;if(n>=5)throw new Error(\"Possible loop in shader dependency graph\");var a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;r[l.name]=l,(void 0===i[l.name]||i[l.name]<n)&&(i[l.name]=n)}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var f=!0,h=!1,v=void 0;try{for(var p,g=e[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var b=p.value;b.dependencies&&d({modules:b.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(t){h=!0,v=t}finally{try{f||null==g.return||g.return()}finally{if(h)throw v}}}},4684:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return a}));var r=[],i=[];function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,a=r,o={index:-1,data:t,target:[]};return t?\"function\"==typeof t[Symbol.iterator]?a=t:t.length>0&&(i.length=t.length,a=i):a=r,(e>0||Number.isFinite(n))&&(a=(Array.isArray(a)?a:Array.from(a)).slice(e,n),o.index=e-1),{iterable:a,objectInfo:o}}},4685:function(t,e,n){\"use strict\";(function(t){n.d(e,\"b\",(function(){return i})),n.d(e,\"a\",(function(){return a}));var r={self:\"undefined\"!=typeof self&&self,window:\"undefined\"!=typeof window&&window,global:void 0!==t&&t,document:\"undefined\"!=typeof document&&document},i=r.window||r.self||r.global,a=r.global||r.self||r.window}).call(this,n(153))},4686:function(t,e,n){\"use strict\";(function(t){var e=n(4779),r=n(4997);function i(t,n){var i=n.extension,a=n.target,o=n.target2,s=r.b[i];Object(e.a)(s);for(var u=s.meta,c=(void 0===u?{}:u).suffix,l=void 0===c?\"\":c,f=t.getExtension(i),h=function(){var e=v[d],n=\"\".concat(e).concat(l),r=null;\"meta\"===e||\"function\"==typeof t[e]||(f&&\"function\"==typeof f[n]?r=function(){return f[n].apply(f,arguments)}:\"function\"==typeof s[e]&&(r=s[e].bind(a))),r&&(a[e]=r,o[e]=r)},d=0,v=Object.keys(s);d<v.length;d++)h()}(void 0!==t?t:window).polyfillContext=function(t){return t.luma=t.luma||{},function(t){t.luma.extensions={};var e=t.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.luma[s]=t.getExtension(s)}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}(t),t.luma.polyfilled||(!function(t,e){var n=!0,r=!1,a=void 0;try{for(var o,s=Object.getOwnPropertyNames(e)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;\"overrides\"!==u&&i(t,{extension:u,target:t.luma,target2:t})}}catch(t){r=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}(t,r.b),function(t,e){var n=e.target,i=e.target2;Object.keys(r.a).forEach((function(e){if(\"function\"==typeof r.a[e]){var a=t[e]?t[e].bind(t):function(){},o=r.a[e].bind(null,t,a);n[e]=o,i[e]=o}}))}(t,{target:t.luma,target2:t}),t.luma.polyfilled=!0),t}}).call(this,n(153))},4687:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return c})),n.d(e,\"b\",(function(){return f}));var r=n(16),i=n(17),a=n(4705),o=n(4783),s=n(4601),u=function(){},c={BREAK:1,SNAP_TO_END:2,IGNORE:3},l={transitionDuration:0,transitionEasing:function(t){return t},transitionInterpolator:new a.a,transitionInterruption:c.BREAK,onTransitionStart:u,onTransitionInterrupt:u,onTransitionEnd:u},f=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(s.a)(e),this.ControllerState=e,this.props=Object.assign({},l,n),this.propsInTransition=null,this.time=0,this.transition=new o.a,this.onViewStateChange=n.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(i.a)(t,[{key:\"finalize\",value:function(){}},{key:\"getViewportInTransition\",value:function(){return this.propsInTransition}},{key:\"processViewStateChange\",value:function(t){var e=!1,n=this.props;if(t=Object.assign({},l,t),this.props=t,this._shouldIgnoreViewportChange(n,t))return e;if(this._isTransitionEnabled(t)){var r=Object.assign({},n,this.transition.interruption===c.SNAP_TO_END?this.transition.endProps:this.propsInTransition||n);this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}},{key:\"updateTransition\",value:function(t){this.time=t,this._updateTransition()}},{key:\"_isTransitionEnabled\",value:function(t){return t.transitionDuration>0&&t.transitionInterpolator}},{key:\"_isUpdateDueToCurrentTransition\",value:function(t){return!!this.transition.inProgress&&this.transition.interpolator.arePropsEqual(t,this.propsInTransition)}},{key:\"_shouldIgnoreViewportChange\",value:function(t,e){return this.transition.inProgress?this.transition.interruption===c.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}},{key:\"_triggerTransition\",value:function(t,e){Object(s.a)(this._isTransitionEnabled(e),\"Transition is not enabled\");var n=new this.ControllerState(t),r=new this.ControllerState(e).shortestPathFrom(n),i=e.transitionInterpolator.initializeProps(t,r);this.propsInTransition={},this.transition.start({duration:e.transitionDuration,easing:e.transitionEasing,interpolator:e.transitionInterpolator,interruption:e.transitionInterruption,startProps:i.start,endProps:i.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)}),this._updateTransition()}},{key:\"_updateTransition\",value:function(){this.transition.update(this.time)}},{key:\"_onTransitionEnd\",value:function(t){var e=this;return function(n){e.propsInTransition=null,t(n)}}},{key:\"_onTransitionUpdate\",value:function(t){var e=t.interpolator,n=t.startProps,r=t.endProps,i=t.time,a=e.interpolateProps(n,r,i);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,a)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0}})}}]),t}();f.defaultProps=l},4688:function(t,e,n){\"use strict\";n.d(e,\"c\",(function(){return u})),n.d(e,\"a\",(function(){return c})),n.d(e,\"b\",(function(){return l}));var r,i=n(7),a=n(5),o=n(4889),s=(r={},Object(a.a)(r,5126,[5126,1,\"float\"]),Object(a.a)(r,35664,[5126,2,\"vec2\"]),Object(a.a)(r,35665,[5126,3,\"vec3\"]),Object(a.a)(r,35666,[5126,4,\"vec4\"]),Object(a.a)(r,5124,[5124,1,\"int\"]),Object(a.a)(r,35667,[5124,2,\"ivec2\"]),Object(a.a)(r,35668,[5124,3,\"ivec3\"]),Object(a.a)(r,35669,[5124,4,\"ivec4\"]),Object(a.a)(r,5125,[5125,1,\"uint\"]),Object(a.a)(r,36294,[5125,2,\"uvec2\"]),Object(a.a)(r,36295,[5125,3,\"uvec3\"]),Object(a.a)(r,36296,[5125,4,\"uvec4\"]),Object(a.a)(r,35670,[5126,1,\"bool\"]),Object(a.a)(r,35671,[5126,2,\"bvec2\"]),Object(a.a)(r,35672,[5126,3,\"bvec3\"]),Object(a.a)(r,35673,[5126,4,\"bvec4\"]),Object(a.a)(r,35674,[5126,8,\"mat2\"]),Object(a.a)(r,35685,[5126,8,\"mat2x3\"]),Object(a.a)(r,35686,[5126,8,\"mat2x4\"]),Object(a.a)(r,35675,[5126,12,\"mat3\"]),Object(a.a)(r,35687,[5126,12,\"mat3x2\"]),Object(a.a)(r,35688,[5126,12,\"mat3x4\"]),Object(a.a)(r,35676,[5126,16,\"mat4\"]),Object(a.a)(r,35689,[5126,16,\"mat4x2\"]),Object(a.a)(r,35690,[5126,16,\"mat4x3\"]),r);function u(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(o.a)(!1),0}}function c(t){var e=s[t];if(!e)return null;var n=Object(i.a)(e,2);return{type:n[0],components:n[1]}}function l(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=5126}for(var n in s){var r=Object(i.a)(s[n],3),a=r[0],o=r[1],u=r[2];if(a===t&&o===e)return{glType:n,name:u}}return null}},4689:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return h}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(4791),c=n(5025),l=n(4897),f=n(4995),h=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"render\",value:function(t){var e=this,n=this.gl;return Object(c.a)(n,{framebuffer:t.outputBuffer},(function(){return e.drawLayers(t)}))}},{key:\"drawLayers\",value:function(t){var e=this,n=t.layers,r=t.viewports,i=t.views,a=t.onViewportActive,o=t.deviceRect,s=void 0===o?null:o,u=t.parameters,c=void 0===u?{}:u,l=t.pass,f=void 0===l?\"draw\":l,h=t.redrawReason,d=void 0===h?\"\":h,v=t.clearCanvas,p=void 0===v||v,g=t.effects,b=t.effectProps,y=this.gl;p&&this.clearCanvas(y);var m=[];return r.forEach((function(t,r){var o=e.getViewportFromDescriptor(t),u=i&&i[o.id];a(o);var l=e.drawLayersInViewport(y,{layers:n,viewport:o,view:u,deviceRect:s,parameters:c,pass:f,redrawReason:d,effects:g,effectProps:b});m.push(l)})),m}},{key:\"drawLayersInViewport\",value:function(t,e){var n=this,r=e.layers,i=e.viewport,a=e.view,o=(e.deviceRect,e.parameters),s=void 0===o?{}:o,u=(e.pass,e.redrawReason,e.effects),h=e.effectProps,d=this.getGLViewport(t,{viewport:i});if(a&&a.props.clear){var v=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;Object(c.a)(t,{scissorTest:!0,scissor:d},(function(){return Object(l.a)(t,v)}))}var p={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};return Object(f.a)(t,s||{}),r.forEach((function(e,r){var a=n.shouldDrawLayer(e,i);a&&e.props.pickable&&p.pickableCount++,e.isComposite&&p.compositeCount++,a&&(p.visibleCount++,n.drawLayerInViewport({gl:t,layer:e,layerIndex:r,glViewport:d,parameters:s,effects:u,effectProps:h}))})),p}},{key:\"drawLayerInViewport\",value:function(t){t.gl;var e=t.layer,n=t.layerIndex,r=t.glViewport,i=t.parameters,a=t.effects,o=t.effectProps,s=this.getModuleParameters(e,a,o),u=Object.assign({},e.context.uniforms,{layerIndex:n}),c=this.getLayerParameters(e,n,r,i);e.drawLayer({moduleParameters:s,uniforms:u,parameters:c})}},{key:\"getViewportFromDescriptor\",value:function(t){return t.viewport?t.viewport:t}},{key:\"shouldDrawLayer\",value:function(t,e){var n=this.props.layerFilter,r=!t.isComposite&&t.props.visible;return r&&n&&(r=n({layer:t,viewport:e,isPicking:!1})),r}},{key:\"getModuleParameters\",value:function(t){return Object.assign(Object.create(t.props),{viewport:t.context.viewport,pickingActive:0,devicePixelRatio:this.props.pixelRatio})}},{key:\"getLayerParameters\",value:function(t,e,n,r){var i=Object.assign({},t.props.parameters||{},r);return Object.assign(i,{viewport:n}),i}},{key:\"getGLViewport\",value:function(t,e){var n=e.viewport,r=t.canvas?t.canvas.clientHeight||t.canvas.height:100,i=n,a=this.props.pixelRatio;return[i.x*a,(r-i.y-i.height)*a,i.width*a,i.height*a]}},{key:\"clearCanvas\",value:function(t){var e=t.drawingBufferWidth,n=t.drawingBufferHeight;Object(c.a)(t,{viewport:[0,0,e,n]},(function(){t.clear(16640)}))}}]),e}(u.a)},4705:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return h}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(4638),c=n(4601),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),Array.isArray(e)&&(e={compare:e,extract:e,required:e});var n=e,i=n.compare,a=n.extract,o=n.required;this._propsToCompare=i,this._propsToExtract=a,this._requiredProps=o}return Object(i.a)(t,[{key:\"arePropsEqual\",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var a,o=(this._propsToCompare||Object.keys(e))[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!Object(u.e)(t[s],e[s]))return!1}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}},{key:\"initializeProps\",value:function(t,e){var n;if(this._propsToExtract){var r={},i={},a=!0,o=!1,s=void 0;try{for(var u,c=this._propsToExtract[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;r[l]=t[l],i[l]=e[l]}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}n={start:r,end:i}}else n={start:t,end:e};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:\"interpolateProps\",value:function(t,e,n){Object(c.a)(!1,\"interpolateProps is not implemented\")}},{key:\"_checkRequiredProps\",value:function(t){this._requiredProps&&this._requiredProps.forEach((function(e){var n=t[e];Object(c.a)(Number.isFinite(n)||Array.isArray(n),\"\".concat(e,\" is required for transition\"))}))}}]),t}(),f=[\"longitude\",\"latitude\",\"zoom\",\"bearing\",\"pitch\"],h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f;return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).call(this,t))}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"interpolateProps\",value:function(t,e,n){var r={};for(var i in e)r[i]=Object(u.g)(t[i],e[i],n);return r}}]),e}(l)},4706:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return h}));var r=n(25),i=n(16),a=n(17),o=n(4661),s=/([0-9]+\\.?[0-9]*)(%|px)/;function u(t){switch(Object(r.a)(t)){case\"number\":return{position:t,relative:!1};case\"string\":var e=t.match(s);if(e&&e.length>=3){var n=\"%\"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error(\"Could not parse position string \".concat(t))}}function c(t,e){return t.relative?Math.round(t.position*e):t.position}var l=n(4727),f=n(4601),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?null:n,a=e.x,s=void 0===a?0:a,u=e.y,c=void 0===u?0:u,l=e.width,h=void 0===l?\"100%\":l,d=e.height,v=void 0===d?\"100%\":d,p=e.projectionMatrix,g=void 0===p?null:p,b=e.fovy,y=void 0===b?50:b,m=e.near,_=void 0===m?.1:m,O=e.far,j=void 0===O?1e3:O,k=e.modelMatrix,w=void 0===k?null:k,x=e.viewportInstance,E=void 0===x?null:x,T=e.type,P=void 0===T?o.a:T;Object(f.a)(!E||E instanceof o.a),this.viewportInstance=E,this.id=r||this.constructor.displayName||\"view\",this.type=P,this.props=Object.assign({},e,{id:this.id,projectionMatrix:g,fovy:y,near:_,far:j,modelMatrix:w}),this._parseDimensions({x:s,y:c,width:h,height:v}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(a.a)(t,[{key:\"equals\",value:function(t){return this===t||(this.viewportInstance?t.viewportInstance&&this.viewportInstance.equals(t.viewportInstance):Object(l.a)(this.props,t.props))}},{key:\"makeViewport\",value:function(t){var e=t.width,n=t.height,r=t.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:e,height:n}),a=Object.assign({viewState:r},r,this.props,i);return this._getViewport(a)}},{key:\"getViewStateId\",value:function(){switch(Object(r.a)(this.props.viewState)){case\"string\":return this.props.viewState;case\"object\":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:\"filterViewState\",value:function(t){if(this.props.viewState&&\"object\"===Object(r.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var e=Object.assign({},t);for(var n in this.props.viewState)\"id\"!==n&&(e[n]=this.props.viewState[n]);return e}return t}},{key:\"getDimensions\",value:function(t){var e=t.width,n=t.height;return{x:c(this._x,e),y:c(this._y,n),width:c(this._width,e),height:c(this._height,n)}}},{key:\"_getControllerProps\",value:function(t){var e=this.props.controller;return e?!0===e?t:(\"function\"==typeof e&&(e={type:e}),Object.assign({},t,e)):null}},{key:\"_getViewport\",value:function(t){return new(0,this.type)(t)}},{key:\"_parseDimensions\",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height;this._x=u(e),this._y=u(n),this._width=u(r),this._height=u(i)}}]),t}()},4707:function(t,e,n){\"use strict\";var r=n(5066),i=n(4664),a=n(4719),o=r.a.fp64ify,s=r.a.fp64ifyMatrix4,u=(e.a={name:\"project64\",dependencies:[i.a,r.a],vs:\"\\nconst vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\\n\\nuniform vec2 project64_uScale;\\nuniform vec2 project_uViewProjectionMatrixFP64[16];\\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) {\\n\\n#if defined(NVIDIA_FP64_WORKAROUND)\\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\\n#else\\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\\n#endif\\n  out_val[1] = sub_fp64(PI_FP64,\\n    log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\\n  return;\\n}\\n\\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\\n  vec2 pos_fp64[2];\\n  mercatorProject_fp64(position_fp64, pos_fp64);\\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], project64_uScale);\\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], project64_uScale);\\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\\n\\n  return;\\n}\\n\\nvoid project_position_fp64(vec2 position, vec2 position64xyLow, out vec2 out_val[2]) {\\n  vec4 position64xy = vec4(\\n    position.x, position64xyLow.x,\\n    position.y, position64xyLow.y);\\n\\n  project_position_fp64(position64xy, out_val);\\n}\\n\\nvec4 project_common_position_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\\n  vec2 vertex_pos_clipspace[4];\\n  mat4_vec4_mul_fp64(project_uViewProjectionMatrixFP64, vertex_pos_modelspace,\\n    vertex_pos_clipspace);\\n  return vec4(\\n    vertex_pos_clipspace[0].x,\\n    vertex_pos_clipspace[1].x,\\n    vertex_pos_clipspace[2].x,\\n    vertex_pos_clipspace[3].x\\n    );\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\\n) {\\n  vec2 offset64[4];\\n  vec4_fp64(vec4(offset, 0.0), offset64);\\n\\n  float z = project_size(position.z);\\n  vec2 projectedPosition64xy[2];\\n  project_position_fp64(position.xy, position64xyLow, projectedPosition64xy);\\n\\n  vec2 commonPosition64[4];\\n  commonPosition64[0] = sum_fp64(offset64[0], projectedPosition64xy[0]);\\n  commonPosition64[1] = sum_fp64(offset64[1], projectedPosition64xy[1]);\\n  commonPosition64[2] = sum_fp64(offset64[2], vec2(z, 0.0));\\n  commonPosition64[3] = vec2(1.0, 0.0);\\n\\n  commonPosition = vec4(projectedPosition64xy[0].x, projectedPosition64xy[1].x, z, 1.0);\\n\\n  return project_common_position_to_clipspace_fp64(commonPosition64);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec2 position64xyLow, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(\\n    position, position64xyLow, offset, commonPosition\\n  );\\n}\\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\\n  return project_common_position_to_clipspace_fp64(vertex_pos_modelspace);\\n}\\n\",getUniforms:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=t.project_uViewProjectionMatrix,n=t.project_uScale;if(e&&n)return u({project_uViewProjectionMatrix:e,project_uScale:n});return{}},deprecations:[{type:\"function\",old:\"project_to_clipspace_fp64\",new:\"project_common_position_to_clipspace_fp64\"}]},Object(a.a)((function(t){var e=t.project_uViewProjectionMatrix,n=t.project_uScale,r=s(e),i=o(n);return{project_uViewProjectionMatrixFP64:r,project64_uViewProjectionMatrix:r,project64_uScale:i}})))},4719:function(t,e,n){\"use strict\";function r(t,e){if(t===e)return!0;if(Array.isArray(t)){var n=t.length;if(!e||e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function i(t){var e,n={};return function(i){for(var a in i)if(!r(i[a],n[a])){e=t(i),n=i;break}return e}}n.d(e,\"a\",(function(){return i}))},4720:function(t,e,n){\"use strict\";(function(t){function r(){var e;if(\"undefined\"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){var n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,\"a\",(function(){return r}))}).call(this,n(287))},4721:function(t,e,n){\"use strict\";var r=n(5057);e.a=new r.a({id:\"luma\"}).enable()},4722:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f}));var r=n(2177),i=n(16),a=n(17),o=n(4896),s=n(4889),u=n(5026),c={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},l={deprecatedProps:{instanced:\"divisor\",isInstanced:\"divisor\"}},f=function(){function t(){var e=this;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];r.forEach((function(t){return e._assign(t)})),Object.freeze(this)}return Object(a.a)(t,null,[{key:\"getBytesPerElement\",value:function(t){return Object(o.c)(t.type||5126).BYTES_PER_ELEMENT}},{key:\"getBytesPerVertex\",value:function(t){return Object(s.a)(t.size),Object(o.c)(t.type||5126).BYTES_PER_ELEMENT*t.size}},{key:\"resolve\",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Object(r.a)(t,[c].concat(n))}}]),Object(a.a)(t,[{key:\"toString\",value:function(){return JSON.stringify(this)}},{key:\"_assign\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(t=Object(u.a)(\"Accessor\",t,l)).type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&(\"boolean\"==typeof index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}},{key:\"BYTES_PER_ELEMENT\",get:function(){return t.getBytesPerElement(this)}},{key:\"BYTES_PER_VERTEX\",get:function(){return t.getBytesPerVertex(this)}}]),t}()},4723:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(4706),c=n(4724),l=n(4755),f=function(t){function e(t){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).call(this,Object.assign({},t,{type:c.a})))}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"controller\",get:function(){return this._getControllerProps({type:l.a})}}]),e}(u.a);f.displayName=\"MapView\"},4724:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return g}));var r=n(7),i=n(16),a=n(17),o=n(178),s=n(80),u=n(19),c=n(29),l=n(4661),f=n(4716),h=n(4881),d=n(4593),v=n(4601),p=\"Illegal argument to WebMercatorViewport\",g=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,e);var r=n.latitude,a=void 0===r?0:r,u=n.longitude,l=void 0===u?0:u,h=n.zoom,d=void 0===h?11:h,v=n.pitch,p=void 0===v?0:v,g=n.bearing,b=void 0===g?0:g,y=n.nearZMultiplier,m=void 0===y?.1:y,_=n.farZMultiplier,O=void 0===_?10:_,j=n.orthographic,k=void 0!==j&&j,w=n.width,x=n.height,E=n.altitude,T=void 0===E?1.5:E;w=w||1,x=x||1,T=Math.max(.75,T);var P=Object(f.e)({width:w,height:x,pitch:p,altitude:T,nearZMultiplier:m,farZMultiplier:O}),S=P.fov,A=P.aspect,L=P.focalDistance,C=P.near,I=P.far,M=Object(f.f)({height:x,pitch:p,bearing:b,altitude:T}),R=Object.assign({},n,{width:w,height:x,viewMatrix:M,longitude:l,latitude:a,zoom:d,orthographic:k,fovyRadians:S,aspect:A,orthographicFocalDistance:L,near:C,far:I});return(t=Object(o.a)(this,Object(s.a)(e).call(this,R))).latitude=a,t.longitude=l,t.zoom=d,t.pitch=p,t.bearing=b,t.altitude=T,t.orthographic=k,t.metersToLngLatDelta=t.metersToLngLatDelta.bind(Object(c.a)(Object(c.a)(t))),t.lngLatDeltaToMeters=t.lngLatDeltaToMeters.bind(Object(c.a)(Object(c.a)(t))),t.addMetersToLngLat=t.addMetersToLngLat.bind(Object(c.a)(Object(c.a)(t))),Object.freeze(Object(c.a)(Object(c.a)(t))),t}return Object(u.a)(e,t),Object(a.a)(e,[{key:\"metersToLngLatDelta\",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2],o=void 0===a?0:a;Object(v.a)(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o),p);var s=this.distanceScales,u=s.pixelsPerMeter,c=s.degreesPerPixel,l=n*u[0]*c[0],f=i*u[1]*c[1];return 2===t.length?[l,f]:[l,f,o]}},{key:\"lngLatDeltaToMeters\",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2],o=void 0===a?0:a;Object(v.a)(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(o),p);var s=this.distanceScales,u=s.pixelsPerDegree,c=s.metersPerPixel,l=n*u[0]*c[0],f=i*u[1]*c[1];return 2===t.length?[l,f]:[l,f,o]}},{key:\"addMetersToLngLat\",value:function(t,e){return Object(f.a)(t,e)}},{key:\"getMapCenterByLngLatPosition\",value:function(t){var e=t.lngLat,n=t.pos,r=Object(f.h)(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),a=d.a([],i,d.e([],r)),o=d.a([],this.center,a);return this.unprojectFlat(o)}},{key:\"getLocationAtPoint\",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:\"fitBounds\",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=Object(h.a)(Object.assign({width:r,height:i,bounds:t},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new e({width:r,height:i,longitude:o,latitude:s,zoom:u})}}]),e}(l.a);g.displayName=\"WebMercatorViewport\"},4725:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(4781),c=n(4638),l=function(t,e){if(!t)throw new Error(e)},f=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"len\",value:function(){return Math.sqrt(this.lengthSquared())}},{key:\"magnitude\",value:function(){return Math.sqrt(this.lengthSquared())}},{key:\"lengthSquared\",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:\"distance\",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:\"distanceSquared\",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(c.a)(e)}},{key:\"dot\",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(c.a)(e)}},{key:\"normalize\",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:\"add\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]+=i[a];return this.check()}},{key:\"subtract\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]-=i[a];return this.check()}},{key:\"multiply\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]*=i[a];return this.check()}},{key:\"divide\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<this.ELEMENTS;++a)this[a]/=i[a];return this.check()}},{key:\"scale\",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:\"scaleAndAdd\",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=this[n]*e+t[n];return this.check()}},{key:\"lengthSq\",value:function(){return this.lengthSquared()}},{key:\"distanceTo\",value:function(t){return this.distance(t)}},{key:\"distanceToSquared\",value:function(t){return this.distanceSquared(t)}},{key:\"getComponent\",value:function(t){return l(t>=0&&t<this.ELEMENTS,\"index is out of range\"),Object(c.a)(this[t])}},{key:\"setComponent\",value:function(t,e){return l(t>=0&&t<this.ELEMENTS,\"index is out of range\"),this[t]=e,this.check()}},{key:\"addVectors\",value:function(t,e){return this.copy(t).add(e)}},{key:\"subVectors\",value:function(t,e){return this.copy(t).subtract(e)}},{key:\"multiplyVectors\",value:function(t,e){return this.copy(t).multiply(e)}},{key:\"addScaledVector\",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:\"x\",get:function(){return this[0]},set:function(t){return this[0]=Object(c.a)(t)}},{key:\"y\",get:function(){return this[1]},set:function(t){return this[1]=Object(c.a)(t)}}]),e}(u.a)},4726:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return v}));var r=n(16),i=n(17),a=n(4687),o=n(4599),s=n(4601),u={transitionDuration:0},c=[\"wheel\"],l=[\"panstart\",\"panmove\",\"panend\"],f=[\"pinchstart\",\"pinchmove\",\"pinchend\"],h=[\"doubletap\"],d=[\"keydown\"],v=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),Object(s.a)(e),this.ControllerState=e,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new a.b(e,n),this._events=null,this._state={isDragging:!1},this.events=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return Object(i.a)(t,[{key:\"finalize\",value:function(){for(var t in this._events)this._events[t]&&this.eventManager.off(t,this.handleEvent);this.transitionManager.finalize()}},{key:\"handleEvent\",value:function(t){var e=this.ControllerState;switch(this.controllerState=new e(Object.assign({},this.controllerStateProps,this._state)),t.type){case\"panstart\":return this._onPanStart(t);case\"panmove\":return this._onPan(t);case\"panend\":return this._onPanEnd(t);case\"pinchstart\":return this._onPinchStart(t);case\"pinchmove\":return this._onPinch(t);case\"pinchend\":return this._onPinchEnd(t);case\"doubletap\":return this._onDoubleTap(t);case\"wheel\":return this._onWheel(t);case\"keydown\":return this._onKeyDown(t);default:return!1}}},{key:\"getCenter\",value:function(t){var e=this.controllerStateProps,n=e.x,r=e.y,i=t.offsetCenter;return[i.x-n,i.y-r]}},{key:\"isPointInBounds\",value:function(t,e){var n=this.controllerStateProps,r=n.width,i=n.height;if(e&&e.handled)return!1;var a=t[0]>=0&&t[0]<=r&&t[1]>=0&&t[1]<=i;return a&&e&&e.stopPropagation(),a}},{key:\"isFunctionKeyPressed\",value:function(t){var e=t.srcEvent;return Boolean(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}},{key:\"isDragging\",value:function(){return this._state.isDragging}},{key:\"setProps\",value:function(t){\"onViewportChange\"in t&&o.a.removed(\"onViewportChange\")(),\"onViewStateChange\"in t&&(this.onViewStateChange=t.onViewStateChange),\"onStateChange\"in t&&(this.onStateChange=t.onStateChange),this.controllerStateProps=t,\"eventManager\"in t&&this.eventManager!==t.eventManager&&(this.eventManager=t.eventManager,this._events={},this.toggleEvents(this.events,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var e=t.scrollZoom,n=void 0===e||e,r=t.dragPan,i=void 0===r||r,a=t.dragRotate,s=void 0===a||a,u=t.doubleClickZoom,v=void 0===u||u,p=t.touchZoom,g=void 0===p||p,b=t.touchRotate,y=void 0!==b&&b,m=t.keyboard,_=void 0===m||m,O=Boolean(this.onViewStateChange);this.toggleEvents(c,O&&n),this.toggleEvents(l,O&&(i||s)),this.toggleEvents(f,O&&(g||y)),this.toggleEvents(h,O&&v),this.toggleEvents(d,O&&_),this.scrollZoom=n,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=v,this.touchZoom=g,this.touchRotate=y,this.keyboard=_}},{key:\"updateTransition\",value:function(t){this.transitionManager.updateTransition(t)}},{key:\"toggleEvents\",value:function(t,e){var n=this;this.eventManager&&t.forEach((function(t){n._events[t]!==e&&(n._events[t]=e,e?n.eventManager.on(t,n.handleEvent):n.eventManager.off(t,n.handleEvent))}))}},{key:\"setOptions\",value:function(t){return this.setProps(t)}},{key:\"updateViewport\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},t.getViewportProps(),e),i=this.controllerState!==t;if(i){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:a})}Object.assign(this._state,Object.assign({},t.getInteractiveState(),n)),this.onStateChange&&this.onStateChange(this._state)}},{key:\"_onPanStart\",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.panStart({pos:e}).rotateStart({pos:e});return this.updateViewport(n,u,{isDragging:!0})}},{key:\"_onPan\",value:function(t){var e=this.isFunctionKeyPressed(t)||t.rightButton;return(e=this.invertPan?!e:e)?this._onPanMove(t):this._onPanRotate(t)}},{key:\"_onPanEnd\",value:function(t){var e=this.controllerState.panEnd().rotateEnd();return this.updateViewport(e,null,{isDragging:!1})}},{key:\"_onPanMove\",value:function(t){if(!this.dragPan)return!1;var e=this.getCenter(t);if(!this.isDragging())return!1;var n=this.controllerState.pan({pos:e});return this.updateViewport(n,u,{isDragging:!0})}},{key:\"_onPanRotate\",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,r=this.controllerState.getViewportProps(),i=e/r.width,a=n/r.height,o=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:a});return this.updateViewport(o,u,{isDragging:!0})}},{key:\"_onWheel\",value:function(t){if(!this.scrollZoom)return!1;t.preventDefault();var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=t.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:e,scale:r});return this.updateViewport(i,u)}},{key:\"_onPinchStart\",value:function(t){var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return this._state.startPinchRotation=t.rotation,this.updateViewport(n,u,{isDragging:!0})}},{key:\"_onPinch\",value:function(t){if(!this.touchZoom&&!this.touchRotate)return!1;var e=this.controllerState;if(this.touchZoom){var n=t.scale,r=this.getCenter(t);e=e.zoom({pos:r,scale:n})}if(this.touchRotate){var i=t.rotation,a=this._state.startPinchRotation;e=e.rotate({deltaScaleX:-(i-a)/180})}return this.updateViewport(e,u,{isDragging:!0})}},{key:\"_onPinchEnd\",value:function(t){var e=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(e,null,{isDragging:!1})}},{key:\"_onDoubleTap\",value:function(t){if(!this.doubleClickZoom)return!1;var e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;var n=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps())}},{key:\"_onKeyDown\",value:function(t){if(!this.keyboard)return!1;var e,n=this.isFunctionKeyPressed(t),r=this.controllerState;switch(t.srcEvent.keyCode){case 189:e=n?r.zoomOut().zoomOut():r.zoomOut();break;case 187:e=n?r.zoomIn().zoomIn():r.zoomIn();break;case 37:e=n?r.rotateLeft():r.moveLeft();break;case 39:e=n?r.rotateRight():r.moveRight();break;case 38:e=n?r.rotateUp():r.moveUp();break;case 40:e=n?r.rotateDown():r.moveDown();break;default:return!1}return this.updateViewport(e,this._getTransitionProps())}},{key:\"_getTransitionProps\",value:function(){return u}}]),t}()},4727:function(t,e,n){\"use strict\";function r(t,e){return t===e||Object.keys(t).every((function(n){return Array.isArray(t[n])&&Array.isArray(e[n])?r(t[n],e[n]):t[n]===e[n]}))}n.d(e,\"a\",(function(){return r}))},4728:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=\"undefined\"!=typeof window&&window.addEventListener,a=new Map,o=function(){return i&&window.__SEER_INITIALIZED__},s=function(t,e){var n=a.get(t),r=Date.now();return!!(n&&r-n<e)||(a.set(t,r),!1)},u=function(t){return function(e,n){if(!n||\"object\"!==(void 0===n?\"undefined\":r(n))||!t.has(n))return t.add(n),Object.prototype.toString.call(n).slice(8,-1).includes(\"Array\")?Array.prototype.slice.call(n,0,20):n}},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i&&o()){var n=new Set,r=JSON.stringify(e,u(n));try{window.postMessage({type:t,payload:r,source:\"seer-agent\"},\"*\")}catch(t){if(s(\"seer-log\",2e3))return;console.log(t)}}},l=new Map,f=function(t){if(t&&t.data&&\"seer-core\"===t.data.source){var e=t.data,n=e.type,r=e.payload,i=l.get(n);i&&i.forEach((function(t){return t(r)}))}},h=function(){i&&!window.__SEER_LISTENER__&&(window.addEventListener(\"message\",f),window.__SEER_LISTENER__=!0)};e.default={send:c,throttle:s,isReady:o,list:function(t,e){return c(\"LIST\",{key:t,data:e})},listItem:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(\"LIST_ITEM\",{key:t,itemKey:e,data:n})},updateItem:function(t,e,n,r){return c(\"UPDATE_ITEM\",{key:t,itemKey:e,path:n,data:r})},multiUpdate:function(t,e,n){return c(\"MULTI_UPDATE_ITEM\",{key:t,itemKey:e,array:n})},deleteItem:function(t,e){return c(\"DELETE_ITEM\",{key:t,itemKey:e})},addLog:function(t,e,n){return c(\"ADD_LOG\",{key:t,itemKey:e,msg:n})},listeners:l,listenFor:function(t,e){if(i){if(!t||!e)throw new Error(\"Please provide a type and callback\");l.has(t)||l.set(t,[]),window.__SEER_LISTENER__||h(),l.get(t).push(e)}},removeListener:function(t){l.forEach((function(e,n){l.set(n,e.filter((function(e){return e!==t})))}))},init:h,clean:function(){i&&window.__SEER_LISTENER__&&(window.removeEventListener(\"message\",f),delete window.__SEER_LISTENER__)}}},4729:function(t,e,n){\"use strict\";n.d(e,\"f\",(function(){return s})),n.d(e,\"a\",(function(){return u})),n.d(e,\"c\",(function(){return c})),n.d(e,\"e\",(function(){return l})),n.d(e,\"b\",(function(){return f})),n.d(e,\"g\",(function(){return h})),n.d(e,\"d\",(function(){return d}));var r=n(13),i=n(4728),a=n.n(i),o=new Map,s=function(t,e,n){a.a.isReady()&&(o.has(t)||o.set(t,new Map),o.get(t).set(e,n))},u=function(t){if(a.a.isReady()&&t.id){var e=o.get(t.id);e&&e.forEach((function(e,n){!function t(e,n,r){e&&(n.length>1?t(e[n[0]],n.slice(1),r):e[n[0]]=r)}(t,n,e),\"data\"===n[0]&&(t.data=Object(r.a)(t.data))}))}},c=function(t){a.a.isReady()&&a.a.listenFor(\"deck.gl\",t)},l=function(t){a.a.isReady()&&a.a.listenFor(\"init\",t)},f=function(t){if(a.a.isReady()&&t){var e=[t.constructor.layerName];a.a.listItem(\"deck.gl\",t.id,{badges:e,links:t.state&&t.state.model?[\"luma.gl:\".concat(t.state.model.id)]:void 0,parent:t.parent?t.parent.id:void 0})}},h=function(t){if(a.a.isReady()&&!a.a.throttle(\"deck.gl:\".concat(t.id),1e3)){var e=function(t){var e=[{path:\"objects.props\",data:t.props}],n=[t.constructor.layerName];if(t.state){if(t.getAttributeManager()){var r=t.getAttributeManager().getAttributes();e.push({path:\"objects.attributes\",data:r})}if(t.state.model){t.state.model.setProps({timerQueryEnabled:!0});var i=t.state.model.stats.lastFrameTime;i&&n.push(\"\".concat((1e3*i).toFixed(0),\"μs\"))}}return e.push({path:\"badges\",data:n}),e}(t);a.a.multiUpdate(\"deck.gl\",t.id,e)}},d=function(t){a.a.isReady()&&t&&a.a.deleteItem(\"deck.gl\",t)}},4730:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return d}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(5030),c=n(4732),l=n(4668),f={color:[255,255,255],intensity:1},h=[{color:[255,255,255],intensity:1,direction:[-1,-3,-1]},{color:[255,255,255],intensity:.9,direction:[1,8,-2.5]}],d=function(t){function e(t){var n;for(var i in Object(r.a)(this,e),(n=Object(a.a)(this,Object(o.a)(e).call(this,t))).ambientLight=null,n.directionalLights=[],n.pointLights=[],t){var s=t[i];switch(s.type){case\"ambient\":n.ambientLight=s;break;case\"directional\":n.directionalLights.push(s);break;case\"point\":n.pointLights.push(s)}}return n.applyDefaultLights(),n}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"getParameters\",value:function(t){var e=this.ambientLight,n=this.getProjectedPointLights(t);return{lightSources:{ambientLight:e,directionalLights:this.getProjectedDirectionalLights(t),pointLights:n}}}},{key:\"applyDefaultLights\",value:function(){var t=this.ambientLight,e=this.pointLights,n=this.directionalLights;t||0!==e.length||0!==n.length||(this.ambientLight=new u.a(f),this.directionalLights.push(new c.a(h[0])),this.directionalLights.push(new c.a(h[1])))}},{key:\"getProjectedPointLights\",value:function(t){for(var e=[],n=0;n<this.pointLights.length;n++){var r=this.pointLights[n];e.push(r.getProjectedLight({layer:t}))}return e}},{key:\"getProjectedDirectionalLights\",value:function(t){for(var e=[],n=0;n<this.directionalLights.length;n++){var r=this.directionalLights[n];e.push(r.getProjectedLight({layer:t}))}return e}}]),e}(l.a)},4731:function(t,e,n){\"use strict\";var r=n(4788);n.d(e,\"a\",(function(){return r.a})),n.d(e,\"b\",(function(){return r.b}))},4732:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return u}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"getProjectedLight\",value:function(){return this}}]),e}(n(5030).b)},4733:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return c}));var r=n(1504),i=n(16),a=n(17),o=n(5024),s=n(4889),u={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var n=e.id,r=void 0===n?Object(o.c)(\"geometry\"):n,a=e.drawMode,s=void 0===a?u.TRIANGLES:a,c=e.attributes,l=void 0===c?{}:c,f=e.indices,h=void 0===f?null:f,d=e.vertexCount,v=void 0===d?null:d;this.id=r,this.drawMode=0|s,this.attributes={},this.userData={},this._setAttributes(l,h),this.vertexCount=v||this._calculateVertexCount(this.attributes,this.indices)}return Object(a.a)(t,null,[{key:\"DRAW_MODE\",get:function(){return u}}]),Object(a.a)(t,[{key:\"getVertexCount\",value:function(){return this.vertexCount}},{key:\"getAttributes\",value:function(){return this.indices?Object(r.a)({indices:this.indices},this.attributes):this.attributes}},{key:\"_print\",value:function(t){return\"Geometry \".concat(this.id,\" attribute \").concat(t)}},{key:\"_setAttributes\",value:function(t,e){for(var n in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){var r=t[n];r=ArrayBuffer.isView(r)?{value:r}:r,Object(s.a)(ArrayBuffer.isView(r.value),\"\".concat(this._print(n),\": must be typed array or object with value as typed array\")),\"POSITION\"!==n&&\"positions\"!==n||r.size||(r.size=3),\"indices\"===n?(Object(s.a)(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:\"_calculateVertexCount\",value:function(t,e){if(e)return e.value.length;var n=1/0;for(var r in t){var i=t[r],a=i.value,o=i.size;!i.constant&&a&&o>=1&&(n=Math.min(n,a.length/o))}return Object(s.a)(Number.isFinite(n)),n}},{key:\"mode\",get:function(){return this.drawMode}}]),t}()},4754:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return N}));var r=n(16),i=n(17),a=n(7),o=n(178),s=n(80),u=n(229),c=n(19),l=n(4637),f=n(4601),h=n(4684),d=n(4627),v=[],p=[[0,1/0]];function g(t,e){if(t===p)return t;if(e[0]<0&&(e[0]=0),e[0]>=e[1])return t;for(var n=[],r=t.length,i=0,a=0;a<r;a++){var o=t[a];o[1]<e[0]?(n.push(o),i=a+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}var b=n(4599),y=n(5023),m=n(4895),_=n(5024),O=n(4721),j=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t);var i=n.id,a=void 0===i?Object(_.c)(\"attribute\"):i,o=n.type,s=n.isIndexed,u=void 0!==s&&s;this.gl=e,this.id=a,this.isIndexed=u,this.target=u?34963:34962,this.type=o,u&&!o&&(this.type=e&&Object(y.b)(e,m.a.ELEMENT_INDEX_UINT32)?5125:5123),this.value=null,this.externalBuffer=null,this.buffer=null,this.userData={},this.update(n),this._validateAttributeDefinition()}return Object(i.a)(t,[{key:\"delete\",value:function(){this.buffer&&(this.buffer.delete(),this.buffer=null)}},{key:\"update\",value:function(t){var e=t.value,n=t.buffer,r=t.constant,i=void 0===r?this.constant||!1:r;if(this.constant=i,n)this.externalBuffer=n,this.constant=!1,this.type=t.type||n.accessor.type,void 0!==n.accessor.divisor&&(this.divisor=n.accessor.divisor),void 0!==t.divisor&&(this.divisor=t.divisor);else if(e){this.externalBuffer=null;var a=this.size||t.size||0;if(i&&e.length!==a){this.value=new Float32Array(a);for(var o=this.offset/4,s=0;s<this.size;++s)this.value[s]=e[o+s]}else this.value=e;!i&&this.gl&&(this.buffer=this.buffer||this._createBuffer(t),this.buffer.setData({data:e}),this.type=this.buffer.accessor.type)}this._setAccessor(t)}},{key:\"getBuffer\",value:function(){return this.constant?null:this.externalBuffer||this.buffer}},{key:\"getValue\",value:function(){if(this.constant)return this.value;var t=this.externalBuffer||this.buffer;return t?[t,this]:null}},{key:\"_createBuffer\",value:function(t){var e=Object.assign({},t,{id:this.id,target:this.target,accessor:{type:this.type}});return Number.isFinite(e.divisor)&&(e.accessor.divisor=e.divisor),delete e.divisor,Number.isFinite(e.size)&&(e.accessor.size=e.size),delete e.size,new l.a(this.gl,e)}},{key:\"_setAccessor\",value:function(t){var e=t.size,n=void 0===e?this.size:e,r=t.offset,i=void 0===r?this.offset||0:r,a=t.stride,o=void 0===a?this.stride||0:a,s=t.normalized,u=void 0===s?this.normalized||!1:s,c=t.integer,l=void 0===c?this.integer||!1:c,f=t.divisor,h=void 0===f?this.divisor||0:f,d=t.instanced,v=t.isInstanced;this.size=n,this.offset=i,this.stride=o,this.normalized=u,this.integer=l,this.divisor=h,void 0!==v&&(O.a.deprecated(\"Attribute.isInstanced\")(),this.divisor=v?1:0),void 0!==d&&(O.a.deprecated(\"Attribute.instanced\")(),this.divisor=d?1:0)}},{key:\"_validateAttributeDefinition\",value:function(){}}]),t}(),k={isExternalBuffer:!1,needsUpdate:!0,needsRedraw:!1,updateRanges:p,allocedInstances:-1},w=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,e),n=Object(o.a)(this,Object(s.a)(e).call(this,t,i));var a=i.transition,u=void 0!==a&&a,c=i.noAlloc,l=void 0!==c&&c,f=i.update,h=void 0===f?null:f,d=i.accessor,v=void 0===d?null:d,p=i.bufferLayout,g=void 0===p?null:p,b=i.defaultValue,y=void 0===b?[0,0,0,0]:b;if(y=Array.isArray(y)?y:[y],n.shaderAttributes={},n.hasShaderAttributes=!1,i.shaderAttributes){var m=i.shaderAttributes;for(var _ in m){var O=m[_];n.shaderAttributes[_]=new e(n.gl,Object.assign({},O,{id:_,constant:O.constant||!1,isIndexed:O.isIndexed||O.elements,size:(O.elements?1:O.size)||n.size,value:O.value||null,divisor:O.instanced||O.divisor||n.divisor,buffer:n.getBuffer(),noAlloc:!0})),n.hasShaderAttributes=!0}}return Object.assign(n.userData,k,i,{transition:u,noAlloc:l,update:h||v&&n._standardAccessor,accessor:v,defaultValue:y,bufferLayout:g}),Object.seal(n.userData),n._validateAttributeUpdaters(),n}return Object(c.a)(e,t),Object(i.a)(e,[{key:\"needsUpdate\",value:function(){return this.userData.needsUpdate}},{key:\"needsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearChangedFlags,n=void 0!==e&&e,r=this.userData.needsRedraw;return this.userData.needsRedraw=this.userData.needsRedraw&&!n,r}},{key:\"getInstanceCount\",value:function(){return null!==this.value?this.value.length/this.size:0}},{key:\"getUpdateTriggers\",value:function(){var t=this.userData.accessor;return[this.id].concat(\"function\"!=typeof t&&t||[])}},{key:\"getAccessor\",value:function(){return this.userData.accessor}},{key:\"getShaderAttributes\",value:function(){var t={};return this.hasShaderAttributes?Object.assign(t,this.shaderAttributes):t[this.id]=this,t}},{key:\"supportsTransition\",value:function(){return this.userData.transition}},{key:\"getTransitionSetting\",value:function(t){var e=this.userData,n=e.transition,r=e.accessor;if(!n)return null;var i=Array.isArray(r)?t[r.find((function(e){return t[e]}))]:t[r];return Number.isFinite(i)&&(i={duration:i}),i&&i.duration>0?Object.assign({},n,i):null}},{key:\"setNeedsUpdate\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,e=arguments.length>1?arguments[1]:void 0;if(this.userData.needsUpdate=this.userData.needsUpdate||t,e){var n=e.startRow,r=void 0===n?0:n,i=e.endRow,a=void 0===i?1/0:i;this.userData.updateRanges=g(this.userData.updateRanges,[r,a])}else this.userData.updateRanges=p}},{key:\"clearNeedsUpdate\",value:function(){this.userData.needsUpdate=!1,this.userData.updateRanges=v}},{key:\"setNeedsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.userData.needsRedraw=this.userData.needsRedraw||t}},{key:\"allocate\",value:function(t){var e=this.userData;if(e.isExternalBuffer||e.noAlloc)return!1;var n=this.getInstanceCount();if((0===n||n<t)&&(e.update||e.accessor)){Object(f.a)(Number.isFinite(t));var r=Math.max(t,1),i=x(this.type||5126),a=this.value;return this.constant=!1,this.value=new i(this.size*r),this.buffer&&this.buffer.byteLength<this.value.byteLength&&this.buffer.reallocate(this.value.byteLength),e.updateRanges!==p&&(this.value.set(a),this.buffer.subData(a)),this.setNeedsUpdate(!0,{startRow:n}),e.allocedInstances=r,!0}return!1}},{key:\"updateBuffer\",value:function(t){var e=t.numInstances,n=t.bufferLayout,r=t.data,i=t.props,o=t.context;if(!this.needsUpdate())return!1;var s=this.userData,u=s.update,c=s.updateRanges,l=s.noAlloc,f=!0;if(u){var h=!0,d=!1,v=void 0;try{for(var p,g=c[Symbol.iterator]();!(h=(p=g.next()).done);h=!0){var b=Object(a.a)(p.value,2),y=b[0],m=b[1];u.call(o,this,{data:r,startRow:y,endRow:m,props:i,numInstances:e,bufferLayout:n})}}catch(t){d=!0,v=t}finally{try{h||null==g.return||g.return()}finally{if(d)throw v}}if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength)this.update({value:this.value,constant:this.constant});else{var _=!0,O=!1,j=void 0;try{for(var k,w=c[Symbol.iterator]();!(_=(k=w.next()).done);_=!0){var x=Object(a.a)(k.value,2),E=(y=x[0],m=x[1],Number.isFinite(y)?this._getVertexOffset(y,this.bufferLayout):0),T=Number.isFinite(m)?this._getVertexOffset(m,this.bufferLayout):l||!Number.isFinite(e)?this.value.length:e*this.size;this.buffer.subData({data:this.value.subarray(E,T),offset:E*this.value.BYTES_PER_ELEMENT})}}catch(t){O=!0,j=t}finally{try{_||null==w.return||w.return()}finally{if(O)throw j}}}this._checkAttributeArray()}else f=!1;return this._updateShaderAttributes(),this.clearNeedsUpdate(),s.needsRedraw=!0,f}},{key:\"update\",value:function(t){Object(u.a)(Object(s.a)(e.prototype),\"update\",this).call(this,t),this._updateShaderAttributes()}},{key:\"setGenericValue\",value:function(t){var e=this.userData;if(void 0===t||\"function\"==typeof t)return e.isExternalBuffer=!1,!1;t=this._normalizeValue(t);var n=!this.constant||!this._areValuesEqual(t,this.value);return n&&this.update({constant:!0,value:t}),e.needsRedraw=e.needsUpdate||n,this.clearNeedsUpdate(),e.isExternalBuffer=!0,this._updateShaderAttributes(),!0}},{key:\"setExternalBuffer\",value:function(t,e){var n=this.userData;if(t){if(n.isExternalBuffer=!0,this.clearNeedsUpdate(),t instanceof l.a)this.externalBuffer!==t&&(this.update({constant:!1,buffer:t}),n.needsRedraw=!0);else if(this.value!==t){if(!ArrayBuffer.isView(t))throw new Error(\"Attribute prop must be typed array\");if(n.auto&&t.length<=e*this.size)throw new Error(\"Attribute prop array must match length and size\");var r=x(this.type||5126);t instanceof r?this.update({constant:!1,value:t}):(b.a.warn(\"Attribute prop \".concat(this.id,\" is casted to \").concat(r.name))(),this.update({constant:!1,value:new r(t)})),this.value=t,n.needsRedraw=!0}return this._updateShaderAttributes(),!0}return n.isExternalBuffer=!1,!1}},{key:\"_getVertexOffset\",value:function(t,e){if(e){var n=0,r=0,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(r>=t)break;n+=c*this.size,r++}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return n}return t*this.size}},{key:\"_normalizeValue\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.userData.defaultValue;if(!Array.isArray(t)&&!ArrayBuffer.isView(t))return e[n]=Number.isFinite(t)?t:r[0],e;switch(this.size){case 4:e[n+3]=Number.isFinite(t[3])?t[3]:r[3];case 3:e[n+2]=Number.isFinite(t[2])?t[2]:r[2];case 2:e[n+1]=Number.isFinite(t[1])?t[1]:r[1];case 1:e[n+0]=Number.isFinite(t[0])?t[0]:r[0]}return e}},{key:\"_areValuesEqual\",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.size,r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}},{key:\"_standardAccessor\",value:function(t,e){var n=e.data,r=e.startRow,i=e.endRow,a=e.props,o=(e.numInstances,e.bufferLayout),s=t.userData.accessor,u=t.value,c=t.size,l=\"function\"==typeof s?s:a[s];Object(f.a)(\"function\"==typeof l,'accessor \"'.concat(s,'\" is not a function'));var v=t._getVertexOffset(r,o),p=Object(h.a)(n,r,i),g=p.iterable,b=p.objectInfo,y=!0,m=!1,_=void 0;try{for(var O,j=g[Symbol.iterator]();!(y=(O=j.next()).done);y=!0){var k=O.value;b.index++;var w=l(k,b);if(o){t._normalizeValue(w,b.target);var x=o[b.index];Object(d.a)({target:t.value,source:b.target,start:v,count:x}),v+=x*c}else t._normalizeValue(w,u,v),v+=c}}catch(t){m=!0,_=t}finally{try{y||null==j.return||j.return()}finally{if(m)throw _}}t.constant=!1,t.bufferLayout=o}},{key:\"_validateAttributeUpdaters\",value:function(){var t=this.userData;if(!(t.noAlloc||\"function\"==typeof t.update||\"string\"==typeof t.accessor))throw new Error(\"Attribute \".concat(this.id,\" missing update or accessor\"))}},{key:\"_checkAttributeArray\",value:function(){var t=this.value;if(t&&t.length>=4&&!(Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])))throw new Error(\"Illegal attribute generated for \".concat(this.id))}},{key:\"_updateShaderAttributes\",value:function(){var t=this.shaderAttributes;for(var e in t){t[e].update({buffer:this.getBuffer(),value:this.value,constant:this.constant})}}},{key:\"bufferLayout\",get:function(){return this.userData.bufferLayout},set:function(t){this.userData.bufferLayout=t}}]),e}(j);function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,r=void 0===n||n;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error(\"Failed to deduce type from array\")}}var E=n(5060);function T(t){var e=t.source,n=t.target,r=t.start,i=void 0===r?0:r,a=t.end,o=t.getData;a=a||n.length;var s=e.length,u=a-i;if(s>u)n.set(e.subarray(0,u),i);else if(n.set(e,i),o)for(var c=s;c<u;)for(var l=o(c,e),f=0;f<l.length;f++)n[i+c]=l[f],c++}var P={1:\"float\",2:\"vec2\",3:\"vec3\",4:\"vec4\"};function S(t){var e={},n={};for(var r in t){var i=t[r],a=i.fromState,o=i.toState,s=i.buffer;e[\"\".concat(r,\"From\")]=a instanceof l.a?[a,{divisor:0}]:a,e[\"\".concat(r,\"To\")]=o,n[\"\".concat(r)]=s}return{sourceBuffers:e,feedbackBuffers:n}}function A(t){var e=t.fromState,n=t.toState,r=t.fromLength,i=t.toLength,a=t.fromBufferLayout,o=t.toBufferLayout,s=t.getData,u=void 0===s?function(t){return t}:s;if((a&&o||!(r>=i))&&e instanceof l.a){var c=new Float32Array(i),f=e.getData({}),h=n.size,d=n.constant,v=d?n.getValue():n.getBuffer().getData({}),p=d?function(t,e){return u(v,e)}:function(t,e){return u(v.subarray(t,t+h),e)};!function(t){var e=t.source,n=t.target,r=t.size,i=t.getData,a=t.sourceLayout,o=t.targetLayout;if(!Array.isArray(o))return T({source:e,target:n,getData:i}),n;for(var s=0,u=0,c=i&&function(t,e){return i(t+u,e)},l=Math.min(a.length,o.length),f=0;f<l;f++){var h=a[f]*r,d=o[f]*r;T({source:e.subarray(s,s+h),target:n,start:u,end:u+d,getData:c}),s+=h,u+=d}u<n.length&&T({source:[],target:n,start:u,getData:c})}({source:f,target:c,sourceLayout:a,targetLayout:o,size:n.size,getData:p}),e.setData({data:c})}}var L=n(4783),C=function(){},I={duration:0,easing:function(t){return t},onStart:C,onEnd:C,onInterrupt:C},M=function(){function t(e,n){var i=n.id;Object(r.a)(this,t),this.id=i,this.gl=e,this.attributeTransitions={},this.needsRedraw=!1,this.transform=null,this.numInstances=0,E.a.isSupported(e)?this.isSupported=!0:e&&b.a.warn(\"WebGL2 not supported by this browser. Transition animation is disabled.\")()}return Object(i.a)(t,[{key:\"finalize\",value:function(){for(var t in this.transform&&this.transform.delete(),this.attributeTransitions)this._removeTransition(t)}},{key:\"update\",value:function(t){var e=t.attributes,n=t.transitions,r=void 0===n?{}:n,i=t.numInstances;if(this.opts=r,this.numInstances=i||1,this.isSupported){var a=this.attributeTransitions,o={};for(var s in e){this._updateAttribute(s,e[s])&&(o[s]=a[s])}for(var u in a){var c=e[u];c&&c.supportsTransition()||this._removeTransition(u)}if(this.transform){if(this.transform){var l=S(o),f=l.sourceBuffers,h=l.feedbackBuffers;this.transform.update({elementCount:this.numInstances,sourceBuffers:f,feedbackBuffers:h})}}else this._createModel()}}},{key:\"hasAttribute\",value:function(t){return t in this.attributeTransitions}},{key:\"getAttributes\",value:function(){var t={};for(var e in this.attributeTransitions){var n=this.attributeTransitions[e];n.buffer&&(t[e]=n.attributeInTransition)}return t}},{key:\"setCurrentTime\",value:function(t){if(!this.transform||0===this.numInstances)return!1;var e={},n=this.needsRedraw;for(var r in this.needsRedraw=!1,this.attributeTransitions){var i=this.attributeTransitions[r];i.update(t)&&(e[\"\".concat(r,\"Time\")]=i.time,n=!0)}return n&&this.transform.run({uniforms:e}),n}},{key:\"_createTransition\",value:function(t,e){var n=this.attributeTransitions[t];return n?null:(n=new L.a({name:t,attribute:e,attributeInTransition:new w(this.gl,e),bufferLayout:e.bufferLayout}),this.attributeTransitions[t]=n,this._invalidateModel(),n)}},{key:\"_removeTransition\",value:function(t){var e=this.attributeTransitions[t];e&&(e.buffer&&e.buffer.delete(),e._swapBuffer&&e._swapBuffer.delete(),delete this.attributeTransitions[t],this._invalidateModel())}},{key:\"_updateAttribute\",value:function(t,e){var n=e.getTransitionSetting(this.opts);if(n){var r,i=this.attributeTransitions[t];if(i?r=e.needsRedraw():(i=this._createTransition(t,e),r=!0),r)return this._triggerTransition(i,n),!0}return!1}},{key:\"_invalidateModel\",value:function(){this.transform&&(this.transform.delete(),this.transform=null)}},{key:\"_createModel\",value:function(){0!==Object.keys(this.attributeTransitions).length&&(this.transform=new E.a(this.gl,Object.assign({elementCount:this.numInstances},S(this.attributeTransitions),function(t){var e=[],n=[],r=[],i=[],a=[];for(var o in t){var s=t[o],u=P[s.attribute.size];u&&(s.bufferIndex=e.length,e.push(o),n.push(\"attribute \".concat(u,\" \").concat(o,\"From;\")),n.push(\"attribute \".concat(u,\" \").concat(o,\"To;\")),r.push(\"uniform float \".concat(o,\"Time;\")),i.push(\"varying \".concat(u,\" \").concat(o,\";\")),a.push(\"\".concat(o,\" = mix(\").concat(o,\"From, \").concat(o,\"To,\\n        \").concat(o,\"Time);\")))}return{vs:\"\\n#define SHADER_NAME feedback-vertex-shader\\n\".concat(n.join(\"\\n\"),\"\\n\").concat(r.join(\"\\n\"),\"\\n\").concat(i.join(\"\\n\"),\"\\n\\nvoid main(void) {\\n  \").concat(a.join(\"\\n\"),\"\\n  gl_Position = vec4(0.0);\\n}\\n\"),fs:\"#define SHADER_NAME feedback-fragment-shader\\n\\nprecision highp float;\\n\\n\".concat(i.join(\"\\n\"),\"\\n\\nvoid main(void) {\\n  gl_FragColor = vec4(0.0);\\n}\\n\"),varyings:e}}(this.attributeTransitions))))}},{key:\"_getNextTransitionStates\",value:function(t,e){var n,r=t.attribute,i=r.size;n=r.constant?new j(this.gl,{constant:!0,value:r.value,size:i}):new j(this.gl,{constant:!1,buffer:r.getBuffer(),divisor:0,size:i,value:r.externalBuffer?null:r.value});var a=t.buffer||n,o=this.numInstances*i,s=a instanceof l.a&&a.getElementCount()||o,u=t._swapBuffer;return t._swapBuffer=t.buffer,u?u.getElementCount()<o&&u.setData({data:new Float32Array(o)}):u=new l.a(this.gl,{data:new Float32Array(o),usage:35050}),t.attributeInTransition.update({buffer:u}),A({fromState:a,toState:n,fromLength:s,toLength:o,fromBufferLayout:t.bufferLayout,toBufferLayout:r.bufferLayout,getData:e.enter}),t.bufferLayout=r.bufferLayout,{fromState:a,toState:n,buffer:u}}},{key:\"_triggerTransition\",value:function(t,e){Object(f.a)(e&&e.duration>0),this.needsRedraw=!0;var n=Object.assign({},I,e);t.start(Object.assign({},this._getNextTransitionStates(t,e),n))}}]),t}();function R(){}var F={savedMessages:null,timeStart:null,onLog:function(t){var e=t.level,n=t.message;b.a.log(e,n)()},onUpdateStart:function(t){t.level,t.numInstances;F.savedMessages=[],F.timeStart=new Date},onUpdate:function(t){t.level;var e=t.message;F.savedMessages&&F.savedMessages.push(e)},onUpdateEnd:function(t){var e=t.level,n=t.id,r=t.numInstances,i=Math.round(new Date-F.timeStart),a=\"\".concat(i,\"ms\");b.a.group(e,\"Updated attributes for \".concat(r,\" instances in \").concat(n,\" in \").concat(a),{collapsed:!0})();var o=!0,s=!1,u=void 0;try{for(var c,l=F.savedMessages[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;b.a.log(e,f)()}}catch(t){s=!0,u=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}b.a.groupEnd(e,\"Updated attributes for \".concat(r,\" instances in \").concat(n,\" in \").concat(a))(),F.savedMessages=null}},N=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.id,a=void 0===i?\"attribute-manager\":i,o=n.stats;Object(r.a)(this,t),this.id=a,this.gl=e,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=o,this.attributeTransitionManager=new M(e,{id:\"\".concat(a,\"-transitions\")}),Object.seal(this)}return Object(i.a)(t,null,[{key:\"setDefaultLogFunctions\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onLog,n=t.onUpdateStart,r=t.onUpdate,i=t.onUpdateEnd;void 0!==e&&(F.onLog=e||R),void 0!==n&&(F.onUpdateStart=n||R),void 0!==r&&(F.onUpdate=r||R),void 0!==i&&(F.onUpdateEnd=i||R)}}]),Object(i.a)(t,[{key:\"finalize\",value:function(){for(var t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}},{key:\"getNeedsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}},{key:\"setNeedsRedraw\",value:function(){return this.needsRedraw=!0,this}},{key:\"add\",value:function(t,e){this._add(t,e)}},{key:\"addInstanced\",value:function(t,e){this._add(t,e,{instanced:1})}},{key:\"remove\",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:\"invalidate\",value:function(t,e){var n=this._invalidateTrigger(t,e);F.onLog({level:3,message:\"invalidated attributes \".concat(n,\" (\").concat(t,\") for \").concat(this.id)})}},{key:\"invalidateAll\",value:function(t){for(var e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);F.onLog({level:3,message:\"invalidated all attributes for \".concat(this.id)})}},{key:\"update\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.bufferLayout,i=t.transitions,a=t.props,o=void 0===a?{}:a,s=t.buffers,u=void 0===s?{}:s,c=t.context,l=void 0===c?{}:c,f=!1;for(var h in F.onUpdateStart({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.get(\"Update Attributes\").timeStart(),this.attributes){var d=this.attributes[h];d.setExternalBuffer(u[h],this.numInstances)||d.setGenericValue(o[d.getAccessor()])||d.needsUpdate()&&(f=!0,this._updateAttribute({attribute:d,numInstances:n,bufferLayout:r,data:e,props:o,context:l})),this.needsRedraw|=d.needsRedraw()}f&&F.onUpdateEnd({level:2,id:this.id,numInstances:n}),this.stats&&this.stats.get(\"Update Attributes\").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}},{key:\"updateTransition\",value:function(t){var e=this.attributeTransitionManager.setCurrentTime(t);return this.needsRedraw=this.needsRedraw||e,e}},{key:\"getAttributes\",value:function(){return this.attributes}},{key:\"getChangedAttributes\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},e=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in e){var a=e[i];a.needsRedraw(t)&&!n.hasAttribute(i)&&(r[i]=a)}return r}},{key:\"getAccessors\",value:function(){return this.updateTriggers}},{key:\"_add\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&b.a.warn(\"AttributeManager.add({updaters}) - updater map no longer supported\")();var r={};for(var i in t){var a=t[i],o=this._createAttribute(i,a,n);r[i]=o}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:\"_createAttribute\",value:function(t,e,n){var r={id:t,constant:e.constant||!1,isIndexed:e.isIndexed||e.elements,size:e.elements?1:e.size,value:e.value||null,divisor:e.instanced||n.instanced?1:e.divisor};return new w(this.gl,Object.assign({},e,r))}},{key:\"_mapUpdateTriggersToAttributes\",value:function(){var t=this,e={},n=function(n){t.attributes[n].getUpdateTriggers().forEach((function(t){e[t]||(e[t]=[]),e[t].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=e}},{key:\"_invalidateTrigger\",value:function(t,e){var n=this.attributes,r=this.updateTriggers[t];if(r)r.forEach((function(t){var r=n[t];r&&r.setNeedsUpdate(r.id,e)}));else{var i=\"invalidating non-existent trigger \".concat(t,\" for \").concat(this.id,\"\\n\");i+=\"Valid triggers: \".concat(Object.keys(n).join(\", \")),b.a.warn(i,r)()}return r}},{key:\"_updateAttribute\",value:function(t){var e=t.attribute,n=t.numInstances;e.allocate(n)&&F.onUpdate({level:3,message:\"\".concat(e.id,\" allocated \").concat(n),id:this.id});var r=Date.now();if(e.updateBuffer(t)){this.needsRedraw=!0;var i=Math.round(Date.now()-r);F.onUpdate({level:3,message:\"\".concat(e.id,\" updated \").concat(n,\" in \").concat(i,\"ms\")})}}}]),t}()},4755:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return L}));var r=n(7),i=n(16),a=n(17),o=n(178),s=n(80),u=n(19),c=n(4638),l=n(4726),f=n(4782),h=n(4610),d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.phi,r=e.theta,a=e.radius,o=e.bearing,s=e.pitch,u=(e.altitude,e.radiusScale),c=void 0===u?6371e3:u;Object(i.a)(this,t),0===arguments.length?(this.phi=0,this.theta=0,this.radius=1):Number.isFinite(n)||Number.isFinite(r)?(this.phi=n||0,this.theta=r||0):(Number.isFinite(o)||Number.isFinite(s))&&(this.bearing=o||0,this.pitch=s||0),this.radius=a||1,this.radiusScale=c||1,this.check()}return Object(a.a)(t,[{key:\"toString\",value:function(){return this.formatString(c.c)}},{key:\"formatString\",value:function(t){var e=t.printTypes,n=(t.printDegrees,c.f);return\"\".concat(e?\"Spherical\":\"\",\"[rho:\").concat(n(this.radius),\",theta:\").concat(n(this.theta),\",phi:\").concat(n(this.phi),\"]\")}},{key:\"equals\",value:function(t){return Object(c.e)(this.radius,t.radius)&&Object(c.e)(this.theta,t.theta)&&Object(c.e)(this.phi,t.phi)}},{key:\"exactEquals\",value:function(t){return this.radius===t.radius&&this.theta===t.theta&&this.phi===t.phi}},{key:\"set\",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this.check()}},{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"copy\",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this.check()}},{key:\"fromLngLatZ\",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2];this.radius=1+a/this.radiusScale,this.phi=Object(c.h)(i),this.theta=Object(c.h)(n)}},{key:\"fromVector3\",value:function(t){return this.radius=h.c(t),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t[0],t[1]),this.phi=Math.acos(Object(c.b)(t[2]/this.radius,-1,1))),this.check()}},{key:\"toVector3\",value:function(){return new f.a(0,0,this.radius).rotateX({radians:this.theta}).rotateZ({radians:this.phi})}},{key:\"makeSafe\",value:function(){this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi))}},{key:\"check\",value:function(){if(!(Number.isFinite(this.phi)&&Number.isFinite(this.theta)&&this.radius>0))throw new Error(\"SphericalCoordinates: some fields set to invalid numbers\");return this}},{key:\"bearing\",get:function(){return 180-Object(c.d)(this.phi)},set:function(t){this.phi=Math.PI-Object(c.h)(t)}},{key:\"pitch\",get:function(){return Object(c.d)(this.theta)},set:function(t){this.theta=Object(c.h)(t)}},{key:\"longitude\",get:function(){return Object(c.d)(this.phi)}},{key:\"latitude\",get:function(){return Object(c.d)(this.theta)}},{key:\"lng\",get:function(){return Object(c.d)(this.phi)}},{key:\"lat\",get:function(){return Object(c.d)(this.theta)}},{key:\"z\",get:function(){return(this.radius-1)*this.radiusScale}}]),t}(),v=n(4601),p={position:[0,0,0],lookAt:[0,0,0],up:[0,0,1],rotationX:0,rotationY:0,fov:50,near:1,far:100},g=function(){function t(e){Object(i.a)(this,t);var n=e.width,r=e.height,a=e.position,o=void 0===a?p.position:a;Object(v.a)(Number.isFinite(n),\"`width` must be supplied\"),Object(v.a)(Number.isFinite(r),\"`height` must be supplied\"),this._viewportProps=this._applyConstraints(Object.assign({},e,{position:new f.a(o)}))}return Object(a.a)(t,[{key:\"getViewportProps\",value:function(){return this._viewportProps}},{key:\"getDirection\",value:function(){return new d({bearing:this._viewportProps.bearing,pitch:this._viewportProps.pitch}).toVector3().normalize()}},{key:\"getDirectionFromBearing\",value:function(t){return new d({bearing:t,pitch:90}).toVector3().normalize()}},{key:\"shortestPathFrom\",value:function(t){return this._viewportProps}},{key:\"_applyConstraints\",value:function(t){return t}}]),t}(),b=n(4848),y=n(5018),m=n(4705),_=n(4687),O={transitionDuration:300,transitionEasing:function(t){return t},transitionInterpolator:new m.a,transitionInterruption:_.a.BREAK},j={transitionDuration:0},k=0,w=20,x=0,E=60,T=0,P=0,S=1.5,A=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,a=n.height,u=n.latitude,c=n.longitude,l=n.zoom,f=n.bearing,h=void 0===f?P:f,d=n.pitch,p=void 0===d?T:d,g=n.altitude,b=void 0===g?S:g,y=n.maxZoom,m=void 0===y?w:y,_=n.minZoom,O=void 0===_?k:_,j=n.maxPitch,A=void 0===j?E:j,L=n.minPitch,C=void 0===L?x:L,I=n.startPanLngLat,M=n.startZoomLngLat,R=n.startBearing,F=n.startPitch,N=n.startZoom;return Object(i.a)(this,e),Object(v.a)(Number.isFinite(c),\"`longitude` must be supplied\"),Object(v.a)(Number.isFinite(u),\"`latitude` must be supplied\"),Object(v.a)(Number.isFinite(l),\"`zoom` must be supplied\"),(t=Object(o.a)(this,Object(s.a)(e).call(this,{width:r,height:a,latitude:u,longitude:c,zoom:l,bearing:h,pitch:p,altitude:b,maxZoom:m,minZoom:O,maxPitch:A,minPitch:C})))._interactiveState={startPanLngLat:I,startZoomLngLat:M,startBearing:R,startPitch:F,startZoom:N},t}return Object(u.a)(e,t),Object(a.a)(e,[{key:\"getViewportProps\",value:function(){return this._viewportProps}},{key:\"getInteractiveState\",value:function(){return this._interactiveState}},{key:\"panStart\",value:function(t){var e=t.pos;return this._getUpdatedState({startPanLngLat:this._unproject(e)})}},{key:\"pan\",value:function(t){var e=t.pos,n=t.startPos,i=this._interactiveState.startPanLngLat||this._unproject(n);if(!i)return this;var a=this._calculateNewLngLat({startPanLngLat:i,pos:e}),o=Object(r.a)(a,2),s=o[0],u=o[1];return this._getUpdatedState({longitude:s,latitude:u})}},{key:\"panEnd\",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:\"rotateStart\",value:function(t){t.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:\"rotate\",value:function(t){var e=t.deltaScaleX,n=void 0===e?0:e,r=t.deltaScaleY,i=void 0===r?0:r,a=this._interactiveState,o=a.startBearing,s=a.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:o,startPitch:s}),c=u.pitch,l=u.bearing;return this._getUpdatedState({bearing:l,pitch:c})}},{key:\"rotateEnd\",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:\"zoomStart\",value:function(t){var e=t.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this._viewportProps.zoom})}},{key:\"zoom\",value:function(t){var e=t.pos,n=t.startPos,i=t.scale;Object(v.a)(i>0,\"`scale` must be a positive number\");var a=this._interactiveState,o=a.startZoom,s=a.startZoomLngLat;Number.isFinite(o)||(o=this._viewportProps.zoom,s=this._unproject(n)||this._unproject(e)),Object(v.a)(s,\"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.\");var u=this._calculateNewZoom({scale:i,startZoom:o}),c=new b.a(Object.assign({},this._viewportProps,{zoom:u})).getLocationAtPoint({lngLat:s,pos:e}),l=Object(r.a)(c,2),f=l[0],h=l[1];return this._getUpdatedState({zoom:u,longitude:f,latitude:h})}},{key:\"zoomEnd\",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:\"zoomIn\",value:function(){return this._zoomFromCenter(2)}},{key:\"zoomOut\",value:function(){return this._zoomFromCenter(.5)}},{key:\"moveLeft\",value:function(){return this._panFromCenter([100,0])}},{key:\"moveRight\",value:function(){return this._panFromCenter([-100,0])}},{key:\"moveUp\",value:function(){return this._panFromCenter([0,100])}},{key:\"moveDown\",value:function(){return this._panFromCenter([0,-100])}},{key:\"rotateLeft\",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:\"rotateRight\",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:\"rotateUp\",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:\"rotateDown\",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:\"shortestPathFrom\",value:function(t){var e=t.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-e.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-e.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:\"_zoomFromCenter\",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.zoom({pos:[n/2,r/2],scale:t})}},{key:\"_panFromCenter\",value:function(t){var e=this._viewportProps,n=e.width,r=e.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+t[0],r/2+t[1]]})}},{key:\"_getUpdatedState\",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:\"_applyConstraints\",value:function(t){var e=t.maxZoom,n=t.minZoom,r=t.zoom;t.zoom=Object(c.b)(r,n,e);var i=t.maxPitch,a=t.minPitch,o=t.pitch;return t.pitch=Object(c.b)(o,a,i),Object.assign(t,Object(y.a)(t)),t}},{key:\"_unproject\",value:function(t){var e=new b.a(this._viewportProps);return t&&e.unproject(t)}},{key:\"_calculateNewLngLat\",value:function(t){var e=t.startPanLngLat,n=t.pos;return new b.a(this._viewportProps).getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:\"_calculateNewZoom\",value:function(t){var e=t.scale,n=t.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom,o=n+Math.log2(e);return Object(c.b)(o,a,i)}},{key:\"_calculateNewPitchAndBearing\",value:function(t){var e=t.deltaScaleX,n=t.deltaScaleY,r=t.startBearing,i=t.startPitch;n=Object(c.b)(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(o-i)),{pitch:u,bearing:r+180*e}}}]),e}(g),L=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(s.a)(e).call(this,A,t))).invertPan=!0,n}return Object(u.a)(e,t),Object(a.a)(e,[{key:\"_getTransitionProps\",value:function(){return O}},{key:\"_onPanRotate\",value:function(t){if(!this.dragRotate)return!1;var e=t.deltaX,n=t.deltaY,i=this.getCenter(t),a=Object(r.a)(i,2)[1],o=a-n,s=this.controllerState.getViewportProps(),u=s.width,c=s.height,l=e/u,f=0;n>0?Math.abs(c-o)>5&&(f=n/(o-c)*1.2):n<0&&o>5&&(f=1-a/o),f=Math.min(1,Math.max(-1,f));var h=this.controllerState.rotate({deltaScaleX:l,deltaScaleY:f});return this.updateViewport(h,j,{isDragging:!0})}}]),e}(l.a)},4756:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return b}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(4668),c=n(5025),l=n(4836),f=n(4733),h=[-1,-1,1,-1,-1,1,1,1],d=function(t){function e(t,n){var i;Object(r.a)(this,e);var s=h.map((function(t){return-1===t?0:t}));return(i=Object(a.a)(this,Object(o.a)(e).call(this,t,Object.assign({},n,{vs:\"attribute vec2 aClipSpacePosition;\\nattribute vec2 aTexCoord;\\nattribute vec2 aCoordinate;\\n\\nvarying vec2 position;\\nvarying vec2 coordinate;\\nvarying vec2 uv;\\n\\nvoid main(void) {\\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\\n  position = aClipSpacePosition;\\n  coordinate = aCoordinate;\\n  uv = aTexCoord;\\n}\\n\",geometry:new f.a({drawMode:5,vertexCount:4,attributes:{aClipSpacePosition:{size:2,value:new Float32Array(h)},aTexCoord:{size:2,value:new Float32Array(s)},aCoordinate:{size:2,value:new Float32Array(s)}}})})))).setVertexCount(4),i}return Object(s.a)(e,t),e}(l.a),v=n(4897),p=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,e),n=Object(a.a)(this,Object(o.a)(e).call(this,t,i));var s=i.module,u=i.fs,c=i.id,l=i.moduleProps;return n.model=n._getModel(t,s,u,c,l),n}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"render\",value:function(t){var e=this,n=this.gl;Object(c.a)(n,{framebuffer:t.outputBuffer,clearColor:[0,0,0,0]},(function(){return e._renderPass(n,t)}))}},{key:\"delete\",value:function(){this.model.delete(),this.model=null}},{key:\"_getModel\",value:function(t,e,n,r,i){var a=new d(t,{id:r,fs:n,modules:[e]}),o=Object.assign(e.getUniforms(),e.getUniforms(i));return a.setUniforms(o),a}},{key:\"_renderPass\",value:function(t,e){var n=e.inputBuffer;e.outputBuffer;Object(v.a)(t,{color:!0}),this.model.draw({uniforms:{texture:n,texSize:[n.width,n.height]},parameters:{depthWrite:!1,depthTest:!1}})}}]),e}(n(4791).a),g=n(4757),b=function(t){function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(a.a)(this,Object(o.a)(e).call(this,i))).id=\"\".concat(t.name,\"-pass\"),Object(g.b)(t),n.module=t,n}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"prepare\",value:function(t){this.passes||(this.passes=function(t,e,n,r){if(e.filter||e.sampler){var i=_(e);return[new p(t,{id:n,module:e,fs:i,moduleProps:r})]}return(e.passes||[]).map((function(i,a){var o=_(e,i),s=\"\".concat(n,\"-\").concat(a);return new p(t,{id:s,module:e,fs:o,moduleProps:r})}))}(t,this.module,this.id,this.props))}},{key:\"render\",value:function(t){for(var e=t.target,n=void 0===e?null:e,r=!1,i=0;i<this.passes.length;i++){var a=r?t.outputBuffer:t.inputBuffer,o=r?t.inputBuffer:t.outputBuffer;n&&i===this.passes.length-1&&(o=n),this.passes[i].render({inputBuffer:a,outputBuffer:o}),r=!r}return{inputBuffer:r?t.outputBuffer:t.inputBuffer,outputBuffer:r?t.inputBuffer:t.outputBuffer}}},{key:\"cleanup\",value:function(){if(this.passes){var t=!0,e=!1,n=void 0;try{for(var r,i=this.passes[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.delete()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.passes=null}}}]),e}(u.a);var y=function(t){return\"uniform sampler2D texture;\\nuniform vec2 texSize;\\n\\nvarying vec2 position;\\nvarying vec2 coordinate;\\nvarying vec2 uv;\\n\\nvoid main() {\\n  vec2 texCoord = coordinate;\\n\\n  gl_FragColor = texture2D(texture, texCoord);\\n  gl_FragColor = \".concat(t,\"(gl_FragColor, texSize, texCoord);\\n}\\n\")},m=function(t){return\"uniform sampler2D texture;\\nuniform vec2 texSize;\\n\\nvarying vec2 position;\\nvarying vec2 coordinate;\\nvarying vec2 uv;\\n\\nvoid main() {\\n  vec2 texCoord = coordinate;\\n\\n  gl_FragColor = \".concat(t,\"(texture, texSize, texCoord);\\n}\\n\")};function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(e.filter){var n=\"string\"==typeof e.filter?e.filter:\"\".concat(t.name,\"_filterColor\");return y(n)}if(e.sampler){var r=\"string\"==typeof e.sampler?e.sampler:\"\".concat(t.name,\"_sampleColor\");return m(r)}return null}},4757:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f})),n.d(e,\"b\",(function(){return h}));var r=n(16),i=n(17);function a(t,e,n){switch(e){case 300:return n?function(t){return t.replace(/attribute\\s+/g,\"in \").replace(/varying\\s+/g,\"out \").replace(/texture2D\\(/g,\"texture(\").replace(/textureCube\\(+/g,\"texture(\").replace(/texture2DLodEXT\\(/g,\"textureLod(\").replace(/textureCubeLodEXT\\(/g,\"textureLod(\")}(t):function(t){return t.replace(/varying\\s+/g,\"in \").replace(/texture2D\\(/g,\"texture(\").replace(/textureCube\\(/g,\"texture(\").replace(/texture2DLodEXT\\(/g,\"textureLod(\").replace(/textureCubeLodEXT\\(/g,\"textureLod(\")}(t);case 100:return n?function(t){return t.replace(/^in\\s+/gm,\"attribute \").replace(/^out\\s+/gm,\"varying \").replace(/texture\\(/g,\"texture2D(\")}(t):function(t){return t.replace(/^in\\s+/gm,\"varying \").replace(/texture\\(/g,\"texture2D(\")}(t);default:throw new Error(\"unknown GLSL version \".concat(e))}}var o=n(4898),s=n(25),u={number:{validate:function(t,e){return Number.isFinite(t)&&(!(\"max\"in e)||t<=e.max)&&(!(\"min\"in e)||t>=e.min)}},array:{validate:function(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function c(t){var e=l(t);return\"object\"===e?t?\"type\"in t?Object.assign({},t,u[t.type]):\"value\"in t?(e=l(t.value),Object.assign({type:e},t,u[e])):{type:\"object\",value:t}:{type:\"object\",value:null}:Object.assign({type:e,value:t},u[e])}function l(t){return Array.isArray(t)||ArrayBuffer.isView(t)?\"array\":Object(s.a)(t)}var f=function(){function t(e){var n=e.name,i=e.vs,a=e.fs,s=e.dependencies,u=void 0===s?[]:s,l=e.uniforms,f=e.getUniforms,h=e.deprecations,d=void 0===h?[]:h,v=e.defines,p=void 0===v?{}:v,g=e.vertexShader,b=e.fragmentShader;Object(r.a)(this,t),Object(o.a)(\"string\"==typeof n),this.name=n,this.vs=i||g,this.fs=a||b,this.getModuleUniforms=f,this.dependencies=u,this.deprecations=this._parseDeprecationDefinitions(d),this.defines=p,l&&(this.uniforms=function(t){var e={};for(var n in t){var r=c(t[n]);e[n]=r}return e}(l))}return Object(i.a)(t,[{key:\"getModuleSource\",value:function(t,e){var n;switch(t){case\"vs\":n=a(this.vs||\"\",e,!0);break;case\"fs\":n=a(this.fs||\"\",e,!1);break;default:Object(o.a)(!1)}return\"#define MODULE_\".concat(this.name.toUpperCase(),\"\\n\").concat(n,\"// END MODULE_\").concat(this.name,\"\\n\\n\")}},{key:\"getUniforms\",value:function(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}},{key:\"getDefines\",value:function(){return this.defines}},{key:\"checkDeprecations\",value:function(t,e){this.deprecations.forEach((function(n){n.regex.test(t)&&(n.deprecated?e.deprecated(n.old,n.new)():e.removed(n.old,n.new)())}))}},{key:\"_parseDeprecationDefinitions\",value:function(t){return t.forEach((function(t){switch(t.type){case\"function\":t.regex=new RegExp(\"\\\\b\".concat(t.old,\"\\\\(\"));break;default:t.regex=new RegExp(\"\".concat(t.type,\" \").concat(t.old,\";\"))}})),t}},{key:\"_defaultGetUniforms\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={},n=this.uniforms;for(var r in n){var i=n[r];r in t&&!i.private?(i.validate&&Object(o.a)(i.validate(t[r],i),\"\".concat(this.name,\": invalid \").concat(r)),e[r]=t[r]):e[r]=i.value}return e}}]),t}();function h(t){if(!t.normalized&&(t.normalized=!0,t.uniforms&&!t.getUniforms)){var e=new f(t);t.getUniforms=e.getUniforms.bind(e)}return t}},4758:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return j}));var r=n(13),i=n(16),a=n(17),o=n(4601),s=n(4991),u=n(5072),c=n(4889),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.gl,r=e._cachePrograms,a=void 0!==r&&r;Object(i.a)(this,t),Object(c.a)(n),this.gl=n,this.vertexShaders={},this.fragmentShaders={},this.programs={},this._cachePrograms=a}return Object(a.a)(t,[{key:\"delete\",value:function(){return this}},{key:\"getVertexShader\",value:function(t,e){Object(c.a)(\"string\"==typeof e),Object(c.a)(this._compareContexts(t,this.gl));var n=this.vertexShaders[e];return n||(n=new s.b(t,e),this.vertexShaders[e]=n),n}},{key:\"getFragmentShader\",value:function(t,e){Object(c.a)(\"string\"==typeof e),Object(c.a)(this._compareContexts(t,this.gl));var n=this.fragmentShaders[e];return n||(n=new s.a(t,e),this.fragmentShaders[e]=n),n}},{key:\"getProgram\",value:function(t,e){Object(c.a)(this._compareContexts(t,this.gl)),Object(c.a)(\"string\"==typeof e.vs),Object(c.a)(\"string\"==typeof e.fs),Object(c.a)(\"string\"==typeof e.id);var n=this._getProgramKey(e),r=this.programs[n];return r?(this._resetProgram(r),r):(r=this._createNewProgram(t,e),this._cachePrograms&&this._checkProgramProp(r)&&(r._isCached=!0,this.programs[n]=r),r)}},{key:\"_getProgramKey\",value:function(t){return\"\".concat(t.id,\"-\").concat(t.vs,\"-\").concat(t.fs)}},{key:\"_checkProgramProp\",value:function(t){return!t.varyings}},{key:\"_createNewProgram\",value:function(t,e){var n=e.vs,r=e.fs,i=this.getVertexShader(t,n),a=this.getFragmentShader(t,r);return new u.a(this.gl,Object.assign({},e,{vs:i,fs:a}))}},{key:\"_resetProgram\",value:function(t,e){t.reset()}},{key:\"_compareContexts\",value:function(t,e){return(t.gl||t)===(e.gl||e)}}]),t}(),f=n(4728),h=n.n(f),d=n(4636),v=n(4787),p=n(4599),g=n(4627),b=n(5071),y=n(4661),m=n(4729),_=Object.seal({layerManager:null,deck:null,gl:null,time:-1,useDevicePixels:!0,stats:null,shaderCache:null,pickingFBO:null,animationProps:null,userData:{}}),O=function(t){return t instanceof d.a?\"\".concat(t):t?\"invalid\":\"null\"},j=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.deck,a=n.stats,o=n.viewport,s=void 0===o?null:o;Object(i.a)(this,t),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},_,{layerManager:this,deck:r,gl:e,shaderCache:e&&new l({gl:e,_cachePrograms:!0}),stats:a||new b.a({id:\"deck.gl\"}),viewport:s||new y.a({id:\"DEFAULT-INITIAL-VIEWPORT\"})}),this._needsRedraw=\"Initial render\",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),this._initSeer=this._initSeer.bind(this),this._editSeer=this._editSeer.bind(this),Object.seal(this),Object(m.e)(this._initSeer),Object(m.c)(this._editSeer)}return Object(a.a)(t,[{key:\"finalize\",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;this._finalizeLayer(a)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}h.a.removeListener(this._initSeer),h.a.removeListener(this._editSeer)}},{key:\"needsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._checkIfNeedsRedraw(t)}},{key:\"needsUpdate\",value:function(){return this._needsUpdate}},{key:\"setNeedsRedraw\",value:function(t){this._needsRedraw=this._needsRedraw||t}},{key:\"setNeedsUpdate\",value:function(t){this._needsUpdate=this._needsUpdate||t}},{key:\"getLayers\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.layerIds,n=void 0===e?null:e;return n?this.layers.filter((function(t){return n.find((function(e){return 0===t.id.indexOf(e)}))})):this.layers}},{key:\"setProps\",value:function(t){\"debug\"in t&&(this._debug=t.debug),\"userData\"in t&&(this.context.userData=t.userData),\"useDevicePixels\"in t&&(this.context.useDevicePixels=t.useDevicePixels),\"layers\"in t&&this.setLayers(t.layers)}},{key:\"setLayers\",value:function(t){if(t===this.lastRenderedLayers)return p.a.log(3,\"Ignoring layer update due to layer array not changed\")(),this;this.lastRenderedLayers=t,t=Object(g.b)(t,{filter:Boolean});var e=!0,n=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.context=this.context}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}var o=this._updateLayers({oldLayers:this.layers,newLayers:t}),s=o.error,u=o.generatedLayers;if(this.layers=u,s)throw s;return this}},{key:\"updateLayers\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"time\"in t&&(this.context.time=t.time);var e=this.needsUpdate();e&&(this.setNeedsRedraw(\"updating layers: \".concat(e)),this.setLayers(Object(r.a)(this.lastRenderedLayers)))}},{key:\"_checkIfNeedsRedraw\",value:function(t){var e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value.getNeedsRedraw(t);e=e||s}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}},{key:\"activateViewport\",value:function(t){var e=this.context.viewport;if(!e||!t.equals(e)){p.a.log(4,\"Viewport changed\",t)(),this.context.viewport=t;var n=!0,r=!1,i=void 0;try{for(var a,s=this.layers[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;u.setChangeFlags({viewportChanged:\"Viewport changed\"}),this._updateLayer(u)}}catch(t){r=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}return Object(o.a)(this.context.viewport,\"LayerManager: viewport not set\"),this}},{key:\"_updateLayers\",value:function(t){var e=t.oldLayers,n=t.newLayers,r={},i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r[c.id]?p.a.warn(\"Multiple old layers with same id \".concat(O(c)))():r[c.id]=c}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var l=[],f=this._updateSublayersRecursively({newLayers:n,oldLayerMap:r,generatedLayers:l}),h=this._finalizeOldLayers(r);return this._needsUpdate=!1,{error:f||h,generatedLayers:l}}},{key:\"_updateSublayersRecursively\",value:function(t){var e=t.newLayers,n=t.oldLayerMap,r=t.generatedLayers,i=null,a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var l=u.value;l.context=this.context;var f=n[l.id];null===f&&p.a.warn(\"Multiple new layers with same id \".concat(O(l)))(),n[l.id]=null;var h=null;try{if(this._debug&&f!==l&&l.validateProps(),f){this._transferLayerState(f,l);var d=this._updateLayer(l);i=i||d,Object(m.g)(l)}else{var v=this._initializeLayer(l);i=i||v,Object(m.b)(l)}r.push(l),h=l.isComposite&&l.getSubLayers()}catch(v){p.a.warn(\"error during matching of \".concat(O(l)),v)(),i=i||v}if(h){var g=this._updateSublayersRecursively({newLayers:h,oldLayerMap:n,generatedLayers:r});i=i||g}}}catch(v){o=!0,s=v}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}},{key:\"_finalizeOldLayers\",value:function(t){var e=null;for(var n in t){var r=t[n];r&&(e=e||this._finalizeLayer(r))}return e}},{key:\"_initializeLayer\",value:function(t){p.a.log(2,\"initializing \".concat(O(t)))();var e=null;try{t._initialize(),t.lifecycle=v.a.INITIALIZED}catch(n){p.a.warn(\"error while initializing \".concat(O(t),\"\\n\"),n)(),e=e||n}t.internalState.layer=t;var n=!0,r=!1,i=void 0;try{for(var a,o=t.getModels()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){a.value.userData.layer=t}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}},{key:\"_transferLayerState\",value:function(t,e){e._transferState(t),e.lifecycle=v.a.MATCHED,e!==t?(p.a.log(4,\"matched \".concat(O(e)),t,\"->\",e)(),t.lifecycle=v.a.AWAITING_GC):p.a.log(4,\"Matching layer is unchanged \".concat(e.id))()}},{key:\"_updateLayer\",value:function(t){p.a.log(4,\"updating \".concat(t,\" because: \").concat(t.printChangeFlags()))();var e=null;try{t._update()}catch(n){p.a.warn(\"error during update of \".concat(O(t)),n)(),e=n}return e}},{key:\"_finalizeLayer\",value:function(t){Object(o.a)(t.lifecycle!==v.a.AWAITING_FINALIZATION),t.lifecycle=v.a.AWAITING_FINALIZATION;var e=null;this.setNeedsRedraw(\"finalized \".concat(O(t)));try{t._finalize()}catch(n){p.a.warn(\"error during finalization of \".concat(O(t)),n)(),e=n}return t.lifecycle=v.a.FINALIZED,p.a.log(2,\"finalizing \".concat(O(t)))(),e}},{key:\"_initSeer\",value:function(){this.layers.forEach((function(t){Object(m.b)(t),Object(m.g)(t)}))}},{key:\"_editSeer\",value:function(t){\"edit\"===t.type&&\"props\"===t.valuePath[0]&&(Object(m.f)(t.itemKey,t.valuePath.slice(1),t.value),this.updateLayers())}}]),t}()},4759:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return p}));var r=n(16),i=n(17),a=n(4599),o=n(178),s=n(80),u=n(229),c=n(19),l=function(t){function e(){return Object(r.a)(this,e),Object(o.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(c.a)(e,t),Object(i.a)(e,[{key:\"getModuleParameters\",value:function(t,n,r){var i=Object(u.a)(Object(s.a)(e.prototype),\"getModuleParameters\",this).call(this,t);Object.assign(i,this.getObjectHighlightParameters(t),r);var a=!0,o=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;Object.assign(i,h.getParameters(t))}}catch(t){o=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(o)throw c}}return i}},{key:\"getObjectHighlightParameters\",value:function(t){var e=t.props,n=e.highlightedObjectIndex,r=e.highlightColor,i={pickingHighlightColor:[r[0],r[1],r[2],r[3]||255]};return Number.isInteger(n)&&(i.pickingSelectedColor=n>=0?t.encodePickingColor(n):null),i}}]),e}(n(4689).a),f=n(4792),h=n(4793),d=n(4756),v=n(4669),p=function(){function t(e){Object(r.a)(this,t),this.gl=e,this.pixelRatio=null,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new l(e),this.pickLayersPass=new f.a(e),this.renderCount=0,this._needsRedraw=\"Initial render\",this.screenBuffer=null,this.offscreenBuffer=null,this.lastPostProcessEffect=null}return Object(i.a)(t,[{key:\"setProps\",value:function(t){\"useDevicePixels\"in t&&(this.pixelRatio=Object(h.a)(t.useDevicePixels)),\"layerFilter\"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw=\"layerFilter changed\"),\"drawPickingColors\"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw=\"drawPickingColors changed\");var e=this.pixelRatio,n=this.layerFilter;this.drawLayersPass.setProps({pixelRatio:e,layerFilter:n}),this.pickLayersPass.setProps({pixelRatio:e,layerFilter:n})}},{key:\"renderLayers\",value:function(t){var e=this,n=t.layers,r=t.viewports,i=t.activateViewport,o=t.views,s=t.redrawReason,u=void 0===s?\"unknown reason\":s,c=t.clearCanvas,l=void 0===c||c,f=t.effects,h=void 0===f?[]:f,d=t.pass,p=t.stats,g=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,b=this.prepareEffects({layers:n,viewports:r,onViewportActive:i,views:o,effects:h}),y=this.lastPostProcessEffect?this.screenBuffer:v.a.getDefaultFramebuffer(this.gl),m=g.render({layers:n,viewports:r,views:o,onViewportActive:i,redrawReason:u,clearCanvas:l,effects:h,effectProps:b,outputBuffer:y});this.postRender(h),this.renderCount++,a.a.priority>=2&&m.forEach((function(t){e.logRenderStats({status:t,pass:d,redrawReason:u,stats:p,renderStats:m})}))}},{key:\"needsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:\"finalize\",value:function(){this.screenBuffer&&(this.screenBuffer.delete(),this.screenBuffer=null),this.offscreenBuffer&&(this.offscreenBuffer.delete(),this.offscreenBuffer=null)}},{key:\"prepareEffects\",value:function(t){var e=t.effects,n={};this.lastPostProcessEffect=null;var r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;Object.assign(n,u.prepare(this.gl,t)),u instanceof d.a&&(this.lastPostProcessEffect=u)}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return this.lastPostProcessEffect&&this.prepareRenderBuffers(),n}},{key:\"prepareRenderBuffers\",value:function(){this.screenBuffer||(this.screenBuffer=new v.a(this.gl)),this.screenBuffer.resize(),this.offscreenBuffer||(this.offscreenBuffer=new v.a(this.gl)),this.offscreenBuffer.resize()}},{key:\"postRender\",value:function(t){var e={inputBuffer:this.screenBuffer,outputBuffer:this.offscreenBuffer,target:null},n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s instanceof d.a){if(s===this.lastPostProcessEffect){Object.assign(e,{target:v.a.getDefaultFramebuffer(this.gl)}),e=s.render(e);break}e=s.render(e)}}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:\"logRenderStats\",value:function(t){var e=t.renderStats,n=t.pass,r=t.redrawReason,i=t.stats,o=e.totalCount,s=e.visibleCount,u=e.compositeCount,c=e.pickableCount,l=o-u-s,f=\"\";f+=\"RENDER #\".concat(this.renderCount,\" \").concat(s,\" (of \").concat(o,\" layers) to \").concat(n,\" because \").concat(r,\" \"),a.a.priority>2&&(f+=\"(\".concat(l,\" hidden, \").concat(u,\" composite \").concat(c,\" pickable)\")),a.a.log(2,f)(),i&&i.get(\"Redraw Layers\").add(s)}}]),t}()},4760:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return v}));var r=n(16),i=n(178),a=n(80),o=n(29),s=n(17),u=n(19),c=n(4646),l=n(5022),f=n(4889),h=\"\";function d(t,e){return Object(f.a)(\"string\"==typeof t),t=h+t,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error(\"Could not load image \".concat(t,\".\")))},i.crossOrigin=e&&e.crossOrigin||\"anonymous\",i.src=t}catch(t){r(t)}}))}var v=function(t){function e(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(l.b)(t),(s instanceof Promise||\"string\"==typeof s)&&(s={data:s}),\"string\"==typeof s.data&&(s=Object.assign({},s,{data:d(s.data)})),(n=Object(i.a)(this,Object(a.a)(e).call(this,t,Object.assign({},s,{target:3553})))).initialize(s),Object.seal(Object(o.a)(n)),n}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:\"isSupported\",value:function(t,e){return c.a.isSupported(t,e)}}]),e}(c.a)},4761:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return u})),n.d(e,\"c\",(function(){return h})),n.d(e,\"b\",(function(){return d}));var r,i=n(5),a=n(4786),o=n(4898),s=(r={},Object(i.a)(r,a.b,\"#ifdef MODULE_LOGDEPTH\\n  logdepth_adjustPosition(gl_Position);\\n#endif\\n\"),Object(i.a)(r,a.a,\"#ifdef MODULE_MATERIAL\\n  gl_FragColor = material_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LIGHTING\\n  gl_FragColor = lighting_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_FOG\\n  gl_FragColor = fog_filterColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_PICKING\\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\\n#endif\\n\\n#ifdef MODULE_LOGDEPTH\\n  logdepth_setFragDepth();\\n#endif\\n\"),r),u=\"__LUMA_INJECT_DECLARATIONS__\",c=/void main\\s*\\([^)]*\\)\\s*\\{\\n?/,l=/}\\n?[^{}]*$/,f=[];function h(t,e,n,r){var i=e===a.b,o=function(e){var r=n[e];r.sort((function(t,e){return t.order-e.order})),f.length=r.length;for(var a=0,o=r.length;a<o;++a)f[a]=r[a].injection;var s=\"\".concat(f.join(\"\\n\"),\"\\n\");switch(e){case\"vs:#decl\":i&&(t=t.replace(u,s));break;case\"vs:#main-start\":i&&(t=t.replace(c,(function(t){return t+s})));break;case\"vs:#main-end\":i&&(t=t.replace(l,(function(t){return s+t})));break;case\"fs:#decl\":i||(t=t.replace(u,s));break;case\"fs:#main-start\":i||(t=t.replace(c,(function(t){return t+s})));break;case\"fs:#main-end\":i||(t=t.replace(l,(function(t){return s+t})));break;default:t=t.replace(e,(function(t){return t+s}))}};for(var h in n)o(h);return t=t.replace(u,\"\"),r&&(t=t.replace(/\\}\\s*$/,(function(t){return t+s[e]}))),t}function d(t){var e={};return Object(o.a)(Array.isArray(t)&&t.length>1),t.forEach((function(t){for(var n in t)e[n]=e[n]?\"\".concat(e[n],\"\\n\").concat(t[n]):t[n]})),e}},4773:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i}));var r=n(25);function i(t){if(null===(e=t)||\"object\"!==Object(r.a)(e))throw new Error(\"count(): argument not an object\");var e;if(\"function\"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function(t){return null!==t&&\"object\"===Object(r.a)(t)&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error(\"count(): argument not a container\")}},4774:function(t,e,n){\"use strict\";(function(t){n.d(e,\"a\",(function(){return a}));var r=n(25),i=n(4775);function a(){return!(\"object\"===(void 0===t?\"undefined\":Object(r.a)(t))&&\"[object process]\"===String(t)&&!t.browser)||Object(i.a)()}}).call(this,n(287))},4775:function(t,e,n){\"use strict\";(function(t){n.d(e,\"a\",(function(){return i}));var r=n(25);function i(e){if(\"undefined\"!=typeof window&&\"object\"===Object(r.a)(window.process)&&\"renderer\"===window.process.type)return!0;if(void 0!==t&&\"object\"===Object(r.a)(t.versions)&&Boolean(t.versions.electron))return!0;var n=\"object\"===(\"undefined\"==typeof navigator?\"undefined\":Object(r.a)(navigator))&&\"string\"==typeof navigator.userAgent&&navigator.userAgent,i=e||n;return!!(i&&i.indexOf(\"Electron\")>=0)}}).call(this,n(287))},4776:function(t,e,n){\"use strict\";(function(t){var r=n(25),i=n(4890),a=!(\"object\"===(void 0===t?\"undefined\":Object(r.a)(t))&&\"[object process]\"===String(t)&&!t.browser)||i.a;e.a=a}).call(this,n(287))},4777:function(t,e,n){\"use strict\";n.d(e,\"c\",(function(){return i})),n.d(e,\"a\",(function(){return o})),n.d(e,\"b\",(function(){return s}));var r=n(4778);n(4893),n(5020);function i(t,e){var n={};for(var i in e){var a=Number(i),o=r.d[i];o&&(\"string\"==typeof o?n[o]=!0:o(t,e[i],a))}var s=t.state&&t.state.cache;if(s){var u=Object.assign({},s,e);for(var c in n){(0,r.a[c])(t,u)}}}function a(t,e){var n=r.c[e];return n?n(t,Number(e)):t.getParameter(Number(e))}function o(t,e){e=e||r.b;var n=Array.isArray(e)?e:Object.keys(e),i={},o=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f=c.value;i[f]=a(t,f)}}catch(t){s=!0,u=t}finally{try{o||null==l.return||l.return()}finally{if(s)throw u}}return i}function s(t){i(t,Object.assign({},r.b,{}))}},4778:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return c})),n.d(e,\"d\",(function(){return d})),n.d(e,\"a\",(function(){return v})),n.d(e,\"c\",(function(){return g}));var r,i,a,o=n(13),s=n(5),u=n(5019),c=(r={},Object(s.a)(r,3042,!1),Object(s.a)(r,32773,new Float32Array([0,0,0,0])),Object(s.a)(r,32777,32774),Object(s.a)(r,34877,32774),Object(s.a)(r,32969,1),Object(s.a)(r,32968,0),Object(s.a)(r,32971,1),Object(s.a)(r,32970,0),Object(s.a)(r,3106,new Float32Array([0,0,0,0])),Object(s.a)(r,3107,[!0,!0,!0,!0]),Object(s.a)(r,2884,!1),Object(s.a)(r,2885,1029),Object(s.a)(r,2929,!1),Object(s.a)(r,2931,1),Object(s.a)(r,2932,513),Object(s.a)(r,2928,new Float32Array([0,1])),Object(s.a)(r,2930,!0),Object(s.a)(r,3024,!0),Object(s.a)(r,36006,null),Object(s.a)(r,2886,2305),Object(s.a)(r,33170,4352),Object(s.a)(r,2849,1),Object(s.a)(r,32823,!1),Object(s.a)(r,32824,0),Object(s.a)(r,10752,0),Object(s.a)(r,32938,1),Object(s.a)(r,32939,!1),Object(s.a)(r,3089,!1),Object(s.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(s.a)(r,2960,!1),Object(s.a)(r,2961,0),Object(s.a)(r,2968,4294967295),Object(s.a)(r,36005,4294967295),Object(s.a)(r,2962,519),Object(s.a)(r,2967,0),Object(s.a)(r,2963,4294967295),Object(s.a)(r,34816,519),Object(s.a)(r,36003,0),Object(s.a)(r,36004,4294967295),Object(s.a)(r,2964,7680),Object(s.a)(r,2965,7680),Object(s.a)(r,2966,7680),Object(s.a)(r,34817,7680),Object(s.a)(r,34818,7680),Object(s.a)(r,34819,7680),Object(s.a)(r,2978,new Int32Array([0,0,1024,1024])),Object(s.a)(r,3333,4),Object(s.a)(r,3317,4),Object(s.a)(r,37440,!1),Object(s.a)(r,37441,!1),Object(s.a)(r,37443,37444),Object(s.a)(r,35723,4352),Object(s.a)(r,36010,null),Object(s.a)(r,35977,!1),Object(s.a)(r,3330,0),Object(s.a)(r,3332,0),Object(s.a)(r,3331,0),Object(s.a)(r,3314,0),Object(s.a)(r,32878,0),Object(s.a)(r,3316,0),Object(s.a)(r,3315,0),Object(s.a)(r,32877,0),r),l=function(t,e,n){return e?t.enable(n):t.disable(n)},f=function(t,e,n){return t.hint(n,e)},h=function(t,e,n){return t.pixelStorei(n,e)},d=(i={},Object(s.a)(i,3042,l),Object(s.a)(i,32773,(function(t,e){return t.blendColor.apply(t,Object(o.a)(e))})),Object(s.a)(i,32777,\"blendEquation\"),Object(s.a)(i,34877,\"blendEquation\"),Object(s.a)(i,32969,\"blendFunc\"),Object(s.a)(i,32968,\"blendFunc\"),Object(s.a)(i,32971,\"blendFunc\"),Object(s.a)(i,32970,\"blendFunc\"),Object(s.a)(i,3106,(function(t,e){return t.clearColor.apply(t,Object(o.a)(e))})),Object(s.a)(i,3107,(function(t,e){return t.colorMask.apply(t,Object(o.a)(e))})),Object(s.a)(i,2884,l),Object(s.a)(i,2885,(function(t,e){return t.cullFace(e)})),Object(s.a)(i,2929,l),Object(s.a)(i,2931,(function(t,e){return t.clearDepth(e)})),Object(s.a)(i,2932,(function(t,e){return t.depthFunc(e)})),Object(s.a)(i,2928,(function(t,e){return t.depthRange.apply(t,Object(o.a)(e))})),Object(s.a)(i,2930,(function(t,e){return t.depthMask(e)})),Object(s.a)(i,3024,l),Object(s.a)(i,35723,f),Object(s.a)(i,36006,(function(t,e){var n=Object(u.b)(t)?36009:36160;return t.bindFramebuffer(n,e)})),Object(s.a)(i,2886,(function(t,e){return t.frontFace(e)})),Object(s.a)(i,33170,f),Object(s.a)(i,2849,(function(t,e){return t.lineWidth(e)})),Object(s.a)(i,32823,l),Object(s.a)(i,32824,\"polygonOffset\"),Object(s.a)(i,10752,\"polygonOffset\"),Object(s.a)(i,35977,l),Object(s.a)(i,32938,\"sampleCoverage\"),Object(s.a)(i,32939,\"sampleCoverage\"),Object(s.a)(i,3089,l),Object(s.a)(i,3088,(function(t,e){return t.scissor.apply(t,Object(o.a)(e))})),Object(s.a)(i,2960,l),Object(s.a)(i,2961,(function(t,e){return t.clearStencil(e)})),Object(s.a)(i,2968,(function(t,e){return t.stencilMaskSeparate(1028,e)})),Object(s.a)(i,36005,(function(t,e){return t.stencilMaskSeparate(1029,e)})),Object(s.a)(i,2962,\"stencilFuncFront\"),Object(s.a)(i,2967,\"stencilFuncFront\"),Object(s.a)(i,2963,\"stencilFuncFront\"),Object(s.a)(i,34816,\"stencilFuncBack\"),Object(s.a)(i,36003,\"stencilFuncBack\"),Object(s.a)(i,36004,\"stencilFuncBack\"),Object(s.a)(i,2964,\"stencilOpFront\"),Object(s.a)(i,2965,\"stencilOpFront\"),Object(s.a)(i,2966,\"stencilOpFront\"),Object(s.a)(i,34817,\"stencilOpBack\"),Object(s.a)(i,34818,\"stencilOpBack\"),Object(s.a)(i,34819,\"stencilOpBack\"),Object(s.a)(i,2978,(function(t,e){return t.viewport.apply(t,Object(o.a)(e))})),Object(s.a)(i,3333,h),Object(s.a)(i,3317,h),Object(s.a)(i,37440,h),Object(s.a)(i,37441,h),Object(s.a)(i,37443,h),Object(s.a)(i,3330,h),Object(s.a)(i,3332,h),Object(s.a)(i,3331,h),Object(s.a)(i,36010,(function(t,e){return t.bindFramebuffer(36008,e)})),Object(s.a)(i,3314,h),Object(s.a)(i,32878,h),Object(s.a)(i,3316,h),Object(s.a)(i,3315,h),Object(s.a)(i,32877,h),i),v={blendEquation:function(t,e){return t.blendEquationSeparate(e[32777],e[34877])},blendFunc:function(t,e){return t.blendFuncSeparate(e[32969],e[32968],e[32971],e[32970])},polygonOffset:function(t,e){return t.polygonOffset(e[32824],e[10752])},sampleCoverage:function(t,e){return t.sampleCoverage(e[32938],e[32939])},stencilFuncFront:function(t,e){return t.stencilFuncSeparate(1028,e[2962],e[2967],e[2963])},stencilFuncBack:function(t,e){return t.stencilFuncSeparate(1029,e[34816],e[36003],e[36004])},stencilOpFront:function(t,e){return t.stencilOpSeparate(1028,e[2964],e[2965],e[2966])},stencilOpBack:function(t,e){return t.stencilOpSeparate(1029,e[34817],e[34818],e[34819])}},p=function(t,e){return t.isEnabled(e)},g=(a={},Object(s.a)(a,3042,p),Object(s.a)(a,2884,p),Object(s.a)(a,2929,p),Object(s.a)(a,3024,p),Object(s.a)(a,32823,p),Object(s.a)(a,32926,p),Object(s.a)(a,32928,p),Object(s.a)(a,3089,p),Object(s.a)(a,2960,p),Object(s.a)(a,35977,p),a)},4779:function(t,e,n){\"use strict\";function r(t,e){if(!t)throw new Error(e||\"webgl2-polyfill: assertion failed.\")}n.d(e,\"a\",(function(){return r}))},4780:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return u})),n.d(e,\"a\",(function(){return c})),n.d(e,\"c\",(function(){return l})),n.d(e,\"d\",(function(){return f})),n.d(e,\"e\",(function(){return h}));var r,i,a,o=n(5),s=n(5022),u=(r={},Object(o.a)(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(o.a)(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(o.a)(r,6406,{dataFormat:6406,types:[5121]}),Object(o.a)(r,6409,{dataFormat:6409,types:[5121]}),Object(o.a)(r,6410,{dataFormat:6410,types:[5121]}),Object(o.a)(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(o.a)(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(o.a)(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(o.a)(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r),c=(i={},Object(o.a)(i,6403,1),Object(o.a)(i,36244,1),Object(o.a)(i,33319,2),Object(o.a)(i,33320,2),Object(o.a)(i,6407,3),Object(o.a)(i,36248,3),Object(o.a)(i,6408,4),Object(o.a)(i,36249,4),Object(o.a)(i,6402,1),Object(o.a)(i,34041,1),Object(o.a)(i,6406,1),Object(o.a)(i,6409,1),Object(o.a)(i,6410,2),i),l=(a={},Object(o.a)(a,5126,4),Object(o.a)(a,5125,4),Object(o.a)(a,5124,4),Object(o.a)(a,5123,2),Object(o.a)(a,5122,2),Object(o.a)(a,5131,2),Object(o.a)(a,5120,1),Object(o.a)(a,5121,1),a);function f(t,e){var n=u[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(s.d)(t)&&n.gl2||n.gl1;return\"string\"==typeof r?t.getExtension(r):r}function h(t,e){var n=u[e];switch(n&&n.types[0]){case 5126:return t.getExtension(\"OES_texture_float_linear\");case 5131:return t.getExtension(\"OES_texture_half_float_linear\");default:return!0}}},4781:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return l}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(795),c=n(4638),l=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"clone\",value:function(){return(new this.constructor).copy(this).check()}},{key:\"copy\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check()}},{key:\"set\",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=(t<0||arguments.length<=t?void 0:arguments[t])||0;return this.check()}},{key:\"fromArray\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:\"toString\",value:function(){return this.formatString(c.c)}},{key:\"formatString\",value:function(t){for(var e=\"\",n=0;n<this.ELEMENTS;++n)e+=(n>0?\", \":\"\")+Object(c.f)(this[n],t);return\"\".concat(t.printTypes?this.constructor.name:\"\",\"[\").concat(e,\"]\")}},{key:\"toArray\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:\"toFloat32Array\",value:function(){return new Float32Array(this)}},{key:\"equals\",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(c.e)(this[e],t[e]))return!1;return!0}},{key:\"exactEquals\",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:\"negate\",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:\"inverse\",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=1/this[t];return this.check()}},{key:\"lerp\",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:\"min\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:\"max\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:\"clamp\",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:\"validate\",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:\"check\",value:function(){if(c.c.debug&&!this.validate(this))throw new Error(\"math.gl: \".concat(this.constructor.name,\" some fields set to invalid numbers'\"));return this}},{key:\"sub\",value:function(t){return this.subtract(t)}},{key:\"setScalar\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:\"addScalar\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:\"subScalar\",value:function(t){return this.addScalar(-t)}},{key:\"multiplyScalar\",value:function(t){return this.scale(t)}},{key:\"divideScalar\",value:function(t){return this.scale(1/t)}},{key:\"clampScalar\",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}}]),e}(Object(u.a)(Array))},4782:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return h}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(19),u=n(4725),c=n(4638),l=n(4610),f=[0,0,0],h=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,e),t=Object(a.a)(this,Object(o.a)(e).call(this,3)),Array.isArray(n)&&1===arguments.length?t.copy(n):t.set(n,i,s),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:\"angle\",value:function(t){return l.a(this,t)}},{key:\"cross\",value:function(t){return l.b(this,this,t),this.check()}},{key:\"rotateX\",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?f:n;return l.e(this,this,r,e),this.check()}},{key:\"rotateY\",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?f:n;return l.f(this,this,r,e),this.check()}},{key:\"rotateZ\",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?f:n;return l.g(this,this,r,e),this.check()}},{key:\"operation\",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.apply(void 0,[this,this].concat(n)),this.check()}},{key:\"ELEMENTS\",get:function(){return 3}},{key:\"z\",get:function(){return this[2]},set:function(t){return this[2]=Object(c.a)(t)}}]),e}(u.a)},4783:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return l}));var r=n(16),i=n(17),a=\"none\",o=\"pending\",s=\"in_progress\",u=\"ended\";function c(){}var l=function(){function t(e){Object(r.a)(this,t),this._startTime=null,this._state=a,this.duration=1,this.easing=function(t){return t},this.onStart=c,this.onUpdate=c,this.onInterrupt=c,this.onEnd=c,Object.assign(this,e)}return Object(i.a)(t,[{key:\"start\",value:function(t){this.inProgress&&this.onInterrupt(this),Object.assign(this,t),this._setState(o)}},{key:\"cancel\",value:function(){this.inProgress&&(this.onInterrupt(this),this._setState(a))}},{key:\"update\",value:function(t){if(this.state===o&&(this._startTime=t,this._setState(s)),this.state===s){var e=!1,n=(t-this._startTime)/this.duration;return n>=1&&(n=1,e=!0),this.time=this.easing(n),this.onUpdate(this),e&&this._setState(u),!0}return!1}},{key:\"_setState\",value:function(t){if(this._state!==t)switch(this._state=t,t){case o:this.onStart(this);break;case u:this.onEnd(this)}}},{key:\"state\",get:function(){return this._state}},{key:\"inProgress\",get:function(){return this._state===o||this._state===s}}]),t}()},4784:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return v})),n.d(e,\"b\",(function(){return g}));var r=n(4598),i=n(4616),a=n(4647),o=n(4719),s=n(4601),u=n(4785),c=[0,0,0,0],l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h=[0,0,0],d=[0,0,0],v=12,p=Object(o.a)((function(t){var e=t.viewport,n=t.devicePixelRatio,o=t.coordinateSystem,f=t.coordinateOrigin,d=t.wrapLongitude,p=e.zoom,g=function(t){var e,n=t.viewport,o=t.coordinateSystem,s=t.coordinateOrigin,f=t.coordinateZoom,h=n.viewMatrixUncentered,d=n.viewMatrix,p=n.projectionMatrix,g=n.viewProjectionMatrix,b=n.cameraPosition,y=function(t){switch(t){case a.a.LNGLAT:case a.a.LNGLAT_EXPERIMENTAL:default:return u.a.LNGLAT_AUTO_OFFSET;case a.a.LNGLAT_DEPRECATED:return u.a.LNG_LAT;case a.a.METER_OFFSETS:case a.a.METERS:return u.a.METER_OFFSETS;case a.a.LNGLAT_OFFSETS:return u.a.LNGLAT_OFFSETS;case a.a.IDENTITY:return u.a.IDENTITY}}(o),m=s;if(y===u.a.LNGLAT_AUTO_OFFSET)if(f<v)y=u.a.LNG_LAT;else{var _=Math.fround(n.longitude),O=Math.fround(n.latitude);m=[_,O]}y===u.a.IDENTITY&&(m=[Math.fround(n.position[0]),Math.fround(n.position[1])]);switch(m[2]=m[2]||0,y){case u.a.LNG_LAT:e=c;break;case u.a.LNGLAT_OFFSETS:case u.a.METER_OFFSETS:case u.a.LNGLAT_AUTO_OFFSET:case u.a.IDENTITY:var j=n.projectPosition(m,Math.pow(2,f));b=[b[0]-j[0],b[1]-j[1],b[2]-j[2]],j[3]=1,e=i.c([],j,g),d=h||d,g=r.g([],p,d),g=r.g([],g,l);break;default:throw new Error(\"Unknown projection mode\")}return{viewMatrix:d,viewProjectionMatrix:g,projectionCenter:e,cameraPosCommon:b,shaderCoordinateSystem:y,shaderCoordinateOrigin:m}}({coordinateSystem:o,coordinateOrigin:f,coordinateZoom:p,viewport:e}),b=g.projectionCenter,y=g.viewProjectionMatrix,m=g.cameraPosCommon,_=g.shaderCoordinateSystem,O=g.shaderCoordinateOrigin;Object(s.a)(y,\"Viewport missing modelViewProjectionMatrix\");var j=e.getDistanceScales(),k=[e.width*n,e.height*n],w={project_uCoordinateSystem:_,project_uCenter:b,project_uWrapLongitude:d,project_uAntimeridian:(e.longitude||0)-180,project_uViewportSize:k,project_uDevicePixelRatio:n,project_uFocalDistance:e.focalDistance||1,project_uCommonUnitsPerMeter:j.pixelsPerMeter,project_uCommonUnitsPerWorldUnit:j.pixelsPerMeter,project_uCommonUnitsPerWorldUnit2:h,project_uScale:e.scale,project_uViewProjectionMatrix:y,project_uCameraPosition:m},x=e.getDistanceScales(O);switch(_){case u.a.METER_OFFSETS:w.project_uCommonUnitsPerWorldUnit=x.pixelsPerMeter,w.project_uCommonUnitsPerWorldUnit2=x.pixelsPerMeter2;break;case u.a.LNGLAT_AUTO_OFFSET:w.project_uCoordinateOrigin=O;case u.a.LNG_LAT:case u.a.LNGLAT_OFFSETS:w.project_uCommonUnitsPerWorldUnit=x.pixelsPerDegree,w.project_uCommonUnitsPerWorldUnit2=x.pixelsPerDegree2;break;case u.a.IDENTITY:w.project_uCoordinateOrigin=O}return w}));function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.viewport,n=t.devicePixelRatio,r=void 0===n?1:n,i=t.modelMatrix,o=void 0===i?null:i,u=t.coordinateSystem,c=void 0===u?a.a.LNGLAT:u,l=t.coordinateOrigin,h=void 0===l?d:l,v=t.wrapLongitude,g=void 0!==v&&v;t.projectionMode,t.positionOrigin;return Object(s.a)(e),Object.assign({project_uModelMatrix:o||f},p({viewport:e,devicePixelRatio:r,coordinateSystem:c,coordinateOrigin:h,wrapLongitude:g}))}},4785:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return r}));var r={LNG_LAT:1,LNGLAT_AUTO_OFFSET:4,METER_OFFSETS:2,LNGLAT_OFFSETS:3,IDENTITY:0}},4786:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return r})),n.d(e,\"a\",(function(){return i}));var r=\"vs\",i=\"fs\"},4787:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return r}));var r={NO_STATE:\"Awaiting state\",MATCHED:\"Matched. State transferred from previous layer\",INITIALIZED:\"Initialized\",AWAITING_GC:\"Discarded. Awaiting garbage collection\",AWAITING_FINALIZATION:\"No longer matched. Awaiting garbage collection\",FINALIZED:\"Finalized! Awaiting garbage collection\"}},4788:function(t,e,n){\"use strict\";(function(t){var r=n(4595),i=n(4850);n.d(e,\"b\",(function(){return i.a}));var a=n(4851);n.d(e,\"a\",(function(){return a.a}));var o={self:\"undefined\"!=typeof self&&self,window:\"undefined\"!=typeof window&&window,global:void 0!==t&&t};(o.global||o.self||o.window).mathgl={config:r.a}}).call(this,n(153))},4789:function(t,e,n){\"use strict\";function r(t,e,n){var r=e[0],i=e[1],a=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/a,t[1]=(n[1]*r+n[5]*i)/a,t}function i(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a||1;return t[0]=(n[0]*r+n[4]*i+n[8]*a)/o,t[1]=(n[1]*r+n[5]*i+n[9]*a)/o,t[2]=(n[2]*r+n[6]*i+n[10]*a)/o,t}function a(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}n.d(e,\"a\",(function(){return r})),n.d(e,\"c\",(function(){return i})),n.d(e,\"b\",(function(){return a}))},4790:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return h}));var r=n(16),i=n(17),a=n(19),o=n(178),s=n(80),u=n(795),c=n(4595),l=n(4670);function f(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(a.a)(n,t);var e=f(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:\"clone\",value:function(){return(new this.constructor).copy(this)}},{key:\"from\",value:function(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}},{key:\"fromArray\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check()}},{key:\"to\",value:function(t){return t===this?this:Object(c.d)(t)?this.toArray(t):this.toObject(t)}},{key:\"toTarget\",value:function(t){return t?this.to(t):this}},{key:\"toArray\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:\"toFloat32Array\",value:function(){return new Float32Array(this)}},{key:\"toString\",value:function(){return this.formatString(c.a)}},{key:\"formatString\",value:function(t){for(var e=\"\",n=0;n<this.ELEMENTS;++n)e+=(n>0?\", \":\"\")+Object(c.c)(this[n],t);return\"\".concat(t.printTypes?this.constructor.name:\"\",\"[\").concat(e,\"]\")}},{key:\"equals\",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!Object(c.b)(this[e],t[e]))return!1;return!0}},{key:\"exactEquals\",value:function(t){if(!t||this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:\"negate\",value:function(){for(var t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}},{key:\"lerp\",value:function(t,e,n){void 0===n&&(n=e,e=t,t=this);for(var r=0;r<this.ELEMENTS;++r){var i=t[r];this[r]=i+n*(e[r]-i)}return this.check()}},{key:\"min\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}},{key:\"max\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}},{key:\"clamp\",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),e[n]);return this.check()}},{key:\"add\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]+=a[o];return this.check()}},{key:\"subtract\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]-=a[o];return this.check()}},{key:\"scale\",value:function(t){if(Array.isArray(t))return this.multiply(t);for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:\"sub\",value:function(t){return this.subtract(t)}},{key:\"setScalar\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}},{key:\"addScalar\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}},{key:\"subScalar\",value:function(t){return this.addScalar(-t)}},{key:\"multiplyScalar\",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}},{key:\"divideScalar\",value:function(t){return this.scale(1/t)}},{key:\"clampScalar\",value:function(t,e){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),e);return this.check()}},{key:\"multiplyByScalar\",value:function(t){return this.scale(t)}},{key:\"check\",value:function(){if(c.a.debug&&!this.validate())throw new Error(\"math.gl: \".concat(this.constructor.name,\" some fields set to invalid numbers'\"));return this}},{key:\"validate\",value:function(){for(var t=this.length===this.ELEMENTS,e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}},{key:\"ELEMENTS\",get:function(){return Object(l.a)(!1),0}},{key:\"RANK\",get:function(){return Object(l.a)(!1),0}},{key:\"elements\",get:function(){return this}}]),n}(Object(u.a)(Array))},4791:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return a}));var r=n(16),i=n(17),a=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t);var i=n.id,a=void 0===i?\"pass\":i;this.id=a,this.gl=e,this.props={},Object.assign(this.props,n)}return Object(i.a)(t,[{key:\"setProps\",value:function(t){Object.assign(this.props,t)}},{key:\"render\",value:function(){}},{key:\"cleanup\",value:function(){}}]),t}()},4792:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f}));var r=n(16),i=n(17),a=n(178),o=n(80),s=n(229),u=n(19),c=n(4689),l=n(5025),f=function(t){function e(){return Object(r.a)(this,e),Object(a.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(i.a)(e,[{key:\"render\",value:function(t){t.pickingFBO?this.drawPickingBuffer(t):Object(s.a)(Object(o.a)(e.prototype),\"render\",this).call(this,t)}},{key:\"drawPickingBuffer\",value:function(t){var e=this,n=t.layers,r=t.viewports,i=t.onViewportActive,a=t.pickingFBO,o=t.effectProps,s=t.deviceRect,u=s.x,c=s.y,f=s.width,h=s.height,d=t.redrawReason,v=void 0===d?\"\":d,p=this.gl;return Object(l.a)(p,{framebuffer:a,scissorTest:!0,scissor:[u,c,f,h],clearColor:[0,0,0,0]},(function(){e.drawLayers({layers:n,viewports:r,onViewportActive:i,pass:\"picking\",redrawReason:v,effectProps:o,parameters:{blend:!0,blendFunc:[1,0,32771,0],blendEquation:32774,blendColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]}})}))}},{key:\"shouldDrawLayer\",value:function(t,e){var n=this.props.layerFilter,r=!t.isComposite&&t.props.visible&&t.props.pickable;return r&&n&&(r=n({layer:t,viewport:e,isPicking:!0})),r}},{key:\"getModuleParameters\",value:function(t,e,n){var r=Object.assign(Object.create(t.props),{viewport:t.context.viewport,pickingActive:1,devicePixelRatio:this.props.pixelRatio});return Object.assign(r,n),r}},{key:\"getLayerParameters\",value:function(t,e,n,r){var i=Object.assign({},t.props.parameters||{},r);return Object.assign(i,{viewport:n,blendColor:[0,0,0,(e+1)/255]}),i}}]),e}(c.a)},4793:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i}));var r=n(4601);function i(t){return Object(r.a)(\"boolean\"==typeof t,\"Invalid useDevicePixels\"),t&&\"undefined\"!=typeof window?window.devicePixelRatio:1}},4794:function(t,e,n){\"use strict\";var r=n(4899),i=n(4599),a=n(4840);if(r.a.deck&&\"7.1.10\"!==r.a.deck.VERSION)throw new Error(\"deck.gl - multiple versions detected: \".concat(r.a.deck.VERSION,\" vs \").concat(\"7.1.10\"));r.a.deck||(i.a.log(0,\"deck.gl \".concat(\"7.1.10\",\" - \").concat(\"set deck.log.priority=1 (or higher) to trace attribute updates\"))(),r.a.deck=r.a.deck||{VERSION:\"7.1.10\",version:\"7.1.10\",log:i.a},Object(a.a)()),e.a=r.a.deck},4835:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return dt}));var r=n(16),i=n(17),a=n(4758),o=n(4601),s=n(4727),u=n(4706),c=n(4661),l=n(4599),f=n(4627),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw=\"Initial render\",this._needsUpdate=!0,this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractiveStateChange:e.onInteractiveStateChange},Object.seal(this),this.setProps(e)}return Object(i.a)(t,[{key:\"finalize\",value:function(){for(var t in this.controllers)this.controllers[t]&&this.controllers[t].finalize();this.controllers={}}},{key:\"needsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:\"setNeedsUpdate\",value:function(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}},{key:\"updateViewStates\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(\"time\"in t)for(var e in this.controllers){var n=this.controllers[e];n&&n.updateTransition(t.time)}}},{key:\"getViewports\",value:function(t){return t?this._viewports.filter((function(e){return e.containsPixel(t)})):this._viewports}},{key:\"getViews\",value:function(){var t={};return this.views.forEach((function(e){t[e.id]=e})),t}},{key:\"getView\",value:function(t){return\"string\"==typeof t?this.views.find((function(e){return e.id===t})):t}},{key:\"getViewState\",value:function(t){var e=this.getView(t),n=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(n):n}},{key:\"getViewport\",value:function(t){return this._viewportMap[t]}},{key:\"project\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{topLeft:!0},n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.contains(t,e))return i.project(t,e)}return null}},{key:\"unproject\",value:function(t,e){for(var n=this.getViewports(),r=n.length-1;r>=0;--r){var i=n[r];if(i.containsPixel(t,e))return i.unproject(t)}return null}},{key:\"setProps\",value:function(t){\"views\"in t&&this._setViews(t.views),\"viewState\"in t&&this._setViewState(t.viewState),(\"width\"in t||\"height\"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}},{key:\"_update\",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:\"_setSize\",value:function(t,e){Object(o.a)(Number.isFinite(t)&&Number.isFinite(e)),t===this.width&&e===this.height||(this.width=t,this.height=e,this.setNeedsUpdate(\"Size changed\"))}},{key:\"_setViews\",value:function(t){t=Object(f.b)(t,{filter:Boolean}).map((function(t){return t instanceof c.a?new u.a({viewportInstance:t}):t})),this._diffViews(t,this.views)&&this.setNeedsUpdate(\"views changed\"),this.views=t}},{key:\"_setViewState\",value:function(t){t?(!Object(s.a)(t,this.viewState)&&this.setNeedsUpdate(\"viewState changed\"),this.viewState=t):l.a.warn(\"setting null viewState\")()}},{key:\"_onViewStateChange\",value:function(t,e){e.viewId=t,this._eventCallbacks.onViewStateChange(e)}},{key:\"_createController\",value:function(t){return new(0,t.type)(Object.assign({eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},t))}},{key:\"_updateController\",value:function(t,e,n,r){if(t.controller){var i=Object.assign({},t.controller,e,{id:t.id,x:n.x,y:n.y,width:n.width,height:n.height});return r?r.setProps(i):r=this._createController(i),r}return null}},{key:\"_rebuildViewports\",value:function(){var t=this.width,e=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=n.length;i--;){var a=n[i],o=this.getViewState(a),s=a.makeViewport({width:t,height:e,viewState:o});this.controllers[a.id]=this._updateController(a,o,s,r[a.id]),this._viewports.unshift(s)}for(var u in r)r[u]&&!this.controllers[u]&&r[u].finalize();this._buildViewportMap()}},{key:\"_buildViewportMap\",value:function(){var t=this;this._viewportMap={},this._viewports.forEach((function(e){e.id&&(t._viewportMap[e.id]=t._viewportMap[e.id]||e)}))}},{key:\"_diffViews\",value:function(t,e){return t.length!==e.length||t.some((function(n,r){return!t[r].equals(e[r])}))}}]),t}(),d=n(4723),v=n(4730),p=function(){function t(){Object(r.a)(this,t),this.effects=[],this._needsRedraw=\"Initial render\",this.defaultLightingEffect=new v.a,this.needApplyDefaultLighting=!1}return Object(i.a)(t,[{key:\"setProps\",value:function(t){\"effects\"in t&&(t.effects.length===this.effects.length&&Object(s.a)(t.effects,this.effects)||(this.setEffects(t.effects),this._needsRedraw=\"effects changed\")),this.checkLightingEffect()}},{key:\"needsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}},{key:\"getEffects\",value:function(){var t=this.effects;return this.needApplyDefaultLighting&&(t=this.effects.slice()).push(this.defaultLightingEffect),t}},{key:\"finalize\",value:function(){this.cleanup()}},{key:\"setEffects\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=t}},{key:\"cleanup\",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.cleanup()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.effects.length=0}},{key:\"checkLightingEffect\",value:function(){var t=!1,e=!0,n=!1,r=void 0;try{for(var i,a=this.effects[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){if(i.value instanceof v.a){t=!0;break}}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}this.needApplyDefaultLighting=!t}}]),t}(),g=n(4668),b=n(4759),y=n(4669),m=n(4996),_=n(4793),O=n(4792),j={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function k(t){var e=t.pickedColors,n=t.layers,r=t.deviceX,i=t.deviceY,a=t.deviceRadius,o=t.deviceRect;if(e){for(var s=o.x,u=o.y,c=o.width,f=o.height,h=a*a,d=-1,v=0,p=0;p<f;p++){var g=p+u-i,b=g*g;if(b>h)v+=4*c;else for(var y=0;y<c;y++){if(e[v+3]-1>=0){var m=y+s-r,_=m*m+b;_<=h&&(h=_,d=v)}v+=4}}if(d>=0){var O=e[d+3]-1,k=e.slice(d,d+4),w=n[O];if(w){var x=w.decodePickingColor(k);return{pickedColor:k,pickedLayer:w,pickedObjectIndex:x}}l.a.error(\"Picked non-existent layer. Is picking buffer corrupt?\")()}}return j}function w(t){var e=t.pickInfo,n=t.lastPickedInfo,r=t.mode,i=t.layers,a=t.viewports,o=t.x,s=t.y,u=t.deviceX,c=t.deviceY,l=t.pixelRatio,f=e.pickedColor,h=e.pickedLayer,d=e.pickedObjectIndex,v=h?[h]:[];if(\"hover\"===r){var p=n.index,g=n.layerId,b=h&&h.props.id;if(b!==g||d!==p){if(b!==g){var y=i.find((function(t){return t.props.id===g}));y&&v.unshift(y)}n.layerId=b,n.index=d,n.info=null}}var m={viewports:a}.viewports[0],_=m&&m.unproject([o,s]),O={color:null,layer:null,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:_,lngLat:_,devicePixel:[u,c],pixelRatio:l},j=new Map;return j.set(null,O),v.forEach((function(t){var e=Object.assign({},O);if(t===h&&(e.color=f,e.index=d,e.picked=!0),e=x({layer:t,info:e,mode:r}),t===h&&\"hover\"===r&&(n.info=e),e&&j.set(e.layer.id,e),\"hover\"===r){var i=t.props.autoHighlight&&h===t?f:null;t.setModuleParameters({pickingSelectedColor:i}),t.setNeedsRedraw()}})),j}function x(t){for(var e=t.layer,n=t.info,r=t.mode;e&&n;){var i=n.layer||e;n.layer=e,n=e.pickLayer({info:n,mode:r,sourceLayer:i}),e=e.parent}return n}var E=function(){function t(e){Object(r.a)(this,t),this.gl=e,this.pickingFBO=null,this.pickLayersPass=new O.a(e),this.pixelRatio=null,this.layerFilter=null,this.pickingEvent=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return Object(i.a)(t,[{key:\"setProps\",value:function(t){\"useDevicePixels\"in t&&(this.pixelRatio=Object(_.a)(t.useDevicePixels)),\"layerFilter\"in t&&(this.layerFilter=t.layerFilter),this.pickLayersPass.setProps({pixelRatio:this.pixelRatio,layerFilter:this.layerFilter})}},{key:\"pickObject\",value:function(t){var e=t.x,n=t.y,r=t.mode,i=t.radius,a=void 0===i?0:i,o=t.layers,s=t.viewports,u=t.activateViewport,c=t.depth,l=void 0===c?1:c,f=t.event,h=void 0===f?null:f;this.pickingEvent=h;var d=this.pickClosestObject({x:e,y:n,radius:a,layers:o,mode:r,depth:l,viewports:s,onViewportActive:u});return this.pickingEvent=null,d}},{key:\"pickObjects\",value:function(t){var e=t.x,n=t.y,r=t.width,i=t.height,a=t.layers,o=t.viewports,s=t.activateViewport;return this.pickVisibleObjects({x:e,y:n,width:r,height:i,layers:a,mode:\"pickObjects\",viewports:o,onViewportActive:s})}},{key:\"getLastPickedObject\",value:function(t){var e=t.x,n=t.y,r=t.layers,i=t.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,o=a&&a.layer&&a.layer.id,s=o?r.find((function(t){return t.id===o})):null,u=i[0]&&i[0].unproject([e,n]),c={x:e,y:n,coordinate:u,lngLat:u,layer:s};return s?Object.assign({},a,c):Object.assign(c,{color:null,object:null,index:-1})}},{key:\"updatePickingBuffer\",value:function(){var t=this.gl;return this.pickingFBO||(this.pickingFBO=new y.a(t)),this.pickingFBO.resize({width:t.canvas.width,height:t.canvas.height}),this.pickingFBO}},{key:\"pickClosestObject\",value:function(t){var e=t.layers,n=t.viewports,r=t.x,i=t.y,a=t.radius,o=t.depth,s=void 0===o?1:o,u=t.mode,c=t.onViewportActive;this.updatePickingBuffer();for(var l,f=this.pixelRatio,h=Math.round(r*f),d=Math.round(this.gl.canvas.height-i*f),v=Math.round(a*f),p=this.pickingFBO,g=p.width,b=p.height,y=this.getPickingRect({deviceX:h,deviceY:d,deviceRadius:v,deviceWidth:g,deviceHeight:b}),m=[],_={},O=0;O<s;O++){var j=k({pickedColors:y&&this.drawAndSamplePickingBuffer({layers:e,viewports:n,onViewportActive:c,deviceRect:y,redrawReason:u}),layers:e,deviceX:h,deviceY:d,deviceRadius:v,deviceRect:y});if(j.pickedColor&&O+1<s){var x=j.pickedColor[3]-1;_[x]||(_[x]=e[x].copyPickingColors()),e[x].clearPickingColor(j.pickedColor)}l=w({pickInfo:j,lastPickedInfo:this.lastPickedInfo,mode:u,layers:e,viewports:n,x:r,y:i,deviceX:h,deviceY:d,pixelRatio:f});var E=this.callLayerPickingCallbacks(l,u);if(E&&E.forEach((function(t){return m.push(t)})),!j.pickedColor)break}return Object.keys(_).forEach((function(t){return e[t].restorePickingColors(_[t])})),{result:m,emptyInfo:l&&l.get(null)}}},{key:\"pickVisibleObjects\",value:function(t){var e=t.layers,n=t.viewports,r=t.x,i=t.y,a=t.width,o=t.height,s=t.mode,u=t.onViewportActive;this.updatePickingBuffer();var c=this.pixelRatio,f=Math.round(r*c),h=Math.round(this.gl.canvas.height-i*c),d=Math.round((r+a)*c),v=Math.round(this.gl.canvas.height-(i+o)*c),p={x:f,y:v,width:d-f,height:h-v},g=function(t){var e=t.pickedColors,n=t.layers,r=new Map;if(e)for(var i=0;i<e.length;i+=4){var a=e[i+3]-1;if(a>=0){var o=e.slice(i,i+4),s=o.join(\",\");if(!r.has(s)){var u=n[a];u?r.set(s,{pickedColor:o,pickedLayer:u,pickedObjectIndex:u.decodePickingColor(o)}):l.a.error(\"Picked non-existent layer. Is picking buffer corrupt?\")()}}}return Array.from(r.values())}({pickedColors:this.drawAndSamplePickingBuffer({layers:e,viewports:n,onViewportActive:u,deviceRect:p,redrawReason:s}),layers:e}),b=new Map;return g.forEach((function(t){var e={color:t.pickedColor,layer:null,index:t.pickedObjectIndex,picked:!0,x:r,y:i,width:a,height:o,pixelRatio:c};e=x({layer:t.pickedLayer,info:e,mode:s}),b.has(e.object)||b.set(e.object,e)})),Array.from(b.values())}},{key:\"drawAndSamplePickingBuffer\",value:function(t){var e=t.layers,n=t.viewports,r=t.onViewportActive,i=t.deviceRect,a=t.redrawReason;if(Object(o.a)(i),Object(o.a)(Number.isFinite(i.width)&&i.width>0,\"`width` must be > 0\"),Object(o.a)(Number.isFinite(i.height)&&i.height>0,\"`height` must be > 0\"),e.filter((function(t){return t.isPickable()})).length<1)return null;var s=this.pickingFBO;this.pickLayersPass.render({layers:e,viewports:n,onViewportActive:r,pickingFBO:s,deviceRect:i,redrawReason:a,effectProps:{lightSources:{}}});var u=i.x,c=i.y,l=i.width,f=i.height,h=new Uint8Array(l*f*4);return Object(m.b)(s,{sourceX:u,sourceY:c,sourceWidth:l,sourceHeight:f,target:h}),h}},{key:\"getPickingRect\",value:function(t){var e=t.deviceX,n=t.deviceY,r=t.deviceRadius,i=t.deviceWidth,a=t.deviceHeight;if(!(e>=0&&n>=0&&e<i&&n<a))return null;var o=Math.max(0,e-r),s=Math.max(0,n-r);return{x:o,y:s,width:Math.min(i,e+r)-o+1,height:Math.min(a,n+r)-s+1}}},{key:\"callLayerPickingCallbacks\",value:function(t,e){var n=[],r=this.pickingEvent;return t.forEach((function(t){if(t.layer){var i=!1;switch(e){case\"hover\":i=t.layer.onHover(t,r);break;case\"query\":break;default:throw new Error(\"unknown pick type\")}i||n.push(t)}})),n}}]),t}(),T=n(4794),P=n(25),S=n(66),A=n.n(S),L=n(144),C=n(1504),I=n(4892),M=n(4891);function R(t){var e=t.width,n=t.height,r=t.webgl1,i=t.webgl2,a=t.onError;if(i&&!r)return a(\"headless-gl does not support WebGL2\");if(!M.c)return a(\"Failed to create WebGL context in Node.js, headless gl not available\");var o=Object(M.c)(e,n,t);return o||a(\"Failed to create WebGL context in Node.js, headless gl returned null\")}var F,N=n(4776),D=N.a&&\"undefined\"!=typeof document,B=D&&\"complete\"===document.readyState;function U(){return F||(F=D?new Promise((function(t,e){if(D&&\"complete\"===document.readyState)return B=!0,void t(document);window.onload=function(){B=!0,t(document)}})):Promise.resolve({})),F}function V(t){var e,n=t.canvas,r=t.width,i=t.height,a=t.onError,o=void 0===a?function(){}:a;return\"string\"==typeof n?(B||o(\"createGLContext called on canvas '\".concat(n,\"' before page was loaded\")),e=document.getElementById(n)):e=n||function(t){var e=t.width,n=void 0===e?800:e,r=t.height,i=void 0===r?600:r,a=t.id,o=void 0===a?\"gl-canvas\":a,s=t.insert,u=void 0===s||s,c=document.createElement(\"canvas\");if(c.id=o,c.style.width=Number.isFinite(n)?\"\".concat(n,\"px\"):\"100%\",c.style.height=Number.isFinite(i)?\"\".concat(i,\"px\"):\"100%\",u){var l=document.body;l.insertBefore(c,l.firstChild)}return c}({id:\"lumagl-canvas\",width:r,height:i,onError:o}),e}function z(t,e){var n=e.onError,r=void 0===n?function(t){return null}:n,i=function(t){return r(\"WebGL context: \".concat(t.statusMessage||\"error\"))};t.addEventListener(\"webglcontextcreationerror\",i,!1);var a=e.webgl1,o=void 0===a||a,s=e.webgl2,u=void 0===s||s,c=null;return u&&(c=(c=c||t.getContext(\"webgl2\",e))||t.getContext(\"experimental-webgl2\",e)),o&&(c=(c=c||t.getContext(\"webgl\",e))||t.getContext(\"experimental-webgl\",e)),t.removeEventListener(\"webglcontextcreationerror\",i,!1),c||r(\"Failed to create \".concat(u&&!o?\"WebGL2\":\"WebGL\",\" context\"))}var G=n(4889),H=n(4721);function W(t){var e=\"undefined\"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}var q=n(4685);function X(t){return Boolean(t&&2===t._version)}var Y={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function K(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e=Object.assign({},Y,e),r=n.width,i=n.height;function a(t){if(e.throwOnError)throw new Error(t);return null}if(N.a){var o=e,s=o.canvas,u=V({canvas:s,width:r,height:i,onError:a});t=z(u,e)}else t=R(Object(C.a)({},e,{width:r,height:i,onError:a}));return t?(Q(t=Z(t,e)),t):null}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t._instrumented)return t;t._version=t._version||J(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var n=e=Object.assign({},Y,e),r=n.manageState,i=n.debug;return r&&Object(I.a)(t,{copyState:!1,log:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return H.a.log.apply(H.a,[1].concat(e))()}}),N.a&&i&&(q.a.makeDebugContext?(t=q.a.makeDebugContext(t,e),H.a.priority=Math.max(H.a.priority,1)):H.a.warn('WebGL debug mode not activated. import \"@luma.gl/debug\" to enable.')()),t._instrumented=!0,t}function Q(t){var e=X(t)?\"WebGL2\":\"WebGL1\",n=function(t){var e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension(\"WEBGL_debug_renderer_info\");return{vendor:r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),r=n?\"(\".concat(n.vendor,\",\").concat(n.renderer,\")\"):\"\",i=t.debug?\" debug\":\"\";H.a.info(1,\"\".concat(e).concat(i,\" context \").concat(r))()}function J(t){return void 0!==M.a&&t instanceof M.a?2:1}function $(t,e,n){var r=\"width\"in n?n.width:t.canvas.clientWidth||t.canvas.width||1,i=\"height\"in n?n.height:t.canvas.clientHeight||t.canvas.height||1;t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};var a=t.luma.canvasSizeInfo;if(a.clientWidth!==r||a.clientHeight!==i||a.devicePixelRatio!==e){var o=e,s=Math.floor(r*o),u=Math.floor(i*o);t.canvas.width=s,t.canvas.height=u,t.drawingBufferWidth===s&&t.drawingBufferHeight===u||(H.a.warn(\"Device pixel ratio clamped\")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}var tt=n(4994),et=n(5021);function nt(t){return\"undefined\"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}var rt=n(5022),it=n(4777),at=0,ot=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t);var n=e.onCreateContext,i=void 0===n?function(t){return K(t)}:n,a=e.onAddHTML,o=void 0===a?null:a,s=e.onInitialize,u=void 0===s?function(){}:s,c=e.onRender,l=void 0===c?function(){}:c,f=e.onFinalize,h=void 0===f?function(){}:f,d=e.gl,v=void 0===d?null:d,p=e.glOptions,g=void 0===p?{}:p,b=e.debug,y=void 0!==b&&b,m=e.createFramebuffer,_=void 0!==m&&m,O=e.autoResizeViewport,j=void 0===O||O,k=e.autoResizeDrawingBuffer,w=void 0===k||k,x=e.stats,E=void 0===x?tt.a.get(\"animation-loop-\".concat(at++)):x,T=e.useDevicePixels,P=void 0===T||T;\"useDevicePixelRatio\"in e&&(H.a.deprecated(\"useDevicePixelRatio\",\"useDevicePixels\")(),P=e.useDevicePixelRatio),this.props={onCreateContext:i,onAddHTML:o,onInitialize:u,onRender:l,onFinalize:h,gl:v,glOptions:g,debug:y,createFramebuffer:_},this.gl=v,this.needsRedraw=null,this.timeline=null,this.stats=E,this.cpuTime=this.stats.get(\"CPU Time\"),this.gpuTime=this.stats.get(\"GPU Time\"),this.frameRate=this.stats.get(\"Frame Rate\"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:j,autoResizeDrawingBuffer:w,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var e;return Object(i.a)(t,[{key:\"delete\",value:function(){this.stop(),this._setDisplay(null)}},{key:\"setNeedsRedraw\",value:function(t){return Object(G.a)(\"string\"==typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:\"setProps\",value:function(t){return\"autoResizeViewport\"in t&&(this.autoResizeViewport=t.autoResizeViewport),\"autoResizeDrawingBuffer\"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),\"useDevicePixels\"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:\"start\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running||(this._running=!0,U().then((function(){return!t._running||t._initialized?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t._gpuTimeQuery=et.a.isSupported(t.gl,[\"timers\"])?new et.a(t.gl):null,t._initialized=!0,t.onInitialize(t.animationProps))})).then((function(e){t._running&&(t._addCallbackData(e||{}),!1!==e&&t._startLoop())}))),this}},{key:\"redraw\",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:\"stop\",value:function(){return this._running&&(this._finalizeCallbackData(),nt(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:\"attachTimeline\",value:function(t){return this.timeline=t,this.timeline}},{key:\"detachTimeline\",value:function(){this.timeline=null}},{key:\"waitForRender\",value:function(){var t=this;return this.setNeedsRedraw(\"waitForRender\"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(e){t._resolveNextFrame=e}))),this._nextFramePromise}},{key:\"toDataURL\",value:(e=Object(L.a)(A.a.mark((function t(){return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setNeedsRedraw(\"toDataURL\"),t.next=3,this.waitForRender();case 3:return t.abrupt(\"return\",this.gl.canvas.toDataURL());case 4:case\"end\":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:\"onCreateContext\",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:\"onInitialize\",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:\"onRender\",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:\"onFinalize\",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:\"getHTMLControlValue\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(t);return n?Number(n.value):e}},{key:\"setViewParameters\",value:function(){return H.a.removed(\"AnimationLoop.setViewParameters\",\"AnimationLoop.setProps\")(),this}},{key:\"_startLoop\",value:function(){var t=this;nt(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function e(){t._running&&(t.redraw(),t._animationFrameId=t._requestAnimationFrame(e))}))}},{key:\"_setDisplay\",value:function(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}},{key:\"_requestAnimationFrame\",value:function(t){var e;this.display&&this.display.requestAnimationFrame(t)||(e=t,\"undefined\"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60))}},{key:\"_renderFrame\",value:function(){var t;this.display?(t=this.display)._renderFrame.apply(t,arguments):this.onRender.apply(this,arguments)}},{key:\"_clearNeedsRedraw\",value:function(){this.needsRedraw=null}},{key:\"_setupFrame\",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:\"_initializeCallbackData\",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:\"_updateCallbackData\",value:function(){var t=this._getSizeAndAspect(),e=t.width,n=t.height,r=t.aspect;e===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw(\"drawing buffer resized\"),r!==this.animationProps.aspect&&this.setNeedsRedraw(\"drawing buffer aspect changed\"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:\"_finalizeCallbackData\",value:function(){this.onFinalize(this.animationProps)}},{key:\"_addCallbackData\",value:function(t){\"object\"===Object(P.a)(t)&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:\"_createWebGLContext\",value:function(t){if(this.offScreen=t.canvas&&\"undefined\"!=typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Z(this.props.gl,t):this.onCreateContext(t),!Object(rt.c)(this.gl))throw new Error(\"AnimationLoop.onCreateContext - illegal context returned\");Object(it.b)(this.gl),this._createInfoDiv()}},{key:\"_createInfoDiv\",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement(\"div\");document.body.appendChild(t),t.style.position=\"relative\";var e=document.createElement(\"div\");e.style.position=\"absolute\",e.style.left=\"10px\",e.style.bottom=\"10px\",e.style.width=\"300px\",e.style.background=\"white\",t.appendChild(this.gl.canvas),t.appendChild(e);var n=this.props.onAddHTML(e);n&&(e.innerHTML=n)}}},{key:\"_getSizeAndAspect\",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:t>0&&e>0&&(n=t/e),{width:t,height:e,aspect:n}}},{key:\"_resizeViewport\",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:\"_resizeCanvasDrawingBuffer\",value:function(){this.autoResizeDrawingBuffer&&function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){var n=W(e.useDevicePixels);$(t,n,e)}else{var r=t.getExtension(\"STACKGL_resize_drawingbuffer\");r&&\"width\"in e&&\"height\"in e&&r.resize(e.width,e.height)}}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:\"_createFramebuffer\",value:function(){this.props.createFramebuffer&&(this.framebuffer=new y.a(this.gl))}},{key:\"_resizeFramebuffer\",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:\"_beginTimers\",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get(\"GPU Time\").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:\"_endTimers\",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:\"_startEventHandling\",value:function(){var t=this.gl.canvas;t&&(t.addEventListener(\"mousemove\",this._onMousemove),t.addEventListener(\"mouseleave\",this._onMouseleave))}},{key:\"_onMousemove\",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:\"_onMouseleave\",value:function(t){this.animationProps._mousePosition=null}}]),t}(),st=n(4995),ut=n(5071),ct=n(4839),lt=n(4647);function ft(){}var ht={id:\"deckgl-overlay\",width:\"100%\",height:\"100%\",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:\"none\",_animate:!1,onWebGLInitialized:ft,onResize:ft,onViewStateChange:ft,onBeforeRender:ft,onAfterRender:ft,onLoad:ft,_onMetrics:null,getCursor:function(t){return t.isDragging?\"grabbing\":\"grab\"},debug:!1,drawPickingColors:!1},dt=function(){function t(e){Object(r.a)(this,t),e=Object.assign({},ht,e),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=e.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerLeave=this._onPointerLeave.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),e.gl||\"undefined\"!=typeof document&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new ut.a({id:\"deck.gl\"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),this.animationLoop.start()}return Object(i.a)(t,[{key:\"finalize\",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.effectManager&&(this.effectManager.finalize(),this.effectManager=null),this.deckRenderer&&(this.deckRenderer.finalize(),this.deckRenderer=null),this.eventManager&&this.eventManager.destroy(),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:\"setProps\",value:function(t){this.stats.get(\"setProps Time\").timeStart(),\"onLayerHover\"in t&&l.a.removed(\"onLayerHover\",\"onHover\")(),\"onLayerClick\"in t&&l.a.removed(\"onLayerClick\",\"onClick\")(),t=Object.assign({},this.props,t),this.props=t,this._setCanvasSize(t);var e=Object.assign({},t,{views:this._getViews(this.props),width:this.width,height:this.height}),n=this._getViewState(t);n&&(e.viewState=n),this.viewManager&&this.viewManager.setProps(e),this.layerManager&&this.layerManager.setProps(e),this.effectManager&&this.effectManager.setProps(e),this.animationLoop&&this.animationLoop.setProps(e),this.deckRenderer&&this.deckRenderer.setProps(e),this.deckPicker&&this.deckPicker.setProps(e),this.stats.get(\"setProps Time\").timeEnd()}},{key:\"needsRedraw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return\"Deck._animate\";var e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),i=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return e=e||n||r||i||a}},{key:\"redraw\",value:function(t){if(this.layerManager){var e=t||this.needsRedraw({clearRedrawFlags:!0});e&&(this.stats.get(\"Redraw Count\").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}}},{key:\"getViews\",value:function(){return this.viewManager.views}},{key:\"getViewports\",value:function(t){return this.viewManager.getViewports(t)}},{key:\"pickObject\",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,a=t.layerIds,o=void 0===a?null:a;this.stats.get(\"Pick Count\").incrementCount(),this.stats.get(\"pickObject Time\").timeStart();var s=this.layerManager.getLayers({layerIds:o}),u=this.layerManager.activateViewport,c=this.deckPicker.pickObject({x:e,y:n,radius:i,layers:s,viewports:this.getViewports({x:e,y:n}),activateViewport:u,mode:\"query\",depth:1}).result;return this.stats.get(\"pickObject Time\").timeEnd(),c.length?c[0]:null}},{key:\"pickMultipleObjects\",value:function(t){var e=t.x,n=t.y,r=t.radius,i=void 0===r?0:r,a=t.layerIds,o=void 0===a?null:a,s=t.depth,u=void 0===s?10:s;this.stats.get(\"Pick Count\").incrementCount(),this.stats.get(\"pickMultipleObjects Time\").timeStart();var c=this.layerManager.getLayers({layerIds:o}),l=this.layerManager.activateViewport,f=this.deckPicker.pickObject({x:e,y:n,radius:i,layers:c,viewports:this.getViewports({x:e,y:n}),activateViewport:l,mode:\"query\",depth:u}).result;return this.stats.get(\"pickMultipleObjects Time\").timeEnd(),f}},{key:\"pickObjects\",value:function(t){var e=t.x,n=t.y,r=t.width,i=void 0===r?1:r,a=t.height,o=void 0===a?1:a,s=t.layerIds,u=void 0===s?null:s;this.stats.get(\"Pick Count\").incrementCount(),this.stats.get(\"pickObjects Time\").timeStart();var c=this.layerManager.getLayers({layerIds:u}),l=this.layerManager.activateViewport,f=this.deckPicker.pickObjects({x:e,y:n,width:i,height:o,layers:c,viewports:this.getViewports({x:e,y:n,width:i,height:o}),activateViewport:l});return this.stats.get(\"pickObjects Time\").timeEnd(),f}},{key:\"_createCanvas\",value:function(t){var e=t.canvas;(\"string\"==typeof e&&(e=document.getElementById(e),Object(o.a)(e)),e)||(e=document.createElement(\"canvas\"),(t.parent||document.body).appendChild(e));var n=t.id,r=t.style;return e.id=n,Object.assign(e.style,r),e}},{key:\"_setCanvasSize\",value:function(t){if(this.canvas){var e=t.width,n=t.height;(e||0===e)&&(e=Number.isFinite(e)?\"\".concat(e,\"px\"):e,this.canvas.style.width=e),(n||0===n)&&(n=Number.isFinite(n)?\"\".concat(n,\"px\"):n,this.canvas.style.position=\"absolute\",this.canvas.style.height=n)}}},{key:\"_updateCanvasSize\",value:function(){if(this._checkForCanvasSizeChange()){var t=this.width,e=this.height;this.viewManager.setProps({width:t,height:e}),this.props.onResize({width:this.width,height:this.height})}}},{key:\"_checkForCanvasSizeChange\",value:function(){var t=this.canvas;if(!t)return!1;var e=t.clientWidth||t.width,n=t.clientHeight||t.height;return(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,!0)}},{key:\"_createAnimationLoop\",value:function(t){var e=this,n=t.width,r=t.height,i=t.gl,a=t.glOptions,o=t.debug,s=t.useDevicePixels,u=t.autoResizeDrawingBuffer;return new ot({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:u,gl:i,onCreateContext:function(t){return K(Object.assign({},a,t,{canvas:e.canvas,debug:o}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:t.onBeforeRender,onAfterRender:t.onAfterRender})}},{key:\"_getViewState\",value:function(t){return t.viewState||this.viewState}},{key:\"_getViews\",value:function(t){var e=t.views||[new d.a({id:\"default-view\"})];return(e=Array.isArray(e)?e:[e]).length&&t.controller&&(e[0].props.controller=t.controller),e}},{key:\"_requestPick\",value:function(t){var e=t.event,n=t.callback,r=t.mode,i=this._pickRequest;if(\"pointerleave\"===e.type)i.x=-1,i.y=-1,i.radius=0;else{var a=e.offsetCenter;if(!a)return;i.x=a.x,i.y=a.y,i.radius=this.props.pickingRadius}i.callback=n,i.event=e,i.mode=r}},{key:\"_pickAndCallback\",value:function(){var t=this._pickRequest;if(t.mode){var e=this.deckPicker.pickObject(Object.assign({layers:this.layerManager.getLayers(),viewports:this.getViewports(t),activateViewport:this.layerManager.activateViewport,depth:1},t)),n=e.result,r=e.emptyInfo;if(t.callback){var i=n.find((function(t){return t.index>=0}))||r;t.callback(i,t.event)}t.mode=null}}},{key:\"_updateCursor\",value:function(){this.canvas&&(this.canvas.style.cursor=this.props.getCursor(this.interactiveState))}},{key:\"_updateAnimationProps\",value:function(t){this.layerManager.context.animationProps=t}},{key:\"_setGLContext\",value:function(t){if(!this.layerManager){for(var e in this.canvas||(this.canvas=t.canvas,Object(I.a)(t,{enable:!0,copyState:!0})),Object(st.a)(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t),this.eventManager=new ct.a(t.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerLeave}}),lt.b)this.eventManager.on(e,this._onEvent);this.viewManager=new h({eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height}),Object(o.a)(this.viewManager);var n=this.viewManager.getViewports()[0];this.layerManager=new a.a(t,{deck:this,stats:this.stats,viewport:n}),this.effectManager=new p,this.deckRenderer=new b.a(t),this.deckPicker=new E(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:\"_drawLayers\",value:function(t,e){var n=this.layerManager.context.gl;Object(st.a)(n,this.props.parameters),this.props.onBeforeRender({gl:n});var r=this.layerManager.getLayers(),i=this.layerManager.activateViewport;this.deckRenderer.renderLayers(Object.assign({layers:r,viewports:this.viewManager.getViewports(),activateViewport:i,views:this.viewManager.getViews(),pass:\"screen\",redrawReason:t,effects:this.effectManager.getEffects()},e)),this.props.onAfterRender({gl:n})}},{key:\"_onRendererInitialized\",value:function(t){var e=t.gl;this._setGLContext(e)}},{key:\"_onRenderFrame\",value:function(t){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),l.a.table(3,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(t),this._updateAnimationProps(t),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates(t)}},{key:\"_onViewStateChange\",value:function(t){var e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState[t.viewId]=e,this.viewManager.setProps({viewState:e}))}},{key:\"_onInteractiveStateChange\",value:function(t){var e=t.isDragging,n=void 0!==e&&e;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:\"_onEvent\",value:function(t){var e=lt.b[t.type],n=t.offsetCenter;if(e&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),a=i.layer,o=a&&(a[e.handler]||a.props[e.handler]),s=this.props[e.handler],u=!1;o&&(u=o.call(a,i,t)),!u&&s&&s(i,t)}}},{key:\"_onPointerDown\",value:function(t){var e=t.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:e.x,y:e.y,radius:this.props.pickingRadius})}},{key:\"_onPointerMove\",value:function(t){t.leftButton||t.rightButton||this._requestPick({callback:this.props.onHover,event:t,mode:\"hover\"})}},{key:\"_onPointerLeave\",value:function(t){this._requestPick({callback:this.props.onHover,event:t,mode:\"hover\"})}},{key:\"_getFrameStats\",value:function(){this.stats.get(\"frameRate\").timeEnd(),this.stats.get(\"frameRate\").timeStart();var t=this.animationLoop.stats;this.stats.get(\"GPU Time\").addTime(t.get(\"GPU Time\").lastTiming),this.stats.get(\"CPU Time\").addTime(t.get(\"CPU Time\").lastTiming)}},{key:\"_getMetrics\",value:function(){this.metrics.fps=this.stats.get(\"frameRate\").getHz(),this.metrics.setPropsTime=this.stats.get(\"setProps Time\").time,this.metrics.updateAttributesTime=this.stats.get(\"Update Attributes\").time,this.metrics.framesRedrawn=this.stats.get(\"Redraw Count\").count,this.metrics.pickTime=this.stats.get(\"pickObject Time\").time+this.stats.get(\"pickMultipleObjects Time\").time+this.stats.get(\"pickObjects Time\").time,this.metrics.pickCount=this.stats.get(\"Pick Count\").count,this.metrics.gpuTime=this.stats.get(\"GPU Time\").time,this.metrics.cpuTime=this.stats.get(\"CPU Time\").time,this.metrics.gpuTimePerFrame=this.stats.get(\"GPU Time\").getAverageTime(),this.metrics.cpuTimePerFrame=this.stats.get(\"CPU Time\").getAverageTime();var t=tt.a.get(\"Memory Usage\");this.metrics.bufferMemory=t.get(\"Buffer Memory\").count,this.metrics.textureMemory=t.get(\"Texture Memory\").count,this.metrics.renderbufferMemory=t.get(\"Renderbuffer Memory\").count,this.metrics.gpuMemory=t.get(\"GPU Memory\").count}}]),t}();dt.getPropTypes=function(t){return{id:t.string,width:t.oneOfType([t.number,t.string]),height:t.oneOfType([t.number,t.string]),layers:t.oneOfType([t.object,t.array]),layerFilter:t.func,views:t.oneOfType([t.object,t.array]),viewState:t.object,effects:t.arrayOf(t.instanceOf(g.a)),controller:t.oneOfType([t.func,t.bool,t.object]),gl:t.object,glOptions:t.object,parameters:t.object,pickingRadius:t.number,useDevicePixels:t.bool,touchAction:t.string,onWebGLInitialized:t.func,onResize:t.func,onViewStateChange:t.func,onBeforeRender:t.func,onAfterRender:t.func,onLoad:t.func,debug:t.bool,drawPickingColors:t.bool,_animate:t.bool}},dt.defaultProps=ht,dt.VERSION=T.a.VERSION},4836:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return ot}));var r=n(5),i=n(1504),a=n(16),o=n(17),s=n(178),u=n(80),c=n(229),l=n(19),f=n(4637),h=n(5029),d=n(4889),v={POSITION:\"positions\",NORMAL:\"normals\",COLOR_0:\"colors\",TEXCOORD_0:\"texCoords\",TEXCOORD_1:\"texCoords1\",TEXCOORD_2:\"texCoords2\"};function p(t,e){var n=(e||{}).attributeMap,r=void 0===n?v:n;return r&&r[t]||t}function g(t,e){var n;switch(t){case\"texCoords\":case\"texCoord1\":case\"texCoord2\":case\"texCoord3\":n=\"uvs\";break;case\"vertices\":case\"positions\":case\"normals\":case\"pickingColors\":n=\"vectors\"}switch(n){case\"vectors\":e.size=e.size||3;break;case\"uvs\":e.size=e.size||2}Object(d.a)(Number.isFinite(e.size),\"attribute \".concat(t,\" needs size\"))}var b=n(7),y=n(4676),m=n(5072),_=function(){function t(e){Object(a.a)(this,t),this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._moduleInjections={vs:{},fs:{}},this._hookFunctions={vs:{},fs:{}},this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(o.a)(t,null,[{key:\"getDefaultProgramManager\",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),Object(o.a)(t,[{key:\"addDefaultModule\",value:function(t){this._defaultModules.find((function(e){return e.name===t.name}))||this._defaultModules.push(t),this.stateHash++}},{key:\"removeDefaultModule\",value:function(t){var e=\"string\"==typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((function(t){return t.name!==e})),this.stateHash++}},{key:\"addModuleInjection\",value:function(t,e){var n=\"string\"==typeof t?t:t.name,r=e.hook,i=e.injection,a=e.order,o=void 0===a?0:a,s=r.slice(0,2),u=this._moduleInjections[s];u[n]=u[n]||{},u[n][r]={injection:i,order:o},this.stateHash++}},{key:\"addShaderHook\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t=t.trim()).split(\":\"),r=Object(b.a)(n,2),i=r[0],a=r[1],o=t.replace(/\\(.+/,\"\");this._hookFunctions[i][o]=Object.assign(e,{signature:a}),this.stateHash++}},{key:\"get\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.vs,r=void 0===n?\"\":n,i=e.fs,a=void 0===i?\"\":i,o=e.defines,s=void 0===o?{}:o,u=e.inject,c=void 0===u?{}:u,l=e.varyings,f=void 0===l?[]:l,h=e.bufferMode,d=void 0===h?35981:h,v=this._getModuleList(e.modules),p=this._getHash(r),g=this._getHash(a),b=v.map((function(e){return t._getHash(\"string\"==typeof e?e:e.name)})).sort(),_=f.map((function(e){return t._getHash(e)})),O=Object.keys(s).sort(),j=Object.keys(c).sort(),k=[],w=[],x=!0,E=!1,T=void 0;try{for(var P,S=O[Symbol.iterator]();!(x=(P=S.next()).done);x=!0){var A=P.value;k.push(this._getHash(A)),k.push(this._getHash(s[A]))}}catch(t){E=!0,T=t}finally{try{x||null==S.return||S.return()}finally{if(E)throw T}}var L=!0,C=!1,I=void 0;try{for(var M,R=j[Symbol.iterator]();!(L=(M=R.next()).done);L=!0){var F=M.value;w.push(this._getHash(F)),w.push(this._getHash(c[F]))}}catch(t){C=!0,I=t}finally{try{L||null==R.return||R.return()}finally{if(C)throw I}}var N=\"\".concat(p,\"/\").concat(g,\"D\").concat(k.join(\"/\"),\"M\").concat(b.join(\"/\"),\"I\").concat(w.join(\"/\"),\"V\").concat(_.join(\"/\"),\"H\").concat(this.stateHash,\"B\").concat(d);if(!this._programCache[N]){var D=Object(y.a)(this.gl,{vs:r,fs:a,modules:v,inject:c,defines:s,hookFunctions:this._hookFunctions,moduleInjections:this._moduleInjections});this._programCache[N]=new m.a(this.gl,{hash:N,vs:D.vs,fs:D.fs,varyings:f,bufferMode:d}),this._getUniforms[N]=D.getUniforms||function(t){},this._useCounts[N]=0}return this._useCounts[N]++,this._programCache[N]}},{key:\"getUniforms\",value:function(t){return this._getUniforms[t.hash]||null}},{key:\"release\",value:function(t){var e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e].delete(),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}},{key:\"_getHash\",value:function(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}},{key:\"_getModuleList\",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(this._defaultModules.length+t.length),n={},r=0,i=0,a=this._defaultModules.length;i<a;++i){var o=this._defaultModules[i],s=\"string\"==typeof o?o:o.name;e[r++]=o,n[s]=!0}for(var u=0,c=t.length;u<c;++u){var l=t[u],f=\"string\"==typeof l?l:l.name;n[f]||(e[r++]=l,n[f]=!0)}return e.length=r,e}}]),t}(),O=n(5022),j=n(4897),k=n(5021),w=n(4722),x=n(29),E=n(4628),T=null;function P(t,e){var n;return new t((n=t.BYTES_PER_ELEMENT*e,(!T||T.byteLength<n)&&(T=new ArrayBuffer(n)),T),0,e)}var S=n(4631),A=n(4774),L=n(4775);function C(t){if(!t&&!Object(A.a)())return\"Node\";if(Object(L.a)(t))return\"Electron\";var e=\"undefined\"!=typeof navigator?navigator:{},n=t||e.userAgent||\"\";if(n.indexOf(\"Edge\")>-1)return\"Edge\";var r=-1!==n.indexOf(\"MSIE \"),i=-1!==n.indexOf(\"Trident/\");return r||i?\"IE\":S.b.chrome?\"Chrome\":S.b.safari?\"Safari\":S.b.mozInnerScreenX?\"Firefox\":\"Unknown\"}var I=\"elements must be GL.ELEMENT_ARRAY_BUFFER\",M=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a.a)(this,e);var i=r.id||r.program&&r.program.id;return(n=Object(s.a)(this,Object(u.a)(e).call(this,t,Object.assign({},r,{id:i})))).hasVertexArrays=e.isSupported(t),n.buffer=null,n.bufferValue=null,n.initialize(r),Object.seal(Object(x.a)(n)),n}return Object(l.a)(e,t),Object(o.a)(e,null,[{key:\"isSupported\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.constantAttributeZero?Object(O.d)(t)||\"Chrome\"===C():Object(O.d)(t)||t.getExtension(\"OES_vertex_array_object\")}},{key:\"getDefaultArray\",value:function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new e(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}},{key:\"getMaxAttributes\",value:function(t){return e.MAX_ATTRIBUTES=e.MAX_ATTRIBUTES||t.getParameter(34921),e.MAX_ATTRIBUTES}},{key:\"setConstant\",value:function(t,n,r){switch(r.constructor){case Float32Array:e._setConstantFloatArray(t,n,r);break;case Int32Array:e._setConstantIntArray(t,n,r);break;case Uint32Array:e._setConstantUintArray(t,n,r);break;default:Object(d.a)(!1)}}}]),Object(o.a)(e,[{key:\"delete\",value:function(){Object(c.a)(Object(u.a)(e.prototype),\"delete\",this).call(this),this.buffer&&this.buffer.delete()}},{key:\"initialize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(t)}},{key:\"setProps\",value:function(t){return this}},{key:\"setElementBuffer\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(d.a)(!e||34963===e.target,I),this.bind((function(){t.gl.bindBuffer(34963,e?e.handle:null)})),this}},{key:\"setBuffer\",value:function(t,e,n){if(34963===e.target)return this.setElementBuffer(e,n);var r=n.size,i=n.type,a=n.stride,o=n.offset,s=n.normalized,u=n.integer,c=n.divisor,l=this.gl;return t=Number(t),this.bind((function(){l.bindBuffer(34962,e.handle),u?(Object(d.a)(Object(O.d)(l)),l.vertexAttribIPointer(t,r,i,a,o)):l.vertexAttribPointer(t,r,i,s,a,o),l.enableVertexAttribArray(t),l.vertexAttribDivisor(t,c||0)})),this}},{key:\"enable\",value:function(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===t&&!e.isSupported(this.gl,{constantAttributeZero:!0});return i||(t=Number(t),this.bind((function(){return r?n.gl.enableVertexAttribArray(t):n.gl.disableVertexAttribArray(t)}))),this}},{key:\"getConstantBuffer\",value:function(t,e,n){var r=this._normalizeConstantArrayValue(e,n),i=r.byteLength*t,a=r.length*t,o=!this.buffer;if(this.buffer=this.buffer||new f.a(this.gl,i),o=(o=o||this.buffer.reallocate(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=P(e.constructor,a);!function(t){for(var e=t.target,n=t.source,r=t.start,i=void 0===r?0:r,a=t.count,o=void 0===a?1:a,s=n.length,u=o*s,c=0,l=i;c<s;c++)e[l++]=n[c];for(;c<u;)c<u-c?(e.copyWithin(i+c,i,i+c),c*=2):(e.copyWithin(i+c,i,i+u-c),c=u)}({target:s,source:r,start:0,count:a}),this.buffer.subData(s),this.bufferValue=e}return this.buffer}},{key:\"_normalizeConstantArrayValue\",value:function(t,e){return Array.isArray(t)?new Float32Array(t):t}},{key:\"_compareConstantArrayValues\",value:function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}},{key:\"_createHandle\",value:function(){return this.hasVertexArrays=e.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:\"_deleteHandle\",value:function(t){return this.hasVertexArrays&&this.gl.deleteVertexArray(t),[this.elements]}},{key:\"_bindHandle\",value:function(t){this.hasVertexArrays&&this.gl.bindVertexArray(t)}},{key:\"_getParameter\",value:function(t,e){var n=this,r=e.location;return Object(d.a)(Number.isFinite(r)),this.bind((function(){switch(t){case 34373:return n.gl.getVertexAttribOffset(r,t);default:return n.gl.getVertexAttrib(r,t)}}))}},{key:\"MAX_ATTRIBUTES\",get:function(){return e.getMaxAttributes(this.gl)}}],[{key:\"_setConstantFloatArray\",value:function(t,e,n){switch(n.length){case 1:t.vertexAttrib1fv(e,n);break;case 2:t.vertexAttrib2fv(e,n);break;case 3:t.vertexAttrib3fv(e,n);break;case 4:t.vertexAttrib4fv(e,n);break;default:Object(d.a)(!1)}}},{key:\"_setConstantIntArray\",value:function(t,e,n){switch(Object(d.a)(Object(O.d)(t)),n.length){case 1:t.vertexAttribI1iv(e,n);break;case 2:t.vertexAttribI2iv(e,n);break;case 3:t.vertexAttribI3iv(e,n);break;case 4:t.vertexAttribI4iv(e,n);break;default:Object(d.a)(!1)}}},{key:\"_setConstantUintArray\",value:function(t,e,n){switch(Object(d.a)(Object(O.d)(t)),n.length){case 1:t.vertexAttribI1uiv(e,n);break;case 2:t.vertexAttribI2uiv(e,n);break;case 3:t.vertexAttribI3uiv(e,n);break;case 4:t.vertexAttribI4uiv(e,n);break;default:Object(d.a)(!1)}}}]),e}(E.a),R=n(5028),F=n(4721),N=/^(.+)__LOCATION_([0-9]+)$/,D=[\"setBuffers\",\"setGeneric\",\"clearBindings\",\"setLocations\",\"setGenericValues\",\"setDivisor\",\"enable\",\"disable\"],B=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a.a)(this,t);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=M.isSupported(e)?new M(e):M.getDefaultArray(e),Object(R.a)(this,\"VertexArray\",\"v6.0\",D),this.initialize(n),Object.seal(this)}return Object(o.a)(t,[{key:\"delete\",value:function(){this.buffer&&this.buffer.delete()}},{key:\"initialize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}},{key:\"reset\",value:function(){this.elements=null,this.elementsAccessor=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}},{key:\"setProps\",value:function(t){return\"program\"in t&&(this.configuration=t.program&&t.program.configuration),\"configuration\"in t&&(this.configuration=t.configuration),\"attributes\"in t&&this.setAttributes(t.attributes),\"elements\"in t&&this.setElementBuffer(t.elements),\"bindOnUse\"in t&&(t=t.bindOnUse),this}},{key:\"clearDrawParams\",value:function(){this.drawParams=null}},{key:\"getDrawParams\",value:function(t){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,t)}},{key:\"setAttributes\",value:function(t){var e=this;return Object.assign(this.attributes,t),this.vertexArrayObject.bind((function(){for(var n in t){var r=t[n];e._setAttribute(n,r)}e.gl.bindBuffer(34962,null)})),this}},{key:\"setElementBuffer\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(t,e),this}},{key:\"setBuffer\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===e.target)return this.setElementBuffer(e,n);var r=this._resolveLocationAndAccessor(t,e,e.accessor,n),i=r.location,a=r.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,e,a)),this}},{key:\"setConstant\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},n)),i=r.location,a=r.accessor;return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e,a),this.values[i]=e,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:\"unbindBuffers\",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&(t.vertexArrayObject.isDefaultArray||t.vertexArrayObject.setElementBuffer(null)),t.buffer=t.buffer||new f.a(t.gl,{accessor:{size:4}});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof f.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(34962,t.buffer.handle),t.gl.vertexAttribPointer(e,1,5126,!1,0,0))})),this}},{key:\"bindBuffers\",value:function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var n=t.values[e];n instanceof f.a&&t.setBuffer(e,n)}})),this}},{key:\"bindForDraw\",value:function(t,e,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(t,e),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()})),r}},{key:\"_resolveLocationAndAccessor\",value:function(t,e,n,r){var i=this,a=this._getAttributeIndex(t),o=a.location,s=a.name;if(!Number.isFinite(o)||o<0)return this.unused[t]=e,F.a.once(3,(function(){return\"unused value \".concat(t,\" in \").concat(i.id)}))(),this;var u=this._getAttributeInfo(s||o);if(!u)return{location:-1,accessor:null};var c=w.a.resolve(u.accessor,n,r),l=c.size,f=c.type;return Object(d.a)(Number.isFinite(l)&&Number.isFinite(f)),{location:o,accessor:c}}},{key:\"_getAttributeInfo\",value:function(t){return this.configuration&&this.configuration.getAttributeInfo(t)}},{key:\"_getAttributeIndex\",value:function(t){var e=Number(t);if(Number.isFinite(e))return{location:e};var n=N.exec(t),r=n?n[1]:t,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:\"_setAttribute\",value:function(t,e){if(e instanceof f.a)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof f.a){var n=e[0],r=e[1];this.setBuffer(t,n,r)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){var i=e;this.setConstant(t,i)}else{if(!(e.buffer instanceof f.a))throw new Error(\"VertexArray: attributes must be Buffers or constants (i.e. typed array)\");var a=e;this.setBuffer(t,a.buffer,a)}}},{key:\"_setConstantAttributes\",value:function(t,e){var n=Math.max(0|t,0|e),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:\"_setConstantAttributeZero\",value:function(t,e){if(M.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var n=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:\"_setConstantAttribute\",value:function(t,e){M.setConstant(this.gl,t,e),this.vertexArrayObject.isDefaultArray&&this.vertexArrayObject.enable(t,!1)}},{key:\"_updateDrawParams\",value:function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}},{key:\"_updateDrawParamsForLocation\",value:function(t,e){var n=this.values[e],r=this.accessors[e];if(n){var i=r.divisor>0;if(t.isInstanced=t.isInstanced||i,n instanceof f.a){var a=n;if(i){var o=a.getVertexCount(r);t.instanceCount=Math.min(t.instanceCount,o)}else{var s=a.getVertexCount(r);t.vertexCount=Math.min(t.vertexCount,s)}}}}},{key:\"setElements\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F.a.deprecated(\"setElements\",\"setElementBuffer\")(),this.setElementBuffer(t,e)}}]),t}(),U=n(4663),V=n(5027),z=n(4688);function G(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,a=void 0===i?1:i,o=\"[\",s=0;s<t.length&&s<r;++s)s>0&&(o+=\",\".concat(s%a==0?\" \":\"\")),o+=H(t[s],e);var u=t.length>r?\"...\":\"]\";return\"\".concat(o).concat(u)}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=e.isInteger,i=void 0!==r&&r;if(Array.isArray(t)||ArrayBuffer.isView(t))return G(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return i?\"0\":\"0.\";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var a=t.toPrecision(2),o=a.indexOf(\".0\");return o===a.length-2?a.slice(0,-1):a}function W(t,e,n,i){var a,o,s=t.gl;if(!e)return o={},Object(r.a)(o,i,\"null\"),Object(r.a)(o,\"Format \",\"N/A\"),o;var u,c,l,h=\"NOT PROVIDED\",d=\"N/A\",v=\"N/A\",p=\"N/A\";if(n&&(h=n.type,d=n.size,u=-1!==(h=String(h).replace(\"Array\",\"\")).indexOf(\"nt\")),e instanceof f.a){var g,b,y=e,m=y.getDebugData(),_=m.data;if(c=m.modified?\"*\":\"\",l=_,v=(p=y.byteLength)/_.BYTES_PER_ELEMENT/d,n){var O=n.divisor>0;b=\"\".concat(O?\"I \":\"P \",\" \").concat(v,\" (x\").concat(d,\"=\").concat(p,\" bytes \").concat(Object(V.a)(s,h),\")\")}else u=!0,b=\"\".concat(p,\" bytes\");return g={},Object(r.a)(g,i,\"\".concat(c).concat(H(l,{size:d,isInteger:u}))),Object(r.a)(g,\"Format \",b),g}return l=e,d=e.length,u=-1!==(h=String(e.constructor.name).replace(\"Array\",\"\")).indexOf(\"nt\"),a={},Object(r.a)(a,i,\"\".concat(H(l,{size:d,isInteger:u}),\" (constant)\")),Object(r.a)(a,\"Format \",\"\".concat(d,\"x\").concat(h,\" (constant)\")),a}function q(t,e){var n=e.type,r=e.size,i=Object(z.b)(n,r);return i?\"\".concat(t,\" (\").concat(i.name,\")\"):t}function X(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.header,n=void 0===e?\"Uniforms\":e,i=t.program,a=t.uniforms,o=t.undefinedOnly,s=void 0!==o&&o;Object(d.a)(i);var u=\".*_.*\",c=\".*Matrix\",l=i._uniformSetters,f={},h=Object.keys(l).sort(),v=0,p=!0,g=!1,b=void 0;try{for(var y,m=h[Symbol.iterator]();!(p=(y=m.next()).done);p=!0){var _=y.value;_.match(u)||_.match(c)||Y({table:f,header:n,uniforms:a,uniformName:_,undefinedOnly:s})&&v++}}catch(t){g=!0,b=t}finally{try{p||null==m.return||m.return()}finally{if(g)throw b}}var O=!0,j=!1,k=void 0;try{for(var w,x=h[Symbol.iterator]();!(O=(w=x.next()).done);O=!0){var E=w.value;E.match(c)&&Y({table:f,header:n,uniforms:a,uniformName:E,undefinedOnly:s})&&v++}}catch(t){j=!0,k=t}finally{try{O||null==x.return||x.return()}finally{if(j)throw k}}var T=!0,P=!1,S=void 0;try{for(var A,L=h[Symbol.iterator]();!(T=(A=L.next()).done);T=!0){var C=A.value;f[C]||Y({table:f,header:n,uniforms:a,uniformName:C,undefinedOnly:s})&&v++}}catch(t){P=!0,S=t}finally{try{T||null==L.return||L.return()}finally{if(P)throw S}}var I=0,M={};if(!s)for(var R in a){var F=a[R];f[R]||(I++,M[R]=Object(r.a)({Type:\"NOT USED: \".concat(F)},n,H(F)))}return{table:f,count:v,unusedTable:M,unusedCount:I}}function Y(t){var e,n=t.table,i=t.header,a=t.uniforms,o=t.uniformName,s=t.undefinedOnly,u=a[o],c=function(t){return null!=t}(u);return(!s||!c)&&(n[o]=(e={},Object(r.a)(e,i,c?H(u):\"N/A\"),Object(r.a)(e,\"Uniform Type\",c?u:\"NOT PROVIDED\"),e),!0)}function K(t){var e=t.accessor,n=e.type,r=e.size,i=Object(z.b)(n,r);return i?\"\".concat(i.name,\" \").concat(t.name):t.name}var Z=n(4728),Q=n.n(Z),J=n(4685),$={},tt=function(t){$[t.id]||($[t.id]=t,Q.a.listItem(\"luma.gl\",t.id))},et=function t(e,n,r){e&&(n.length>1?t(e[n[0]],n.slice(1),r):e[n[0]]=r)},nt=new Map,rt=function(t,e){if(J.b.__SEER_INITIALIZED__&&t){var n=nt.get(t);n&&n.forEach((function(t,n){et(e,n,t)}))}};Q.a.listenFor(\"luma.gl\",(function(t){var e=$[t.itemKey];if(e&&\"edit\"===t.type&&\"uniforms\"===t.valuePath[0]){var n=t.valuePath.slice(1);!function(t,e,n){J.b.__SEER_INITIALIZED__&&(nt.has(t)||nt.set(t,new Map),nt.get(t).set(e,n))}(t.itemKey,n,t.value);var r=e.getUniforms();et(r,n,t.value),e.setUniforms(r)}}));var it=n(5024),at=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a.a)(this,t),Object(d.a)(Object(O.c)(e));var r=n.id,i=void 0===r?Object(it.c)(\"base-model\"):r;this.id=i,this.gl=e,this.id=n.id||Object(it.c)(\"Model\"),this.lastLogTime=0,this.initialize(n)}return Object(o.a)(t,[{key:\"initialize\",value:function(t){this.props={},t.shaderCache&&F.a.warn(\"ShaderCache property is deprecated\")(),this.programManager=t.programManager||_.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var e=t.program,n=void 0===e?null:e,r=t.vs,i=t.fs,a=t.modules,o=t.defines,s=t.inject,u=t.varyings,c=t.bufferMode;this.programProps={program:n,vs:r,fs:i,modules:a,defines:o,inject:s,varyings:u,bufferMode:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._checkProgram(),this._setBaseModelProps(t),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings)))}},{key:\"setProps\",value:function(t){this._setBaseModelProps(t)}},{key:\"delete\",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();var e;this._managedProgram&&this.programManager.release(this.program),this.vertexArray.delete(),e=this.id,delete $[e],Q.a.deleteItem(\"luma.gl\",e)}},{key:\"isAnimated\",value:function(){return this.animated}},{key:\"getProgram\",value:function(){return this.program}},{key:\"setProgram\",value:function(t){this.programProps=Object.assign({},t),this._programDirty=!0}},{key:\"getUniforms\",value:function(){return this.uniforms}},{key:\"setUniforms\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),rt(this.id,t),t=this._extractAnimatedUniforms(t),Object.assign(this.uniforms,t),this}},{key:\"getModuleUniforms\",value:function(t){this._checkProgram();var e=this.programManager.getUniforms(this.program);return e?e(t):{}}},{key:\"updateModuleSettings\",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:\"clear\",value:function(t){return Object(j.a)(this.program.gl,t),this}},{key:\"drawGeometry\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var e=t.moduleSettings,n=void 0===e?null:e,r=t.framebuffer,i=t.uniforms,a=void 0===i?{}:i,o=t.attributes,s=void 0===o?{}:o,u=t.transformFeedback,c=void 0===u?this.transformFeedback:u,l=t.parameters,f=void 0===l?{}:l,h=t.vertexArray,d=void 0===h?this.vertexArray:h,v=t.animationProps;tt(this),this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(a),this._refreshAnimationProps(v);var p=this._logDrawCallStart(2),g=this.vertexArray.getDrawParams(this.props);g.isInstanced&&!this.isInstanced&&F.a.warn(\"Found instanced attributes on non-instanced model\",this.id)();var b=g.isIndexed,y=g.indexType,m=g.indexOffset,_=this.isInstanced,O=this.instanceCount,j=function(){},k=this.props,w=k.onBeforeRender,x=void 0===w?j:w,E=k.onAfterRender,T=void 0===E?j:E;x(),this._timerQueryStart(),this.program.setUniforms(this.uniforms);var P=this.program.draw(Object.assign({},t,{logPriority:p,uniforms:null,framebuffer:r,parameters:f,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:d,transformFeedback:c,isIndexed:b,indexType:y,isInstanced:_,instanceCount:O,offset:b?m:0}));return this._timerQueryEnd(),T(),this._logDrawCallEnd(p,d,r),P}},{key:\"_setBaseModelProps\",value:function(t){Object.assign(this.props,t),\"uniforms\"in t&&this.setUniforms(t.uniforms),\"pickable\"in t&&(this.pickable=t.pickable),\"timerQueryEnabled\"in t&&(this.timerQueryEnabled=t.timerQueryEnabled&&k.a.isSupported(this.gl,[\"timers\"]),t.timerQueryEnabled&&!this.timerQueryEnabled&&F.a.warn(\"GPU timer not supported\")()),\"_animationProps\"in t&&this._setAnimationProps(t._animationProps),\"_animationLoop\"in t&&(this.animationLoop=t._animationLoop)}},{key:\"_checkProgram\",value:function(){var t=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(t){var e=this.programProps.program;if(e)this._managedProgram=!1;else{var n=this.programProps,r=n.vs,i=void 0===r?U.a.vs:r,a=n.fs,o=void 0===a?U.a.fs:a,s=n.modules,u=n.inject,c=n.defines,l=n.varyings,f=n.bufferMode;e=this.programManager.get({vs:i,fs:o,modules:s,inject:u,defines:c,varyings:l,bufferMode:f}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(d.a)(e instanceof m.a,\"Model needs a program\"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new B(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:\"_refreshAnimationProps\",value:function(t){(t=t||this.animationLoop&&this.animationLoop.animationProps)&&this._setAnimationProps(t)}},{key:\"_evaluateAnimateUniforms\",value:function(t){if(!this.animated)return{};var e={};for(var n in this.animatedUniforms){var r=this.animatedUniforms[n];e[n]=r(t)}return e}},{key:\"_extractAnimatedUniforms\",value:function(t){var e=!1;for(var n in t){var r=t[n];\"function\"==typeof r?(this.animatedUniforms[n]=r,e=!0):delete this.animatedUniforms[n]}if(this.animated=!Object(it.a)(this.animatedUniforms),!e)return t;var i={};for(var a in t)this.animatedUniforms[a]||(i[a]=t[a]);return i}},{key:\"_timerQueryStart\",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new k.a(this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:\"_timerQueryEnd\",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var t=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=t,this.stats.accumulatedFrameTime+=t,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,F.a.log(2,\"GPU time \".concat(this.program.id,\": \").concat(this.stats.lastFrameTime,\"ms average \").concat(this.stats.averageFrameTime,\"ms accumulated: \").concat(this.stats.accumulatedFrameTime,\"ms count: \").concat(this.stats.profileFrameCount))()}}},{key:\"_logDrawCallStart\",value:function(t){var e=t>3?0:1e4;if(!(F.a.priority<t||Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),F.a.group(2,\">>> DRAWING MODEL \".concat(this.id),{collapsed:F.a.priority<=2})(),t}},{key:\"_logDrawCallEnd\",value:function(t,e,n,i){if(void 0!==t){var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vertexArray,n=t.header,r=void 0===n?\"Attributes\":n;if(!e.configuration)return{};var i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=W(e,e.elements,null,r));var a=e.values;for(var o in a){var s=e._getAttributeInfo(o);if(s){var u=\"\".concat(o,\": \").concat(s.name),c=e.accessors[s.location];c&&(u=\"\".concat(o,\": \").concat(q(s.name,c))),i[u]=W(e,a[o],c,r)}}return i}({vertexArray:e,header:\"\".concat(this.id,\" attributes\"),attributes:this._attributes}),o=X({header:\"\".concat(this.id,\" uniforms\"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),s=o.table,u=o.unusedTable,c=o.unusedCount,l=X({header:\"\".concat(this.id,\" uniforms\"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),f=l.table;l.count>0&&F.a.log(\"MISSING UNIFORMS\",Object.keys(f))(),c>0&&F.a.log(\"UNUSED UNIFORMS\",Object.keys(u))();var h=function(t){var e={},n=\"Accessors for \".concat(t.id),i=!0,a=!1,o=void 0;try{for(var s,u=t.attributeInfos[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(c){var l=K(c);e[\"in \".concat(l)]=Object(r.a)({},n,JSON.stringify(c.accessor))}}}catch(t){a=!0,o=t}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var f=!0,h=!1,d=void 0;try{for(var v,p=t.varyingInfos[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var g=v.value;if(g){var b=K(g);e[\"out \".concat(b)]=Object(r.a)({},n,JSON.stringify(g.accessor))}}}catch(t){h=!0,d=t}finally{try{f||null==p.return||p.return()}finally{if(h)throw d}}return e}(this.vertexArray.configuration);F.a.table(t,a)(),F.a.table(t,s)(),F.a.table(t+1,h)(),function(t,e){if(Q.a.isReady()&&!Q.a.throttle(\"luma.gl:\".concat(t.id),1e3)){var n=t.geometry?Object.assign({},t.geometry.attributes,t.attributes):t.attributes,r=Object.assign({},t.uniforms,e);Q.a.multiUpdate(\"luma.gl\",t.id,[{path:\"objects.uniforms\",data:r},{path:\"objects.attributes\",data:n}])}}(this,n),i&&i.log({priority:2,message:\"Rendered to \".concat(i.id)}),F.a.groupEnd(2,\">>> DRAWING MODEL \".concat(this.id))()}}}]),t}(),ot=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a.a)(this,e);var r=n.id,o=void 0===r?Object(it.c)(\"model\"):r;return Object(s.a)(this,Object(u.a)(e).call(this,t,Object(i.a)({},n,{id:o})))}return Object(l.a)(e,t),Object(o.a)(e,[{key:\"initialize\",value:function(t){Object(c.a)(Object(u.a)(e.prototype),\"initialize\",this).call(this,t),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced,this._setModelProps(t),this.geometry={},Object(d.a)(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),\"Model needs drawMode and vertexCount\")}},{key:\"setProps\",value:function(t){Object(c.a)(Object(u.a)(e.prototype),\"setProps\",this).call(this,t),this._setModelProps(t)}},{key:\"delete\",value:function(){Object(c.a)(Object(u.a)(e.prototype),\"delete\",this).call(this),this._deleteGeometryBuffers()}},{key:\"getDrawMode\",value:function(){return this.drawMode}},{key:\"getVertexCount\",value:function(){return this.vertexCount}},{key:\"getInstanceCount\",value:function(){return this.instanceCount}},{key:\"getAttributes\",value:function(){return this.attributes}},{key:\"setDrawMode\",value:function(t){return this.drawMode=t,this}},{key:\"setVertexCount\",value:function(t){return Object(d.a)(Number.isFinite(t)),this.vertexCount=t,this}},{key:\"setInstanceCount\",value:function(t){return Object(d.a)(Number.isFinite(t)),this.instanceCount=t,this}},{key:\"setGeometry\",value:function(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(t,e,n){var r={},a=e.indices;for(var o in e.attributes){var s=e.attributes[o],u=p(o,n);if(\"indices\"===o)a=s;else if(s.constant)r[u]=s.value;else{var c=s.value,l=Object(i.a)({},s);delete l.value,r[u]=[new f.a(t,c),l],g(o,l)}}if(a){var h=a.value||a;Object(d.a)(h instanceof Uint16Array||h instanceof Uint32Array,'attribute array for \"indices\" must be of integer type');var v={size:1,isIndexed:void 0===a.isIndexed||a.isIndexed};r.indices=[new f.a(t,{data:h,target:34963}),v]}return r}(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:\"setAttributes\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(it.a)(t))return this;var e={};for(var n in t){var r=t[n];e[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(e),this}},{key:\"draw\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(t)}},{key:\"transform\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,n=void 0===e||e,i=t.feedbackBuffers,a=t.unbindModels,o=void 0===a?[]:a,s=t.parameters;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,Object(r.a)({},35977,n))),o.forEach((function(t){return t.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},t,{parameters:s}))}finally{o.forEach((function(t){return t.vertexArray.bindBuffers()}))}return this}},{key:\"render\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return F.a.warn(\"Model.render() is deprecated. Use Model.setUniforms() and Model.draw()\")(),this.setUniforms(t).draw()}},{key:\"_setModelProps\",value:function(t){\"instanceCount\"in t&&(this.instanceCount=t.instanceCount),\"geometry\"in t&&this.setGeometry(t.geometry),\"attributes\"in t&&this.setAttributes(t.attributes),\"_feedbackBuffers\"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}},{key:\"_deleteGeometryBuffers\",value:function(){for(var t in this.geometryBuffers){var e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof f.a&&e.delete()}}},{key:\"_setAnimationProps\",value:function(t){if(this.animated){Object(d.a)(t,\"Model.draw(): animated uniforms but no animationProps\");var e=this._evaluateAnimateUniforms(t);Object.assign(this.uniforms,e)}}},{key:\"_setFeedbackBuffers\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(it.a)(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new h.a(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}}]),e}(at)},4840:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return j}));var r=n(4677),i=n(5031),a=n(5066),o=\"#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\\n\\nstruct AmbientLight {\\n vec3 color;\\n};\\n\\nstruct PointLight {\\n vec3 color;\\n vec3 position;\\n vec3 attenuation;\\n};\\n\\nstruct DirectionalLight {\\n  vec3 color;\\n  vec3 direction;\\n};\\n\\nuniform AmbientLight lighting_uAmbientLight;\\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\\nuniform int lighting_uPointLightCount;\\nuniform int lighting_uDirectionalLightCount;\\n\\nuniform bool lighting_uEnabled;\\n\\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\\n  return pointLight.attenuation.x\\n       + pointLight.attenuation.y * distance\\n       + pointLight.attenuation.z * distance * distance;\\n}\\n\\n#endif\\n\",s={name:\"lights\",vs:o,fs:o,getUniforms:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;if(\"lightSources\"in e){var n=e.lightSources||{},r=n.ambientLight,i=n.pointLights,a=n.directionalLights,o=r||i&&i.length>0||a&&a.length>0;return o?Object.assign({},l({ambientLight:r,pointLights:i,directionalLights:a}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if(\"lights\"in e){var s={pointLights:[],directionalLights:[]},c=!0,f=!1,h=void 0;try{for(var d,v=(e.lights||[])[Symbol.iterator]();!(c=(d=v.next()).done);c=!0){var p=d.value;switch(p.type){case\"ambient\":s.ambientLight=p;break;case\"directional\":s.directionalLights.push(p);break;case\"point\":s.pointLights.push(p)}}}catch(t){f=!0,h=t}finally{try{c||null==v.return||v.return()}finally{if(f)throw h}}return t({lightSources:s})}return{}},defines:{MAX_LIGHTS:3}},u={};function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.color,n=void 0===e?[0,0,0]:e,r=t.intensity,i=void 0===r?1:r;return n.map((function(t){return t*i/255}))}function l(t){var e=t.ambientLight,n=t.pointLights,r=void 0===n?[]:n,i=t.directionalLights,a=void 0===i?[]:i,o={};return o[\"lighting_uAmbientLight.color\"]=e?c(e):[0,0,0],r.forEach((function(t,e){o[\"lighting_uPointLight[\".concat(e,\"].color\")]=c(t),o[\"lighting_uPointLight[\".concat(e,\"].position\")]=t.position,o[\"lighting_uPointLight[\".concat(e,\"].attenuation\")]=t.attenuation})),o.lighting_uPointLightCount=r.length,a.forEach((function(t,e){o[\"lighting_uDirectionalLight[\".concat(e,\"].color\")]=c(t),o[\"lighting_uDirectionalLight[\".concat(e,\"].direction\")]=t.direction})),o.lighting_uDirectionalLightCount=a.length,o}var f=\"\\nuniform float lighting_uAmbient;\\nuniform float lighting_uDiffuse;\\nuniform float lighting_uShininess;\\nuniform vec3  lighting_uSpecularColor;\\n\\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\\n    vec3 halfway_direction = normalize(light_direction + view_direction);\\n    float lambertian = dot(light_direction, normal_worldspace);\\n    float specular = 0.0;\\n    if (lambertian > 0.0) {\\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\\n      specular = pow(specular_angle, lighting_uShininess);\\n    }\\n    lambertian = max(lambertian, 0.0);\\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\\n}\\n\\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\\n  vec3 lightColor = surfaceColor;\\n\\n  if (lighting_uEnabled) {\\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uPointLightCount) {\\n        break;\\n      }\\n      PointLight pointLight = lighting_uPointLight[i];\\n      vec3 light_position_worldspace = pointLight.position;\\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\\n    }\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uDirectionalLightCount) {\\n        break;\\n      }\\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\\n    }\\n  }\\n  return lightColor;\\n}\\n\\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\\n  vec3 lightColor = vec3(0, 0, 0);\\n  vec3 surfaceColor = vec3(0, 0, 0);\\n\\n  if (lighting_uEnabled) {\\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uPointLightCount) {\\n        break;\\n      }\\n      PointLight pointLight = lighting_uPointLight[i];\\n      vec3 light_position_worldspace = pointLight.position;\\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\\n    }\\n\\n    for (int i = 0; i < MAX_LIGHTS; i++) {\\n      if (i >= lighting_uDirectionalLightCount) {\\n        break;\\n      }\\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\\n    }\\n  }\\n  return lightColor;\\n}\\n\",h={name:\"gouraud-lighting\",dependencies:[s],vs:f,defines:{LIGHTING_VERTEX:1},getUniforms:g},d={name:\"phong-lighting\",dependencies:[s],fs:f,defines:{LIGHTING_FRAGMENT:1},getUniforms:g},v={};function p(t){var e={};return e.lighting_uAmbient=t.ambient,e.lighting_uDiffuse=t.diffuse,e.lighting_uShininess=t.shininess,e.lighting_uSpecularColor=t.specularColor.map((function(t){return t/255})),e}function g(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;if(!(\"material\"in t))return{};var e=t.material;return e?p(e):{lighting_uEnabled:!1}}var b={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingThreshold:1,pickingActive:!1};var y={name:\"picking\",vs:\"uniform vec3 picking_uSelectedColor;\\nuniform float picking_uThreshold;\\nuniform bool picking_uSelectedColorValid;\\n\\nout vec4 picking_vRGBcolor_Aselected;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\n\\nbool isVertexPicked(vec3 vertexColor) {\\n  return\\n    picking_uSelectedColorValid &&\\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\\n}\\n\\nvoid picking_setPickingColor(vec3 pickingColor) {\\n  picking_vRGBcolor_Aselected.a =\\n    float(isVertexPicked(pickingColor));\\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\\n}\\n\",fs:\"uniform bool picking_uActive;\\nuniform vec3 picking_uSelectedColor;\\nuniform vec4 picking_uHighlightColor;\\n\\nin vec4 picking_vRGBcolor_Aselected;\\n\\nconst float COLOR_SCALE = 1. / 255.;\\nvec4 picking_filterHighlightColor(vec4 color) {\\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\\n\\n  if (selected) {\\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\\n\\n    float highLightAlpha = highLightColor.a;\\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\\n    float highLightRatio = highLightAlpha / blendedAlpha;\\n\\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\\n    return vec4(blendedRGB, blendedAlpha);\\n  } else {\\n    return color;\\n  }\\n}\\nvec4 picking_filterPickingColor(vec4 color) {\\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\\n  if (picking_uActive && length(pickingColor) < 0.001) {\\n    discard;\\n  }\\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\\n}\\nvec4 picking_filterColor(vec4 color) {\\n  vec4 highightColor = picking_filterHighlightColor(color);\\n  return picking_filterPickingColor(highightColor);\\n}\\n\\n\",getUniforms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e={};if(void 0!==t.pickingSelectedColor)if(null===t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{var n=[t.pickingSelectedColor[0],t.pickingSelectedColor[1],t.pickingSelectedColor[2]];e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}return void 0!==t.pickingHighlightColor&&(e.picking_uHighlightColor=t.pickingHighlightColor),void 0!==t.pickingThreshold&&(e.picking_uThreshold=t.pickingThreshold),void 0!==t.pickingActive&&(e.picking_uActive=t.pickingActive?1:0),e}},m=n(4664),_={name:\"project32\",dependencies:[m.a],vs:\"\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec2 position64xyLow, vec3 offset, out vec4 commonPosition\\n) {\\n  vec3 projectedPosition = project_position(position, position64xyLow);\\n  commonPosition = vec4(projectedPosition + offset, 1.0);\\n  return project_common_position_to_clipspace(commonPosition);\\n}\\n\\nvec4 project_position_to_clipspace(\\n  vec3 position, vec2 position64xyLow, vec3 offset\\n) {\\n  vec4 commonPosition;\\n  return project_position_to_clipspace(position, position64xyLow, offset, commonPosition);\\n}\\n\"},O=n(4707);function j(){Object(r.b)([i.a,a.a,m.a,_,O.a,h,d,y]),Object(r.d)([m.a])}},4849:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return b}));var r,i=n(16),a=n(178),o=n(80),s=n(29),u=n(17),c=n(19),l=n(4628),f=n(5),h=\"EXT_color_buffer_float\",d=(r={},Object(f.a)(r,33189,{bpp:2}),Object(f.a)(r,33190,{gl2:!0,bpp:3}),Object(f.a)(r,36012,{gl2:!0,bpp:4}),Object(f.a)(r,36168,{bpp:1}),Object(f.a)(r,34041,{bpp:4}),Object(f.a)(r,35056,{gl2:!0,bpp:4}),Object(f.a)(r,36013,{gl2:!0,bpp:5}),Object(f.a)(r,32854,{bpp:2}),Object(f.a)(r,36194,{bpp:2}),Object(f.a)(r,32855,{bpp:2}),Object(f.a)(r,33321,{gl2:!0,bpp:1}),Object(f.a)(r,33330,{gl2:!0,bpp:1}),Object(f.a)(r,33329,{gl2:!0,bpp:1}),Object(f.a)(r,33332,{gl2:!0,bpp:2}),Object(f.a)(r,33331,{gl2:!0,bpp:2}),Object(f.a)(r,33334,{gl2:!0,bpp:4}),Object(f.a)(r,33333,{gl2:!0,bpp:4}),Object(f.a)(r,33323,{gl2:!0,bpp:2}),Object(f.a)(r,33336,{gl2:!0,bpp:2}),Object(f.a)(r,33335,{gl2:!0,bpp:2}),Object(f.a)(r,33338,{gl2:!0,bpp:4}),Object(f.a)(r,33337,{gl2:!0,bpp:4}),Object(f.a)(r,33340,{gl2:!0,bpp:8}),Object(f.a)(r,33339,{gl2:!0,bpp:8}),Object(f.a)(r,32849,{gl2:!0,bpp:3}),Object(f.a)(r,32856,{gl2:!0,bpp:4}),Object(f.a)(r,32857,{gl2:!0,bpp:4}),Object(f.a)(r,36220,{gl2:!0,bpp:4}),Object(f.a)(r,36238,{gl2:!0,bpp:4}),Object(f.a)(r,36975,{gl2:!0,bpp:4}),Object(f.a)(r,36214,{gl2:!0,bpp:8}),Object(f.a)(r,36232,{gl2:!0,bpp:8}),Object(f.a)(r,36226,{gl2:!0,bpp:16}),Object(f.a)(r,36208,{gl2:!0,bpp:16}),Object(f.a)(r,33325,{gl2:h,bpp:2}),Object(f.a)(r,33327,{gl2:h,bpp:4}),Object(f.a)(r,34842,{gl2:h,bpp:8}),Object(f.a)(r,33326,{gl2:h,bpp:4}),Object(f.a)(r,33328,{gl2:h,bpp:8}),Object(f.a)(r,34836,{gl2:h,bpp:16}),Object(f.a)(r,35898,{gl2:h,bpp:4}),r),v=n(5022),p=n(4889);function g(t,e,n){var r=n[e];if(!r)return!1;var i=Object(v.d)(t)&&r.gl2||r.gl1;return\"string\"==typeof i?t.getExtension(i):i}var b=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,e),(n=Object(a.a)(this,Object(o.a)(e).call(this,t,r))).initialize(r),Object.seal(Object(s.a)(n)),n}return Object(c.a)(e,t),Object(u.a)(e,null,[{key:\"isSupported\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.format;return!n||g(t,n,d)}},{key:\"getSamplesForFormat\",value:function(t,e){var n=e.format;return t.getInternalformatParameter(36161,n,32937)}}]),Object(u.a)(e,[{key:\"initialize\",value:function(t){var e=t.format,n=t.width,r=void 0===n?1:n,i=t.height,a=void 0===i?1:i,o=t.samples,s=void 0===o?0:o;return Object(p.a)(e,\"Needs format\"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Object(v.d)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,e,r,a):this.gl.renderbufferStorage(36161,e,r,a),this.format=e,this.width=r,this.height=a,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*d[this.format].bpp),this}},{key:\"resize\",value:function(t){var e=t.width,n=t.height;return e!==this.width||n!==this.height?this.initialize({width:e,height:n,format:this.format,samples:this.samples}):this}},{key:\"_createHandle\",value:function(){return this.gl.createRenderbuffer()}},{key:\"_deleteHandle\",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:\"_bindHandle\",value:function(t){this.gl.bindRenderbuffer(36161,t)}},{key:\"_syncHandle\",value:function(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:\"_getParameter\",value:function(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}]),e}(l.a)},4850:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return m}));var r=n(16),i=n(17),a=n(19),o=n(178),s=n(80),u=n(4790),c=n(4649),l=n(4670);function f(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var h=function(t){Object(a.a)(n,t);var e=f(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:\"copy\",value:function(t){return Object(l.a)(!1),this}},{key:\"len\",value:function(){return Math.sqrt(this.lengthSquared())}},{key:\"magnitude\",value:function(){return this.len()}},{key:\"lengthSquared\",value:function(){for(var t=0,e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}},{key:\"magnitudeSquared\",value:function(){return this.lengthSquared()}},{key:\"distance\",value:function(t){return Math.sqrt(this.distanceSquared(t))}},{key:\"distanceSquared\",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-t[n];e+=r*r}return Object(c.a)(e)}},{key:\"dot\",value:function(t){for(var e=0,n=0;n<this.ELEMENTS;++n)e+=this[n]*t[n];return Object(c.a)(e)}},{key:\"normalize\",value:function(){var t=this.magnitude();if(0!==t)for(var e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}},{key:\"multiply\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]*=a[o];return this.check()}},{key:\"divide\",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,i=e;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]/=a[o];return this.check()}},{key:\"lengthSq\",value:function(){return this.lengthSquared()}},{key:\"distanceTo\",value:function(t){return this.distance(t)}},{key:\"distanceToSquared\",value:function(t){return this.distanceSquared(t)}},{key:\"getComponent\",value:function(t){return Object(l.a)(t>=0&&t<this.ELEMENTS,\"index is out of range\"),Object(c.a)(this[t])}},{key:\"setComponent\",value:function(t,e){return Object(l.a)(t>=0&&t<this.ELEMENTS,\"index is out of range\"),this[t]=e,this.check()}},{key:\"addVectors\",value:function(t,e){return this.copy(t).add(e)}},{key:\"subVectors\",value:function(t,e){return this.copy(t).subtract(e)}},{key:\"multiplyVectors\",value:function(t,e){return this.copy(t).multiply(e)}},{key:\"addScaledVector\",value:function(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},{key:\"x\",get:function(){return this[0]},set:function(t){this[0]=Object(c.a)(t)}},{key:\"y\",get:function(){return this[1]},set:function(t){this[1]=Object(c.a)(t)}}]),n}(u.a),d=n(4595),v=n(4610),p=n(4789);function g(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(s.a)(t);if(e){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.a)(this,n)}}var b=[0,0,0],y={},m=function(t){Object(a.a)(n,t);var e=g(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,n),t=e.call(this,-0,-0,-0),1===arguments.length&&Object(d.d)(i)?t.copy(i):(d.a.debug&&(Object(c.a)(i),Object(c.a)(a),Object(c.a)(o)),t[0]=i,t[1]=a,t[2]=o),t}return Object(i.a)(n,null,[{key:\"ZERO\",get:function(){return y.ZERO=y.ZERO||Object.freeze(new n(0,0,0,0))}}]),Object(i.a)(n,[{key:\"set\",value:function(t,e,n){return this[0]=t,this[1]=e,this[2]=n,this.check()}},{key:\"copy\",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}},{key:\"fromObject\",value:function(t){return d.a.debug&&(Object(c.a)(t.x),Object(c.a)(t.y),Object(c.a)(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}},{key:\"toObject\",value:function(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}},{key:\"angle\",value:function(t){return v.a(this,t)}},{key:\"cross\",value:function(t){return v.b(this,this,t),this.check()}},{key:\"rotateX\",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?b:n;return v.e(this,this,r,e),this.check()}},{key:\"rotateY\",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?b:n;return v.f(this,this,r,e),this.check()}},{key:\"rotateZ\",value:function(t){var e=t.radians,n=t.origin,r=void 0===n?b:n;return v.g(this,this,r,e),this.check()}},{key:\"transform\",value:function(t){return this.transformAsPoint(t)}},{key:\"transformAsPoint\",value:function(t){return v.j(this,this,t),this.check()}},{key:\"transformAsVector\",value:function(t){return Object(p.c)(this,this,t),this.check()}},{key:\"transformByMatrix3\",value:function(t){return v.i(this,this,t),this.check()}},{key:\"transformByMatrix2\",value:function(t){return Object(p.b)(this,this,t),this.check()}},{key:\"transformByQuaternion\",value:function(t){return v.k(this,this,t),this.check()}},{key:\"ELEMENTS\",get:function(){return 3}},{key:\"z\",get:function(){return this[2]},set:function(t){this[2]=Object(c.a)(t)}}]),n}(h)},4851:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return w}));var r=n(7),i=n(16),a=n(17),o=n(19),s=n(178),u=n(80),c=n(4649),l=n(4790),f=n(4595);function h(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var d=function(t){Object(o.a)(n,t);var e=h(n);function n(){return Object(i.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:\"toString\",value:function(){var t=\"[\";if(f.a.printRowMajor){t+=\"row-major:\";for(var e=0;e<this.RANK;++e)for(var n=0;n<this.RANK;++n)t+=\" \".concat(this[n*this.RANK+e])}else{t+=\"column-major:\";for(var r=0;r<this.ELEMENTS;++r)t+=\" \".concat(this[r])}return t+=\"]\"}},{key:\"getElementIndex\",value:function(t,e){return e*this.RANK+t}},{key:\"getElement\",value:function(t,e){return this[e*this.RANK+t]}},{key:\"setElement\",value:function(t,e,n){return this[e*this.RANK+t]=Object(c.a)(n),this}},{key:\"getColumn\",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=t*this.RANK,r=0;r<this.RANK;++r)e[r]=this[n+r];return e}},{key:\"setColumn\",value:function(t,e){for(var n=t*this.RANK,r=0;r<this.RANK;++r)this[n+r]=e[r];return this}}]),n}(l.a),v=n(4789),p=n(4598),g=n(4593),b=n(4610),y=n(4616);function m(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(u.a)(t);if(e){var i=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var _=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),O=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),j=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),k={},w=function(t){Object(o.a)(n,t);var e=m(n);function n(t){var r;return Object(i.a)(this,n),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return Object(a.a)(n,[{key:\"INDICES\",get:function(){return j}},{key:\"ELEMENTS\",get:function(){return 16}},{key:\"RANK\",get:function(){return 4}}],[{key:\"IDENTITY\",get:function(){return k.IDENTITY=k.IDENTITY||Object.freeze(new n(_)),k.IDENTITY}},{key:\"ZERO\",get:function(){return k.ZERO=k.ZERO||Object.freeze(new n(O)),k.ZERO}}]),Object(a.a)(n,[{key:\"copy\",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}},{key:\"set\",value:function(t,e,n,r,i,a,o,s,u,c,l,f,h,d,v,p){return this[0]=t,this[1]=e,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=c,this[10]=l,this[11]=f,this[12]=h,this[13]=d,this[14]=v,this[15]=p,this.check()}},{key:\"setRowMajor\",value:function(t,e,n,r,i,a,o,s,u,c,l,f,h,d,v,p){return this[0]=t,this[1]=i,this[2]=u,this[3]=h,this[4]=e,this[5]=a,this[6]=c,this[7]=d,this[8]=n,this[9]=o,this[10]=l,this[11]=v,this[12]=r,this[13]=s,this[14]=f,this[15]=p,this.check()}},{key:\"toRowMajor\",value:function(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}},{key:\"identity\",value:function(){return this.copy(_)}},{key:\"fromQuaternion\",value:function(t){return p.c(this,t),this.check()}},{key:\"frustum\",value:function(t){var e=t.left,r=t.right,i=t.bottom,a=t.top,o=t.near,s=t.far;return s===1/0?n._computeInfinitePerspectiveOffCenter(this,e,r,i,a,o):p.d(this,e,r,i,a,o,s),this.check()}},{key:\"lookAt\",value:function(t,e,n){if(1===arguments.length){var r=t;t=r.eye,e=r.center,n=r.up}return e=e||[0,0,0],n=n||[0,1,0],p.f(this,t,e,n),this.check()}},{key:\"ortho\",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,a=t.near,o=void 0===a?.1:a,s=t.far,u=void 0===s?500:s;return p.h(this,e,n,r,i,o,u),this.check()}},{key:\"orthographic\",value:function(t){var e=t.fovy,r=void 0===e?45*Math.PI/180:e,i=t.aspect,a=void 0===i?1:i,o=t.focalDistance,s=void 0===o?1:o,u=t.near,c=void 0===u?.1:u,l=t.far,f=void 0===l?500:l;if(r>2*Math.PI)throw Error(\"radians\");var h=r/2,d=s*Math.tan(h),v=d*a;return(new n).ortho({left:-v,right:v,bottom:-d,top:d,near:c,far:f})}},{key:\"perspective\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fovy,n=void 0===e?void 0:e,r=t.fov,i=void 0===r?45*Math.PI/180:r,a=t.aspect,o=void 0===a?1:a,s=t.near,u=void 0===s?.1:s,c=t.far,l=void 0===c?500:c;if((n=n||i)>2*Math.PI)throw Error(\"radians\");return p.i(this,n,o,u,l),this.check()}},{key:\"determinant\",value:function(){return p.a(this)}},{key:\"getScale\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}},{key:\"getTranslation\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}},{key:\"getRotation\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*r,t[5]=this[5]*i,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*r,t[9]=this[9]*i,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{key:\"getRotationMatrix3\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(e||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return t[0]=this[0]*r,t[1]=this[1]*i,t[2]=this[2]*a,t[3]=this[4]*r,t[4]=this[5]*i,t[5]=this[6]*a,t[6]=this[8]*r,t[7]=this[9]*i,t[8]=this[10]*a,t}},{key:\"transpose\",value:function(){return p.p(this,this),this.check()}},{key:\"invert\",value:function(){return p.e(this,this),this.check()}},{key:\"multiplyLeft\",value:function(t){return p.g(this,t,this),this.check()}},{key:\"multiplyRight\",value:function(t){return p.g(this,this,t),this.check()}},{key:\"rotateX\",value:function(t){return p.k(this,this,t),this.check()}},{key:\"rotateY\",value:function(t){return p.l(this,this,t),this.check()}},{key:\"rotateZ\",value:function(t){return p.m(this,this,t),this.check()}},{key:\"rotateXYZ\",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],a=e[2];return this.rotateX(n).rotateY(i).rotateZ(a)}},{key:\"rotateAxis\",value:function(t,e){return p.j(this,this,t,e),this.check()}},{key:\"scale\",value:function(t){return Array.isArray(t)?p.n(this,this,t):p.n(this,this,[t,t,t]),this.check()}},{key:\"translate\",value:function(t){return p.o(this,this,t),this.check()}},{key:\"transform\",value:function(t,e){return 4===t.length?(e=y.c(e||[-0,-0,-0,-0],t,this),Object(c.b)(e,4),e):this.transformAsPoint(t,e)}},{key:\"transformAsPoint\",value:function(t,e){switch(t.length){case 2:e=g.h(e||[-0,-0],t,this);break;case 3:e=b.j(e||[-0,-0,-0],t,this);break;default:throw new Error(\"Illegal vector\")}return Object(c.b)(e,t.length),e}},{key:\"transformAsVector\",value:function(t,e){switch(t.length){case 2:e=Object(v.a)(e||[-0,-0],t,this);break;case 3:e=Object(v.c)(e||[-0,-0,-0],t,this);break;default:throw new Error(\"Illegal vector\")}return Object(c.b)(e,t.length),e}},{key:\"makeRotationX\",value:function(t){return this.identity().rotateX(t)}},{key:\"makeTranslation\",value:function(t,e,n){return this.identity().translate([t,e,n])}},{key:\"transformPoint\",value:function(t,e){return Object(c.c)(\"Matrix4.transformPoint\",\"3.0\"),this.transformAsPoint(t,e)}},{key:\"transformVector\",value:function(t,e){return Object(c.c)(\"Matrix4.transformVector\",\"3.0\"),this.transformAsPoint(t,e)}},{key:\"transformDirection\",value:function(t,e){return Object(c.c)(\"Matrix4.transformDirection\",\"3.0\"),this.transformAsVector(t,e)}}],[{key:\"_computeInfinitePerspectiveOffCenter\",value:function(t,e,n,r,i,a){var o=2*a/(n-e),s=2*a/(i-r),u=(n+e)/(n-e),c=(i+r)/(i-r),l=-2*a;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=u,t[9]=c,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=l,t[15]=0,t}}]),n}(d)},4878:function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},\"_\",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=[\"Array\",\"Boolean\",\"Date\",\"Error\",\"EvalError\",\"Function\",\"Infinity\",\"JSON\",\"Math\",\"NaN\",\"Number\",\"Object\",\"RangeError\",\"ReferenceError\",\"RegExp\",\"String\",\"SyntaxError\",\"TypeError\",\"URIError\",\"decodeURI\",\"decodeURIComponent\",\"encodeURI\",\"encodeURIComponent\",\"escape\",\"eval\",\"isFinite\",\"isNaN\",\"parseFloat\",\"parseInt\",\"undefined\",\"unescape\"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError(\"needs a 'context' argument.\");var e=document.createElement(\"iframe\");e.style||(e.style={}),e.style.display=\"none\",document.body.appendChild(e);var n=e.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,\"null\"),r=n.eval),forEach(Object_keys(t),(function(e){n[e]=t[e]})),forEach(globals,(function(e){t[e]&&(n[e]=t[e])}));var a=Object_keys(n),o=r.call(n,this.code);return forEach(Object_keys(n),(function(e){(e in t||-1===indexOf(a,e))&&(t[e]=n[e])})),forEach(globals,(function(e){e in t||defineProp(t,e,n[e])})),document.body.removeChild(e),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return t&&forEach(Object_keys(e),(function(n){t[n]=e[n]})),n},forEach(Object_keys(Script.prototype),(function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}})),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return\"object\"==typeof t&&forEach(Object_keys(t),(function(n){e[n]=t[n]})),e}},4887:function(t,e,n){},4888:function(t,e){},4889:function(t,e,n){\"use strict\";function r(t,e){if(!t)throw new Error(e||\"luma.gl: assertion failed.\")}n.d(e,\"a\",(function(){return r}))},4890:function(t,e,n){\"use strict\";(function(t){var r=n(25);e.a=\"undefined\"!=typeof window&&\"object\"===Object(r.a)(window.process)&&\"renderer\"===window.process.type||!(void 0===t||\"object\"!==Object(r.a)(t.versions)||!Boolean(t.versions.electron))||\"object\"===(\"undefined\"==typeof navigator?\"undefined\":Object(r.a)(navigator))&&\"string\"==typeof navigator.userAgent&&navigator.userAgent.indexOf(\"Electron\")>=0}).call(this,n(287))},4891:function(t,e,n){\"use strict\";(function(t){n.d(e,\"c\",(function(){return c})),n.d(e,\"b\",(function(){return d})),n.d(e,\"a\",(function(){return v}));var r=n(16),i=n(4685),a=n(4776),o=\"luma.gl: loaded under Node.js without headless gl installed, meaning that WebGL contexts can not be created. This may not be an error. For example, this is a typical configuration for isorender applications running on the server.\",s=t,u=null;function c(){var t=s.require(\"gl\");if(!t)throw new Error(o);return t.apply(void 0,arguments)}if(!a.a)try{u=s.require(\"gl/wrap\")}catch(t){}var l=function t(){Object(r.a)(this,t)},f=u||i.a,h=(f.WebGLRenderingContext,f.WebGLProgram,f.WebGLShader,f.WebGLBuffer),d=void 0===h?l:h;f.WebGLFramebuffer,f.WebGLRenderbuffer,f.WebGLTexture,f.WebGLUniformLocation,f.WebGLActiveInfo,f.WebGLShaderPrecisionFormat;var v=i.a.WebGL2RenderingContext||function t(){Object(r.a)(this,t)};i.a.Image}).call(this,n(934)(t))},4892:function(t,e,n){\"use strict\";(function(t){n.d(e,\"a\",(function(){return d})),n.d(e,\"c\",(function(){return v})),n.d(e,\"b\",(function(){return p}));var r=n(16),i=n(17),a=n(4894),o=n(4778),s=n(4777),u=n(5020),c=n(4893);function l(t,e){var n=t[e].bind(t);t[e]=function(){var e=arguments.length<=0?void 0:arguments[0];return e in t.state.cache||(t.state.cache[e]=n.apply(void 0,arguments)),t.state.enable?t.state.cache[e]:n.apply(void 0,arguments)},Object.defineProperty(t[e],\"name\",{value:\"\".concat(e,\"-from-cache\"),configurable:!1})}function f(t,e,n){var r=t[e].bind(t);t[e]=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s,u=n.apply(void 0,[t.state._updateCache].concat(a)),c=u.valueChanged,l=u.oldValue;c&&((s=t.state).log.apply(s,[\"gl.\".concat(e)].concat(a)),r.apply(void 0,a));return l},Object.defineProperty(t[e],\"name\",{value:\"\".concat(e,\"-to-cache\"),configurable:!1})}var h=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,a=void 0!==i&&i,u=n.log,c=void 0===u?function(){}:u;Object(r.a)(this,t),this.gl=e,this.stateStack=[],this.enable=!0,this.cache=a?Object(s.a)(e):Object.assign({},o.b),this.log=c,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(t,[{key:\"push\",value:function(){this.stateStack.push({})}},{key:\"pop\",value:function(){Object(u.a)(this.stateStack.length>0);var t=this.stateStack[this.stateStack.length-1];Object(s.c)(this.gl,t,this.cache),this.stateStack.pop()}},{key:\"_updateCache\",value:function(t){var e,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in t)Object(u.a)(void 0!==i),Object(c.a)(t[i],this.cache[i])||(n=!0,e=this.cache[i],r&&!(i in r)&&(r[i]=this.cache[i]),this.cache[i]=t[i]);return{valueChanged:n,oldValue:e}}}]),t}();function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(u.a)(void 0!==o),!e.state){var s=void 0!==t?t:window;for(var c in s.polyfillContext&&s.polyfillContext(e),e.state=new h(e,{copyState:o,enable:i}),a.a){var d=a.a[c];f(e,c,d)}l(e,\"getParameter\"),l(e,\"isEnabled\")}return e.state.enable=i,e}function v(t){t.state||d(t,{copyState:!1}),t.state.push()}function p(t){Object(u.a)(t.state),t.state.pop()}}).call(this,n(153))},4893:function(t,e,n){\"use strict\";function r(t,e){if(t===e)return!0;var n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}n.d(e,\"a\",(function(){return r}))},4894:function(t,e,n){\"use strict\";var r=n(5);e.a={enable:function(t,e){return t(Object(r.a)({},e,!0))},disable:function(t,e){return t(Object(r.a)({},e,!1))},pixelStorei:function(t,e,n){return t(Object(r.a)({},e,n))},hint:function(t,e,n){return t(Object(r.a)({},e,n))},bindFramebuffer:function(t,e,n){var i;switch(e){case 36160:return t((i={},Object(r.a)(i,36006,n),Object(r.a)(i,36010,n),i));case 36009:return t(Object(r.a)({},36006,n));case 36008:return t(Object(r.a)({},36010,n));default:return null}},blendColor:function(t,e,n,i,a){return t(Object(r.a)({},32773,new Float32Array([e,n,i,a])))},blendEquation:function(t,e){var n;return t((n={},Object(r.a)(n,32777,e),Object(r.a)(n,34877,e),n))},blendEquationSeparate:function(t,e,n){var i;return t((i={},Object(r.a)(i,32777,e),Object(r.a)(i,34877,n),i))},blendFunc:function(t,e,n){var i;return t((i={},Object(r.a)(i,32969,e),Object(r.a)(i,32968,n),Object(r.a)(i,32971,e),Object(r.a)(i,32970,n),i))},blendFuncSeparate:function(t,e,n,i,a){var o;return t((o={},Object(r.a)(o,32969,e),Object(r.a)(o,32968,n),Object(r.a)(o,32971,i),Object(r.a)(o,32970,a),o))},clearColor:function(t,e,n,i,a){return t(Object(r.a)({},3106,new Float32Array([e,n,i,a])))},clearDepth:function(t,e){return t(Object(r.a)({},2931,e))},clearStencil:function(t,e){return t(Object(r.a)({},2961,e))},colorMask:function(t,e,n,i,a){return t(Object(r.a)({},3107,[e,n,i,a]))},cullFace:function(t,e){return t(Object(r.a)({},2885,e))},depthFunc:function(t,e){return t(Object(r.a)({},2932,e))},depthRange:function(t,e,n){return t(Object(r.a)({},2928,new Float32Array([e,n])))},depthMask:function(t,e){return t(Object(r.a)({},2930,e))},frontFace:function(t,e){return t(Object(r.a)({},2886,e))},lineWidth:function(t,e){return t(Object(r.a)({},2849,e))},polygonOffset:function(t,e,n){var i;return t((i={},Object(r.a)(i,32824,e),Object(r.a)(i,10752,n),i))},sampleCoverage:function(t,e,n){var i;return t((i={},Object(r.a)(i,32938,e),Object(r.a)(i,32939,n),i))},scissor:function(t,e,n,i,a){return t(Object(r.a)({},3088,new Int32Array([e,n,i,a])))},stencilMask:function(t,e){var n;return t((n={},Object(r.a)(n,2968,e),Object(r.a)(n,36005,e),n))},stencilMaskSeparate:function(t,e,n){return t(Object(r.a)({},1028===e?2968:36005,n))},stencilFunc:function(t,e,n,i){var a;return t((a={},Object(r.a)(a,2962,e),Object(r.a)(a,2967,n),Object(r.a)(a,2963,i),Object(r.a)(a,34816,e),Object(r.a)(a,36003,n),Object(r.a)(a,36004,i),a))},stencilFuncSeparate:function(t,e,n,i,a){var o;return t((o={},Object(r.a)(o,1028===e?2962:34816,n),Object(r.a)(o,1028===e?2967:36003,i),Object(r.a)(o,1028===e?2963:36004,a),o))},stencilOp:function(t,e,n,i){var a;return t((a={},Object(r.a)(a,2964,e),Object(r.a)(a,2965,n),Object(r.a)(a,2966,i),Object(r.a)(a,34817,e),Object(r.a)(a,34818,n),Object(r.a)(a,34819,i),a))},stencilOpSeparate:function(t,e,n,i,a){var o;return t((o={},Object(r.a)(o,1028===e?2964:34817,n),Object(r.a)(o,1028===e?2965:34818,i),Object(r.a)(o,1028===e?2966:34819,a),o))},viewport:function(t,e,n,i,a){return t(Object(r.a)({},2978,new Int32Array([e,n,i,a])))}}},4895:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return s}));var r,i=n(5),a=n(4669),o=n(4760),s={WEBGL2:\"WEBGL2\",VERTEX_ARRAY_OBJECT:\"VERTEX_ARRAY_OBJECT\",TIMER_QUERY:\"TIMER_QUERY\",INSTANCED_RENDERING:\"INSTANCED_RENDERING\",MULTIPLE_RENDER_TARGETS:\"MULTIPLE_RENDER_TARGETS\",ELEMENT_INDEX_UINT32:\"ELEMENT_INDEX_UINT32\",BLEND_EQUATION_MINMAX:\"BLEND_EQUATION_MINMAX\",FLOAT_BLEND:\"FLOAT_BLEND\",COLOR_ENCODING_SRGB:\"COLOR_ENCODING_SRGB\",TEXTURE_DEPTH:\"TEXTURE_DEPTH\",TEXTURE_FLOAT:\"TEXTURE_FLOAT\",TEXTURE_HALF_FLOAT:\"TEXTURE_HALF_FLOAT\",TEXTURE_FILTER_LINEAR_FLOAT:\"TEXTURE_FILTER_LINEAR_FLOAT\",TEXTURE_FILTER_LINEAR_HALF_FLOAT:\"TEXTURE_FILTER_LINEAR_HALF_FLOAT\",TEXTURE_FILTER_ANISOTROPIC:\"TEXTURE_FILTER_ANISOTROPIC\",COLOR_ATTACHMENT_RGBA32F:\"COLOR_ATTACHMENT_RGBA32F\",COLOR_ATTACHMENT_FLOAT:\"COLOR_ATTACHMENT_FLOAT\",COLOR_ATTACHMENT_HALF_FLOAT:\"COLOR_ATTACHMENT_HALF_FLOAT\",GLSL_FRAG_DATA:\"GLSL_FRAG_DATA\",GLSL_FRAG_DEPTH:\"GLSL_FRAG_DEPTH\",GLSL_DERIVATIVES:\"GLSL_DERIVATIVES\",GLSL_TEXTURE_LOD:\"GLSL_TEXTURE_LOD\"},u=null;e.b=(r={},Object(i.a)(r,s.WEBGL2,[!1,!0]),Object(i.a)(r,s.VERTEX_ARRAY_OBJECT,[\"OES_vertex_array_object\",!0]),Object(i.a)(r,s.TIMER_QUERY,[\"EXT_disjoint_timer_query\",\"EXT_disjoint_timer_query_webgl2\"]),Object(i.a)(r,s.INSTANCED_RENDERING,[\"ANGLE_instanced_arrays\",!0]),Object(i.a)(r,s.MULTIPLE_RENDER_TARGETS,[\"WEBGL_draw_buffers\",!0]),Object(i.a)(r,s.ELEMENT_INDEX_UINT32,[\"OES_element_index_uint\",!0]),Object(i.a)(r,s.BLEND_EQUATION_MINMAX,[\"EXT_blend_minmax\",!0]),Object(i.a)(r,s.FLOAT_BLEND,[\"EXT_float_blend\"]),Object(i.a)(r,s.COLOR_ENCODING_SRGB,[\"EXT_sRGB\",!0]),Object(i.a)(r,s.TEXTURE_DEPTH,[\"WEBGL_depth_texture\",!0]),Object(i.a)(r,s.TEXTURE_FLOAT,[\"OES_texture_float\",!0]),Object(i.a)(r,s.TEXTURE_HALF_FLOAT,[\"OES_texture_half_float\",!0]),Object(i.a)(r,s.TEXTURE_FILTER_LINEAR_FLOAT,[\"OES_texture_float_linear\"]),Object(i.a)(r,s.TEXTURE_FILTER_LINEAR_HALF_FLOAT,[\"OES_texture_half_float_linear\"]),Object(i.a)(r,s.TEXTURE_FILTER_ANISOTROPIC,[\"EXT_texture_filter_anisotropic\"]),Object(i.a)(r,s.COLOR_ATTACHMENT_RGBA32F,[function(t){if(null!==u)return u;var e=new o.a(t,{format:6408,type:5126,dataFormat:6408}),n=new a.a(t,{id:\"test-framebuffer\",check:!1,attachments:Object(i.a)({},36064,e)}),r=n.getStatus();return e.delete(),n.delete(),u=36053===r},\"EXT_color_buffer_float\"]),Object(i.a)(r,s.COLOR_ATTACHMENT_FLOAT,[!1,\"EXT_color_buffer_float\"]),Object(i.a)(r,s.COLOR_ATTACHMENT_HALF_FLOAT,[\"EXT_color_buffer_half_float\"]),Object(i.a)(r,s.GLSL_FRAG_DATA,[\"WEBGL_draw_buffers\",!0]),Object(i.a)(r,s.GLSL_FRAG_DEPTH,[\"EXT_frag_depth\",!0]),Object(i.a)(r,s.GLSL_DERIVATIVES,[\"OES_standard_derivatives\",!0]),Object(i.a)(r,s.GLSL_TEXTURE_LOD,[\"EXT_shader_texture_lod\",!0]),r)},4896:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return r})),n.d(e,\"c\",(function(){return i})),n.d(e,\"a\",(function(){return a})),n.d(e,\"d\",(function(){return o}));function r(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(\"Failed to deduce GL constant from typed array\")}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,r=void 0===n||n;switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error(\"Failed to deduce typed array type from GL constant\")}}function a(t){var e=t.data,n=t.width,r=t.height,i=t.bytesPerPixel,a=void 0===i?4:i,o=t.temp,s=n*a;o=o||new Uint8Array(s);for(var u=0;u<r/2;++u){var c=u*s,l=(r-u-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}function o(t){for(var e=t.data,n=t.width,r=t.height,i=Math.round(n/2),a=Math.round(r/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var u=0;u<i;u++)for(var c=0;c<4;c++)o[4*(s*i+u)+c]=e[4*(2*s*n+2*u)+c];return{data:o,width:i,height:a}}},4897:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return s})),n.d(e,\"b\",(function(){return u}));var r=n(7),i=n(5025),a=n(5022),o=n(4889);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,r=void 0===n?null:n,a=e.color,s=void 0===a?null:a,u=e.depth,c=void 0===u?null:u,l=e.stencil,f=void 0===l?null:l,h={};r&&(h.framebuffer=r);var d=0;s&&(d|=16384,!0!==s&&(h.clearColor=s)),c&&(d|=256,!0!==c&&(h.clearDepth=c)),f&&(d|=1024,!0!==c&&(h.clearStencil=c)),Object(o.a)(0!==d,\"clear: bad arguments\"),Object(i.a)(t,h,(function(){t.clear(d)}))}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.framebuffer,s=void 0===n?null:n,u=e.buffer,c=void 0===u?6144:u,l=e.drawBuffer,f=void 0===l?0:l,h=e.value,d=void 0===h?[0,0,0,0]:h;Object(a.a)(t),Object(i.a)(t,{framebuffer:s},(function(){switch(c){case 6144:switch(d.constructor){case Int32Array:t.clearBufferiv(c,f,d);break;case Uint32Array:t.clearBufferuiv(c,f,d);break;case Float32Array:default:t.clearBufferfv(c,f,d)}break;case 6145:t.clearBufferfv(6145,0,[d]);break;case 6146:t.clearBufferiv(6146,0,[d]);break;case 34041:var e=Object(r.a)(d,2),n=e[0],i=e[1];t.clearBufferfi(34041,0,n,i);break;default:Object(o.a)(!1,\"clear: bad arguments\")}}))}},4898:function(t,e,n){\"use strict\";function r(t,e){if(!t)throw new Error(e||\"shadertools: assertion failed.\")}n.d(e,\"a\",(function(){return r}))},4899:function(t,e,n){\"use strict\";(function(t,r){n.d(e,\"a\",(function(){return a}));var i=n(25),a=(\"object\"!==(void 0===t?\"undefined\":Object(i.a)(t))||\"[object process]\"!==String(t)||t.browser,\"undefined\"!=typeof window&&window,void 0!==r?r:window);\"undefined\"!=typeof document&&document}).call(this,n(287),n(153))},4991:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return y})),n.d(e,\"a\",(function(){return m}));var r=n(16),i=n(178),a=n(80),o=n(17),s=n(19);function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"unnamed\",n=/#define[\\s*]SHADER_NAME[\\s*]([A-Za-z0-9_-]+)[\\s*]/,r=t.match(n);return r?r[1]:e}function c(t,e,n,r){for(var i=t.split(/\\r?\\n/),a={},o={},s=r||u(e)||\"(unnamed)\",c=\"\".concat(function(t){switch(t){case 35632:return\"fragment\";case 35633:return\"vertex\";default:return\"unknown type\"}}(n),\" shader \").concat(s),h=0;h<i.length;h++){var d=i[h];if(!(d.length<=1)){var v=d.split(\":\"),p=v[0],g=parseInt(v[2],10);if(isNaN(g))throw new Error(\"GLSL compilation error in \".concat(c,\": \").concat(t));\"WARNING\"!==p?a[g]=d:o[g]=d}}var b=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\": \",r=t.split(/\\r?\\n/),i=String(r.length+e-1).length;return r.map((function(t,r){var a=r+e,o=String(a).length;return f(a,i-o)+n+t}))}(e);return{shaderName:c,errors:l(a,b),warnings:l(o,b)}}function l(t,e){for(var n=\"\",r=0;r<e.length;r++){var i=e[r];if((t[r+3]||t[r+2]||t[r+1])&&(n+=\"\".concat(i,\"\\n\"),t[r+1])){var a=t[r+1],o=a.split(\":\",3),s=o[0],u=parseInt(o[1],10)||0,c=a.substring(o.join(\":\").length+1).trim();n+=f(\"^^^ \".concat(s,\": \").concat(c,\"\\n\\n\"),u)}}return n}function f(t,e){for(var n=\"\",r=0;r<e;++r)n+=\" \";return\"\".concat(n).concat(t)}var h=n(5022),d=n(4889),v=n(5024),p=n(4721),g=n(4628),b=function(t){function e(t,n){var o;Object(r.a)(this,e),Object(h.b)(t),Object(d.a)(\"string\"==typeof n.source,\"Shader: GLSL source code must be a JavaScript string\");var s=u(n.source,null)||n.id||Object(v.c)(\"unnamed \".concat(e.getTypeName(n.shaderType)));return(o=Object(i.a)(this,Object(a.a)(e).call(this,t,{id:s}))).shaderType=n.shaderType,o.source=n.source,o.initialize(n),o}return Object(s.a)(e,t),Object(o.a)(e,null,[{key:\"getTypeName\",value:function(t){switch(t){case 35633:return\"vertex-shader\";case 35632:return\"fragment-shader\";default:return Object(d.a)(!1),\"unknown\"}}}]),Object(o.a)(e,[{key:\"initialize\",value:function(t){var e=t.source,n=u(e,null);n&&(this.id=Object(v.c)(n)),this._compile(e)}},{key:\"getParameter\",value:function(t){return this.gl.getShaderParameter(this.handle,t)}},{key:\"toString\",value:function(){return\"\".concat(e.getTypeName(this.shaderType),\":\").concat(this.id)}},{key:\"getName\",value:function(){return u(this.source)||\"unnamed-shader\"}},{key:\"getSource\",value:function(){return this.gl.getShaderSource(this.handle)}},{key:\"getTranslatedSource\",value:function(){var t=this.gl.getExtension(\"WEBGL.debug_shaders\");return t?t.getTranslatedShaderSource(this.handle):\"No translated source available. WEBGL.debug_shaders not implemented\"}},{key:\"_compile\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;t.startsWith(\"#version \")||(t=\"#version 100\\n\".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var e=this.getParameter(35713);if(!e){var n=this.gl.getShaderInfoLog(this.handle),r=c(n,this.source,this.shaderType,this.id),i=r.shaderName,a=r.errors,o=r.warnings;throw p.a.error(\"GLSL compilation errors in \".concat(i,\"\\n\").concat(a))(),p.a.warn(\"GLSL compilation warnings in \".concat(i,\"\\n\").concat(o))(),new Error(\"GLSL compilation errors in \".concat(i))}}},{key:\"_deleteHandle\",value:function(){this.gl.deleteShader(this.handle)}},{key:\"_getOptsFromHandle\",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),e}(g.a),y=function(t){function e(t,n){return Object(r.a)(this,e),\"string\"==typeof n&&(n={source:n}),Object(i.a)(this,Object(a.a)(e).call(this,t,Object.assign({},n,{shaderType:35633})))}return Object(s.a)(e,t),Object(o.a)(e,[{key:\"_createHandle\",value:function(){return this.gl.createShader(35633)}}]),e}(b),m=function(t){function e(t,n){return Object(r.a)(this,e),\"string\"==typeof n&&(n={source:n}),Object(i.a)(this,Object(a.a)(e).call(this,t,Object.assign({},n,{shaderType:35632})))}return Object(s.a)(e,t),Object(o.a)(e,[{key:\"_createHandle\",value:function(){return this.gl.createShader(35632)}}]),e}(b)},4992:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return x})),n.d(e,\"b\",(function(){return E}));var r=n(5),i=n(4760),a=n(66),o=n.n(a),s=n(144),u=n(16),c=n(17),l=n(178),f=n(80),h=n(29),d=n(19),v=n(4646),p=n(5022),g=n(4721),b=[34069,34070,34071,34072,34073,34074],y=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),Object(p.b)(t),(n=Object(l.a)(this,Object(f.a)(e).call(this,t,Object.assign({},r,{target:34067})))).initialize(r),Object.seal(Object(h.a)(n)),n}var n;return Object(d.a)(e,t),Object(c.a)(e,[{key:\"initialize\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.mipmaps,r=void 0===n||n,i=e.parameters,a=void 0===i?{}:i;this.opts=e,this.setCubeMapImageData(e).then((function(){t.loaded=!0,r&&t.generateMipmap(e),t.setParameters(a)}))}},{key:\"subImage\",value:function(t){var e=t.face,n=t.data,r=t.x,i=void 0===r?0:r,a=t.y,o=void 0===a?0:a,s=t.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:e,data:n,x:i,y:o,mipmapLevel:u})}},{key:\"setCubeMapImageData\",value:(n=Object(s.a)(o.a.mark((function t(e){var n,r,i,a,s,u,c,l,f,h,d,v,p,y=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.width,r=e.height,i=e.pixels,a=e.data,s=e.border,u=void 0===s?0:s,c=e.format,l=void 0===c?6408:c,f=e.type,h=void 0===f?5121:f,d=this.gl,v=i||a,t.next=5,Promise.all(b.map((function(t){var e=v[t];return Promise.all(Array.isArray(e)?e:[e])})));case 5:p=t.sent,this.bind(),b.forEach((function(t,e){p[e].length>1&&!1!==y.opts.mipmaps&&g.a.warn(\"\".concat(y.id,\" has mipmap and multiple LODs.\"))(),p[e].forEach((function(e,i){n&&r?d.texImage2D(t,i,l,n,r,u,l,h,e):d.texImage2D(t,i,l,l,h,e)}))})),this.unbind();case 9:case\"end\":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:\"setImageDataForFace\",value:function(t){var e=this,n=t.face,r=t.width,i=t.height,a=t.pixels,o=t.data,s=t.border,u=void 0===s?0:s,c=t.format,l=void 0===c?6408:c,f=t.type,h=void 0===f?5121:f,d=this.gl,v=a||o;return this.bind(),v instanceof Promise?v.then((function(r){return e.setImageDataForFace(Object.assign({},t,{face:n,data:r,pixels:r}))})):this.width||this.height?d.texImage2D(n,0,l,r,i,u,l,h,v):d.texImage2D(n,0,l,l,h,v),this}}]),e}(v.a);y.FACES=b;var m=n(5025),_=n(4780),O=n(4637),j=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,e),Object(p.a)(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),(n=Object(l.a)(this,Object(f.a)(e).call(this,t,r))).initialize(r),Object.seal(Object(h.a)(n)),n}return Object(d.a)(e,t),Object(c.a)(e,null,[{key:\"isSupported\",value:function(t){return Object(p.d)(t)}}]),Object(c.a)(e,[{key:\"setImageData\",value:function(t){var e=this,n=t.level,r=void 0===n?0:n,i=t.dataFormat,a=void 0===i?6408:i,o=t.width,s=t.height,u=t.depth,c=void 0===u?1:u,l=t.border,f=void 0===l?0:l,h=t.format,d=t.type,v=void 0===d?5121:d,p=t.offset,g=void 0===p?0:p,b=t.data,y=t.parameters,j=void 0===y?{}:y;if(this._trackDeallocatedMemory(\"Texture\"),this.gl.bindTexture(this.target,this.handle),Object(m.a)(this.gl,j,(function(){ArrayBuffer.isView(b)&&e.gl.texImage3D(e.target,r,a,o,s,c,f,h,v,b),b instanceof O.a&&(e.gl.bindBuffer(35052,b.handle),e.gl.texImage3D(e.target,r,a,o,s,c,f,h,v,g))})),b&&b.byteLength)this._trackAllocatedMemory(b.byteLength,\"Texture\");else{var k=_.a[this.dataFormat]||4,w=_.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*k*w,\"Texture\")}return this.loaded=!0,this}}]),e}(v.a),k=n(4669),w=n(4889);function x(t,e){Object(w.a)(t instanceof i.a||t instanceof y||t instanceof j);var n=t.constructor,r=t.gl,a=t.width,o=t.height,s=t.format,u=t.type,c=t.dataFormat,l=t.border,f=t.mipmaps;return new n(r,Object.assign({width:a,height:o,format:s,type:u,dataFormat:c,border:l,mipmaps:f},e))}function E(t,e){var n=t.gl,i=t.width,a=t.height,o=t.id;return new k.a(n,Object.assign({},e,{id:\"framebuffer-for-\".concat(o),width:i,height:a,attachments:Object(r.a)({},36064,t)}))}},4994:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return c}));var r=n(16),i=n(17),a=n(4776),o=n(4685),s=n(4721),u=n(5071),c=(n(4686),new(function(){function t(){Object(r.a)(this,t),this.stats=new Map}return Object(i.a)(t,[{key:\"get\",value:function(t){return this.stats.has(t)||this.stats.set(t,new u.a({id:t})),this.stats.get(t)}}]),t}()));if(o.a.luma&&\"7.3.1\"!==o.a.luma.VERSION)throw new Error(\"luma.gl - multiple VERSIONs detected: \".concat(o.a.luma.VERSION,\" vs \").concat(\"7.3.1\"));o.a.luma||(a.a&&s.a.log(1,\"luma.gl \".concat(\"7.3.1\",\" - \").concat(\"set luma.log.priority=1 (or higher) to trace rendering\"))(),o.a.luma=o.a.luma||{VERSION:\"7.3.1\",version:\"7.3.1\",log:s.a,stats:c,globals:{modules:{},nodeIO:{}}});o.a.luma},4995:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return u}));var r=n(4777),i=n(7),a=n(13);function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var s={framebuffer:function(t,e){var n=e&&\"handle\"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:function(t,e){return e?t.enable(3042):t.disable(3042)},blendColor:function(t,e){return t.blendColor.apply(t,Object(a.a)(e))},blendEquation:function(t,e){e=o(e)?e:[e,e],t.blendEquationSeparate.apply(t,Object(a.a)(e))},blendFunc:function(t,e){e=o(e)&&2===e.length?[].concat(Object(a.a)(e),Object(a.a)(e)):e,t.blendFuncSeparate.apply(t,Object(a.a)(e))},clearColor:function(t,e){return t.clearColor.apply(t,Object(a.a)(e))},clearDepth:function(t,e){return t.clearDepth(e)},clearStencil:function(t,e){return t.clearStencil(e)},colorMask:function(t,e){return t.colorMask.apply(t,Object(a.a)(e))},cull:function(t,e){return e?t.enable(2884):t.disable(2884)},cullFace:function(t,e){return t.cullFace(e)},depthTest:function(t,e){return e?t.enable(2929):t.disable(2929)},depthFunc:function(t,e){return t.depthFunc(e)},depthMask:function(t,e){return t.depthMask(e)},depthRange:function(t,e){return t.depthRange.apply(t,Object(a.a)(e))},dither:function(t,e){return e?t.enable(3024):t.disable(3024)},derivativeHint:function(t,e){t.hint(35723,e)},frontFace:function(t,e){return t.frontFace(e)},mipmapHint:function(t,e){return t.hint(33170,e)},lineWidth:function(t,e){return t.lineWidth(e)},polygonOffsetFill:function(t,e){return e?t.enable(32823):t.disable(32823)},polygonOffset:function(t,e){return t.polygonOffset.apply(t,Object(a.a)(e))},sampleCoverage:function(t,e){return t.sampleCoverage.apply(t,Object(a.a)(e))},scissorTest:function(t,e){return e?t.enable(3089):t.disable(3089)},scissor:function(t,e){return t.scissor.apply(t,Object(a.a)(e))},stencilTest:function(t,e){return e?t.enable(2960):t.disable(2960)},stencilMask:function(t,e){var n=e=o(e)?e:[e,e],r=Object(i.a)(n,2),a=r[0],s=r[1];t.stencilMaskSeparate(1028,a),t.stencilMaskSeparate(1029,s)},stencilFunc:function(t,e){var n=e=o(e)&&3===e.length?[].concat(Object(a.a)(e),Object(a.a)(e)):e,r=Object(i.a)(n,6),s=r[0],u=r[1],c=r[2],l=r[3],f=r[4],h=r[5];t.stencilFuncSeparate(1028,s,u,c),t.stencilFuncSeparate(1029,l,f,h)},stencilOp:function(t,e){var n=e=o(e)&&3===e.length?[].concat(Object(a.a)(e),Object(a.a)(e)):e,r=Object(i.a)(n,6),s=r[0],u=r[1],c=r[2],l=r[3],f=r[4],h=r[5];t.stencilOpSeparate(1028,s,u,c),t.stencilOpSeparate(1029,l,f,h)},viewport:function(t,e){return t.viewport.apply(t,Object(a.a)(e))}};function u(t,e){for(var n in Object(r.c)(t,e),e){var i=s[n];i&&i(t,e[n],n)}}},4996:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return f})),n.d(e,\"c\",(function(){return h})),n.d(e,\"a\",(function(){return d}));var r=n(4637),i=n(4669),a=(n(4646),n(5025)),o=n(5022),s=n(4896),u=n(4889);function c(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(u.a)(!1),0}}var l=n(4992);n(4721);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceX,r=void 0===n?0:n,i=e.sourceY,a=void 0===i?0:i,o=e.sourceFormat,c=void 0===o?6408:o,l=e.sourceAttachment,f=void 0===l?36064:l,h=e.target,d=void 0===h?null:h,g=e.sourceWidth,b=e.sourceHeight,y=e.sourceType,m=v(t),_=m.framebuffer,O=m.deleteFramebuffer;Object(u.a)(_);var j=_.gl,k=_.handle,w=_.attachments;g=g||_.width,b=b||_.height,36064===f&&null===k&&(f=1028),Object(u.a)(w[f]),d=p(d,y=y||w[f].type,c,g,b),y=y||Object(s.b)(d);var x=j.bindFramebuffer(36160,k);return j.readPixels(r,a,g,b,c,y,d),j.bindFramebuffer(36160,x||null),O&&_.delete(),d}function h(t,e){var n=e.sourceX,i=void 0===n?0:n,s=e.sourceY,l=void 0===s?0:s,f=e.sourceFormat,h=void 0===f?6408:f,d=e.target,p=void 0===d?null:d,g=e.targetByteOffset,b=void 0===g?0:g,y=e.sourceWidth,m=e.sourceHeight,_=e.sourceType,O=v(t),j=O.framebuffer,k=O.deleteFramebuffer;Object(u.a)(j);var w=j.gl;if(y=y||j.width,m=m||j.height,Object(o.a)(w),_=_||(p?p.type:5121),!p){var x=c(h),E=function(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return Object(u.a)(!1),0}}(_),T=b+y*m*x*E;p=new r.a(w,{byteLength:T,accessor:{type:_,size:x}})}return p.bind({target:35051}),Object(a.a)(w,{framebuffer:j},(function(){w.readPixels(i,l,y,m,h,_,b)})),p.unbind({target:35051}),k&&j.delete(),p}function d(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceAttachment,r=void 0===n?36064:n,i=e.targetMaxHeight,a=void 0===i?Number.MAX_SAFE_INTEGER:i,o=f(t,{sourceAttachment:r}),u=t.width,c=t.height;c>a;){var l=Object(s.d)({data:o,width:u,height:c});o=l.data,u=l.width,c=l.height}Object(s.a)({data:o,width:u,height:c});var h=document.createElement(\"canvas\");h.width=u,h.height=c;var d=h.getContext(\"2d\"),v=d.createImageData(u,c);return v.data.set(o),d.putImageData(v,0,0),h.toDataURL()}function v(t){return t instanceof i.a?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Object(l.b)(t),deleteFramebuffer:!0}}function p(t,e,n,r,i){return t||(e=e||5121,new(Object(s.c)(e,{clamped:!1}))(r*i*c(n)))}},4997:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return f})),n.d(e,\"a\",(function(){return h}));var r,i,a=n(5),o=n(4779),s=function(t){return c(t)?void 0:0},u=(r={},Object(a.a)(r,3074,(function(t){return c(t)?void 0:36064})),Object(a.a)(r,35723,(function(t){return c(t)?void 0:4352})),Object(a.a)(r,35977,s),Object(a.a)(r,32937,s),Object(a.a)(r,36795,(function(t,e){var n=c(t)?t.getExtension(\"EXT_disjoint_timer_query_webgl2\"):t.getExtension(\"EXT_disjoint_timer_query\");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0})),Object(a.a)(r,37445,(function(t,e){var n=t.getExtension(\"WEBGL_debug_renderer_info\");return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(a.a)(r,37446,(function(t,e){var n=t.getExtension(\"WEBGL_debug_renderer_info\");return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(a.a)(r,34047,(function(t,e){var n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(a.a)(r,32883,s),Object(a.a)(r,35071,s),Object(a.a)(r,37447,s),Object(a.a)(r,36063,(function(t,e){if(!c(t)){var n=t.getExtension(\"WEBGL_draw_buffers\");return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(a.a)(r,35379,s),Object(a.a)(r,35374,s),Object(a.a)(r,35377,s),Object(a.a)(r,34852,(function(t){if(!c(t)){var e=t.getExtension(\"WEBGL_draw_buffers\");return e?e.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(a.a)(r,36203,(function(t){return t.getExtension(\"OES_element_index\")?2147483647:65535})),Object(a.a)(r,33001,(function(t){return t.getExtension(\"OES_element_index\")?16777216:65535})),Object(a.a)(r,33e3,(function(t){return 16777216})),Object(a.a)(r,37157,s),Object(a.a)(r,35373,s),Object(a.a)(r,35657,s),Object(a.a)(r,36183,s),Object(a.a)(r,37137,s),Object(a.a)(r,34045,s),Object(a.a)(r,35978,s),Object(a.a)(r,35979,s),Object(a.a)(r,35968,s),Object(a.a)(r,35376,s),Object(a.a)(r,35375,s),Object(a.a)(r,35659,s),Object(a.a)(r,37154,s),Object(a.a)(r,35371,s),Object(a.a)(r,35658,s),Object(a.a)(r,35076,s),Object(a.a)(r,35077,s),Object(a.a)(r,35380,s),r);function c(t){return Boolean(t&&2===t._version)}function l(t){return Boolean(t&&2===t._version)}var f=(i={},Object(a.a)(i,\"OES_vertex_array_object\",{meta:{suffix:\"OES\"},createVertexArray:function(){Object(o.a)(!1,\"VertexArray requires WebGL2 or OES_vertex_array_object extension\")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(a.a)(i,\"ANGLE_instanced_arrays\",{meta:{suffix:\"ANGLE\"},vertexAttribDivisor:function(t,e){Object(o.a)(0===e,\"WebGL instanced rendering not supported\")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(a.a)(i,\"WEBGL_draw_buffers\",{meta:{suffix:\"WEBGL\"},drawBuffers:function(){Object(o.a)(!1)}}),Object(a.a)(i,\"EXT_disjoint_timer_query\",{meta:{suffix:\"EXT\"},createQuery:function(){Object(o.a)(!1)},deleteQuery:function(){Object(o.a)(!1)},beginQuery:function(){Object(o.a)(!1)},endQuery:function(){},getQuery:function(t,e){return this.getQueryObject(t,e)},getQueryParameter:function(t,e){return this.getQueryObject(t,e)},getQueryObject:function(){}}),i),h={readBuffer:function(t,e,n){l(t)&&e(n)},getVertexAttrib:function(t,e,n,r){var i,a=function(t,e){return{webgl2:l(t),ext:t.getExtension(e)}}(t,\"ANGLE_instanced_arrays\"),o=a.webgl2,s=a.ext;switch(r){case 35069:i=!!o&&void 0;break;case 35070:i=o||s?void 0:0}return void 0!==i?i:e(n,r)},getProgramParameter:function(t,e,n,r){if(!l(t))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,r)},getInternalformatParameter:function(t,e,n,r,i){if(!l(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter:function(t,e,n,r){switch(r){case 34046:var i=t.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,r)},getParameter:function(t,e,n){var r=u[n],i=\"function\"==typeof r?r(t,e,n):r;return void 0!==i?i:e(n)},hint:function(t,e,n,r){return e(n,r)}}},5019:function(t,e,n){\"use strict\";function r(t){for(var e in t)return!1;return!0}function i(t){return Boolean(t&&2===t._version)}n.d(e,\"a\",(function(){return r})),n.d(e,\"b\",(function(){return i}))},5020:function(t,e,n){\"use strict\";function r(t,e){if(!t)throw new Error(e||\"luma.gl: assertion failed.\")}n.d(e,\"a\",(function(){return r}))},5021:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return v}));var r=n(16),i=n(178),a=n(80),o=n(29),s=n(17),u=n(19),c=n(4628),l=n(5023),f=n(4895),h=n(5022),d=n(4889),v=function(t){function e(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),(n=Object(i.a)(this,Object(a.a)(e).call(this,t,s))).target=null,n._queryPending=!1,n._pollingPromise=null,Object.seal(Object(o.a)(n)),n}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:\"isSupported\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(h.d)(t),r=Object(l.c)(t,f.a.TIMER_QUERY),i=n||r,a=!0,o=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var v=u.value;switch(v){case\"queries\":i=i&&n;break;case\"timers\":i=i&&r;break;default:Object(d.a)(!1)}}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return i}}]),Object(s.a)(e,[{key:\"beginTimeElapsedQuery\",value:function(){return this.begin(35007)}},{key:\"beginOcclusionQuery\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.conservative,n=void 0!==e&&e;return this.begin(n?36202:35887)}},{key:\"beginTransformFeedbackQuery\",value:function(){return this.begin(35976)}},{key:\"begin\",value:function(t){return this._queryPending||(this.target=t,this.gl.beginQuery(this.target,this.handle)),this}},{key:\"end\",value:function(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:\"isResultAvailable\",value:function(){if(!this._queryPending)return!1;var t=this.gl.getQueryParameter(this.handle,34919);return t&&(this._queryPending=!1),t}},{key:\"isTimerDisjoint\",value:function(){return this.gl.getParameter(36795)}},{key:\"getResult\",value:function(){return this.gl.getQueryParameter(this.handle,34918)}},{key:\"getTimerMilliseconds\",value:function(){return this.getResult()/1e6}},{key:\"createPoll\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function a(){t.isResultAvailable()?(r(t.getResult()),t._pollingPromise=null):n++>e?(i(\"Timed out\"),t._pollingPromise=null):requestAnimationFrame(a)}))})),this._pollingPromise}},{key:\"_createHandle\",value:function(){return e.isSupported(this.gl)?this.gl.createQuery():null}},{key:\"_deleteHandle\",value:function(){this.gl.deleteQuery(this.handle)}}]),e}(c.a)},5022:function(t,e,n){\"use strict\";n.d(e,\"c\",(function(){return i})),n.d(e,\"d\",(function(){return a})),n.d(e,\"b\",(function(){return o})),n.d(e,\"a\",(function(){return s}));var r=n(4889);function i(t){return Boolean(t&&Number.isFinite(t._version))}function a(t){return Boolean(t&&2===t._version)}function o(t){Object(r.a)(i(t),\"Invalid WebGLRenderingContext\")}function s(t){Object(r.a)(a(t),\"Requires WebGL2\")}},5023:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return s})),n.d(e,\"c\",(function(){return u})),n.d(e,\"a\",(function(){return c}));var r=n(4895),i=n(5022),a=n(4889),o=n(4721);function s(t,e){return u(t,e)}function u(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return l(t,e)}))}function c(t){if(t.luma=t.luma||{},!t.luma.caps)for(var e in t.luma.caps={},t.luma.caps.webgl2=Object(i.d)(t),r.b)t.luma.caps[e]=l(t,e);return t.luma.caps}function l(t,e){var n=r.b[e];Object(a.a)(n,e);var s,u=Object(i.d)(t)&&n[1]||n[0];if(\"function\"==typeof u)s=u(t);else if(Array.isArray(u)){s=!0;var c=!0,l=!1,f=void 0;try{for(var h,d=u[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var v=h.value;s=s&&Boolean(t.getExtension(v))}}catch(t){l=!0,f=t}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}}else\"string\"==typeof u?s=Boolean(t.getExtension(u)):\"boolean\"==typeof u?s=u:Object(a.a)(!1);return s||o.a.log(2,\"Feature: \".concat(e,\" not supported\"))(),s}},5024:function(t,e,n){\"use strict\";n.d(e,\"c\",(function(){return a})),n.d(e,\"b\",(function(){return o})),n.d(e,\"a\",(function(){return s}));var r=n(4889),i={};function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"id\";i[t]=i[t]||1;var e=i[t]++;return\"\".concat(t,\"-\").concat(e)}function o(t){return Object(r.a)(\"number\"==typeof t,\"Input must be a number\"),t&&0==(t&t-1)}function s(t){var e=!0;for(var n in t){e=!1;break}return e}},5025:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return s}));var r=n(4892),i=n(4995),a=n(5019),o=n(5020);function s(t,e,n){if(Object(a.a)(e))return n(t);var s,u=e.nocatch,c=void 0===u||u;if(Object(o.a)(!e.frameBuffer),Object(r.c)(t),Object(i.a)(t,e),c)s=n(t),Object(r.b)(t);else try{s=n(t)}finally{Object(r.b)(t)}return s}},5026:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i}));var r=n(4721);function i(t,e,n){var i=n.removedProps,a=void 0===i?{}:i,o=n.deprecatedProps,s=void 0===o?{}:o,u=n.replacedProps,c=void 0===u?{}:u;for(var l in a)if(l in e){var f=a[l]?\"\".concat(t,\".\").concat(a[l]):\"N/A\";r.a.removed(\"\".concat(t,\".\").concat(l),f)()}for(var h in s)if(h in e){var d=s[h];r.a.deprecated(\"\".concat(t,\".\").concat(h),\"\".concat(t,\".\").concat(d))()}var v=null;for(var p in c)if(p in e){var g=c[p];r.a.deprecated(\"\".concat(t,\".\").concat(p),\"\".concat(t,\".\").concat(g))(),(v=v||Object.assign({},e))[g]=e[p],delete v[p]}return v||e}},5027:function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return i})),n.d(e,\"a\",(function(){return a}));var r=n(4889);function i(t,e){if(\"string\"!=typeof e)return e;var n=Number(e);if(!isNaN(n))return n;var i=t[e=e.replace(/^.*\\./,\"\")];return Object(r.a)(void 0!==i,\"Accessing undefined constant GL.\".concat(e)),i}function a(t,e){for(var n in e=Number(e),t)if(t[n]===e)return\"GL.\".concat(n);return String(e)}},5028:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return i}));var r=n(4721);function i(t,e,n,i){var a=\"See luma.gl \".concat(n,\" Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide\"),o=Object.getPrototypeOf(t);i.forEach((function(t){o.methodName||(o[t]=function(){throw r.a.removed(\"Calling removed method \".concat(e,\".\").concat(t,\": \"),a)(),new Error(t)})}))}},5029:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return v}));var r=n(16),i=n(178),a=n(80),o=n(29),s=n(17),u=n(19),c=n(4628),l=n(4637),f=n(5022),h=n(5024),d=n(4721),v=function(t){function e(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(this,e),Object(f.a)(t),(n=Object(i.a)(this,Object(a.a)(e).call(this,t,s))).initialize(s),n.stubRemovedMethods(\"TransformFeedback\",\"v6.0\",[\"pause\",\"resume\"]),Object.seal(Object(o.a)(n)),n}return Object(u.a)(e,t),Object(s.a)(e,null,[{key:\"isSupported\",value:function(t){return Object(f.d)(t)}}]),Object(s.a)(e,[{key:\"initialize\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(h.a)(this.buffers)||this.bind((function(){return t._unbindBuffers()})),this.setProps(e),this}},{key:\"setProps\",value:function(t){\"program\"in t&&(this.configuration=t.program&&t.program.configuration),\"configuration\"in t&&(this.configuration=t.configuration),\"bindOnUse\"in t&&(t=t.bindOnUse),\"buffers\"in t&&this.setBuffers(t.buffers)}},{key:\"setBuffers\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in e)t.setBuffer(n,e[n])})),this}},{key:\"setBuffer\",value:function(t,e){var n=this,r=this._getVaryingIndex(t),i=this._getBufferParams(e),a=i.buffer,o=i.byteSize,s=i.byteOffset;return r<0?(this.unused[t]=a,d.a.warn((function(){return\"\".concat(n.id,\" unused varying buffer \").concat(t)}))(),this):(this.buffers[r]=e,this.bindOnUse||this._bindBuffer(r,a,s,o),this)}},{key:\"begin\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}},{key:\"end\",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:\"_getBufferParams\",value:function(t){var e,n,r;return t instanceof l.a==!1?(r=t.buffer,n=t.byteSize,e=t.byteOffset):r=t,void 0===e&&void 0===n||(e=e||0,n=n||r.byteLength-e),{buffer:r,byteOffset:e,byteSize:n}}},{key:\"_getVaryingInfo\",value:function(t){return this.configuration&&this.configuration.getVaryingInfo(t)}},{key:\"_getVaryingIndex\",value:function(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;var e=Number(t);return Number.isFinite(e)?e:-1}},{key:\"_bindBuffers\",value:function(){if(this.bindOnUse)for(var t in this.buffers){var e=this._getBufferParams(this.buffers[t]),n=e.buffer,r=e.byteSize,i=e.byteOffset;this._bindBuffer(t,n,i,r)}}},{key:\"_unbindBuffers\",value:function(){if(this.bindOnUse)for(var t in this.buffers)this._bindBuffer(t,null)}},{key:\"_bindBuffer\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=e&&e.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,t,i,n,r):this.gl.bindBufferBase(35982,t,i),this}},{key:\"_createHandle\",value:function(){return this.gl.createTransformFeedback()}},{key:\"_deleteHandle\",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:\"_bindHandle\",value:function(t){this.gl.bindTransformFeedback(36386,this.handle)}}]),e}(c.a)},5030:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return p})),n.d(e,\"b\",(function(){return g}));var r=n(17),i=n(178),a=n(80),o=n(19),s=n(16),u=n(4731),c=n(5024),l=[255,255,255],f=[0,0,1],h=[0,0,-1],d=[0,0,1],v=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,t),this.id=e.id||Object(c.c)(\"light\");var n=e.color,r=void 0===n?l:n;this.color=r;var i=e.intensity,a=void 0===i?1:i;this.intensity=a},p=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)(this,e),(t=Object(i.a)(this,Object(a.a)(e).call(this,n))).type=\"ambient\",t}return Object(o.a)(e,t),e}(v),g=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),(t=Object(i.a)(this,Object(a.a)(e).call(this,n))).type=\"directional\";var r=n.direction,o=void 0===r?h:r;return t.direction=new u.b(o).normalize().toArray(),t}return Object(o.a)(e,t),e}(v);!function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.a)(this,e),(t=Object(i.a)(this,Object(a.a)(e).call(this,n))).type=\"point\";var r=n.position,o=void 0===r?d:r;return t.position=o,t.attenuation=t._getAttenuation(n),t}Object(o.a)(e,t),Object(r.a)(e,[{key:\"_getAttenuation\",value:function(t){return\"attenuation\"in t?t.attenuation:\"intensity\"in t?[0,0,t.intensity]:f}}])}(v)},5031:function(t,e,n){\"use strict\";e.a={name:\"fp32\",vs:\"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\nconst float TWO_PI = 6.2831854820251465;\\nconst float PI_2 = 1.5707963705062866;\\nconst float PI_16 = 0.1963495463132858;\\n\\nconst float SIN_TABLE_0 = 0.19509032368659973;\\nconst float SIN_TABLE_1 = 0.3826834261417389;\\nconst float SIN_TABLE_2 = 0.5555702447891235;\\nconst float SIN_TABLE_3 = 0.7071067690849304;\\n\\nconst float COS_TABLE_0 = 0.9807852506637573;\\nconst float COS_TABLE_1 = 0.9238795042037964;\\nconst float COS_TABLE_2 = 0.8314695954322815;\\nconst float COS_TABLE_3 = 0.7071067690849304;\\n\\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\\n\\nfloat sin_taylor_fp32(float a) {\\n  float r, s, t, x;\\n\\n  if (a == 0.0) {\\n    return 0.0;\\n  }\\n\\n  x = -a * a;\\n  s = a;\\n  r = a;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_3;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_5;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_7;\\n  s = s + t;\\n\\n  r = r * x;\\n  t = r * INVERSE_FACTORIAL_9;\\n  s = s + t;\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\\n  if (a == 0.0) {\\n    sin_t = 0.0;\\n    cos_t = 1.0;\\n  }\\n  sin_t = sin_taylor_fp32(a);\\n  cos_t = sqrt(1.0 - sin_t * sin_t);\\n}\\n\\nfloat tan_taylor_fp32(float a) {\\n    float sin_a;\\n    float cos_a;\\n\\n    if (a == 0.0) {\\n        return 0.0;\\n    }\\n    float z = floor(a / TWO_PI);\\n    float r = a - TWO_PI * z;\\n\\n    float t;\\n    float q = floor(r / PI_2 + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return 0.0 / 0.0;\\n    }\\n\\n    t = r - PI_2 * q;\\n\\n    q = floor(t / PI_16 + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return 0.0 / 0.0;\\n    } else {\\n        t = t - PI_16 * q;\\n    }\\n\\n    float u = 0.0;\\n    float v = 0.0;\\n\\n    float sin_t, cos_t;\\n    float s, c;\\n    sincos_taylor_fp32(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0;\\n            v = SIN_TABLE_0;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1;\\n            v = SIN_TABLE_1;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2;\\n            v = SIN_TABLE_2;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3;\\n            v = SIN_TABLE_3;\\n        }\\n        if (k > 0) {\\n            s = u * sin_t + v * cos_t;\\n            c = u * cos_t - v * sin_t;\\n        } else {\\n            s = u * sin_t - v * cos_t;\\n            c = u * cos_t + v * sin_t;\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return sin_a / cos_a;\\n}\\n#endif\\n\\nfloat tan_fp32(float a) {\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\\n  return tan_taylor_fp32(a);\\n#else\\n  return tan(a);\\n#endif\\n}\\n\",fs:null}},5057:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return P}));var r=n(25),i=n(13),a=n(5),o=n(16),s=n(17),u=n(4774),c=\"undefined\"!=typeof __VERSION__?__VERSION__:\"untranspiled source\",l=Object(u.a)();function f(t){try{var e=window[t],n=\"__storage_test__\";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}var h=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:\"sessionStorage\";Object(o.a)(this,t),this.storage=f(r),this.id=e,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(s.a)(t,[{key:\"getConfiguration\",value:function(){return this.config}},{key:\"setConfiguration\",value:function(t){return this.config={},this.updateConfiguration(t)}},{key:\"updateConfiguration\",value:function(t){if(Object.assign(this.config,t),this.storage){var e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}},{key:\"_loadConfiguration\",value:function(){var t={};if(this.storage){var e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}]),t}();function d(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=t.src.replace(/\\(/g,\"%28\").replace(/\\)/g,\"%29\");t.width>r&&(n=Math.min(n,r/t.width));var a=t.width*n,o=t.height*n,s=[\"font-size:1px;\",\"padding:\".concat(Math.floor(o/2),\"px \").concat(Math.floor(a/2),\"px;\"),\"line-height:\".concat(o,\"px;\"),\"background:url(\".concat(i,\");\"),\"background-size:\".concat(a,\"px \").concat(o,\"px;\"),\"color:transparent;\"].join(\"\");return[\"\".concat(e,\" %c+\"),s]}var v={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function p(t){return\"string\"==typeof t?v[t.toUpperCase()]||v.WHITE:t}function g(t){if(\"undefined\"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if(\"string\"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);\"Object\"===n&&t.constructor&&(n=t.constructor.name);if(\"Map\"===n||\"Set\"===n)return Array.from(n);if(\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,i,a=!0,o=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){o=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[\"constructor\"],r=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(r),a=g(i);try{var o=function(){var r=e.value;\"function\"==typeof t[r]&&(n.find((function(t){return r===t}))||(t[r]=t[r].bind(t)))};for(a.s();!(e=a.n()).done;)o()}catch(t){a.e(t)}finally{a.f()}}function m(t,e){if(!t)throw new Error(e||\"Assertion failed\")}var _=n(4631);function O(){var t;if(l&&_.b.performance)t=_.b.performance.now();else if(_.a.hrtime){var e=_.a.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}var j={debug:l&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},k={enabled:!0,level:0};function w(){}var x={},E={once:!0};function T(t){for(var e in t)for(var n in t[e])return n||\"untitled\";return\"empty\"}var P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id;Object(o.a)(this,t),this.id=n,this.VERSION=c,this._startTs=O(),this._deltaTs=O(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new h(\"__probe-\".concat(this.id,\"__\"),k),this.userData={},this.timeStamp(\"\".concat(this.id,\" started\")),y(this),Object.seal(this)}return Object(s.a)(t,[{key:\"isEnabled\",value:function(){return this._storage.config.enabled}},{key:\"getLevel\",value:function(){return this._storage.config.level}},{key:\"getTotal\",value:function(){return Number((O()-this._startTs).toPrecision(10))}},{key:\"getDelta\",value:function(){return Number((O()-this._deltaTs).toPrecision(10))}},{key:\"getPriority\",value:function(){return this.level}},{key:\"enable\",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:t}),this}},{key:\"setLevel\",value:function(t){return this._storage.updateConfiguration({level:t}),this}},{key:\"assert\",value:function(t,e){m(t,e)}},{key:\"warn\",value:function(t){return this._getLogFunction(0,t,j.warn,arguments,E)}},{key:\"error\",value:function(t){return this._getLogFunction(0,t,j.error,arguments)}},{key:\"deprecated\",value:function(t,e){return this.warn(\"`\".concat(t,\"` is deprecated and will be removed in a later version. Use `\").concat(e,\"` instead\"))}},{key:\"removed\",value:function(t,e){return this.error(\"`\".concat(t,\"` has been removed. Use `\").concat(e,\"` instead\"))}},{key:\"probe\",value:function(t,e){return this._getLogFunction(t,e,j.log,arguments,{time:!0,once:!0})}},{key:\"log\",value:function(t,e){return this._getLogFunction(t,e,j.debug,arguments)}},{key:\"info\",value:function(t,e){return this._getLogFunction(t,e,console.info,arguments)}},{key:\"once\",value:function(t,e){return this._getLogFunction(t,e,j.debug||j.info,arguments,E)}},{key:\"table\",value:function(t,e,n){return e?this._getLogFunction(t,e,console.table||w,n&&[n],{tag:T(e)}):w}},{key:\"image\",value:function(t){var e=t.logLevel,r=t.priority,a=t.image,o=t.message,s=void 0===o?\"\":o,u=t.scale,c=void 0===u?1:u;return this._shouldLog(e||r)?l?function(t){var e=t.image,n=t.message,r=void 0===n?\"\":n,a=t.scale,o=void 0===a?1:a;if(\"string\"==typeof e){var s=new Image;return s.onload=function(){var t,e=d(s,r,o);(t=console).log.apply(t,Object(i.a)(e))},s.src=e,w}var u=e.nodeName||\"\";if(\"img\"===u.toLowerCase()){var c;return(c=console).log.apply(c,Object(i.a)(d(e,r,o))),w}if(\"canvas\"===u.toLowerCase()){var l=new Image;return l.onload=function(){var t;return(t=console).log.apply(t,Object(i.a)(d(l,r,o)))},l.src=e.toDataURL(),w}return w}({image:a,message:s,scale:c}):function(t){var e=t.image,r=(t.message,t.scale),i=void 0===r?1:r,a=null;try{a=n(4888)}catch(t){}if(a)return function(){return a(e,{fit:\"box\",width:\"\".concat(Math.round(80*i),\"%\")}).then((function(t){return console.log(t)}))};return w}({image:a,message:s,scale:c}):w}},{key:\"settings\",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:\"get\",value:function(t){return this._storage.config[t]}},{key:\"set\",value:function(t,e){this._storage.updateConfiguration(Object(a.a)({},t,e))}},{key:\"time\",value:function(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}},{key:\"timeEnd\",value:function(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}},{key:\"timeStamp\",value:function(t,e){return this._getLogFunction(t,e,console.timeStamp||w)}},{key:\"group\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=n=A({logLevel:t,message:e,opts:n}),i=r.collapsed;return n.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:\"groupCollapsed\",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}},{key:\"groupEnd\",value:function(t){return this._getLogFunction(t,\"\",console.groupEnd||w)}},{key:\"withGroup\",value:function(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}},{key:\"trace\",value:function(){console.trace&&console.trace()}},{key:\"_shouldLog\",value:function(t){return this.isEnabled()&&this.getLevel()>=S(t)}},{key:\"_getLogFunction\",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(t)){var o;a=A({logLevel:t,message:e,args:r,opts:a}),m(n=n||a.method),a.total=this.getTotal(),a.delta=this.getDelta(),this._deltaTs=O();var s=a.tag||a.message;if(a.once){if(x[s])return w;x[s]=O()}return e=L(this.id,a.message,a),(o=n).bind.apply(o,[console,e].concat(Object(i.a)(a.args)))}return w}},{key:\"level\",set:function(t){this.setLevel(t)},get:function(){return this.getLevel()}},{key:\"priority\",set:function(t){this.level=t},get:function(){return this.level}}]),t}();function S(t){if(!t)return 0;var e;switch(Object(r.a)(t)){case\"number\":e=t;break;case\"object\":e=t.logLevel||t.priority||0;break;default:return 0}return m(Number.isFinite(e)&&e>=0),e}function A(t){var e=t.logLevel,n=t.message;t.logLevel=S(e);for(var i=t.args?Array.from(t.args):[];i.length&&i.shift()!==n;);switch(t.args=i,Object(r.a)(e)){case\"string\":case\"function\":void 0!==n&&i.unshift(n),t.message=e;break;case\"object\":Object.assign(t,e)}\"function\"==typeof t.message&&(t.message=t.message());var a=Object(r.a)(t.message);return m(\"string\"===a||\"object\"===a),Object.assign(t,t.opts)}function L(t,e,n){if(\"string\"==typeof e){var r=n.time?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(e-t.length,0);return\"\".concat(\" \".repeat(n)).concat(t)}((s=n.total)<10?\"\".concat(s.toFixed(2),\"ms\"):s<100?\"\".concat(s.toFixed(1),\"ms\"):s<1e3?\"\".concat(s.toFixed(0),\"ms\"):\"\".concat((s/1e3).toFixed(2),\"s\")):\"\";e=n.time?\"\".concat(t,\": \").concat(r,\"  \").concat(e):\"\".concat(t,\": \").concat(e),i=e,a=n.color,o=n.background,l||\"string\"!=typeof i||(a&&(a=p(a),i=\"\u001b[\".concat(a,\"m\").concat(i,\"\u001b[39m\")),o&&(a=p(o),i=\"\u001b[\".concat(o+10,\"m\").concat(i,\"\u001b[49m\"))),e=i}var i,a,o,s;return e}P.VERSION=c},5060:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return E}));var r=n(16),i=n(17),a=n(4648),o=n(4637),s=n(5022),u=n(5029),c=n(4889),l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(i.a)(t,[{key:\"setupResources\",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,a=this.bindings[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;this._setupTransformFeedback(o,t)}}catch(t){n=!0,r=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}}},{key:\"updateModelProps\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.varyings;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}},{key:\"getDrawOptions\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceBuffers,r=e.transformFeedback,i=Object.assign({},n,t.attributes);return{attributes:i,transformFeedback:r}}},{key:\"swap\",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:\"update\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t)}},{key:\"getBuffer\",value:function(t){var e=this.bindings[this.currentIndex].feedbackBuffers,n=t?e[t]:null;return n?n instanceof o.a?n:n.buffer:null}},{key:\"getData\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.varyingName,n=this.getBuffer(e);return n?n.getData():null}},{key:\"delete\",value:function(){for(var t in this.resources)this.resources[t].delete()}},{key:\"_initialize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Object(c.a)(Object(s.d)(this.gl))}},{key:\"_getFeedbackBuffers\",value:function(t){var e=t.sourceBuffers,n=void 0===e?{}:e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var a=this.feedbackMap[i];i in n&&(r[a]=i)}for(var o in Object.assign(r,t.feedbackBuffers),r){var s=r[o];if(\"string\"==typeof s){var u=n[s],c=u.byteLength,l=u.usage,f=u.accessor;r[o]=this._createNewBuffer(o,{byteLength:c,usage:l,accessor:f})}}return r}},{key:\"_setupBuffers\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sourceBuffers,n=void 0===e?null:e;Object.assign(this.feedbackMap,t.feedbackMap);var r=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:\"_setupTransformFeedback\",value:function(t,e){var n=e.model.program;t.transformFeedback=new u.a(this.gl,{program:n,buffers:t.feedbackBuffers})}},{key:\"_updateBindings\",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){var e=this._swapBuffers(this.bindings[this.currentIndex]),n=e.sourceBuffers,r=e.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:\"_updateBinding\",value:function(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}},{key:\"_swapBuffers\",value:function(t){if(!this.feedbackMap)return null;var e=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];e[r]=t.feedbackBuffers[i],n[i]=t.sourceBuffers[r],Object(c.a)(n[i]instanceof o.a)}return{sourceBuffers:e,feedbackBuffers:n}}},{key:\"_createNewBuffer\",value:function(t,e){var n=new o.a(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}},{key:\"_getNextIndex\",value:function(){return(this.currentIndex+1)%2}}]),t}(),f=n(5),h=n(4996),d=n(4760),v=n(4669),p=n(4992);function g(t){var e=100,n=t.match(/[^\\s]+/g);if(n.length>=2&&\"#version\"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var b,y=n(4761),m={name:\"transform\",vs:\"attribute float transform_elementID;\\nvec2 transform_getPixelSizeHalf(vec2 size) {\\n  return vec2(1.) / (2. * size);\\n}\\n\\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\\n  return vec2(xIndex, yIndex);\\n}\\nvec2 transform_getTexCoord(vec2 size) {\\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\\n  vec2 coord = indices / size + pixelSizeHalf;\\n  return coord;\\n}\\nvec2 transform_getPos(vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\\n  return pos;\\n}\\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\\n  vec2 texCoord = transform_getTexCoord(size);\\n  vec4 textureColor = texture2D(texSampler, texCoord);\\n  return textureColor;\\n}\\n\",fs:null};function _(t){var e=t.vs,n=t.sourceTextureMap,r=t.targetTextureVarying,i=t.targetTexture,o=Object.keys(n).length,s=null,u={},l=e,f={};if(o>0||r){var h=l.split(\"\\n\"),d=h.slice();if(h.forEach((function(t,e,i){if(o>0){var c=function(t,e){var n={},r=function(t){return Object(a.b)(t,[\"attribute\",\"in\"])}(t);if(!r)return null;var i=r.type,o=r.name;if(o&&e[o]){var s=\"// \".concat(t,\" => Replaced by Transform with a sampler\"),u=function(t){var e=\"\".concat(\"transform_uSampler_\").concat(t),n=\"\".concat(\"transform_uSize_\").concat(t),r=\"  uniform sampler2D \".concat(e,\";\\n  uniform vec2 \").concat(n,\";\");return{samplerName:e,sizeName:n,uniformDeclerations:r}}(o),c=u.samplerName,l=u.sizeName,f=u.uniformDeclerations,h=Object(a.d)(i),d=\"  \".concat(i,\" \").concat(o,\" = transform_getInput(\").concat(c,\", \").concat(l,\").\").concat(h,\";\\n\");return n[c]=o,{updatedLine:s,inject:{\"vs:#decl\":f,\"vs:#main-start\":d},samplerTextureMap:n}}return null}(t,n);if(c){var l=c.updatedLine,h=c.inject;d[e]=l,f=Object(y.b)([f,h]),Object.assign(u,c.samplerTextureMap),o--}}r&&!s&&(s=function(t,e){var n=Object(a.b)(t,[\"varying\",\"out\"]);if(!n)return null;return n.name===e?n.type:null}(t,r))})),r){Object(c.a)(i);var v=\"\".concat(\"transform_uSize_\").concat(r),p={\"vs:#decl\":\"uniform vec2 \".concat(v,\";\\n\"),\"vs:#main-start\":\"     vec2 \".concat(\"transform_position\",\" = transform_getPos(\").concat(v,\");\\n     gl_Position = vec4(\").concat(\"transform_position\",\", 0, 1.);\\n\")};f=Object(y.b)([f,p])}l=d.join(\"\\n\")}return{vs:l,targetTextureType:s,inject:f,samplerTextureMap:u}}function O(t){var e,n,r=t.sourceTextureMap,i=t.targetTextureVarying,a=t.targetTexture,o={};for(var s in i&&(e=a.width,n=a.height,o[\"\".concat(\"transform_uSize_\").concat(i)]=[e,n]),r){var u=r[s];e=u.width,n=u.height,o[\"\".concat(\"transform_uSize_\").concat(s)]=[e,n]}return o}var j=(b={},Object(f.a)(b,10241,9728),Object(f.a)(b,10240,9728),Object(f.a)(b,10242,33071),Object(f.a)(b,10243,33071),b),k=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(i.a)(t,[{key:\"updateModelProps\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}},{key:\"getDrawOptions\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceTextures,r=e.framebuffer,i=e.targetTexture,a=Object.assign({},t.attributes),o=Object.assign({},t.uniforms),s=Object.assign({},t.parameters),u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var c in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var l=this.samplerTextureMap[c];o[c]=n[l]}this._setSourceTextureParameters();var f=O({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(o,f)}return this.hasTargetTexture&&(u=!1,s.viewport=[0,0,r.width,r.height]),{attributes:a,framebuffer:r,uniforms:o,discard:u,parameters:s}}},{key:\"swap\",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:\"update\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(t)}},{key:\"getTargetTexture\",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:\"getData\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.packed,n=void 0!==e&&e,r=this.bindings[this.currentIndex].framebuffer,i=Object(h.b)(r);if(!n)return i;for(var o=i.constructor,s=Object(a.c)(this.targetTextureType),u=new o(i.length*s/4),c=0,l=0;l<i.length;l+=4)for(var f=0;f<s;f++)u[c++]=i[l+f];return u}},{key:\"getFramebuffer\",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:\"delete\",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:\"_initialize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._targetTextureVarying,n=t._swapTexture;this._swapTexture=n,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}},{key:\"_createTargetTexture\",value:function(t){var e=t.sourceTextures,n=t.textureOrReference;if(n instanceof d.a)return n;var r=e[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:\"_setupTextures\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t._sourceTextures,n=void 0===e?{}:e,r=t._targetTexture,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceTextures:n,targetTexture:i}),\"elementCount\"in t&&this._updateElementIDBuffer(t.elementCount)}},{key:\"_updateElementIDBuffer\",value:function(t){if(!(\"number\"!=typeof t||this.elementCount>=t)){var e=new Float32Array(t);e.forEach((function(t,e,n){n[e]=e})),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new o.a(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}}},{key:\"_updateBindings\",value:function(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){var e=this._swapTextures(this.bindings[this.currentIndex]),n=e.sourceTextures,r=e.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:\"_updateBinding\",value:function(t,e){var n=e.sourceTextures,r=e.targetTexture;if(t||(t={sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,n),r){t.targetTexture=r;var i=r.width,a=r.height,o=t.framebuffer;o?(o.update({attachments:Object(f.a)({},36064,r),resizeAttachments:!1}),o.resize({width:i,height:a})):t.framebuffer=new v.a(this.gl,{id:\"\".concat(this.id||\"transform\",\"-framebuffer\"),width:i,height:a,attachments:Object(f.a)({},36064,r)})}return t}},{key:\"_setSourceTextureParameters\",value:function(){var t=this.currentIndex,e=this.bindings[t].sourceTextures;for(var n in e)e[n].setParameters(j)}},{key:\"_swapTextures\",value:function(t){if(!this._swapTexture)return null;var e=Object.assign({},t.sourceTextures);return e[this._swapTexture]=t.targetTexture,{sourceTextures:e,targetTexture:t.sourceTextures[this._swapTexture]}}},{key:\"_createNewTexture\",value:function(t){var e,n=Object(p.a)(t,{parameters:(e={},Object(f.a)(e,10241,9728),Object(f.a)(e,10240,9728),Object(f.a)(e,10242,33071),Object(f.a)(e,10243,33071),e),pixelStore:Object(f.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:\"_getNextIndex\",value:function(){return(this.currentIndex+1)%2}},{key:\"_processVertexShader\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.bindings[this.currentIndex],n=e.sourceTextures,r=e.targetTexture,i=_({vs:t.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),o=i.vs,s=i.uniforms,u=i.targetTextureType,c=i.inject,l=i.samplerTextureMap,f=Object(y.b)([t.inject||{},c]);this.targetTextureType=u,this.samplerTextureMap=l;var h=t._fs||Object(a.a)({version:g(o),input:this.targetTextureVarying,inputType:u,output:\"transform_output\"}),d=this.hasSourceTextures||this.targetTextureVarying?[m].concat(t.modules||[]):t.modules;return{vs:o,fs:h,modules:d,uniforms:s,inject:f}}}]),t}(),w=n(5024),x=n(4836),E=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r.a)(this,t),this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(i.a)(t,null,[{key:\"isSupported\",value:function(t){return Object(s.d)(t)}}]),Object(i.a)(t,[{key:\"delete\",value:function(){var t=this.model,e=this.bufferTransform,n=this.textureTransform;t&&t.delete(),e&&e.delete(),n&&n.delete()}},{key:\"run\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRenderTarget,n=void 0===e||e,r=this._updateDrawOptions(t);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:\"swap\",value:function(){var t=!1,e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t=t||s.swap()}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}Object(c.a)(t,\"Nothing to swap\")}},{key:\"getBuffer\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}},{key:\"getData\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.getData(t);if(u)return u}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}},{key:\"getFramebuffer\",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:\"update\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};\"elementCount\"in t&&this.model.setVertexCount(t.elementCount);var e=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.update(t)}}catch(t){r=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:\"_initialize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.gl;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new x.a(e,Object.assign({},t,{fs:t.fs||Object(a.a)({version:g(t.vs)}),id:t.id||\"transform-model\",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:\"_updateModelProps\",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){e=o.value.updateModelProps(e)}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return e}},{key:\"_buildResourceTransforms\",value:function(t,e){(function(t){if(!Object(w.a)(t.sourceBuffers)||!Object(w.a)(t.feedbackBuffers)||t.varyings&&t.varyings.length>0)return!0;return!1})(e)&&(this.bufferTransform=new l(t,e)),function(t){if(!Object(w.a)(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)return!0;return!1}(e)&&(this.textureTransform=new k(t,e)),Object(c.a)(this.bufferTransform||this.textureTransform,\"must provide source/feedback buffers or source/target textures\")}},{key:\"_updateDrawOptions\",value:function(t){var e=Object.assign({},t),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;e=Object.assign(e,u.getDrawOptions(e))}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return e}}]),t}()},5066:function(t,e,n){\"use strict\";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.fround(t),i=t-r;return e[n]=r,e[n+1]=i,e}var i=\"uniform float ONE;\\nvec2 split(float a) {\\n  const float SPLIT = 4097.0;\\n  float t = a * SPLIT;\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float a_hi = t * ONE - (t - a);\\n  float a_lo = a * ONE - a_hi;\\n#else\\n  float a_hi = t - (t - a);\\n  float a_lo = a - a_hi;\\n#endif\\n  return vec2(a_hi, a_lo);\\n}\\nvec2 split2(vec2 a) {\\n  vec2 b = split(a.x);\\n  b.y += a.y;\\n  return b;\\n}\\nvec2 quickTwoSum(float a, float b) {\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float sum = (a + b) * ONE;\\n  float err = b - (sum - a) * ONE;\\n#else\\n  float sum = a + b;\\n  float err = b - (sum - a);\\n#endif\\n  return vec2(sum, err);\\n}\\nvec2 twoSum(float a, float b) {\\n  float s = (a + b);\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float v = (s * ONE - a) * ONE;\\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\\n#else\\n  float v = s - a;\\n  float err = (a - (s - v)) + (b - v);\\n#endif\\n  return vec2(s, err);\\n}\\n\\nvec2 twoSub(float a, float b) {\\n  float s = (a - b);\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float v = (s * ONE - a) * ONE;\\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\\n#else\\n  float v = s - a;\\n  float err = (a - (s - v)) - (b + v);\\n#endif\\n  return vec2(s, err);\\n}\\n\\nvec2 twoSqr(float a) {\\n  float prod = a * a;\\n  vec2 a_fp64 = split(a);\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x *\\n    a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\\n#else\\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\\n#endif\\n  return vec2(prod, err);\\n}\\n\\nvec2 twoProd(float a, float b) {\\n  float prod = a * b;\\n  vec2 a_fp64 = split(a);\\n  vec2 b_fp64 = split(b);\\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\\n  return vec2(prod, err);\\n}\\n\\nvec2 sum_fp64(vec2 a, vec2 b) {\\n  vec2 s, t;\\n  s = twoSum(a.x, b.x);\\n  t = twoSum(a.y, b.y);\\n  s.y += t.x;\\n  s = quickTwoSum(s.x, s.y);\\n  s.y += t.y;\\n  s = quickTwoSum(s.x, s.y);\\n  return s;\\n}\\n\\nvec2 sub_fp64(vec2 a, vec2 b) {\\n  vec2 s, t;\\n  s = twoSub(a.x, b.x);\\n  t = twoSub(a.y, b.y);\\n  s.y += t.x;\\n  s = quickTwoSum(s.x, s.y);\\n  s.y += t.y;\\n  s = quickTwoSum(s.x, s.y);\\n  return s;\\n}\\n\\nvec2 mul_fp64(vec2 a, vec2 b) {\\n  vec2 prod = twoProd(a.x, b.x);\\n  prod.y += a.x * b.y;\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  prod = split2(prod);\\n#endif\\n  prod = quickTwoSum(prod.x, prod.y);\\n  prod.y += a.y * b.x;\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  prod = split2(prod);\\n#endif\\n  prod = quickTwoSum(prod.x, prod.y);\\n  return prod;\\n}\\n\\nvec2 div_fp64(vec2 a, vec2 b) {\\n  float xn = 1.0 / b.x;\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\\n#else\\n  vec2 yn = a * xn;\\n#endif\\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\\n  vec2 prod = twoProd(xn, diff);\\n  return sum_fp64(yn, prod);\\n}\\n\\nvec2 sqrt_fp64(vec2 a) {\\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\\n\\n  float x = 1.0 / sqrt(a.x);\\n  float yn = a.x * x;\\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\\n  vec2 yn_sqr = twoSqr(yn) * ONE;\\n#else\\n  vec2 yn_sqr = twoSqr(yn);\\n#endif\\n  float diff = sub_fp64(a, yn_sqr).x;\\n  vec2 prod = twoProd(x * 0.5, diff);\\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\\n  return sum_fp64(split(yn), prod);\\n#else\\n  return sum_fp64(vec2(yn, 0.0), prod);\\n#endif\\n}\\n\",a=\"\".concat(i,\"\\n\").concat(\"const vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\\n\\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\\n\\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\\n\\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09);\\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09);\\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10);\\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11);\\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12);\\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13);\\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14);\\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15);\\n\\nfloat nint(float d) {\\n    if (d == floor(d)) return d;\\n    return floor(d + 0.5);\\n}\\n\\nvec2 nint_fp64(vec2 a) {\\n    float hi = nint(a.x);\\n    float lo;\\n    vec2 tmp;\\n    if (hi == a.x) {\\n        lo = nint(a.y);\\n        tmp = quickTwoSum(hi, lo);\\n    } else {\\n        lo = 0.0;\\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\\n            hi -= 1.0;\\n        }\\n        tmp = vec2(hi, lo);\\n    }\\n    return tmp;\\n}\\n\\nvec2 exp_fp64(vec2 a) {\\n\\n  const int k_power = 4;\\n  const float k = 16.0;\\n\\n  const float inv_k = 1.0 / k;\\n\\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\\n\\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\\n  vec2 s, t, p;\\n\\n  p = mul_fp64(r, r);\\n  s = sum_fp64(r, p * 0.5);\\n  p = mul_fp64(p, r);\\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\\n\\n  s = sum_fp64(s, t);\\n  p = mul_fp64(p, r);\\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\\n\\n  s = sum_fp64(s, t);\\n  p = mul_fp64(p, r);\\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\\n\\n\\n\\n\\n\\n\\n  s = sum_fp64(s, t);\\n  for (int i = 0; i < k_power; i++) {\\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\\n  }\\n\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n  s = sum_fp64(s, vec2(ONE, 0.0));\\n#else\\n  s = sum_fp64(s, vec2(1.0, 0.0));\\n#endif\\n\\n  return s * pow(2.0, m);\\n}\\n\\nvec2 log_fp64(vec2 a)\\n{\\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\\n  vec2 x = vec2(log(a.x), 0.0);\\n  vec2 s;\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n  s = vec2(ONE, 0.0);\\n#else\\n  s = vec2(1.0, 0.0);\\n#endif\\n\\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\\n  return x;\\n}\\n\\nvec2 sin_taylor_fp64(vec2 a) {\\n  vec2 r, s, t, x;\\n\\n  if (a.x == 0.0 && a.y == 0.0) {\\n    return vec2(0.0, 0.0);\\n  }\\n\\n  x = -mul_fp64(a, a);\\n  s = a;\\n  r = a;\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\\n  s = sum_fp64(s, t);\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\\n  s = sum_fp64(s, t);\\n\\n\\n\\n\\n\\n\\n  return s;\\n}\\n\\nvec2 cos_taylor_fp64(vec2 a) {\\n  vec2 r, s, t, x;\\n\\n  if (a.x == 0.0 && a.y == 0.0) {\\n    return vec2(1.0, 0.0);\\n  }\\n\\n  x = -mul_fp64(a, a);\\n  r = x;\\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\\n  s = sum_fp64(s, t);\\n\\n  r = mul_fp64(r, x);\\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\\n  s = sum_fp64(s, t);\\n\\n\\n\\n\\n\\n\\n  return s;\\n}\\n\\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\\n  if (a.x == 0.0 && a.y == 0.0) {\\n    sin_t = vec2(0.0, 0.0);\\n    cos_t = vec2(1.0, 0.0);\\n  }\\n\\n  sin_t = sin_taylor_fp64(a);\\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\\n}\\n\\nvec2 sin_fp64(vec2 a) {\\n    if (a.x == 0.0 && a.y == 0.0) {\\n        return vec2(0.0, 0.0);\\n    }\\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\\n\\n    vec2 t;\\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    }\\n\\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\\n\\n    q = floor(t.x / PI_16_FP64.x + 0.5);\\n    int k = int(q);\\n\\n    if (k == 0) {\\n        if (j == 0) {\\n            return sin_taylor_fp64(t);\\n        } else if (j == 1) {\\n            return cos_taylor_fp64(t);\\n        } else if (j == -1) {\\n            return -cos_taylor_fp64(t);\\n        } else {\\n            return -sin_taylor_fp64(t);\\n        }\\n    }\\n\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    } else {\\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\\n    }\\n\\n    vec2 u = vec2(0.0, 0.0);\\n    vec2 v = vec2(0.0, 0.0);\\n\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n    if (abs(float(abs_k) - 1.0) < 0.5) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#else\\n    if (abs_k == 1) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs_k == 2) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs_k == 3) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs_k == 4) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#endif\\n\\n    vec2 sin_t, cos_t;\\n    sincos_taylor_fp64(t, sin_t, cos_t);\\n\\n\\n\\n    vec2 result = vec2(0.0, 0.0);\\n    if (j == 0) {\\n        if (k > 0) {\\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        }\\n    } else if (j == 1) {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        } else {\\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    } else if (j == -1) {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\\n        } else {\\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\\n        }\\n    } else {\\n        if (k > 0) {\\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\\n        }\\n    }\\n\\n    return result;\\n}\\n\\nvec2 cos_fp64(vec2 a) {\\n    if (a.x == 0.0 && a.y == 0.0) {\\n        return vec2(1.0, 0.0);\\n    }\\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\\n\\n    vec2 t;\\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\\n    int j = int(q);\\n\\n    if (j < -2 || j > 2) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    }\\n\\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\\n\\n    q = floor(t.x / PI_16_FP64.x + 0.5);\\n    int k = int(q);\\n\\n    if (k == 0) {\\n        if (j == 0) {\\n            return cos_taylor_fp64(t);\\n        } else if (j == 1) {\\n            return -sin_taylor_fp64(t);\\n        } else if (j == -1) {\\n            return sin_taylor_fp64(t);\\n        } else {\\n            return -cos_taylor_fp64(t);\\n        }\\n    }\\n\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    } else {\\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\\n    }\\n\\n    vec2 u = vec2(0.0, 0.0);\\n    vec2 v = vec2(0.0, 0.0);\\n\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n    if (abs(float(abs_k) - 1.0) < 0.5) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#else\\n    if (abs_k == 1) {\\n        u = COS_TABLE_0_FP64;\\n        v = SIN_TABLE_0_FP64;\\n    } else if (abs_k == 2) {\\n        u = COS_TABLE_1_FP64;\\n        v = SIN_TABLE_1_FP64;\\n    } else if (abs_k == 3) {\\n        u = COS_TABLE_2_FP64;\\n        v = SIN_TABLE_2_FP64;\\n    } else if (abs_k == 4) {\\n        u = COS_TABLE_3_FP64;\\n        v = SIN_TABLE_3_FP64;\\n    }\\n#endif\\n\\n    vec2 sin_t, cos_t;\\n    sincos_taylor_fp64(t, sin_t, cos_t);\\n\\n    vec2 result = vec2(0.0, 0.0);\\n    if (j == 0) {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        } else {\\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    } else if (j == 1) {\\n        if (k > 0) {\\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\\n        }\\n    } else if (j == -1) {\\n        if (k > 0) {\\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        } else {\\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n        }\\n    } else {\\n        if (k > 0) {\\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\\n        } else {\\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    }\\n\\n    return result;\\n}\\n\\nvec2 tan_fp64(vec2 a) {\\n    vec2 sin_a;\\n    vec2 cos_a;\\n\\n    if (a.x == 0.0 && a.y == 0.0) {\\n        return vec2(0.0, 0.0);\\n    }\\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\\n\\n    vec2 t;\\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\\n    int j = int(q);\\n\\n\\n    if (j < -2 || j > 2) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    }\\n\\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\\n\\n    q = floor(t.x / PI_16_FP64.x + 0.5);\\n    int k = int(q);\\n    int abs_k = int(abs(float(k)));\\n\\n    if (abs_k > 4) {\\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\\n    } else {\\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\\n    }\\n\\n\\n    vec2 u = vec2(0.0, 0.0);\\n    vec2 v = vec2(0.0, 0.0);\\n\\n    vec2 sin_t, cos_t;\\n    vec2 s, c;\\n    sincos_taylor_fp64(t, sin_t, cos_t);\\n\\n    if (k == 0) {\\n        s = sin_t;\\n        c = cos_t;\\n    } else {\\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\\n        if (abs(float(abs_k) - 1.0) < 0.5) {\\n            u = COS_TABLE_0_FP64;\\n            v = SIN_TABLE_0_FP64;\\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\\n            u = COS_TABLE_1_FP64;\\n            v = SIN_TABLE_1_FP64;\\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\\n            u = COS_TABLE_2_FP64;\\n            v = SIN_TABLE_2_FP64;\\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\\n            u = COS_TABLE_3_FP64;\\n            v = SIN_TABLE_3_FP64;\\n        }\\n#else\\n        if (abs_k == 1) {\\n            u = COS_TABLE_0_FP64;\\n            v = SIN_TABLE_0_FP64;\\n        } else if (abs_k == 2) {\\n            u = COS_TABLE_1_FP64;\\n            v = SIN_TABLE_1_FP64;\\n        } else if (abs_k == 3) {\\n            u = COS_TABLE_2_FP64;\\n            v = SIN_TABLE_2_FP64;\\n        } else if (abs_k == 4) {\\n            u = COS_TABLE_3_FP64;\\n            v = SIN_TABLE_3_FP64;\\n        }\\n#endif\\n        if (k > 0) {\\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        } else {\\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\\n        }\\n    }\\n\\n    if (j == 0) {\\n        sin_a = s;\\n        cos_a = c;\\n    } else if (j == 1) {\\n        sin_a = c;\\n        cos_a = -s;\\n    } else if (j == -1) {\\n        sin_a = -c;\\n        cos_a = s;\\n    } else {\\n        sin_a = -s;\\n        cos_a = -c;\\n    }\\n    return div_fp64(sin_a, cos_a);\\n}\\n\\nvec2 radians_fp64(vec2 degree) {\\n  return mul_fp64(degree, PI_180_FP64);\\n}\\n\\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\\n  vec2 range = sub_fp64(b, a);\\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\\n}\\n\\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = sum_fp64(a[0], b[0]);\\n    out_val[1] = sum_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = sub_fp64(a[0], b[0]);\\n    out_val[1] = sub_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_mul_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = mul_fp64(a[0], b[0]);\\n    out_val[1] = mul_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_div_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\\n    out_val[0] = div_fp64(a[0], b[0]);\\n    out_val[1] = div_fp64(a[1], b[1]);\\n}\\n\\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\\n  vec2 range[2];\\n  vec2_sub_fp64(y, x, range);\\n  vec2 portion[2];\\n  portion[0] = range[0] * a;\\n  portion[1] = range[1] * a;\\n  vec2_sum_fp64(x, portion, out_val);\\n}\\n\\nvec2 vec2_length_fp64(vec2 x[2]) {\\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\\n}\\n\\nvoid vec2_normalize_fp64(vec2 x[2], out vec2 out_val[2]) {\\n  vec2 length = vec2_length_fp64(x);\\n  vec2 length_vec2[2];\\n  length_vec2[0] = length;\\n  length_vec2[1] = length;\\n\\n  vec2_div_fp64(x, length_vec2, out_val);\\n}\\n\\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\\n  vec2 diff[2];\\n  vec2_sub_fp64(x, y, diff);\\n  return vec2_length_fp64(diff);\\n}\\n\\nvec2 vec2_dot_fp64(vec2 a[2], vec2 b[2]) {\\n  vec2 v[2];\\n\\n  v[0] = mul_fp64(a[0], b[0]);\\n  v[1] = mul_fp64(a[1], b[1]);\\n\\n  return sum_fp64(v[0], v[1]);\\n}\\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\\n  for (int i = 0; i < 3; i++) {\\n    out_val[i] = sum_fp64(a[i], b[i]);\\n  }\\n}\\n\\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\\n  for (int i = 0; i < 3; i++) {\\n    out_val[i] = sum_fp64(a[i], b[i]);\\n  }\\n}\\n\\nvec2 vec3_length_fp64(vec2 x[3]) {\\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])),\\n    mul_fp64(x[2], x[2])));\\n}\\n\\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\\n  vec2 diff[3];\\n  vec3_sub_fp64(x, y, diff);\\n  return vec3_length_fp64(diff);\\n}\\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\\n  out_val[0].x = a[0];\\n  out_val[0].y = 0.0;\\n\\n  out_val[1].x = a[1];\\n  out_val[1].y = 0.0;\\n\\n  out_val[2].x = a[2];\\n  out_val[2].y = 0.0;\\n\\n  out_val[3].x = a[3];\\n  out_val[3].y = 0.0;\\n}\\n\\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\\n  out_val[0] = mul_fp64(a[0], b);\\n  out_val[1] = mul_fp64(a[1], b);\\n  out_val[2] = mul_fp64(a[2], b);\\n  out_val[3] = mul_fp64(a[3], b);\\n}\\n\\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\\n  for (int i = 0; i < 4; i++) {\\n    out_val[i] = sum_fp64(a[i], b[i]);\\n  }\\n}\\n\\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\\n  vec2 v[4];\\n\\n  v[0] = mul_fp64(a[0], b[0]);\\n  v[1] = mul_fp64(a[1], b[1]);\\n  v[2] = mul_fp64(a[2], b[2]);\\n  v[3] = mul_fp64(a[3], b[3]);\\n\\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\\n}\\n\\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\\n  vec2 tmp[4];\\n\\n  for (int i = 0; i < 4; i++)\\n  {\\n    for (int j = 0; j < 4; j++)\\n    {\\n      tmp[j] = b[j + i * 4];\\n    }\\n    vec4_dot_fp64(a, tmp, out_val[i]);\\n  }\\n}\\n\"),o={ONE:1};e.a={name:\"fp64\",vs:a,fs:null,fp64ify:r,fp64LowPart:function(t){return t-Math.fround(t)},fp64ifyMatrix4:function(t){for(var e=new Float32Array(32),n=0;n<4;++n)for(var i=0;i<4;++i){var a=4*n+i;r(t[4*i+n],e,2*a)}return e},getUniforms:function(){return Object.assign({},o)}},\"\".concat(i)},5071:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return s}));var r=n(16),i=n(17),a=n(4720),o=function(){function t(e,n){Object(r.a)(this,t),this.name=e,this.type=n,this.sampleSize=1,this.reset()}return Object(i.a)(t,[{key:\"setSampleSize\",value:function(t){return this.sampleSize=t,this}},{key:\"incrementCount\",value:function(){return this.addCount(1),this}},{key:\"decrementCount\",value:function(){return this.subtractCount(1),this}},{key:\"addCount\",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:\"subtractCount\",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:\"addTime\",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:\"timeStart\",value:function(){return this._startTime=Object(a.a)(),this._timerPending=!0,this}},{key:\"timeEnd\",value:function(){return this._timerPending?(this.addTime(Object(a.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:\"getSampleAverageCount\",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:\"getSampleAverageTime\",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:\"getSampleHz\",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:\"getAverageCount\",value:function(){return this.samples>0?this.count/this.samples:0}},{key:\"getAverageTime\",value:function(){return this.samples>0?this.time/this.samples:0}},{key:\"getHz\",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:\"reset\",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:\"_checkSampling\",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),s=function(){function t(e){var n=e.id,i=e.stats;Object(r.a)(this,t),this.id=n,this.stats={},this._initializeStats(i),Object.seal(this)}return Object(i.a)(t,[{key:\"get\",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"count\";return this._getOrCreate({name:t,type:e})}},{key:\"reset\",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:\"forEach\",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:\"getTable\",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:\"_initializeStats\",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:\"_getOrCreate\",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof o?t:new o(e,n)),this.stats[e]}},{key:\"size\",get:function(){return Object.keys(this.stats).length}}]),t}()},5072:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return z}));var r,i=n(16),a=n(17),o=n(178),s=n(29),u=n(80),c=n(229),l=n(19),f=n(4628),h=n(4646),d=n(4669),v=n(5),p=n(4849),g=n(4721),b=(r={},Object(v.a)(r,5126,(function(t,e,n){return t.uniform1fv(e,k(n,1))})),Object(v.a)(r,35664,(function(t,e,n){return t.uniform2fv(e,k(n,2))})),Object(v.a)(r,35665,(function(t,e,n){return t.uniform3fv(e,k(n,3))})),Object(v.a)(r,35666,(function(t,e,n){return t.uniform4fv(e,k(n,4))})),Object(v.a)(r,5124,(function(t,e,n){return t.uniform1iv(e,w(n,1))})),Object(v.a)(r,35667,(function(t,e,n){return t.uniform2iv(e,w(n,2))})),Object(v.a)(r,35668,(function(t,e,n){return t.uniform3iv(e,w(n,3))})),Object(v.a)(r,35669,(function(t,e,n){return t.uniform4iv(e,w(n,4))})),Object(v.a)(r,35670,(function(t,e,n){return t.uniform1iv(e,w(n,1))})),Object(v.a)(r,35671,(function(t,e,n){return t.uniform2iv(e,w(n,2))})),Object(v.a)(r,35672,(function(t,e,n){return t.uniform3iv(e,w(n,3))})),Object(v.a)(r,35673,(function(t,e,n){return t.uniform4iv(e,w(n,4))})),Object(v.a)(r,35674,(function(t,e,n){return t.uniformMatrix2fv(e,!1,k(n,4))})),Object(v.a)(r,35675,(function(t,e,n){return t.uniformMatrix3fv(e,!1,k(n,9))})),Object(v.a)(r,35676,(function(t,e,n){return t.uniformMatrix4fv(e,!1,k(n,16))})),Object(v.a)(r,35678,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,35680,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,5125,(function(t,e,n){return t.uniform1uiv(e,x(n,1))})),Object(v.a)(r,36294,(function(t,e,n){return t.uniform2uiv(e,x(n,2))})),Object(v.a)(r,36295,(function(t,e,n){return t.uniform3uiv(e,x(n,3))})),Object(v.a)(r,36296,(function(t,e,n){return t.uniform4uiv(e,x(n,4))})),Object(v.a)(r,35685,(function(t,e,n){return t.uniformMatrix2x3fv(e,!1,k(n,6))})),Object(v.a)(r,35686,(function(t,e,n){return t.uniformMatrix2x4fv(e,!1,k(n,8))})),Object(v.a)(r,35687,(function(t,e,n){return t.uniformMatrix3x2fv(e,!1,k(n,6))})),Object(v.a)(r,35688,(function(t,e,n){return t.uniformMatrix3x4fv(e,!1,k(n,12))})),Object(v.a)(r,35689,(function(t,e,n){return t.uniformMatrix4x2fv(e,!1,k(n,8))})),Object(v.a)(r,35690,(function(t,e,n){return t.uniformMatrix4x3fv(e,!1,k(n,12))})),Object(v.a)(r,35679,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,35682,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36289,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36292,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36293,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36298,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36299,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36300,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36303,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36306,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36307,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36308,(function(t,e,n){return t.uniform1i(e,n)})),Object(v.a)(r,36311,(function(t,e,n){return t.uniform1i(e,n)})),r),y={},m={},_={},O=[0];function j(t,e,n,r){1===e&&\"boolean\"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(O[0]=t,t=O);var i=t.length;if(i%e&&g.a.warn(\"Uniform size should be multiples of \".concat(e),t)(),t instanceof n)return t;var a=r[i];a||(a=new n(i),r[i]=a);for(var o=0;o<i;o++)a[o]=t[o];return a}function k(t,e){return j(t,e,Float32Array,y)}function w(t,e){return j(t,e,Int32Array,m)}function x(t,e){return j(t,e,Uint32Array,_)}function E(t){if(\"]\"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=t.match(/([^[]*)(\\[[0-9]+\\])?/);if(!e||e.length<2)throw new Error(\"Failed to parse GLSL uniform name \".concat(t));return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function T(t,e,n){var r=b[n.type];if(!r)throw new Error(\"Unknown GLSL uniform type \".concat(n.type));return r.bind(null,t,e)}function P(t,e,n){for(var r in t){var i=t[r];if((!n||Boolean(n[r]))&&!S(i))throw e=e?\"\".concat(e,\" \"):\"\",console.error(\"\".concat(e,\" Bad uniform \").concat(r),i),new Error(\"\".concat(e,\" Bad uniform \").concat(r))}return!0}function S(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof h.a||(t instanceof p.a||t instanceof d.a&&Boolean(t.texture))))}function A(t,e){if(Array.isArray(t)||ArrayBuffer.isView(t)){if(!e)return!1;var n=t.length;if(e.length!==n)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return t===e}function L(t){return Array.isArray(t)||ArrayBuffer.isView(t)?t.slice():t}var C=n(4991),I=n(4722),M=n(5022),R=n(4688),F=function(){function t(e){Object(i.a)(this,t),this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}return Object(a.a)(t,[{key:\"getAttributeInfo\",value:function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}},{key:\"getAttributeLocation\",value:function(t){var e=this.getAttributeInfo(t);return e?e.location:-1}},{key:\"getAttributeAccessor\",value:function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null}},{key:\"getVaryingInfo\",value:function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}},{key:\"getVaryingIndex\",value:function(t){var e=this.getVaryingInfo();return e?e.location:-1}},{key:\"getVaryingAccessor\",value:function(t){var e=this.getVaryingInfo();return e?e.accessor:null}},{key:\"_readAttributesFromProgram\",value:function(t){for(var e=t.gl,n=e.getProgramParameter(t.handle,35721),r=0;r<n;r++){var i=e.getActiveAttrib(t.handle,r),a=i.name,o=i.type,s=i.size,u=e.getAttribLocation(t.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort((function(t,e){return t.location-e.location}))}},{key:\"_readVaryingsFromProgram\",value:function(t){var e=t.gl;if(Object(M.d)(e)){for(var n=e.getProgramParameter(t.handle,35971),r=0;r<n;r++){var i=e.getTransformFeedbackVarying(t.handle,r),a=i.name,o=i.type,s=i.size;this._addVarying(r,a,o,s)}this.varyingInfos.sort((function(t,e){return t.location-e.location}))}}},{key:\"_addAttribute\",value:function(t,e,n,r){var i=Object(R.a)(n),a={type:i.type,size:r*i.components};this._inferProperties(t,e,a);var o={location:t,name:e,accessor:new I.a(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[t]=o,this.attributeInfosByName[o.name]=o}},{key:\"_inferProperties\",value:function(t,e,n){/instance/i.test(e)&&(n.divisor=1)}},{key:\"_addVarying\",value:function(t,e,n,r){var i=Object(R.a)(n),a=i.type,o=i.components,s={location:t,name:e,accessor:new I.a({type:a,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),t}(),N=n(5025),D=n(5027),B=n(4889),U=n(5024),V=[\"setVertexArray\",\"setAttributes\",\"setBuffers\",\"unsetBuffers\",\"use\",\"getUniformCount\",\"getUniformInfo\",\"getUniformLocation\",\"getUniformValue\",\"getVarying\",\"getFragDataLocation\",\"getAttachedShaders\",\"getAttributeCount\",\"getAttributeLocation\",\"getAttributeInfo\"],z=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.a)(this,e),(n=Object(o.a)(this,Object(u.a)(e).call(this,t,r))).stubRemovedMethods(\"Program\",\"v6.0\",V),n._isCached=!1,n.initialize(r),Object.seal(Object(s.a)(n)),n._setId(r.id),n}return Object(l.a)(e,t),Object(a.a)(e,[{key:\"initialize\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.hash,n=t.vs,r=t.fs,i=t.varyings,a=t.bufferMode,o=void 0===a?35981:a;return this.hash=e||\"\",this.vs=\"string\"==typeof n?new C.b(this.gl,{id:\"\".concat(t.id,\"-vs\"),source:n}):n,this.fs=\"string\"==typeof r?new C.a(this.gl,{id:\"\".concat(t.id,\"-fs\"),source:r}):r,Object(B.a)(this.vs instanceof C.b),Object(B.a)(this.fs instanceof C.a),this.uniforms={},i&&i.length>0&&(Object(M.a)(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new F(this),this.setProps(t)}},{key:\"delete\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(c.a)(Object(u.a)(e.prototype),\"delete\",this).call(this,t)}},{key:\"setProps\",value:function(t){return\"uniforms\"in t&&this.setUniforms(t.uniforms),this}},{key:\"draw\",value:function(t){var e=this,n=t.logPriority,r=t.drawMode,i=void 0===r?4:r,a=t.vertexCount,o=t.offset,s=void 0===o?0:o,u=t.start,c=t.end,l=t.isIndexed,f=void 0!==l&&l,h=t.indexType,d=void 0===h?5123:h,v=t.isInstanced,p=void 0!==v&&v,b=t.instanceCount,y=void 0===b?0:b,m=t.vertexArray,_=void 0===m?null:m,O=t.transformFeedback,j=t.framebuffer,k=t.parameters,w=void 0===k?{}:k,x=t.uniforms,E=t.samplers;if((x||E)&&(g.a.deprecated(\"Program.draw({uniforms})\",\"Program.setUniforms(uniforms)\")(),this.setUniforms(x||{})),void 0!==n){var T=j?j.id:\"default\",P=\"mode=\".concat(Object(D.a)(this.gl,i),\" verts=\").concat(a,\" \")+\"instances=\".concat(y,\" indexType=\").concat(Object(D.a)(this.gl,d),\" \")+\"isInstanced=\".concat(p,\" isIndexed=\").concat(f,\" \")+\"Framebuffer=\".concat(T);g.a.log(n,P)()}return Object(B.a)(_),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(_.bindForDraw(a,y,(function(){if(void 0!==j&&(w=Object.assign({},w,{framebuffer:j})),O){var t=Object(R.c)(i);O.begin(t)}e._bindTextures(),Object(N.a)(e.gl,w,(function(){f&&p?e.gl.drawElementsInstanced(i,a,d,s,y):f&&Object(M.d)(e.gl)&&!isNaN(u)&&!isNaN(c)?e.gl.drawRangeElements(i,u,c,a,d,s):f?e.gl.drawElements(i,a,d,s):p?e.gl.drawArraysInstanced(i,s,a,y):e.gl.drawArrays(i,s,a)})),O&&O.end()})),!0)}},{key:\"setUniforms\",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=!1,r={};for(var i in t)A(this.uniforms[i],t[i])||(n=!0,r[i]=t[i],this.uniforms[i]=L(t[i]));return n&&(e(),P(r,this.id,this._uniformSetters),this._setUniforms(r)),this}},{key:\"reset\",value:function(){}},{key:\"_areTexturesRenderable\",value:function(){var t=!0;for(var e in this.uniforms){var n=this._uniformSetters[e];if(n&&void 0!==n.textureIndex){var r=this.uniforms[e];if(r instanceof d.a)r=r.texture;if(r instanceof h.a)t=t&&r.loaded}}return t}},{key:\"_bindTextures\",value:function(){for(var t in this.uniforms){var e=this._uniformSetters[t];if(e&&void 0!==e.textureIndex){var n=this.uniforms[t];if(n instanceof d.a&&(n=n.texture),n instanceof h.a)n.bind(e.textureIndex)}}}},{key:\"_setUniforms\",value:function(t){for(var e in this.gl.useProgram(this.handle),t){var n=t[e],r=this._uniformSetters[e];if(r)if(n instanceof d.a&&(n=n.texture),n instanceof h.a){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var i=n,a=r.textureIndex;i.bind(a),r(a)}else r(n)}return this}},{key:\"_createHandle\",value:function(){return this.gl.createProgram()}},{key:\"_deleteHandle\",value:function(){this.gl.deleteProgram(this.handle)}},{key:\"_getOptionsFromHandle\",value:function(t){var e=this.gl.getAttachedShaders(t),n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new C.b({handle:u});break;case 35632:n.fs=new C.a({handle:u})}}}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:\"_getParameter\",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:\"_setId\",value:function(t){if(!t){var e=this._getName();this.id=Object(U.c)(e)}}},{key:\"_getName\",value:function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,\"\"))?\"\".concat(t,\"-program\"):\"program\"}},{key:\"_compileAndLink\",value:function(){var t=this.gl;if((t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),g.a.time(4,\"linkProgram for \".concat(this._getName()))(),t.linkProgram(this.handle),g.a.timeEnd(4,\"linkProgram for \".concat(this._getName()))(),t.debug||g.a.priority>0)&&(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35714)))throw new Error(\"Error linking: \".concat(t.getProgramInfoLog(this.handle)))}},{key:\"_readUniformLocationsFromLinkedProgram\",value:function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var e=0;e<this._uniformCount;e++){var n=this.gl.getActiveUniform(this.handle,e),r=E(n.name),i=r.name,a=(r.isArray,t.getUniformLocation(this.handle,i));if(this._uniformSetters[i]=T(t,a,n),n.size>1)for(var o=0;o<n.size;o++)a=t.getUniformLocation(this.handle,\"\".concat(i,\"[\").concat(o,\"]\")),this._uniformSetters[\"\".concat(i,\"[\").concat(o,\"]\")]=T(t,a,n)}this._textureIndexCounter=0}},{key:\"getActiveUniforms\",value:function(t,e){return this.gl.getActiveUniforms(this.handle,t,e)}},{key:\"getUniformBlockIndex\",value:function(t){return this.gl.getUniformBlockIndex(this.handle,t)}},{key:\"getActiveUniformBlockParameter\",value:function(t,e){return this.gl.getActiveUniformBlockParameter(this.handle,t,e)}},{key:\"uniformBlockBinding\",value:function(t,e){this.gl.uniformBlockBinding(this.handle,t,e)}}]),e}(f.a)}}]);","extractedComments":[]}