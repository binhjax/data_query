{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{4484:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return r}));a(0);var l=a(52),c=a(51),n=a(932),s=a(1);const o=l.c.span`\n  white-space: nowrap;\n  min-width: 100px;\n  svg,\n  i {\n    margin-right: 8px;\n\n    &:hover {\n      path {\n        fill: ${({theme:e})=>e.colors.primary.base};\n      }\n    }\n  }\n`,i=l.c.span`\n  color: ${({theme:e})=>e.colors.grayscale.base};\n`;function r({actions:e}){return Object(s.f)(o,{className:\"actions\"},e.map((e,t)=>{const a=n.a[e.icon];return e.tooltip?Object(s.f)(c.a,{id:e.label+\"-tooltip\",title:e.tooltip,placement:e.placement,key:t},Object(s.f)(i,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e.onClick},Object(s.f)(a,null))):Object(s.f)(i,{role:\"button\",tabIndex:0,className:\"action-button\",onClick:e.onClick,key:t},Object(s.f)(a,null))}))}},4930:function(e,t,a){\"use strict\";a.r(t);a(33);var l=a(0),c=a.n(l),n=a(20),s=a(67),o=a(95),i=a.n(o),r=a(32),d=a.n(r),b=a(524),m=a(138),u=a(122),p=a(977),j=a(1487),O=a(51),f=a(1486),h=a(4484),g=a(4477),_=a(52),S=a(45),y=a(100),w=a(214),C=a(1);const x=_.c.div`\n  margin: ${({theme:e})=>2*e.gridUnit}px auto\n    ${({theme:e})=>4*e.gridUnit}px auto;\n`,v=Object(_.c)(w.b)`\n  border-radius: ${({theme:e})=>e.borderRadius}px;\n  border: 1px solid ${({theme:e})=>e.colors.secondary.light2};\n`,k=Object(_.c)(S.a)`\n  margin: auto ${({theme:e})=>2*e.gridUnit}px auto 0;\n`,$=_.c.div`\n  margin-bottom: ${({theme:e})=>10*e.gridUnit}px;\n\n  .control-label {\n    margin-bottom: ${({theme:e})=>2*e.gridUnit}px;\n  }\n\n  .required {\n    margin-left: ${({theme:e})=>e.gridUnit/2}px;\n    color: ${({theme:e})=>e.colors.error.base};\n  }\n\n  input[type='text'] {\n    padding: ${({theme:e})=>1.5*e.gridUnit}px\n      ${({theme:e})=>2*e.gridUnit}px;\n    border: 1px solid ${({theme:e})=>e.colors.grayscale.light2};\n    border-radius: ${({theme:e})=>e.gridUnit}px;\n    width: 50%;\n  }\n`;var D=Object(u.a)(({addDangerToast:e,onCssTemplateAdd:t,onHide:a,show:c,cssTemplate:s=null})=>{const[o,i]=Object(l.useState)(!0),[r,d]=Object(l.useState)(null),[m,u]=Object(l.useState)(!0),p=null!==s,{state:{loading:j,resource:O},fetchResource:f,createResource:h,updateResource:g}=Object(b.f)(\"css_template\",Object(n.e)(\"css_template\"),e),_=()=>{u(!0),a()};return Object(l.useEffect)(()=>{if(p&&(!r||!r.id||s&&s.id!==r.id||m&&c)){if(s&&null!==s.id&&!j){const e=s.id||0;f(e)}}else!p&&(!r||r.id||m&&c)&&d({template_name:\"\",css:\"\"})},[s]),Object(l.useEffect)(()=>{O&&d(O)},[O]),Object(l.useEffect)(()=>{r&&r.template_name.length&&r.css&&r.css.length?i(!1):i(!0)},[r?r.template_name:\"\",r?r.css:\"\"]),m&&c&&u(!1),Object(C.f)(y.b,{disablePrimaryButton:o,onHandledPrimaryAction:()=>{if(p){if(r&&r.id){const e=r.id;delete r.id,delete r.created_by,g(e,r).then(e=>{e&&(t&&t(),_())})}}else r&&h(r).then(e=>{e&&(t&&t(),_())})},onHide:_,primaryButtonName:p?Object(n.e)(\"Save\"):Object(n.e)(\"Add\"),show:c,width:\"55%\",title:Object(C.f)(\"h4\",null,p?Object(C.f)(k,{name:\"edit-alt\"}):Object(C.f)(k,{name:\"plus-large\"}),p?Object(n.e)(\"Edit CSS template properties\"):Object(n.e)(\"Add CSS template\"))},Object(C.f)(x,null,Object(C.f)(\"h4\",null,Object(n.e)(\"Basic information\"))),Object(C.f)($,null,Object(C.f)(\"div\",{className:\"control-label\"},Object(n.e)(\"CSS template name\"),Object(C.f)(\"span\",{className:\"required\"},\"*\")),Object(C.f)(\"input\",{name:\"template_name\",onChange:e=>{const{target:t}=e,a={...r,template_name:r?r.template_name:\"\",css:r?r.css:\"\"};a[t.name]=t.value,d(a)},type:\"text\",value:null==r?void 0:r.template_name})),Object(C.f)($,null,Object(C.f)(\"div\",{className:\"control-label\"},Object(n.e)(\"css\"),Object(C.f)(\"span\",{className:\"required\"},\"*\")),Object(C.f)(v,{onChange:e=>{const t={...r,template_name:r?r.template_name:\"\",css:e};d(t)},value:null==r?void 0:r.css,width:\"100%\"})))});t.default=Object(u.a)((function({addDangerToast:e,addSuccessToast:t,user:a}){const{state:{loading:o,resourceCount:r,resourceCollection:u,bulkSelectEnabled:_},hasPerm:S,fetchData:y,refreshData:w,toggleBulkSelect:x}=Object(b.e)(\"css_template\",Object(n.e)(\"CSS templates\"),e),[v,k]=Object(l.useState)(!1),[$,T]=Object(l.useState)(null),H=S(\"can_write\"),N=S(\"can_write\"),A=S(\"can_write\"),[B,U]=Object(l.useState)(null),E=[{id:\"template_name\",desc:!0}],z=Object(l.useMemo)(()=>[{accessor:\"template_name\",Header:Object(n.e)(\"Name\")},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:t}}})=>{let a=\"null\";return t&&(a=`${t.first_name} ${t.last_name}`),Object(C.f)(O.a,{id:\"allow-run-async-header-tooltip\",title:Object(n.e)(\"Last modified by %s\",a),placement:\"right\"},Object(C.f)(\"span\",null,e))},Header:Object(n.e)(\"Last modified\"),accessor:\"changed_on_delta_humanized\",size:\"xl\",disableSortBy:!0},{Cell:({row:{original:{created_on:e}}})=>{const t=new Date(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return d()(a).fromNow()},Header:Object(n.e)(\"Created on\"),accessor:\"created_on\",size:\"xl\",disableSortBy:!0},{accessor:\"created_by\",disableSortBy:!0,Header:Object(n.e)(\"Created by\"),Cell:({row:{original:{created_by:e}}})=>e?`${e.first_name} ${e.last_name}`:\"\",size:\"xl\"},{Cell:({row:{original:e}})=>{const t=[N?{label:\"edit-action\",tooltip:Object(n.e)(\"Edit template\"),placement:\"bottom\",icon:\"Edit\",onClick:()=>(T(e),void k(!0))}:null,A?{label:\"delete-action\",tooltip:Object(n.e)(\"Delete template\"),placement:\"bottom\",icon:\"Trash\",onClick:()=>U(e)}:null].filter(e=>!!e);return Object(C.f)(h.a,{actions:t})},Header:Object(n.e)(\"Actions\"),id:\"actions\",disableSortBy:!0,hidden:!N&&!A,size:\"xl\"}],[A,H]),M={name:Object(n.e)(\"CSS templates\")},q=[];H&&q.push({name:Object(C.f)(c.a.Fragment,null,Object(C.f)(\"i\",{className:\"fa fa-plus\"}),\" \",Object(n.e)(\"CSS template\")),buttonStyle:\"primary\",onClick:()=>{T(null),k(!0)}}),A&&q.push({name:Object(n.e)(\"Bulk select\"),onClick:x,buttonStyle:\"secondary\"}),M.buttons=q;const P=Object(l.useMemo)(()=>[{Header:Object(n.e)(\"Created by\"),id:\"created_by\",input:\"select\",operator:\"rel_o_m\",unfilteredLabel:\"All\",fetchSelects:Object(m.e)(\"css_template\",\"created_by\",Object(m.c)(e=>Object(n.e)(\"An error occurred while fetching dataset datasource values: %s\",e)),a.userId),paginate:!0},{Header:Object(n.e)(\"Search\"),id:\"template_name\",input:\"search\",operator:\"ct\"}],[]);return Object(C.f)(c.a.Fragment,null,Object(C.f)(p.a,M),Object(C.f)(D,{addDangerToast:e,cssTemplate:$,onCssTemplateAdd:()=>w(),onHide:()=>k(!1),show:v}),B&&Object(C.f)(j.a,{description:Object(n.e)(\"This action will permanently delete the template.\"),onConfirm:()=>{B&&(({id:a,template_name:l})=>{s.a.delete({endpoint:\"/api/v1/css_template/\"+a}).then(()=>{w(),U(null),t(Object(n.e)(\"Deleted: %s\",l))},Object(m.c)(t=>e(Object(n.e)(\"There was an issue deleting %s: %s\",l,t))))})(B)},onHide:()=>U(null),open:!0,title:Object(n.e)(\"Delete Template?\")}),Object(C.f)(f.a,{title:Object(n.e)(\"Please confirm\"),description:Object(n.e)(\"Are you sure you want to delete the selected templates?\"),onConfirm:a=>{s.a.delete({endpoint:\"/api/v1/css_template/?q=\"+i.a.encode(a.map(({id:e})=>e))}).then(({json:e={}})=>{w(),t(e.message)},Object(m.c)(t=>e(Object(n.e)(\"There was an issue deleting the selected templates: %s\",t))))}},e=>{const t=A?[{key:\"delete\",name:Object(n.e)(\"Delete\"),onSelect:e,type:\"danger\"}]:[];return Object(C.f)(g.b,{className:\"css-templates-list-view\",columns:z,count:r,data:u,fetchData:y,filters:P,initialSort:E,loading:o,pageSize:25,bulkActions:t,bulkSelectEnabled:_,disableBulkSelect:x})}))}))}}]);","extractedComments":[]}